var Ik=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $se=Ik((Tn,Cn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var z3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var De={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=Symbol.for("react.element"),zk=Symbol.for("react.portal"),Bk=Symbol.for("react.fragment"),kk=Symbol.for("react.strict_mode"),Nk=Symbol.for("react.profiler"),Fk=Symbol.for("react.provider"),Uk=Symbol.for("react.context"),Hk=Symbol.for("react.forward_ref"),Vk=Symbol.for("react.suspense"),jk=Symbol.for("react.memo"),Gk=Symbol.for("react.lazy"),lM=Symbol.iterator;function Wk(e){return e===null||typeof e!="object"?null:(e=lM&&e[lM]||e["@@iterator"],typeof e=="function"?e:null)}var k3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N3=Object.assign,F3={};function Uh(e,t,i){this.props=e,this.context=t,this.refs=F3,this.updater=i||k3}Uh.prototype.isReactComponent={};Uh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Uh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function U3(){}U3.prototype=Uh.prototype;function Lb(e,t,i){this.props=e,this.context=t,this.refs=F3,this.updater=i||k3}var Ob=Lb.prototype=new U3;Ob.constructor=Lb;N3(Ob,Uh.prototype);Ob.isPureReactComponent=!0;var uM=Array.isArray,H3=Object.prototype.hasOwnProperty,Rb={current:null},V3={key:!0,ref:!0,__self:!0,__source:!0};function j3(e,t,i){var r,n={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)H3.call(t,r)&&!V3.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=i;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];n.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:wp,type:e,key:s,ref:a,props:n,_owner:Rb.current}}function Xk(e,t){return{$$typeof:wp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ib(e){return typeof e=="object"&&e!==null&&e.$$typeof===wp}function Yk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var cM=/\/+/g;function yy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yk(""+e.key):t.toString(36)}function Ag(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wp:case zk:a=!0}}if(a)return a=e,n=n(a),e=r===""?"."+yy(a,0):r,uM(n)?(i="",e!=null&&(i=e.replace(cM,"$&/")+"/"),Ag(n,t,i,"",function(u){return u})):n!=null&&(Ib(n)&&(n=Xk(n,i+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(cM,"$&/")+"/")+e)),t.push(n)),1;if(a=0,r=r===""?".":r+":",uM(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+yy(s,o);a+=Ag(s,t,i,l,n)}else if(l=Wk(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+yy(s,o++),a+=Ag(s,t,i,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function jp(e,t,i){if(e==null)return e;var r=[],n=0;return Ag(e,r,"","",function(s){return t.call(i,s,n++)}),r}function qk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qr={current:null},Mg={transition:null},Qk={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Mg,ReactCurrentOwner:Rb};Tt.Children={map:jp,forEach:function(e,t,i){jp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return jp(e,function(){t++}),t},toArray:function(e){return jp(e,function(t){return t})||[]},only:function(e){if(!Ib(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tt.Component=Uh;Tt.Fragment=Bk;Tt.Profiler=Nk;Tt.PureComponent=Lb;Tt.StrictMode=kk;Tt.Suspense=Vk;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qk;Tt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=N3({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Rb.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)H3.call(t,l)&&!V3.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:wp,type:e.type,key:n,ref:s,props:r,_owner:a}};Tt.createContext=function(e){return e={$$typeof:Uk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fk,_context:e},e.Consumer=e};Tt.createElement=j3;Tt.createFactory=function(e){var t=j3.bind(null,e);return t.type=e,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(e){return{$$typeof:Hk,render:e}};Tt.isValidElement=Ib;Tt.lazy=function(e){return{$$typeof:Gk,_payload:{_status:-1,_result:e},_init:qk}};Tt.memo=function(e,t){return{$$typeof:jk,type:e,compare:t===void 0?null:t}};Tt.startTransition=function(e){var t=Mg.transition;Mg.transition={};try{e()}finally{Mg.transition=t}};Tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Tt.useCallback=function(e,t){return Qr.current.useCallback(e,t)};Tt.useContext=function(e){return Qr.current.useContext(e)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(e){return Qr.current.useDeferredValue(e)};Tt.useEffect=function(e,t){return Qr.current.useEffect(e,t)};Tt.useId=function(){return Qr.current.useId()};Tt.useImperativeHandle=function(e,t,i){return Qr.current.useImperativeHandle(e,t,i)};Tt.useInsertionEffect=function(e,t){return Qr.current.useInsertionEffect(e,t)};Tt.useLayoutEffect=function(e,t){return Qr.current.useLayoutEffect(e,t)};Tt.useMemo=function(e,t){return Qr.current.useMemo(e,t)};Tt.useReducer=function(e,t,i){return Qr.current.useReducer(e,t,i)};Tt.useRef=function(e){return Qr.current.useRef(e)};Tt.useState=function(e){return Qr.current.useState(e)};Tt.useSyncExternalStore=function(e,t,i){return Qr.current.useSyncExternalStore(e,t,i)};Tt.useTransition=function(){return Qr.current.useTransition()};Tt.version="18.2.0";(function(e){e.exports=Tt})(De);const Zk=B3(De.exports);var G3={exports:{}},zn={},W3={exports:{}},X3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,z){var D=P.length;P.push(z);e:for(;0<D;){var j=D-1>>>1,B=P[j];if(0<n(B,z))P[j]=z,P[D]=B,D=j;else break e}}function i(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],D=P.pop();if(D!==z){P[0]=D;e:for(var j=0,B=P.length,W=B>>>1;j<W;){var X=2*(j+1)-1,$=P[X],U=X+1,ne=P[U];if(0>n($,D))U<B&&0>n(ne,$)?(P[j]=ne,P[U]=D,j=U):(P[j]=$,P[X]=D,j=X);else if(U<B&&0>n(ne,D))P[j]=ne,P[U]=D,j=U;else break e}}return z}function n(P,z){var D=P.sortIndex-z.sortIndex;return D!==0?D:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,c=null,h=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var z=i(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=P)r(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=i(u)}}function w(P){if(p=!1,x(P),!m)if(i(l)!==null)m=!0,F(_);else{var z=i(u);z!==null&&H(w,z.startTime-P)}}function _(P,z){m=!1,p&&(p=!1,v(S),S=-1),f=!0;var D=h;try{for(x(z),c=i(l);c!==null&&(!(c.expirationTime>z)||P&&!C());){var j=c.callback;if(typeof j=="function"){c.callback=null,h=c.priorityLevel;var B=j(c.expirationTime<=z);z=e.unstable_now(),typeof B=="function"?c.callback=B:c===i(l)&&r(l),x(z)}else r(l);c=i(l)}if(c!==null)var W=!0;else{var X=i(u);X!==null&&H(w,X.startTime-z),W=!1}return W}finally{c=null,h=D,f=!1}}var b=!1,A=null,S=-1,M=5,E=-1;function C(){return!(e.unstable_now()-E<M)}function L(){if(A!==null){var P=e.unstable_now();E=P;var z=!0;try{z=A(!0,P)}finally{z?N():(b=!1,A=null)}}else b=!1}var N;if(typeof y=="function")N=function(){y(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,V=R.port2;R.port1.onmessage=L,N=function(){V.postMessage(null)}}else N=function(){g(L,0)};function F(P){A=P,b||(b=!0,N())}function H(P,z){S=g(function(){P(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,F(_))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var D=h;h=z;try{return P()}finally{h=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var D=h;h=P;try{return z()}finally{h=D}},e.unstable_scheduleCallback=function(P,z,D){var j=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?j+D:j):D=j,P){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=D+B,P={id:d++,callback:z,priorityLevel:P,startTime:D,expirationTime:B,sortIndex:-1},D>j?(P.sortIndex=D,t(u,P),i(l)===null&&P===i(u)&&(p?(v(S),S=-1):p=!0,H(w,D-j))):(P.sortIndex=B,t(l,P),m||f||(m=!0,F(_))),P},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(P){var z=h;return function(){var D=h;h=z;try{return P.apply(this,arguments)}finally{h=D}}}})(X3);(function(e){e.exports=X3})(W3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y3=De.exports,Ln=W3.exports;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q3=new Set,Lf={};function Wu(e,t){xh(e,t),xh(e+"Capture",t)}function xh(e,t){for(Lf[e]=t,e=0;e<t.length;e++)q3.add(t[e])}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hx=Object.prototype.hasOwnProperty,Kk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hM={},dM={};function Jk(e){return Hx.call(dM,e)?!0:Hx.call(hM,e)?!1:Kk.test(e)?dM[e]=!0:(hM[e]=!0,!1)}function $k(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eN(e,t,i,r){if(t===null||typeof t>"u"||$k(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zr(e,t,i,r,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hr[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hr[t]=new Zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hr[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hr[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hr[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hr[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hr[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hr[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hr[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var zb=/[\-:]([a-z])/g;function Bb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zb,Bb);hr[t]=new Zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zb,Bb);hr[t]=new Zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zb,Bb);hr[t]=new Zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hr[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});hr.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hr[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function kb(e,t,i,r){var n=hr.hasOwnProperty(t)?hr[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eN(t,i,n,r)&&(i=null),r||n===null?Jk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var xo=Y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gp=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),Ic=Symbol.for("react.fragment"),Nb=Symbol.for("react.strict_mode"),Vx=Symbol.for("react.profiler"),Q3=Symbol.for("react.provider"),Z3=Symbol.for("react.context"),Fb=Symbol.for("react.forward_ref"),jx=Symbol.for("react.suspense"),Gx=Symbol.for("react.suspense_list"),Ub=Symbol.for("react.memo"),Fo=Symbol.for("react.lazy"),K3=Symbol.for("react.offscreen"),fM=Symbol.iterator;function ad(e){return e===null||typeof e!="object"?null:(e=fM&&e[fM]||e["@@iterator"],typeof e=="function"?e:null)}var ci=Object.assign,xy;function Id(e){if(xy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);xy=t&&t[1]||""}return`
`+xy+e}var wy=!1;function _y(e,t){if(!e||wy)return"";wy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var l=`
`+n[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{wy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Id(e):""}function tN(e){switch(e.tag){case 5:return Id(e.type);case 16:return Id("Lazy");case 13:return Id("Suspense");case 19:return Id("SuspenseList");case 0:case 2:case 15:return e=_y(e.type,!1),e;case 11:return e=_y(e.type.render,!1),e;case 1:return e=_y(e.type,!0),e;default:return""}}function Wx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ic:return"Fragment";case Rc:return"Portal";case Vx:return"Profiler";case Nb:return"StrictMode";case jx:return"Suspense";case Gx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z3:return(e.displayName||"Context")+".Consumer";case Q3:return(e._context.displayName||"Context")+".Provider";case Fb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ub:return t=e.displayName||null,t!==null?t:Wx(e.type)||"Memo";case Fo:t=e._payload,e=e._init;try{return Wx(e(t))}catch{}}return null}function iN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wx(t);case 8:return t===Nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _l(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rN(e){var t=J3(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wp(e){e._valueTracker||(e._valueTracker=rN(e))}function $3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=J3(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function nv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xx(e,t){var i=t.checked;return ci({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function pM(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=_l(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eP(e,t){t=t.checked,t!=null&&kb(e,"checked",t,!1)}function Yx(e,t){eP(e,t);var i=_l(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qx(e,t.type,i):t.hasOwnProperty("defaultValue")&&qx(e,t.type,_l(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mM(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function qx(e,t,i){(t!=="number"||nv(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var zd=Array.isArray;function ih(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+_l(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Qx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return ci({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gM(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(we(92));if(zd(i)){if(1<i.length)throw Error(we(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:_l(i)}}function tP(e,t){var i=_l(t.value),r=_l(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function vM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xp,rP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xp=Xp||document.createElement("div"),Xp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Of(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nN=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(e){nN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ef[t]=ef[e]})});function nP(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ef.hasOwnProperty(e)&&ef[e]?(""+t).trim():t+"px"}function sP(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=nP(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var sN=ci({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kx(e,t){if(t){if(sN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function Jx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $x=null;function Hb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ew=null,rh=null,nh=null;function yM(e){if(e=Sp(e)){if(typeof ew!="function")throw Error(we(280));var t=e.stateNode;t&&(t=_0(t),ew(e.stateNode,e.type,t))}}function aP(e){rh?nh?nh.push(e):nh=[e]:rh=e}function oP(){if(rh){var e=rh,t=nh;if(nh=rh=null,yM(e),t)for(e=0;e<t.length;e++)yM(t[e])}}function lP(e,t){return e(t)}function uP(){}var by=!1;function cP(e,t,i){if(by)return e(t,i);by=!0;try{return lP(e,t,i)}finally{by=!1,(rh!==null||nh!==null)&&(uP(),oP())}}function Rf(e,t){var i=e.stateNode;if(i===null)return null;var r=_0(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(we(231,t,typeof i));return i}var tw=!1;if(lo)try{var od={};Object.defineProperty(od,"passive",{get:function(){tw=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{tw=!1}function aN(e,t,i,r,n,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(d){this.onError(d)}}var tf=!1,sv=null,av=!1,iw=null,oN={onError:function(e){tf=!0,sv=e}};function lN(e,t,i,r,n,s,a,o,l){tf=!1,sv=null,aN.apply(oN,arguments)}function uN(e,t,i,r,n,s,a,o,l){if(lN.apply(this,arguments),tf){if(tf){var u=sv;tf=!1,sv=null}else throw Error(we(198));av||(av=!0,iw=u)}}function Xu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function hP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xM(e){if(Xu(e)!==e)throw Error(we(188))}function cN(e){var t=e.alternate;if(!t){if(t=Xu(e),t===null)throw Error(we(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return xM(n),e;if(s===r)return xM(n),t;s=s.sibling}throw Error(we(188))}if(i.return!==r.return)i=n,r=s;else{for(var a=!1,o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a)throw Error(we(189))}}if(i.alternate!==r)throw Error(we(190))}if(i.tag!==3)throw Error(we(188));return i.stateNode.current===i?e:t}function dP(e){return e=cN(e),e!==null?fP(e):null}function fP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fP(e);if(t!==null)return t;e=e.sibling}return null}var pP=Ln.unstable_scheduleCallback,wM=Ln.unstable_cancelCallback,hN=Ln.unstable_shouldYield,dN=Ln.unstable_requestPaint,Ai=Ln.unstable_now,fN=Ln.unstable_getCurrentPriorityLevel,Vb=Ln.unstable_ImmediatePriority,mP=Ln.unstable_UserBlockingPriority,ov=Ln.unstable_NormalPriority,pN=Ln.unstable_LowPriority,gP=Ln.unstable_IdlePriority,v0=null,ma=null;function mN(e){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(v0,e,void 0,(e.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:yN,gN=Math.log,vN=Math.LN2;function yN(e){return e>>>=0,e===0?32:31-(gN(e)/vN|0)|0}var Yp=64,qp=4194304;function Bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lv(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,a=i&268435455;if(a!==0){var o=a&~n;o!==0?r=Bd(o):(s&=a,s!==0&&(r=Bd(s)))}else a=i&~n,a!==0?r=Bd(a):s!==0&&(r=Bd(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&n)===0&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-Os(t),n=1<<i,r|=e[i],t&=~n;return r}function xN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wN(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Os(s),o=1<<a,l=n[a];l===-1?((o&i)===0||(o&r)!==0)&&(n[a]=xN(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function rw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vP(){var e=Yp;return Yp<<=1,(Yp&4194240)===0&&(Yp=64),e}function Sy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _p(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Os(t),e[t]=i}function _N(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-Os(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function jb(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Os(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Gt=0;function yP(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var xP,Gb,wP,_P,bP,nw=!1,Qp=[],ol=null,ll=null,ul=null,If=new Map,zf=new Map,jo=[],bN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _M(e,t){switch(e){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":If.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zf.delete(t.pointerId)}}function ld(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Sp(t),t!==null&&Gb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function SN(e,t,i,r,n){switch(t){case"focusin":return ol=ld(ol,e,t,i,r,n),!0;case"dragenter":return ll=ld(ll,e,t,i,r,n),!0;case"mouseover":return ul=ld(ul,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return If.set(s,ld(If.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,zf.set(s,ld(zf.get(s)||null,e,t,i,r,n)),!0}return!1}function SP(e){var t=au(e.target);if(t!==null){var i=Xu(t);if(i!==null){if(t=i.tag,t===13){if(t=hP(i),t!==null){e.blockedOn=t,bP(e.priority,function(){wP(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=sw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);$x=r,i.target.dispatchEvent(r),$x=null}else return t=Sp(i),t!==null&&Gb(t),e.blockedOn=i,!1;t.shift()}return!0}function bM(e,t,i){Eg(e)&&i.delete(t)}function AN(){nw=!1,ol!==null&&Eg(ol)&&(ol=null),ll!==null&&Eg(ll)&&(ll=null),ul!==null&&Eg(ul)&&(ul=null),If.forEach(bM),zf.forEach(bM)}function ud(e,t){e.blockedOn===t&&(e.blockedOn=null,nw||(nw=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,AN)))}function Bf(e){function t(n){return ud(n,e)}if(0<Qp.length){ud(Qp[0],e);for(var i=1;i<Qp.length;i++){var r=Qp[i];r.blockedOn===e&&(r.blockedOn=null)}}for(ol!==null&&ud(ol,e),ll!==null&&ud(ll,e),ul!==null&&ud(ul,e),If.forEach(t),zf.forEach(t),i=0;i<jo.length;i++)r=jo[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<jo.length&&(i=jo[0],i.blockedOn===null);)SP(i),i.blockedOn===null&&jo.shift()}var sh=xo.ReactCurrentBatchConfig,uv=!0;function MN(e,t,i,r){var n=Gt,s=sh.transition;sh.transition=null;try{Gt=1,Wb(e,t,i,r)}finally{Gt=n,sh.transition=s}}function EN(e,t,i,r){var n=Gt,s=sh.transition;sh.transition=null;try{Gt=4,Wb(e,t,i,r)}finally{Gt=n,sh.transition=s}}function Wb(e,t,i,r){if(uv){var n=sw(e,t,i,r);if(n===null)Ry(e,t,r,cv,i),_M(e,r);else if(SN(n,e,t,i,r))r.stopPropagation();else if(_M(e,r),t&4&&-1<bN.indexOf(e)){for(;n!==null;){var s=Sp(n);if(s!==null&&xP(s),s=sw(e,t,i,r),s===null&&Ry(e,t,r,cv,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else Ry(e,t,r,null,i)}}var cv=null;function sw(e,t,i,r){if(cv=null,e=Hb(r),e=au(e),e!==null)if(t=Xu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=hP(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cv=e,null}function AP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fN()){case Vb:return 1;case mP:return 4;case ov:case pN:return 16;case gP:return 536870912;default:return 16}default:return 16}}var Yo=null,Xb=null,Tg=null;function MP(){if(Tg)return Tg;var e,t=Xb,i=t.length,r,n="value"in Yo?Yo.value:Yo.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var a=i-e;for(r=1;r<=a&&t[i-r]===n[s-r];r++);return Tg=n.slice(e,1<r?1-r:void 0)}function Cg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zp(){return!0}function SM(){return!1}function Bn(e){function t(i,r,n,s,a){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zp:SM,this.isPropagationStopped=SM,this}return ci(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Zp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Zp)},persist:function(){},isPersistent:Zp}),t}var Hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yb=Bn(Hh),bp=ci({},Hh,{view:0,detail:0}),TN=Bn(bp),Ay,My,cd,y0=ci({},bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cd&&(cd&&e.type==="mousemove"?(Ay=e.screenX-cd.screenX,My=e.screenY-cd.screenY):My=Ay=0,cd=e),Ay)},movementY:function(e){return"movementY"in e?e.movementY:My}}),AM=Bn(y0),CN=ci({},y0,{dataTransfer:0}),DN=Bn(CN),PN=ci({},bp,{relatedTarget:0}),Ey=Bn(PN),LN=ci({},Hh,{animationName:0,elapsedTime:0,pseudoElement:0}),ON=Bn(LN),RN=ci({},Hh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IN=Bn(RN),zN=ci({},Hh,{data:0}),MM=Bn(zN),BN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=NN[e])?!!t[e]:!1}function qb(){return FN}var UN=ci({},bp,{key:function(e){if(e.key){var t=BN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qb,charCode:function(e){return e.type==="keypress"?Cg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HN=Bn(UN),VN=ci({},y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EM=Bn(VN),jN=ci({},bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qb}),GN=Bn(jN),WN=ci({},Hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),XN=Bn(WN),YN=ci({},y0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qN=Bn(YN),QN=[9,13,27,32],Qb=lo&&"CompositionEvent"in window,rf=null;lo&&"documentMode"in document&&(rf=document.documentMode);var ZN=lo&&"TextEvent"in window&&!rf,EP=lo&&(!Qb||rf&&8<rf&&11>=rf),TM=String.fromCharCode(32),CM=!1;function TP(e,t){switch(e){case"keyup":return QN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zc=!1;function KN(e,t){switch(e){case"compositionend":return CP(t);case"keypress":return t.which!==32?null:(CM=!0,TM);case"textInput":return e=t.data,e===TM&&CM?null:e;default:return null}}function JN(e,t){if(zc)return e==="compositionend"||!Qb&&TP(e,t)?(e=MP(),Tg=Xb=Yo=null,zc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EP&&t.locale!=="ko"?null:t.data;default:return null}}var $N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$N[e.type]:t==="textarea"}function DP(e,t,i,r){aP(r),t=hv(t,"onChange"),0<t.length&&(i=new Yb("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var nf=null,kf=null;function e4(e){UP(e,0)}function x0(e){var t=Nc(e);if($3(t))return e}function t4(e,t){if(e==="change")return t}var PP=!1;if(lo){var Ty;if(lo){var Cy="oninput"in document;if(!Cy){var PM=document.createElement("div");PM.setAttribute("oninput","return;"),Cy=typeof PM.oninput=="function"}Ty=Cy}else Ty=!1;PP=Ty&&(!document.documentMode||9<document.documentMode)}function LM(){nf&&(nf.detachEvent("onpropertychange",LP),kf=nf=null)}function LP(e){if(e.propertyName==="value"&&x0(kf)){var t=[];DP(t,kf,e,Hb(e)),cP(e4,t)}}function i4(e,t,i){e==="focusin"?(LM(),nf=t,kf=i,nf.attachEvent("onpropertychange",LP)):e==="focusout"&&LM()}function r4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return x0(kf)}function n4(e,t){if(e==="click")return x0(t)}function s4(e,t){if(e==="input"||e==="change")return x0(t)}function a4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:a4;function Nf(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!Hx.call(t,n)||!Bs(e[n],t[n]))return!1}return!0}function OM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function RM(e,t){var i=OM(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=OM(i)}}function OP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?OP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RP(){for(var e=window,t=nv();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=nv(e.document)}return t}function Zb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function o4(e){var t=RP(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&OP(i.ownerDocument.documentElement,i)){if(r!==null&&Zb(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=RM(i,s);var a=RM(i,r);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var l4=lo&&"documentMode"in document&&11>=document.documentMode,Bc=null,aw=null,sf=null,ow=!1;function IM(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ow||Bc==null||Bc!==nv(r)||(r=Bc,"selectionStart"in r&&Zb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sf&&Nf(sf,r)||(sf=r,r=hv(aw,"onSelect"),0<r.length&&(t=new Yb("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Bc)))}function Kp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var kc={animationend:Kp("Animation","AnimationEnd"),animationiteration:Kp("Animation","AnimationIteration"),animationstart:Kp("Animation","AnimationStart"),transitionend:Kp("Transition","TransitionEnd")},Dy={},IP={};lo&&(IP=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function w0(e){if(Dy[e])return Dy[e];if(!kc[e])return e;var t=kc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in IP)return Dy[e]=t[i];return e}var zP=w0("animationend"),BP=w0("animationiteration"),kP=w0("animationstart"),NP=w0("transitionend"),FP=new Map,zM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ll(e,t){FP.set(e,t),Wu(t,[e])}for(var Py=0;Py<zM.length;Py++){var Ly=zM[Py],u4=Ly.toLowerCase(),c4=Ly[0].toUpperCase()+Ly.slice(1);Ll(u4,"on"+c4)}Ll(zP,"onAnimationEnd");Ll(BP,"onAnimationIteration");Ll(kP,"onAnimationStart");Ll("dblclick","onDoubleClick");Ll("focusin","onFocus");Ll("focusout","onBlur");Ll(NP,"onTransitionEnd");xh("onMouseEnter",["mouseout","mouseover"]);xh("onMouseLeave",["mouseout","mouseover"]);xh("onPointerEnter",["pointerout","pointerover"]);xh("onPointerLeave",["pointerout","pointerover"]);Wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h4=new Set("cancel close invalid load scroll toggle".split(" ").concat(kd));function BM(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,uN(r,t,void 0,e),e.currentTarget=null}function UP(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;BM(n,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;BM(n,o,u),s=l}}}if(av)throw e=iw,av=!1,iw=null,e}function $t(e,t){var i=t[dw];i===void 0&&(i=t[dw]=new Set);var r=e+"__bubble";i.has(r)||(HP(t,e,2,!1),i.add(r))}function Oy(e,t,i){var r=0;t&&(r|=4),HP(i,e,r,t)}var Jp="_reactListening"+Math.random().toString(36).slice(2);function Ff(e){if(!e[Jp]){e[Jp]=!0,q3.forEach(function(i){i!=="selectionchange"&&(h4.has(i)||Oy(i,!1,e),Oy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jp]||(t[Jp]=!0,Oy("selectionchange",!1,t))}}function HP(e,t,i,r){switch(AP(t)){case 1:var n=MN;break;case 4:n=EN;break;default:n=Wb}i=n.bind(null,t,i,e),n=void 0,!tw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Ry(e,t,i,r,n){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=au(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}cP(function(){var u=s,d=Hb(i),c=[];e:{var h=FP.get(e);if(h!==void 0){var f=Yb,m=e;switch(e){case"keypress":if(Cg(i)===0)break e;case"keydown":case"keyup":f=HN;break;case"focusin":m="focus",f=Ey;break;case"focusout":m="blur",f=Ey;break;case"beforeblur":case"afterblur":f=Ey;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=AM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=DN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=GN;break;case zP:case BP:case kP:f=ON;break;case NP:f=XN;break;case"scroll":f=TN;break;case"wheel":f=qN;break;case"copy":case"cut":case"paste":f=IN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=EM}var p=(t&4)!==0,g=!p&&e==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,v!==null&&(w=Rf(y,v),w!=null&&p.push(Uf(y,w,x)))),g)break;y=y.return}0<p.length&&(h=new f(h,m,null,i,d),c.push({event:h,listeners:p}))}}if((t&7)===0){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&i!==$x&&(m=i.relatedTarget||i.fromElement)&&(au(m)||m[uo]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=i.relatedTarget||i.toElement,f=u,m=m?au(m):null,m!==null&&(g=Xu(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=AM,w="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=EM,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?h:Nc(f),x=m==null?h:Nc(m),h=new p(w,y+"leave",f,i,d),h.target=g,h.relatedTarget=x,w=null,au(d)===u&&(p=new p(v,y+"enter",m,i,d),p.target=x,p.relatedTarget=g,w=p),g=w,f&&m)t:{for(p=f,v=m,y=0,x=p;x;x=ec(x))y++;for(x=0,w=v;w;w=ec(w))x++;for(;0<y-x;)p=ec(p),y--;for(;0<x-y;)v=ec(v),x--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=ec(p),v=ec(v)}p=null}else p=null;f!==null&&kM(c,h,f,p,!1),m!==null&&g!==null&&kM(c,g,m,p,!0)}}e:{if(h=u?Nc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=t4;else if(DM(h))if(PP)_=s4;else{_=r4;var b=i4}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=n4);if(_&&(_=_(e,u))){DP(c,_,i,d);break e}b&&b(e,h,u),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&qx(h,"number",h.value)}switch(b=u?Nc(u):window,e){case"focusin":(DM(b)||b.contentEditable==="true")&&(Bc=b,aw=u,sf=null);break;case"focusout":sf=aw=Bc=null;break;case"mousedown":ow=!0;break;case"contextmenu":case"mouseup":case"dragend":ow=!1,IM(c,i,d);break;case"selectionchange":if(l4)break;case"keydown":case"keyup":IM(c,i,d)}var A;if(Qb)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else zc?TP(e,i)&&(S="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(S="onCompositionStart");S&&(EP&&i.locale!=="ko"&&(zc||S!=="onCompositionStart"?S==="onCompositionEnd"&&zc&&(A=MP()):(Yo=d,Xb="value"in Yo?Yo.value:Yo.textContent,zc=!0)),b=hv(u,S),0<b.length&&(S=new MM(S,e,null,i,d),c.push({event:S,listeners:b}),A?S.data=A:(A=CP(i),A!==null&&(S.data=A)))),(A=ZN?KN(e,i):JN(e,i))&&(u=hv(u,"onBeforeInput"),0<u.length&&(d=new MM("onBeforeInput","beforeinput",null,i,d),c.push({event:d,listeners:u}),d.data=A))}UP(c,t)})}function Uf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function hv(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Rf(e,i),s!=null&&r.unshift(Uf(e,s,n)),s=Rf(e,t),s!=null&&r.push(Uf(e,s,n))),e=e.return}return r}function ec(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kM(e,t,i,r,n){for(var s=t._reactName,a=[];i!==null&&i!==r;){var o=i,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,n?(l=Rf(i,s),l!=null&&a.unshift(Uf(i,l,o))):n||(l=Rf(i,s),l!=null&&a.push(Uf(i,l,o)))),i=i.return}a.length!==0&&e.push({event:t,listeners:a})}var d4=/\r\n?/g,f4=/\u0000|\uFFFD/g;function NM(e){return(typeof e=="string"?e:""+e).replace(d4,`
`).replace(f4,"")}function $p(e,t,i){if(t=NM(t),NM(e)!==t&&i)throw Error(we(425))}function dv(){}var lw=null,uw=null;function cw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hw=typeof setTimeout=="function"?setTimeout:void 0,p4=typeof clearTimeout=="function"?clearTimeout:void 0,FM=typeof Promise=="function"?Promise:void 0,m4=typeof queueMicrotask=="function"?queueMicrotask:typeof FM<"u"?function(e){return FM.resolve(null).then(e).catch(g4)}:hw;function g4(e){setTimeout(function(){throw e})}function Iy(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Bf(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Bf(t)}function cl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function UM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Vh=Math.random().toString(36).slice(2),ta="__reactFiber$"+Vh,Hf="__reactProps$"+Vh,uo="__reactContainer$"+Vh,dw="__reactEvents$"+Vh,v4="__reactListeners$"+Vh,y4="__reactHandles$"+Vh;function au(e){var t=e[ta];if(t)return t;for(var i=e.parentNode;i;){if(t=i[uo]||i[ta]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=UM(e);e!==null;){if(i=e[ta])return i;e=UM(e)}return t}e=i,i=e.parentNode}return null}function Sp(e){return e=e[ta]||e[uo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function _0(e){return e[Hf]||null}var fw=[],Fc=-1;function Ol(e){return{current:e}}function ri(e){0>Fc||(e.current=fw[Fc],fw[Fc]=null,Fc--)}function Jt(e,t){Fc++,fw[Fc]=e.current,e.current=t}var bl={},Cr=Ol(bl),un=Ol(!1),Du=bl;function wh(e,t){var i=e.type.contextTypes;if(!i)return bl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function cn(e){return e=e.childContextTypes,e!=null}function fv(){ri(un),ri(Cr)}function HM(e,t,i){if(Cr.current!==bl)throw Error(we(168));Jt(Cr,t),Jt(un,i)}function VP(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(we(108,iN(e)||"Unknown",n));return ci({},i,r)}function pv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bl,Du=Cr.current,Jt(Cr,e),Jt(un,un.current),!0}function VM(e,t,i){var r=e.stateNode;if(!r)throw Error(we(169));i?(e=VP(e,t,Du),r.__reactInternalMemoizedMergedChildContext=e,ri(un),ri(Cr),Jt(Cr,e)):ri(un),Jt(un,i)}var Ga=null,b0=!1,zy=!1;function jP(e){Ga===null?Ga=[e]:Ga.push(e)}function x4(e){b0=!0,jP(e)}function Rl(){if(!zy&&Ga!==null){zy=!0;var e=0,t=Gt;try{var i=Ga;for(Gt=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Ga=null,b0=!1}catch(n){throw Ga!==null&&(Ga=Ga.slice(e+1)),pP(Vb,Rl),n}finally{Gt=t,zy=!1}}return null}var Uc=[],Hc=0,mv=null,gv=0,Qn=[],Zn=0,Pu=null,Ja=1,$a="";function ql(e,t){Uc[Hc++]=gv,Uc[Hc++]=mv,mv=e,gv=t}function GP(e,t,i){Qn[Zn++]=Ja,Qn[Zn++]=$a,Qn[Zn++]=Pu,Pu=e;var r=Ja;e=$a;var n=32-Os(r)-1;r&=~(1<<n),i+=1;var s=32-Os(t)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,Ja=1<<32-Os(t)+n|i<<n|r,$a=s+e}else Ja=1<<s|i<<n|r,$a=e}function Kb(e){e.return!==null&&(ql(e,1),GP(e,1,0))}function Jb(e){for(;e===mv;)mv=Uc[--Hc],Uc[Hc]=null,gv=Uc[--Hc],Uc[Hc]=null;for(;e===Pu;)Pu=Qn[--Zn],Qn[Zn]=null,$a=Qn[--Zn],Qn[Zn]=null,Ja=Qn[--Zn],Qn[Zn]=null}var Dn=null,En=null,si=!1,Ds=null;function WP(e,t){var i=is(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function jM(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dn=e,En=cl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dn=e,En=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Pu!==null?{id:Ja,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=is(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Dn=e,En=null,!0):!1;default:return!1}}function pw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mw(e){if(si){var t=En;if(t){var i=t;if(!jM(e,t)){if(pw(e))throw Error(we(418));t=cl(i.nextSibling);var r=Dn;t&&jM(e,t)?WP(r,i):(e.flags=e.flags&-4097|2,si=!1,Dn=e)}}else{if(pw(e))throw Error(we(418));e.flags=e.flags&-4097|2,si=!1,Dn=e}}}function GM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dn=e}function em(e){if(e!==Dn)return!1;if(!si)return GM(e),si=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cw(e.type,e.memoizedProps)),t&&(t=En)){if(pw(e))throw XP(),Error(we(418));for(;t;)WP(e,t),t=cl(t.nextSibling)}if(GM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){En=cl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}En=null}}else En=Dn?cl(e.stateNode.nextSibling):null;return!0}function XP(){for(var e=En;e;)e=cl(e.nextSibling)}function _h(){En=Dn=null,si=!1}function $b(e){Ds===null?Ds=[e]:Ds.push(e)}var w4=xo.ReactCurrentBatchConfig;function Ts(e,t){if(e&&e.defaultProps){t=ci({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var vv=Ol(null),yv=null,Vc=null,eS=null;function tS(){eS=Vc=yv=null}function iS(e){var t=vv.current;ri(vv),e._currentValue=t}function gw(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function ah(e,t){yv=e,eS=Vc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(an=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(eS!==e)if(e={context:e,memoizedValue:t,next:null},Vc===null){if(yv===null)throw Error(we(308));Vc=e,yv.dependencies={lanes:0,firstContext:e}}else Vc=Vc.next=e;return t}var ou=null;function rS(e){ou===null?ou=[e]:ou.push(e)}function YP(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,rS(t)):(i.next=n.next,n.next=i),t.interleaved=i,co(e,r)}function co(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Uo=!1;function nS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function no(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hl(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(It&2)!==0){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,co(e,i)}return n=r.interleaved,n===null?(t.next=t,rS(r)):(t.next=n.next,n.next=t),r.interleaved=t,co(e,i)}function Dg(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,jb(e,i)}}function WM(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function xv(e,t,i,r){var n=e.updateQueue;Uo=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var c=n.baseState;a=0,d=u=l=null,o=s;do{var h=o.lane,f=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=i,p.tag){case 1:if(m=p.payload,typeof m=="function"){c=m.call(f,c,h);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,c,h):m,h==null)break e;c=ci({},c,h);break e;case 2:Uo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=n.effects,h===null?n.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=f,l=c):d=d.next=f,a|=h;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;h=o,o=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(1);if(d===null&&(l=c),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Ou|=a,e.lanes=a,e.memoizedState=c}}function XM(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(we(191,n));n.call(r)}}}var QP=new Y3.Component().refs;function vw(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:ci({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var S0={isMounted:function(e){return(e=e._reactInternals)?Xu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Vr(),n=fl(e),s=no(r,n);s.payload=t,i!=null&&(s.callback=i),t=hl(e,s,n),t!==null&&(Rs(t,e,n,r),Dg(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Vr(),n=fl(e),s=no(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=hl(e,s,n),t!==null&&(Rs(t,e,n,r),Dg(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Vr(),r=fl(e),n=no(i,r);n.tag=2,t!=null&&(n.callback=t),t=hl(e,n,r),t!==null&&(Rs(t,e,r,i),Dg(t,e,r))}};function YM(e,t,i,r,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Nf(i,r)||!Nf(n,s):!0}function ZP(e,t,i){var r=!1,n=bl,s=t.contextType;return typeof s=="object"&&s!==null?s=hs(s):(n=cn(t)?Du:Cr.current,r=t.contextTypes,s=(r=r!=null)?wh(e,n):bl),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=S0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function qM(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&S0.enqueueReplaceState(t,t.state,null)}function yw(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=QP,nS(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=hs(s):(s=cn(t)?Du:Cr.current,n.context=wh(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(vw(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&S0.enqueueReplaceState(n,n.state,null),xv(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function hd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(we(309));var r=i.stateNode}if(!r)throw Error(we(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===QP&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(we(284));if(!i._owner)throw Error(we(290,e))}return e}function tm(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function QM(e){var t=e._init;return t(e._payload)}function KP(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function i(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(v,y){return v=pl(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,w){return y===null||y.tag!==6?(y=Vy(x,v.mode,w),y.return=v,y):(y=n(y,x),y.return=v,y)}function l(v,y,x,w){var _=x.type;return _===Ic?d(v,y,x.props.children,w,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Fo&&QM(_)===y.type)?(w=n(y,x.props),w.ref=hd(v,y,x),w.return=v,w):(w=zg(x.type,x.key,x.props,null,v.mode,w),w.ref=hd(v,y,x),w.return=v,w)}function u(v,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=jy(x,v.mode,w),y.return=v,y):(y=n(y,x.children||[]),y.return=v,y)}function d(v,y,x,w,_){return y===null||y.tag!==7?(y=mu(x,v.mode,w,_),y.return=v,y):(y=n(y,x),y.return=v,y)}function c(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vy(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gp:return x=zg(y.type,y.key,y.props,null,v.mode,x),x.ref=hd(v,null,y),x.return=v,x;case Rc:return y=jy(y,v.mode,x),y.return=v,y;case Fo:var w=y._init;return c(v,w(y._payload),x)}if(zd(y)||ad(y))return y=mu(y,v.mode,x,null),y.return=v,y;tm(v,y)}return null}function h(v,y,x,w){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:o(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gp:return x.key===_?l(v,y,x,w):null;case Rc:return x.key===_?u(v,y,x,w):null;case Fo:return _=x._init,h(v,y,_(x._payload),w)}if(zd(x)||ad(x))return _!==null?null:d(v,y,x,w,null);tm(v,x)}return null}function f(v,y,x,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(x)||null,o(y,v,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gp:return v=v.get(w.key===null?x:w.key)||null,l(y,v,w,_);case Rc:return v=v.get(w.key===null?x:w.key)||null,u(y,v,w,_);case Fo:var b=w._init;return f(v,y,x,b(w._payload),_)}if(zd(w)||ad(w))return v=v.get(x)||null,d(y,v,w,_,null);tm(y,w)}return null}function m(v,y,x,w){for(var _=null,b=null,A=y,S=y=0,M=null;A!==null&&S<x.length;S++){A.index>S?(M=A,A=null):M=A.sibling;var E=h(v,A,x[S],w);if(E===null){A===null&&(A=M);break}e&&A&&E.alternate===null&&t(v,A),y=s(E,y,S),b===null?_=E:b.sibling=E,b=E,A=M}if(S===x.length)return i(v,A),si&&ql(v,S),_;if(A===null){for(;S<x.length;S++)A=c(v,x[S],w),A!==null&&(y=s(A,y,S),b===null?_=A:b.sibling=A,b=A);return si&&ql(v,S),_}for(A=r(v,A);S<x.length;S++)M=f(A,v,S,x[S],w),M!==null&&(e&&M.alternate!==null&&A.delete(M.key===null?S:M.key),y=s(M,y,S),b===null?_=M:b.sibling=M,b=M);return e&&A.forEach(function(C){return t(v,C)}),si&&ql(v,S),_}function p(v,y,x,w){var _=ad(x);if(typeof _!="function")throw Error(we(150));if(x=_.call(x),x==null)throw Error(we(151));for(var b=_=null,A=y,S=y=0,M=null,E=x.next();A!==null&&!E.done;S++,E=x.next()){A.index>S?(M=A,A=null):M=A.sibling;var C=h(v,A,E.value,w);if(C===null){A===null&&(A=M);break}e&&A&&C.alternate===null&&t(v,A),y=s(C,y,S),b===null?_=C:b.sibling=C,b=C,A=M}if(E.done)return i(v,A),si&&ql(v,S),_;if(A===null){for(;!E.done;S++,E=x.next())E=c(v,E.value,w),E!==null&&(y=s(E,y,S),b===null?_=E:b.sibling=E,b=E);return si&&ql(v,S),_}for(A=r(v,A);!E.done;S++,E=x.next())E=f(A,v,S,E.value,w),E!==null&&(e&&E.alternate!==null&&A.delete(E.key===null?S:E.key),y=s(E,y,S),b===null?_=E:b.sibling=E,b=E);return e&&A.forEach(function(L){return t(v,L)}),si&&ql(v,S),_}function g(v,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Ic&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Gp:e:{for(var _=x.key,b=y;b!==null;){if(b.key===_){if(_=x.type,_===Ic){if(b.tag===7){i(v,b.sibling),y=n(b,x.props.children),y.return=v,v=y;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Fo&&QM(_)===b.type){i(v,b.sibling),y=n(b,x.props),y.ref=hd(v,b,x),y.return=v,v=y;break e}i(v,b);break}else t(v,b);b=b.sibling}x.type===Ic?(y=mu(x.props.children,v.mode,w,x.key),y.return=v,v=y):(w=zg(x.type,x.key,x.props,null,v.mode,w),w.ref=hd(v,y,x),w.return=v,v=w)}return a(v);case Rc:e:{for(b=x.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){i(v,y.sibling),y=n(y,x.children||[]),y.return=v,v=y;break e}else{i(v,y);break}else t(v,y);y=y.sibling}y=jy(x,v.mode,w),y.return=v,v=y}return a(v);case Fo:return b=x._init,g(v,y,b(x._payload),w)}if(zd(x))return m(v,y,x,w);if(ad(x))return p(v,y,x,w);tm(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(i(v,y.sibling),y=n(y,x),y.return=v,v=y):(i(v,y),y=Vy(x,v.mode,w),y.return=v,v=y),a(v)):i(v,y)}return g}var bh=KP(!0),JP=KP(!1),Ap={},ga=Ol(Ap),Vf=Ol(Ap),jf=Ol(Ap);function lu(e){if(e===Ap)throw Error(we(174));return e}function sS(e,t){switch(Jt(jf,t),Jt(Vf,e),Jt(ga,Ap),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zx(t,e)}ri(ga),Jt(ga,t)}function Sh(){ri(ga),ri(Vf),ri(jf)}function $P(e){lu(jf.current);var t=lu(ga.current),i=Zx(t,e.type);t!==i&&(Jt(Vf,e),Jt(ga,i))}function aS(e){Vf.current===e&&(ri(ga),ri(Vf))}var ai=Ol(0);function wv(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var By=[];function oS(){for(var e=0;e<By.length;e++)By[e]._workInProgressVersionPrimary=null;By.length=0}var Pg=xo.ReactCurrentDispatcher,ky=xo.ReactCurrentBatchConfig,Lu=0,ui=null,Ni=null,Zi=null,_v=!1,af=!1,Gf=0,_4=0;function fr(){throw Error(we(321))}function lS(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bs(e[i],t[i]))return!1;return!0}function uS(e,t,i,r,n,s){if(Lu=s,ui=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pg.current=e===null||e.memoizedState===null?M4:E4,e=i(r,n),af){s=0;do{if(af=!1,Gf=0,25<=s)throw Error(we(301));s+=1,Zi=Ni=null,t.updateQueue=null,Pg.current=T4,e=i(r,n)}while(af)}if(Pg.current=bv,t=Ni!==null&&Ni.next!==null,Lu=0,Zi=Ni=ui=null,_v=!1,t)throw Error(we(300));return e}function cS(){var e=Gf!==0;return Gf=0,e}function qs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zi===null?ui.memoizedState=Zi=e:Zi=Zi.next=e,Zi}function ds(){if(Ni===null){var e=ui.alternate;e=e!==null?e.memoizedState:null}else e=Ni.next;var t=Zi===null?ui.memoizedState:Zi.next;if(t!==null)Zi=t,Ni=e;else{if(e===null)throw Error(we(310));Ni=e,e={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},Zi===null?ui.memoizedState=Zi=e:Zi=Zi.next=e}return Zi}function Wf(e,t){return typeof t=="function"?t(e):t}function Ny(e){var t=ds(),i=t.queue;if(i===null)throw Error(we(311));i.lastRenderedReducer=e;var r=Ni,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Lu&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=c,a=r):l=l.next=c,ui.lanes|=d,Ou|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,Bs(r,t.memoizedState)||(an=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,ui.lanes|=s,Ou|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Fy(e){var t=ds(),i=t.queue;if(i===null)throw Error(we(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Bs(s,t.memoizedState)||(an=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function eL(){}function tL(e,t){var i=ui,r=ds(),n=t(),s=!Bs(r.memoizedState,n);if(s&&(r.memoizedState=n,an=!0),r=r.queue,hS(nL.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||Zi!==null&&Zi.memoizedState.tag&1){if(i.flags|=2048,Xf(9,rL.bind(null,i,r,n,t),void 0,null),Ji===null)throw Error(we(349));(Lu&30)!==0||iL(i,t,n)}return n}function iL(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function rL(e,t,i,r){t.value=i,t.getSnapshot=r,sL(t)&&aL(e)}function nL(e,t,i){return i(function(){sL(t)&&aL(e)})}function sL(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Bs(e,i)}catch{return!0}}function aL(e){var t=co(e,1);t!==null&&Rs(t,e,1,-1)}function ZM(e){var t=qs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:e},t.queue=e,e=e.dispatch=A4.bind(null,ui,e),[t.memoizedState,e]}function Xf(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function oL(){return ds().memoizedState}function Lg(e,t,i,r){var n=qs();ui.flags|=e,n.memoizedState=Xf(1|t,i,void 0,r===void 0?null:r)}function A0(e,t,i,r){var n=ds();r=r===void 0?null:r;var s=void 0;if(Ni!==null){var a=Ni.memoizedState;if(s=a.destroy,r!==null&&lS(r,a.deps)){n.memoizedState=Xf(t,i,s,r);return}}ui.flags|=e,n.memoizedState=Xf(1|t,i,s,r)}function KM(e,t){return Lg(8390656,8,e,t)}function hS(e,t){return A0(2048,8,e,t)}function lL(e,t){return A0(4,2,e,t)}function uL(e,t){return A0(4,4,e,t)}function cL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hL(e,t,i){return i=i!=null?i.concat([e]):null,A0(4,4,cL.bind(null,t,e),i)}function dS(){}function dL(e,t){var i=ds();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&lS(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function fL(e,t){var i=ds();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&lS(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function pL(e,t,i){return(Lu&21)===0?(e.baseState&&(e.baseState=!1,an=!0),e.memoizedState=i):(Bs(i,t)||(i=vP(),ui.lanes|=i,Ou|=i,e.baseState=!0),t)}function b4(e,t){var i=Gt;Gt=i!==0&&4>i?i:4,e(!0);var r=ky.transition;ky.transition={};try{e(!1),t()}finally{Gt=i,ky.transition=r}}function mL(){return ds().memoizedState}function S4(e,t,i){var r=fl(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},gL(e))vL(t,i);else if(i=YP(e,t,i,r),i!==null){var n=Vr();Rs(i,e,r,n),yL(i,t,r)}}function A4(e,t,i){var r=fl(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(gL(e))vL(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(n.hasEagerState=!0,n.eagerState=o,Bs(o,a)){var l=t.interleaved;l===null?(n.next=n,rS(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}i=YP(e,t,n,r),i!==null&&(n=Vr(),Rs(i,e,r,n),yL(i,t,r))}}function gL(e){var t=e.alternate;return e===ui||t!==null&&t===ui}function vL(e,t){af=_v=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function yL(e,t,i){if((i&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,jb(e,i)}}var bv={readContext:hs,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},M4={readContext:hs,useCallback:function(e,t){return qs().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:KM,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Lg(4194308,4,cL.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Lg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lg(4,2,e,t)},useMemo:function(e,t){var i=qs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=qs();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=S4.bind(null,ui,e),[r.memoizedState,e]},useRef:function(e){var t=qs();return e={current:e},t.memoizedState=e},useState:ZM,useDebugValue:dS,useDeferredValue:function(e){return qs().memoizedState=e},useTransition:function(){var e=ZM(!1),t=e[0];return e=b4.bind(null,e[1]),qs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=ui,n=qs();if(si){if(i===void 0)throw Error(we(407));i=i()}else{if(i=t(),Ji===null)throw Error(we(349));(Lu&30)!==0||iL(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,KM(nL.bind(null,r,s,e),[e]),r.flags|=2048,Xf(9,rL.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=qs(),t=Ji.identifierPrefix;if(si){var i=$a,r=Ja;i=(r&~(1<<32-Os(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Gf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=_4++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},E4={readContext:hs,useCallback:dL,useContext:hs,useEffect:hS,useImperativeHandle:hL,useInsertionEffect:lL,useLayoutEffect:uL,useMemo:fL,useReducer:Ny,useRef:oL,useState:function(){return Ny(Wf)},useDebugValue:dS,useDeferredValue:function(e){var t=ds();return pL(t,Ni.memoizedState,e)},useTransition:function(){var e=Ny(Wf)[0],t=ds().memoizedState;return[e,t]},useMutableSource:eL,useSyncExternalStore:tL,useId:mL,unstable_isNewReconciler:!1},T4={readContext:hs,useCallback:dL,useContext:hs,useEffect:hS,useImperativeHandle:hL,useInsertionEffect:lL,useLayoutEffect:uL,useMemo:fL,useReducer:Fy,useRef:oL,useState:function(){return Fy(Wf)},useDebugValue:dS,useDeferredValue:function(e){var t=ds();return Ni===null?t.memoizedState=e:pL(t,Ni.memoizedState,e)},useTransition:function(){var e=Fy(Wf)[0],t=ds().memoizedState;return[e,t]},useMutableSource:eL,useSyncExternalStore:tL,useId:mL,unstable_isNewReconciler:!1};function Ah(e,t){try{var i="",r=t;do i+=tN(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function Uy(e,t,i){return{value:e,source:null,stack:i!=null?i:null,digest:t!=null?t:null}}function xw(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var C4=typeof WeakMap=="function"?WeakMap:Map;function xL(e,t,i){i=no(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){Av||(Av=!0,Dw=r),xw(e,t)},i}function wL(e,t,i){i=no(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){xw(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){xw(e,t),typeof r!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}function JM(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new C4;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=V4.bind(null,e,t,i),t.then(e,e))}function $M(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function e2(e,t,i,r,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=no(-1,1),t.tag=2,hl(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var D4=xo.ReactCurrentOwner,an=!1;function zr(e,t,i,r){t.child=e===null?JP(t,null,i,r):bh(t,e.child,i,r)}function t2(e,t,i,r,n){i=i.render;var s=t.ref;return ah(t,n),r=uS(e,t,i,r,s,n),i=cS(),e!==null&&!an?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ho(e,t,n)):(si&&i&&Kb(t),t.flags|=1,zr(e,t,r,n),t.child)}function i2(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!wS(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,_L(e,t,s,r,n)):(e=zg(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:Nf,i(a,r)&&e.ref===t.ref)return ho(e,t,n)}return t.flags|=1,e=pl(s,r),e.ref=t.ref,e.return=t,t.child=e}function _L(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(Nf(s,r)&&e.ref===t.ref)if(an=!1,t.pendingProps=r=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(an=!0);else return t.lanes=e.lanes,ho(e,t,n)}return ww(e,t,i,r,n)}function bL(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(Gc,yn),yn|=i;else{if((i&1073741824)===0)return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jt(Gc,yn),yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,Jt(Gc,yn),yn|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,Jt(Gc,yn),yn|=r;return zr(e,t,n,i),t.child}function SL(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ww(e,t,i,r,n){var s=cn(i)?Du:Cr.current;return s=wh(t,s),ah(t,n),i=uS(e,t,i,r,s,n),r=cS(),e!==null&&!an?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ho(e,t,n)):(si&&r&&Kb(t),t.flags|=1,zr(e,t,i,n),t.child)}function r2(e,t,i,r,n){if(cn(i)){var s=!0;pv(t)}else s=!1;if(ah(t,n),t.stateNode===null)Og(e,t),ZP(t,i,r),yw(t,i,r,n),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=hs(u):(u=cn(i)?Du:Cr.current,u=wh(t,u));var d=i.getDerivedStateFromProps,c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&qM(t,a,r,u),Uo=!1;var h=t.memoizedState;a.state=h,xv(t,r,a,n),l=t.memoizedState,o!==r||h!==l||un.current||Uo?(typeof d=="function"&&(vw(t,i,d,r),l=t.memoizedState),(o=Uo||YM(t,i,o,r,h,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,qP(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Ts(t.type,o),a.props=u,c=t.pendingProps,h=a.context,l=i.contextType,typeof l=="object"&&l!==null?l=hs(l):(l=cn(i)?Du:Cr.current,l=wh(t,l));var f=i.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||h!==l)&&qM(t,a,r,l),Uo=!1,h=t.memoizedState,a.state=h,xv(t,r,a,n);var m=t.memoizedState;o!==c||h!==m||un.current||Uo?(typeof f=="function"&&(vw(t,i,f,r),m=t.memoizedState),(u=Uo||YM(t,i,u,r,h,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _w(e,t,i,r,s,n)}function _w(e,t,i,r,n,s){SL(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return n&&VM(t,i,!1),ho(e,t,s);r=t.stateNode,D4.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=bh(t,e.child,null,s),t.child=bh(t,null,o,s)):zr(e,t,o,s),t.memoizedState=r.state,n&&VM(t,i,!0),t.child}function AL(e){var t=e.stateNode;t.pendingContext?HM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HM(e,t.context,!1),sS(e,t.containerInfo)}function n2(e,t,i,r,n){return _h(),$b(n),t.flags|=256,zr(e,t,i,r),t.child}var bw={dehydrated:null,treeContext:null,retryLane:0};function Sw(e){return{baseLanes:e,cachePool:null,transitions:null}}function ML(e,t,i){var r=t.pendingProps,n=ai.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Jt(ai,n&1),e===null)return mw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=T0(a,r,0,null),e=mu(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Sw(i),t.memoizedState=bw,e):fS(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return P4(e,t,a,r,o,n,i);if(s){s=r.fallback,a=t.mode,n=e.child,o=n.sibling;var l={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=pl(n,l),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=pl(o,s):(s=mu(s,a,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Sw(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~i,t.memoizedState=bw,r}return s=e.child,e=s.sibling,r=pl(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function fS(e,t){return t=T0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function im(e,t,i,r){return r!==null&&$b(r),bh(t,e.child,null,i),e=fS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function P4(e,t,i,r,n,s,a){if(i)return t.flags&256?(t.flags&=-257,r=Uy(Error(we(422))),im(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=T0({mode:"visible",children:r.children},n,0,null),s=mu(s,n,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&bh(t,e.child,null,a),t.child.memoizedState=Sw(a),t.memoizedState=bw,s);if((t.mode&1)===0)return im(e,t,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(we(419)),r=Uy(s,r,void 0),im(e,t,a,r)}if(o=(a&e.childLanes)!==0,an||o){if(r=Ji,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(r.suspendedLanes|a))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,co(e,n),Rs(r,e,n,-1))}return xS(),r=Uy(Error(we(421))),im(e,t,a,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=j4.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,En=cl(n.nextSibling),Dn=t,si=!0,Ds=null,e!==null&&(Qn[Zn++]=Ja,Qn[Zn++]=$a,Qn[Zn++]=Pu,Ja=e.id,$a=e.overflow,Pu=t),t=fS(t,r.children),t.flags|=4096,t)}function s2(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gw(e.return,t,i)}function Hy(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function EL(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(zr(e,t,r.children,i),r=ai.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&s2(e,i,t);else if(e.tag===19)s2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Jt(ai,r),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&wv(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Hy(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&wv(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Hy(t,!0,i,null,s);break;case"together":Hy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Og(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ho(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ou|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,i=pl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=pl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function L4(e,t,i){switch(t.tag){case 3:AL(t),_h();break;case 5:$P(t);break;case 1:cn(t.type)&&pv(t);break;case 4:sS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Jt(vv,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Jt(ai,ai.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?ML(e,t,i):(Jt(ai,ai.current&1),e=ho(e,t,i),e!==null?e.sibling:null);Jt(ai,ai.current&1);break;case 19:if(r=(i&t.childLanes)!==0,(e.flags&128)!==0){if(r)return EL(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Jt(ai,ai.current),r)break;return null;case 22:case 23:return t.lanes=0,bL(e,t,i)}return ho(e,t,i)}var TL,Aw,CL,DL;TL=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aw=function(){};CL=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,lu(ga.current);var s=null;switch(i){case"input":n=Xx(e,n),r=Xx(e,r),s=[];break;case"select":n=ci({},n,{value:void 0}),r=ci({},r,{value:void 0}),s=[];break;case"textarea":n=Qx(e,n),r=Qx(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=dv)}Kx(i,r);var a;i=null;for(u in n)if(!r.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Lf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=n!=null?n[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(i||(i={}),i[a]=l[a])}else i||(s||(s=[]),s.push(u,i)),i=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&$t("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}i&&(s=s||[]).push("style",i);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};DL=function(e,t,i,r){i!==r&&(t.flags|=4)};function dd(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pr(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function O4(e,t,i){var r=t.pendingProps;switch(Jb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(t),null;case 1:return cn(t.type)&&fv(),pr(t),null;case 3:return r=t.stateNode,Sh(),ri(un),ri(Cr),oS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(em(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ds!==null&&(Ow(Ds),Ds=null))),Aw(e,t),pr(t),null;case 5:aS(t);var n=lu(jf.current);if(i=t.type,e!==null&&t.stateNode!=null)CL(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(we(166));return pr(t),null}if(e=lu(ga.current),em(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[ta]=t,r[Hf]=s,e=(t.mode&1)!==0,i){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(n=0;n<kd.length;n++)$t(kd[n],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":pM(r,s),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r);break;case"textarea":gM(r,s),$t("invalid",r)}Kx(i,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,o,e),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,o,e),n=["children",""+o]):Lf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&$t("scroll",r)}switch(i){case"input":Wp(r),mM(r,s,!0);break;case"textarea":Wp(r),vM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dv)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iP(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(i,{is:r.is}):(e=a.createElement(i),i==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,i),e[ta]=t,e[Hf]=r,TL(e,t,!1,!1),t.stateNode=e;e:{switch(a=Jx(i,r),i){case"dialog":$t("cancel",e),$t("close",e),n=r;break;case"iframe":case"object":case"embed":$t("load",e),n=r;break;case"video":case"audio":for(n=0;n<kd.length;n++)$t(kd[n],e);n=r;break;case"source":$t("error",e),n=r;break;case"img":case"image":case"link":$t("error",e),$t("load",e),n=r;break;case"details":$t("toggle",e),n=r;break;case"input":pM(e,r),n=Xx(e,r),$t("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=ci({},r,{value:void 0}),$t("invalid",e);break;case"textarea":gM(e,r),n=Qx(e,r),$t("invalid",e);break;default:n=r}Kx(i,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?sP(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rP(e,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Of(e,l):typeof l=="number"&&Of(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Lf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$t("scroll",e):l!=null&&kb(e,s,l,a))}switch(i){case"input":Wp(e),mM(e,r,!1);break;case"textarea":Wp(e),vM(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_l(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ih(e,!!r.multiple,s,!1):r.defaultValue!=null&&ih(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=dv)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pr(t),null;case 6:if(e&&t.stateNode!=null)DL(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(we(166));if(i=lu(jf.current),lu(ga.current),em(t)){if(r=t.stateNode,i=t.memoizedProps,r[ta]=t,(s=r.nodeValue!==i)&&(e=Dn,e!==null))switch(e.tag){case 3:$p(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$p(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[ta]=t,t.stateNode=r}return pr(t),null;case 13:if(ri(ai),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(si&&En!==null&&(t.mode&1)!==0&&(t.flags&128)===0)XP(),_h(),t.flags|=98560,s=!1;else if(s=em(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(we(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[ta]=t}else _h(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pr(t),s=!1}else Ds!==null&&(Ow(Ds),Ds=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ai.current&1)!==0?Vi===0&&(Vi=3):xS())),t.updateQueue!==null&&(t.flags|=4),pr(t),null);case 4:return Sh(),Aw(e,t),e===null&&Ff(t.stateNode.containerInfo),pr(t),null;case 10:return iS(t.type._context),pr(t),null;case 17:return cn(t.type)&&fv(),pr(t),null;case 19:if(ri(ai),s=t.memoizedState,s===null)return pr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)dd(s,!1);else{if(Vi!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=wv(e),a!==null){for(t.flags|=128,dd(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Jt(ai,ai.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ai()>Mh&&(t.flags|=128,r=!0,dd(s,!1),t.lanes=4194304)}else{if(!r)if(e=wv(a),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),dd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!si)return pr(t),null}else 2*Ai()-s.renderingStartTime>Mh&&i!==1073741824&&(t.flags|=128,r=!0,dd(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(i=s.last,i!==null?i.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ai(),t.sibling=null,i=ai.current,Jt(ai,r?i&1|2:i&1),t):(pr(t),null);case 22:case 23:return yS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(yn&1073741824)!==0&&(pr(t),t.subtreeFlags&6&&(t.flags|=8192)):pr(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function R4(e,t){switch(Jb(t),t.tag){case 1:return cn(t.type)&&fv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sh(),ri(un),ri(Cr),oS(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return aS(t),null;case 13:if(ri(ai),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));_h()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ri(ai),null;case 4:return Sh(),null;case 10:return iS(t.type._context),null;case 22:case 23:return yS(),null;case 24:return null;default:return null}}var rm=!1,wr=!1,I4=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function jc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){pi(e,t,r)}else i.current=null}function Mw(e,t,i){try{i()}catch(r){pi(e,t,r)}}var a2=!1;function z4(e,t){if(lw=uv,e=RP(),Zb(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var a=0,o=-1,l=-1,u=0,d=0,c=e,h=null;t:for(;;){for(var f;c!==i||n!==0&&c.nodeType!==3||(o=a+n),c!==s||r!==0&&c.nodeType!==3||(l=a+r),c.nodeType===3&&(a+=c.nodeValue.length),(f=c.firstChild)!==null;)h=c,c=f;for(;;){if(c===e)break t;if(h===i&&++u===n&&(o=a),h===s&&++d===r&&(l=a),(f=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=f}i=o===-1||l===-1?null:{start:o,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(uw={focusedElem:e,selectionRange:i},uv=!1,Ve=t;Ve!==null;)if(t=Ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ve=e;else for(;Ve!==null;){t=Ve;try{var m=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ts(t.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(w){pi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ve=e;break}Ve=t.return}return m=a2,a2=!1,m}function of(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&Mw(t,i,s)}n=n.next}while(n!==r)}}function M0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function Ew(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function PL(e){var t=e.alternate;t!==null&&(e.alternate=null,PL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ta],delete t[Hf],delete t[dw],delete t[v4],delete t[y4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LL(e){return e.tag===5||e.tag===3||e.tag===4}function o2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tw(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=dv));else if(r!==4&&(e=e.child,e!==null))for(Tw(e,t,i),e=e.sibling;e!==null;)Tw(e,t,i),e=e.sibling}function Cw(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Cw(e,t,i),e=e.sibling;e!==null;)Cw(e,t,i),e=e.sibling}var rr=null,Cs=!1;function So(e,t,i){for(i=i.child;i!==null;)OL(e,t,i),i=i.sibling}function OL(e,t,i){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(v0,i)}catch{}switch(i.tag){case 5:wr||jc(i,t);case 6:var r=rr,n=Cs;rr=null,So(e,t,i),rr=r,Cs=n,rr!==null&&(Cs?(e=rr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):rr.removeChild(i.stateNode));break;case 18:rr!==null&&(Cs?(e=rr,i=i.stateNode,e.nodeType===8?Iy(e.parentNode,i):e.nodeType===1&&Iy(e,i),Bf(e)):Iy(rr,i.stateNode));break;case 4:r=rr,n=Cs,rr=i.stateNode.containerInfo,Cs=!0,So(e,t,i),rr=r,Cs=n;break;case 0:case 11:case 14:case 15:if(!wr&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&Mw(i,t,a),n=n.next}while(n!==r)}So(e,t,i);break;case 1:if(!wr&&(jc(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){pi(i,t,o)}So(e,t,i);break;case 21:So(e,t,i);break;case 22:i.mode&1?(wr=(r=wr)||i.memoizedState!==null,So(e,t,i),wr=r):So(e,t,i);break;default:So(e,t,i)}}function l2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new I4),t.forEach(function(r){var n=G4.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function ms(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:rr=o.stateNode,Cs=!1;break e;case 3:rr=o.stateNode.containerInfo,Cs=!0;break e;case 4:rr=o.stateNode.containerInfo,Cs=!0;break e}o=o.return}if(rr===null)throw Error(we(160));OL(s,a,n),rr=null,Cs=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){pi(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RL(t,e),t=t.sibling}function RL(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),Vs(e),r&4){try{of(3,e,e.return),M0(3,e)}catch(p){pi(e,e.return,p)}try{of(5,e,e.return)}catch(p){pi(e,e.return,p)}}break;case 1:ms(t,e),Vs(e),r&512&&i!==null&&jc(i,i.return);break;case 5:if(ms(t,e),Vs(e),r&512&&i!==null&&jc(i,i.return),e.flags&32){var n=e.stateNode;try{Of(n,"")}catch(p){pi(e,e.return,p)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=i!==null?i.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&eP(n,s),Jx(o,a);var u=Jx(o,s);for(a=0;a<l.length;a+=2){var d=l[a],c=l[a+1];d==="style"?sP(n,c):d==="dangerouslySetInnerHTML"?rP(n,c):d==="children"?Of(n,c):kb(n,d,c,u)}switch(o){case"input":Yx(n,s);break;case"textarea":tP(n,s);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ih(n,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?ih(n,!!s.multiple,s.defaultValue,!0):ih(n,!!s.multiple,s.multiple?[]:"",!1))}n[Hf]=s}catch(p){pi(e,e.return,p)}}break;case 6:if(ms(t,e),Vs(e),r&4){if(e.stateNode===null)throw Error(we(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(p){pi(e,e.return,p)}}break;case 3:if(ms(t,e),Vs(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Bf(t.containerInfo)}catch(p){pi(e,e.return,p)}break;case 4:ms(t,e),Vs(e);break;case 13:ms(t,e),Vs(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(gS=Ai())),r&4&&l2(e);break;case 22:if(d=i!==null&&i.memoizedState!==null,e.mode&1?(wr=(u=wr)||d,ms(t,e),wr=u):ms(t,e),Vs(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(Ve=e,d=e.child;d!==null;){for(c=Ve=d;Ve!==null;){switch(h=Ve,f=h.child,h.tag){case 0:case 11:case 14:case 15:of(4,h,h.return);break;case 1:jc(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,i=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){pi(r,i,p)}}break;case 5:jc(h,h.return);break;case 22:if(h.memoizedState!==null){c2(c);continue}}f!==null?(f.return=h,Ve=f):c2(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{n=c.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=nP("display",a))}catch(p){pi(e,e.return,p)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(p){pi(e,e.return,p)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:ms(t,e),Vs(e),r&4&&l2(e);break;case 21:break;default:ms(t,e),Vs(e)}}function Vs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(LL(i)){var r=i;break e}i=i.return}throw Error(we(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Of(n,""),r.flags&=-33);var s=o2(e);Cw(e,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,o=o2(e);Tw(e,o,a);break;default:throw Error(we(161))}}catch(l){pi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function B4(e,t,i){Ve=e,IL(e)}function IL(e,t,i){for(var r=(e.mode&1)!==0;Ve!==null;){var n=Ve,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||rm;if(!a){var o=n.alternate,l=o!==null&&o.memoizedState!==null||wr;o=rm;var u=wr;if(rm=a,(wr=l)&&!u)for(Ve=n;Ve!==null;)a=Ve,l=a.child,a.tag===22&&a.memoizedState!==null?h2(n):l!==null?(l.return=a,Ve=l):h2(n);for(;s!==null;)Ve=s,IL(s),s=s.sibling;Ve=n,rm=o,wr=u}u2(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,Ve=s):u2(e)}}function u2(e){for(;Ve!==null;){var t=Ve;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:wr||M0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wr)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Ts(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&XM(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}XM(t,a,i)}break;case 5:var o=t.stateNode;if(i===null&&t.flags&4){i=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&Bf(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}wr||t.flags&512&&Ew(t)}catch(h){pi(t,t.return,h)}}if(t===e){Ve=null;break}if(i=t.sibling,i!==null){i.return=t.return,Ve=i;break}Ve=t.return}}function c2(e){for(;Ve!==null;){var t=Ve;if(t===e){Ve=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ve=i;break}Ve=t.return}}function h2(e){for(;Ve!==null;){var t=Ve;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{M0(4,t)}catch(l){pi(t,i,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(l){pi(t,n,l)}}var s=t.return;try{Ew(t)}catch(l){pi(t,s,l)}break;case 5:var a=t.return;try{Ew(t)}catch(l){pi(t,a,l)}}}catch(l){pi(t,t.return,l)}if(t===e){Ve=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ve=o;break}Ve=t.return}}var k4=Math.ceil,Sv=xo.ReactCurrentDispatcher,pS=xo.ReactCurrentOwner,os=xo.ReactCurrentBatchConfig,It=0,Ji=null,Oi=null,lr=0,yn=0,Gc=Ol(0),Vi=0,Yf=null,Ou=0,E0=0,mS=0,lf=null,en=null,gS=0,Mh=1/0,Ha=null,Av=!1,Dw=null,dl=null,nm=!1,qo=null,Mv=0,uf=0,Pw=null,Rg=-1,Ig=0;function Vr(){return(It&6)!==0?Ai():Rg!==-1?Rg:Rg=Ai()}function fl(e){return(e.mode&1)===0?1:(It&2)!==0&&lr!==0?lr&-lr:w4.transition!==null?(Ig===0&&(Ig=vP()),Ig):(e=Gt,e!==0||(e=window.event,e=e===void 0?16:AP(e.type)),e)}function Rs(e,t,i,r){if(50<uf)throw uf=0,Pw=null,Error(we(185));_p(e,i,r),((It&2)===0||e!==Ji)&&(e===Ji&&((It&2)===0&&(E0|=i),Vi===4&&Go(e,lr)),hn(e,r),i===1&&It===0&&(t.mode&1)===0&&(Mh=Ai()+500,b0&&Rl()))}function hn(e,t){var i=e.callbackNode;wN(e,t);var r=lv(e,e===Ji?lr:0);if(r===0)i!==null&&wM(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&wM(i),t===1)e.tag===0?x4(d2.bind(null,e)):jP(d2.bind(null,e)),m4(function(){(It&6)===0&&Rl()}),i=null;else{switch(yP(r)){case 1:i=Vb;break;case 4:i=mP;break;case 16:i=ov;break;case 536870912:i=gP;break;default:i=ov}i=VL(i,zL.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function zL(e,t){if(Rg=-1,Ig=0,(It&6)!==0)throw Error(we(327));var i=e.callbackNode;if(oh()&&e.callbackNode!==i)return null;var r=lv(e,e===Ji?lr:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Ev(e,r);else{t=r;var n=It;It|=2;var s=kL();(Ji!==e||lr!==t)&&(Ha=null,Mh=Ai()+500,pu(e,t));do try{U4();break}catch(o){BL(e,o)}while(1);tS(),Sv.current=s,It=n,Oi!==null?t=0:(Ji=null,lr=0,t=Vi)}if(t!==0){if(t===2&&(n=rw(e),n!==0&&(r=n,t=Lw(e,n))),t===1)throw i=Yf,pu(e,0),Go(e,r),hn(e,Ai()),i;if(t===6)Go(e,r);else{if(n=e.current.alternate,(r&30)===0&&!N4(n)&&(t=Ev(e,r),t===2&&(s=rw(e),s!==0&&(r=s,t=Lw(e,s))),t===1))throw i=Yf,pu(e,0),Go(e,r),hn(e,Ai()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(we(345));case 2:Ql(e,en,Ha);break;case 3:if(Go(e,r),(r&130023424)===r&&(t=gS+500-Ai(),10<t)){if(lv(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Vr(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=hw(Ql.bind(null,e,en,Ha),t);break}Ql(e,en,Ha);break;case 4:if(Go(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var a=31-Os(r);s=1<<a,a=t[a],a>n&&(n=a),r&=~s}if(r=n,r=Ai()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k4(r/1960))-r,10<r){e.timeoutHandle=hw(Ql.bind(null,e,en,Ha),r);break}Ql(e,en,Ha);break;case 5:Ql(e,en,Ha);break;default:throw Error(we(329))}}}return hn(e,Ai()),e.callbackNode===i?zL.bind(null,e):null}function Lw(e,t){var i=lf;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),e=Ev(e,t),e!==2&&(t=en,en=i,t!==null&&Ow(t)),e}function Ow(e){en===null?en=e:en.push.apply(en,e)}function N4(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!Bs(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t){for(t&=~mS,t&=~E0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Os(t),r=1<<i;e[i]=-1,t&=~r}}function d2(e){if((It&6)!==0)throw Error(we(327));oh();var t=lv(e,0);if((t&1)===0)return hn(e,Ai()),null;var i=Ev(e,t);if(e.tag!==0&&i===2){var r=rw(e);r!==0&&(t=r,i=Lw(e,r))}if(i===1)throw i=Yf,pu(e,0),Go(e,t),hn(e,Ai()),i;if(i===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ql(e,en,Ha),hn(e,Ai()),null}function vS(e,t){var i=It;It|=1;try{return e(t)}finally{It=i,It===0&&(Mh=Ai()+500,b0&&Rl())}}function Ru(e){qo!==null&&qo.tag===0&&(It&6)===0&&oh();var t=It;It|=1;var i=os.transition,r=Gt;try{if(os.transition=null,Gt=1,e)return e()}finally{Gt=r,os.transition=i,It=t,(It&6)===0&&Rl()}}function yS(){yn=Gc.current,ri(Gc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,p4(i)),Oi!==null)for(i=Oi.return;i!==null;){var r=i;switch(Jb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fv();break;case 3:Sh(),ri(un),ri(Cr),oS();break;case 5:aS(r);break;case 4:Sh();break;case 13:ri(ai);break;case 19:ri(ai);break;case 10:iS(r.type._context);break;case 22:case 23:yS()}i=i.return}if(Ji=e,Oi=e=pl(e.current,null),lr=yn=t,Vi=0,Yf=null,mS=E0=Ou=0,en=lf=null,ou!==null){for(t=0;t<ou.length;t++)if(i=ou[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}i.pending=r}ou=null}return e}function BL(e,t){do{var i=Oi;try{if(tS(),Pg.current=bv,_v){for(var r=ui.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}_v=!1}if(Lu=0,Zi=Ni=ui=null,af=!1,Gf=0,pS.current=null,i===null||i.return===null){Vi=1,Yf=t,Oi=null;break}e:{var s=e,a=i.return,o=i,l=t;if(t=lr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,c=d.tag;if((d.mode&1)===0&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=$M(a);if(f!==null){f.flags&=-257,e2(f,a,o,s,t),f.mode&1&&JM(s,u,t),t=f,l=u;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if((t&1)===0){JM(s,u,t),xS();break e}l=Error(we(426))}}else if(si&&o.mode&1){var g=$M(a);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),e2(g,a,o,s,t),$b(Ah(l,o));break e}}s=l=Ah(l,o),Vi!==4&&(Vi=2),lf===null?lf=[s]:lf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=xL(s,l,t);WM(s,v);break e;case 1:o=l;var y=s.type,x=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(dl===null||!dl.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=wL(s,o,t);WM(s,w);break e}}s=s.return}while(s!==null)}FL(i)}catch(_){t=_,Oi===i&&i!==null&&(Oi=i=i.return);continue}break}while(1)}function kL(){var e=Sv.current;return Sv.current=bv,e===null?bv:e}function xS(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),Ji===null||(Ou&268435455)===0&&(E0&268435455)===0||Go(Ji,lr)}function Ev(e,t){var i=It;It|=2;var r=kL();(Ji!==e||lr!==t)&&(Ha=null,pu(e,t));do try{F4();break}catch(n){BL(e,n)}while(1);if(tS(),It=i,Sv.current=r,Oi!==null)throw Error(we(261));return Ji=null,lr=0,Vi}function F4(){for(;Oi!==null;)NL(Oi)}function U4(){for(;Oi!==null&&!hN();)NL(Oi)}function NL(e){var t=HL(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?FL(e):Oi=t,pS.current=null}function FL(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=O4(i,t,yn),i!==null){Oi=i;return}}else{if(i=R4(i,t),i!==null){i.flags&=32767,Oi=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vi=6,Oi=null;return}}if(t=t.sibling,t!==null){Oi=t;return}Oi=t=e}while(t!==null);Vi===0&&(Vi=5)}function Ql(e,t,i){var r=Gt,n=os.transition;try{os.transition=null,Gt=1,H4(e,t,i,r)}finally{os.transition=n,Gt=r}return null}function H4(e,t,i,r){do oh();while(qo!==null);if((It&6)!==0)throw Error(we(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(_N(e,s),e===Ji&&(Oi=Ji=null,lr=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||nm||(nm=!0,VL(ov,function(){return oh(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=os.transition,os.transition=null;var a=Gt;Gt=1;var o=It;It|=4,pS.current=null,z4(e,i),RL(i,e),o4(uw),uv=!!lw,uw=lw=null,e.current=i,B4(i),dN(),It=o,Gt=a,os.transition=s}else e.current=i;if(nm&&(nm=!1,qo=e,Mv=n),s=e.pendingLanes,s===0&&(dl=null),mN(i.stateNode),hn(e,Ai()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(Av)throw Av=!1,e=Dw,Dw=null,e;return(Mv&1)!==0&&e.tag!==0&&oh(),s=e.pendingLanes,(s&1)!==0?e===Pw?uf++:(uf=0,Pw=e):uf=0,Rl(),null}function oh(){if(qo!==null){var e=yP(Mv),t=os.transition,i=Gt;try{if(os.transition=null,Gt=16>e?16:e,qo===null)var r=!1;else{if(e=qo,qo=null,Mv=0,(It&6)!==0)throw Error(we(331));var n=It;for(It|=4,Ve=e.current;Ve!==null;){var s=Ve,a=s.child;if((Ve.flags&16)!==0){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Ve=u;Ve!==null;){var d=Ve;switch(d.tag){case 0:case 11:case 15:of(8,d,s)}var c=d.child;if(c!==null)c.return=d,Ve=c;else for(;Ve!==null;){d=Ve;var h=d.sibling,f=d.return;if(PL(d),d===u){Ve=null;break}if(h!==null){h.return=f,Ve=h;break}Ve=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Ve=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,Ve=a;else e:for(;Ve!==null;){if(s=Ve,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:of(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ve=v;break e}Ve=s.return}}var y=e.current;for(Ve=y;Ve!==null;){a=Ve;var x=a.child;if((a.subtreeFlags&2064)!==0&&x!==null)x.return=a,Ve=x;else e:for(a=y;Ve!==null;){if(o=Ve,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:M0(9,o)}}catch(_){pi(o,o.return,_)}if(o===a){Ve=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Ve=w;break e}Ve=o.return}}if(It=n,Rl(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(v0,e)}catch{}r=!0}return r}finally{Gt=i,os.transition=t}}return!1}function f2(e,t,i){t=Ah(i,t),t=xL(e,t,1),e=hl(e,t,1),t=Vr(),e!==null&&(_p(e,1,t),hn(e,t))}function pi(e,t,i){if(e.tag===3)f2(e,e,i);else for(;t!==null;){if(t.tag===3){f2(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dl===null||!dl.has(r))){e=Ah(i,e),e=wL(t,e,1),t=hl(t,e,1),e=Vr(),t!==null&&(_p(t,1,e),hn(t,e));break}}t=t.return}}function V4(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=Vr(),e.pingedLanes|=e.suspendedLanes&i,Ji===e&&(lr&i)===i&&(Vi===4||Vi===3&&(lr&130023424)===lr&&500>Ai()-gS?pu(e,0):mS|=i),hn(e,t)}function UL(e,t){t===0&&((e.mode&1)===0?t=1:(t=qp,qp<<=1,(qp&130023424)===0&&(qp=4194304)));var i=Vr();e=co(e,t),e!==null&&(_p(e,t,i),hn(e,i))}function j4(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),UL(e,i)}function G4(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(t),UL(e,i)}var HL;HL=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||un.current)an=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return an=!1,L4(e,t,i);an=(e.flags&131072)!==0}else an=!1,si&&(t.flags&1048576)!==0&&GP(t,gv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Og(e,t),e=t.pendingProps;var n=wh(t,Cr.current);ah(t,i),n=uS(null,t,r,e,n,i);var s=cS();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(r)?(s=!0,pv(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,nS(t),n.updater=S0,t.stateNode=n,n._reactInternals=t,yw(t,r,e,i),t=_w(null,t,r,!0,s,i)):(t.tag=0,si&&s&&Kb(t),zr(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(Og(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=X4(r),e=Ts(r,e),n){case 0:t=ww(null,t,r,e,i);break e;case 1:t=r2(null,t,r,e,i);break e;case 11:t=t2(null,t,r,e,i);break e;case 14:t=i2(null,t,r,Ts(r.type,e),i);break e}throw Error(we(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ts(r,n),ww(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ts(r,n),r2(e,t,r,n,i);case 3:e:{if(AL(t),e===null)throw Error(we(387));r=t.pendingProps,s=t.memoizedState,n=s.element,qP(e,t),xv(t,r,null,i);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Ah(Error(we(423)),t),t=n2(e,t,r,i,n);break e}else if(r!==n){n=Ah(Error(we(424)),t),t=n2(e,t,r,i,n);break e}else for(En=cl(t.stateNode.containerInfo.firstChild),Dn=t,si=!0,Ds=null,i=JP(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(_h(),r===n){t=ho(e,t,i);break e}zr(e,t,r,i)}t=t.child}return t;case 5:return $P(t),e===null&&mw(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,cw(r,n)?a=null:s!==null&&cw(r,s)&&(t.flags|=32),SL(e,t),zr(e,t,a,i),t.child;case 6:return e===null&&mw(t),null;case 13:return ML(e,t,i);case 4:return sS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bh(t,null,r,i):zr(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ts(r,n),t2(e,t,r,n,i);case 7:return zr(e,t,t.pendingProps,i),t.child;case 8:return zr(e,t,t.pendingProps.children,i),t.child;case 12:return zr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,Jt(vv,r._currentValue),r._currentValue=a,s!==null)if(Bs(s.value,a)){if(s.children===n.children&&!un.current){t=ho(e,t,i);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=no(-1,i&-i),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),gw(s.return,i,t),o.lanes|=i;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(we(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),gw(a,i,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}zr(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,ah(t,i),n=hs(n),r=r(n),t.flags|=1,zr(e,t,r,i),t.child;case 14:return r=t.type,n=Ts(r,t.pendingProps),n=Ts(r.type,n),i2(e,t,r,n,i);case 15:return _L(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ts(r,n),Og(e,t),t.tag=1,cn(r)?(e=!0,pv(t)):e=!1,ah(t,i),ZP(t,r,n),yw(t,r,n,i),_w(null,t,r,!0,e,i);case 19:return EL(e,t,i);case 22:return bL(e,t,i)}throw Error(we(156,t.tag))};function VL(e,t){return pP(e,t)}function W4(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(e,t,i,r){return new W4(e,t,i,r)}function wS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function X4(e){if(typeof e=="function")return wS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fb)return 11;if(e===Ub)return 14}return 2}function pl(e,t){var i=e.alternate;return i===null?(i=is(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function zg(e,t,i,r,n,s){var a=2;if(r=e,typeof e=="function")wS(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ic:return mu(i.children,n,s,t);case Nb:a=8,n|=8;break;case Vx:return e=is(12,i,t,n|2),e.elementType=Vx,e.lanes=s,e;case jx:return e=is(13,i,t,n),e.elementType=jx,e.lanes=s,e;case Gx:return e=is(19,i,t,n),e.elementType=Gx,e.lanes=s,e;case K3:return T0(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q3:a=10;break e;case Z3:a=9;break e;case Fb:a=11;break e;case Ub:a=14;break e;case Fo:a=16,r=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=is(a,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function mu(e,t,i,r){return e=is(7,e,r,t),e.lanes=i,e}function T0(e,t,i,r){return e=is(22,e,r,t),e.elementType=K3,e.lanes=i,e.stateNode={isHidden:!1},e}function Vy(e,t,i){return e=is(6,e,null,t),e.lanes=i,e}function jy(e,t,i){return t=is(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Y4(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sy(0),this.expirationTimes=Sy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sy(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function _S(e,t,i,r,n,s,a,o,l){return e=new Y4(e,t,i,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=is(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},nS(s),e}function q4(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function jL(e){if(!e)return bl;e=e._reactInternals;e:{if(Xu(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var i=e.type;if(cn(i))return VP(e,i,t)}return t}function GL(e,t,i,r,n,s,a,o,l){return e=_S(i,r,!0,e,n,s,a,o,l),e.context=jL(null),i=e.current,r=Vr(),n=fl(i),s=no(r,n),s.callback=t!=null?t:null,hl(i,s,n),e.current.lanes=n,_p(e,n,r),hn(e,r),e}function C0(e,t,i,r){var n=t.current,s=Vr(),a=fl(n);return i=jL(i),t.context===null?t.context=i:t.pendingContext=i,t=no(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hl(n,t,a),e!==null&&(Rs(e,n,a,s),Dg(e,n,a)),a}function Tv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function p2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function bS(e,t){p2(e,t),(e=e.alternate)&&p2(e,t)}function Q4(){return null}var WL=typeof reportError=="function"?reportError:function(e){console.error(e)};function SS(e){this._internalRoot=e}D0.prototype.render=SS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));C0(e,t,null,null)};D0.prototype.unmount=SS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ru(function(){C0(null,e,null,null)}),t[uo]=null}};function D0(e){this._internalRoot=e}D0.prototype.unstable_scheduleHydration=function(e){if(e){var t=_P();e={blockedOn:null,target:e,priority:t};for(var i=0;i<jo.length&&t!==0&&t<jo[i].priority;i++);jo.splice(i,0,e),i===0&&SP(e)}};function AS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function P0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function m2(){}function Z4(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var u=Tv(a);s.call(u)}}var a=GL(t,r,e,0,null,!1,!1,"",m2);return e._reactRootContainer=a,e[uo]=a.current,Ff(e.nodeType===8?e.parentNode:e),Ru(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var u=Tv(l);o.call(u)}}var l=_S(e,0,!1,null,null,!1,!1,"",m2);return e._reactRootContainer=l,e[uo]=l.current,Ff(e.nodeType===8?e.parentNode:e),Ru(function(){C0(t,l,i,r)}),l}function L0(e,t,i,r,n){var s=i._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var l=Tv(a);o.call(l)}}C0(t,a,e,n)}else a=Z4(i,t,e,n,r);return Tv(a)}xP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Bd(t.pendingLanes);i!==0&&(jb(t,i|1),hn(t,Ai()),(It&6)===0&&(Mh=Ai()+500,Rl()))}break;case 13:Ru(function(){var r=co(e,1);if(r!==null){var n=Vr();Rs(r,e,1,n)}}),bS(e,1)}};Gb=function(e){if(e.tag===13){var t=co(e,134217728);if(t!==null){var i=Vr();Rs(t,e,134217728,i)}bS(e,134217728)}};wP=function(e){if(e.tag===13){var t=fl(e),i=co(e,t);if(i!==null){var r=Vr();Rs(i,e,t,r)}bS(e,t)}};_P=function(){return Gt};bP=function(e,t){var i=Gt;try{return Gt=e,t()}finally{Gt=i}};ew=function(e,t,i){switch(t){case"input":if(Yx(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=_0(r);if(!n)throw Error(we(90));$3(r),Yx(r,n)}}}break;case"textarea":tP(e,i);break;case"select":t=i.value,t!=null&&ih(e,!!i.multiple,t,!1)}};lP=vS;uP=Ru;var K4={usingClientEntryPoint:!1,Events:[Sp,Nc,_0,aP,oP,vS]},fd={findFiberByHostInstance:au,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},J4={bundleType:fd.bundleType,version:fd.version,rendererPackageName:fd.rendererPackageName,rendererConfig:fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dP(e),e===null?null:e.stateNode},findFiberByHostInstance:fd.findFiberByHostInstance||Q4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sm.isDisabled&&sm.supportsFiber)try{v0=sm.inject(J4),ma=sm}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K4;zn.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AS(t))throw Error(we(200));return q4(e,t,null,i)};zn.createRoot=function(e,t){if(!AS(e))throw Error(we(299));var i=!1,r="",n=WL;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=_S(e,1,!1,null,null,i,!1,r,n),e[uo]=t.current,Ff(e.nodeType===8?e.parentNode:e),new SS(t)};zn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=dP(t),e=e===null?null:e.stateNode,e};zn.flushSync=function(e){return Ru(e)};zn.hydrate=function(e,t,i){if(!P0(t))throw Error(we(200));return L0(null,e,t,!0,i)};zn.hydrateRoot=function(e,t,i){if(!AS(e))throw Error(we(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",a=WL;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),t=GL(t,null,e,1,i!=null?i:null,n,!1,s,a),e[uo]=t.current,Ff(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new D0(t)};zn.render=function(e,t,i){if(!P0(t))throw Error(we(200));return L0(null,e,t,!1,i)};zn.unmountComponentAtNode=function(e){if(!P0(e))throw Error(we(40));return e._reactRootContainer?(Ru(function(){L0(null,null,e,!1,function(){e._reactRootContainer=null,e[uo]=null})}),!0):!1};zn.unstable_batchedUpdates=vS;zn.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!P0(i))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return L0(e,t,i,!1,r)};zn.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=zn})(G3);var XL,g2=G3.exports;XL=g2.createRoot,g2.hydrateRoot;function Va(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YL(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.11.1
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Eh={duration:.5,overwrite:!1,delay:0},MS,ls,Li,rs=1e8,Qt=1/rs,Rw=Math.PI*2,$4=Rw/4,eF=0,qL=Math.sqrt,tF=Math.cos,iF=Math.sin,$i=function(t){return typeof t=="string"},wi=function(t){return typeof t=="function"},fo=function(t){return typeof t=="number"},ES=function(t){return typeof t>"u"},Sa=function(t){return typeof t=="object"},dn=function(t){return t!==!1},QL=function(){return typeof window<"u"},am=function(t){return wi(t)||$i(t)},ZL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Tr=Array.isArray,Iw=/(?:-?\.?\d|\.)+/gi,KL=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Gy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,JL=/[+-]=-?[.\d]+/,$L=/[^,'"\[\]\s]+/gi,rF=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,oi,jn,zw,TS,On={},Cv={},eO,tO=function(t){return(Cv=Iu(t,On))&&Rn},CS=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},Dv=function(t,i){return!i&&console.warn(t)},iO=function(t,i){return t&&(On[t]=i)&&Cv&&(Cv[t]=i)||On},qf=function(){return 0},nF={suppressEvents:!0,isStart:!0},cf={suppressEvents:!0},DS={},ml=[],Bw={},rO,xn={},Wy={},v2=30,Bg=[],PS="",LS=function(t){var i=t[0],r,n;if(Sa(i)||wi(i)||(t=[t]),!(r=(i._gsap||{}).harness)){for(n=Bg.length;n--&&!Bg[n].targetTest(i););r=Bg[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new MO(t[n],r)))||t.splice(n,1);return t},gu=function(t){return t._gsap||LS(ns(t))[0]._gsap},nO=function(t,i,r){return(r=t[i])&&wi(r)?t[i]():ES(r)&&t.getAttribute&&t.getAttribute(i)||r},fn=function(t,i){return(t=t.split(",")).forEach(i)||t},Si=function(t){return Math.round(t*1e5)/1e5||0},sr=function(t){return Math.round(t*1e7)/1e7||0},lh=function(t,i){var r=i.charAt(0),n=parseFloat(i.substr(2));return t=parseFloat(t),r==="+"?t+n:r==="-"?t-n:r==="*"?t*n:t/n},sF=function(t,i){for(var r=i.length,n=0;t.indexOf(i[n])<0&&++n<r;);return n<r},Pv=function(){var t=ml.length,i=ml.slice(0),r,n;for(Bw={},ml.length=0,r=0;r<t;r++)n=i[r],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},sO=function(t,i,r,n){ml.length&&Pv(),t.render(i,r,n||ls),ml.length&&Pv()},aO=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match($L).length<2?i:$i(t)?t.trim():t},oO=function(t){return t},fs=function(t,i){for(var r in i)r in t||(t[r]=i[r]);return t},aF=function(t){return function(i,r){for(var n in r)n in i||n==="duration"&&t||n==="ease"||(i[n]=r[n])}},Iu=function(t,i){for(var r in i)t[r]=i[r];return t},y2=function e(t,i){for(var r in i)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=Sa(i[r])?e(t[r]||(t[r]={}),i[r]):i[r]);return t},Lv=function(t,i){var r={},n;for(n in t)n in i||(r[n]=t[n]);return r},hf=function(t){var i=t.parent||oi,r=t.keyframes?aF(Tr(t.keyframes)):fs;if(dn(t.inherit))for(;i;)r(t,i.vars.defaults),i=i.parent||i._dp;return t},oF=function(t,i){for(var r=t.length,n=r===i.length;n&&r--&&t[r]===i[r];);return r<0},lO=function(t,i,r,n,s){r===void 0&&(r="_first"),n===void 0&&(n="_last");var a=t[n],o;if(s)for(o=i[s];a&&a[s]>o;)a=a._prev;return a?(i._next=a._next,a._next=i):(i._next=t[r],t[r]=i),i._next?i._next._prev=i:t[n]=i,i._prev=a,i.parent=i._dp=t,i},O0=function(t,i,r,n){r===void 0&&(r="_first"),n===void 0&&(n="_last");var s=i._prev,a=i._next;s?s._next=a:t[r]===i&&(t[r]=a),a?a._prev=s:t[n]===i&&(t[n]=s),i._next=i._prev=i.parent=null},po=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},vu=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},lF=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},kw=function(t,i,r,n){return t._startAt&&(ls?t._startAt.revert(cf):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,n))},uF=function e(t){return!t||t._ts&&e(t.parent)},x2=function(t){return t._repeat?Th(t._tTime,t=t.duration()+t._rDelay)*t:0},Th=function(t,i){var r=Math.floor(t/=i);return t&&r===t?r-1:r},Ov=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},R0=function(t){return t._end=sr(t._start+(t._tDur/Math.abs(t._ts||t._rts||Qt)||0))},I0=function(t,i){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=sr(r._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),R0(t),r._dirty||vu(r,t)),t},uO=function(t,i){var r;if((i._time||i._initted&&!i._dur)&&(r=Ov(t.rawTime(),i),(!i._dur||Mp(0,i.totalDuration(),r)-i._tTime>Qt)&&i.render(r,!0)),vu(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Qt}},ia=function(t,i,r,n){return i.parent&&po(i),i._start=sr((fo(r)?r:r||t!==oi?Vn(t,r,i):t._time)+i._delay),i._end=sr(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),lO(t,i,"_first","_last",t._sort?"_start":0),Nw(i)||(t._recent=i),n||uO(t,i),t._ts<0&&I0(t,t._tTime),t},cO=function(t,i){return(On.ScrollTrigger||CS("scrollTrigger",i))&&On.ScrollTrigger.create(i,t)},hO=function(t,i,r,n){if(RS(t,i),!t._initted)return 1;if(!r&&t._pt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&rO!==_n.frame)return ml.push(t),t._lazy=[i,n],1},cF=function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||e(i))},Nw=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},hF=function(t,i,r,n){var s=t.ratio,a=i<0||!i&&(!t._start&&cF(t)&&!(!t._initted&&Nw(t))||(t._ts<0||t._dp._ts<0)&&!Nw(t))?0:1,o=t._rDelay,l=0,u,d,c;if(o&&t._repeat&&(l=Mp(0,t._tDur,i),d=Th(l,o),t._yoyo&&d&1&&(a=1-a),d!==Th(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||ls||n||t._zTime===Qt||!i&&t._zTime){if(!t._initted&&hO(t,i,n,r))return;for(c=t._zTime,t._zTime=i||(r?Qt:0),r||(r=i&&!c),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=l,u=t._pt;u;)u.r(a,u.d),u=u._next;i<0&&kw(t,i,r,!0),t._onUpdate&&!r&&ss(t,"onUpdate"),l&&t._repeat&&!r&&t.parent&&ss(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===a&&(a&&po(t,1),!r&&!ls&&(ss(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},dF=function(t,i,r){var n;if(r>i)for(n=t._first;n&&n._start<=r;){if(n.data==="isPause"&&n._start>i)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if(n.data==="isPause"&&n._start<i)return n;n=n._prev}},Ch=function(t,i,r,n){var s=t._repeat,a=sr(i)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:sr(a*(s+1)+t._rDelay*s):a,o>0&&!n?I0(t,t._tTime=t._tDur*o):t.parent&&R0(t),r||vu(t.parent,t),t},w2=function(t){return t instanceof tn?vu(t):Ch(t,t._dur)},fF={_start:0,endTime:qf,totalDuration:qf},Vn=function e(t,i,r){var n=t.labels,s=t._recent||fF,a=t.duration()>=rs?s.endTime(!1):t._dur,o,l,u;return $i(i)&&(isNaN(i)||i in n)?(l=i.charAt(0),u=i.substr(-1)==="%",o=i.indexOf("="),l==="<"||l===">"?(o>=0&&(i=i.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(i.substr(1))||0)*(u?(o<0?s:r).totalDuration()/100:1)):o<0?(i in n||(n[i]=a),n[i]):(l=parseFloat(i.charAt(o-1)+i.substr(o+1)),u&&r&&(l=l/100*(Tr(r)?r[0]:r).totalDuration()),o>1?e(t,i.substr(0,o-1),r)+l:a+l)):i==null?a:+i},df=function(t,i,r){var n=fo(i[1]),s=(n?2:1)+(t<2?0:1),a=i[s],o,l;if(n&&(a.duration=i[1]),a.parent=r,t){for(o=a,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=dn(l.vars.inherit)&&l.parent;a.immediateRender=dn(o.immediateRender),t<2?a.runBackwards=1:a.startAt=i[s-1]}return new Fi(i[0],a,i[s+1])},Il=function(t,i){return t||t===0?i(t):i},Mp=function(t,i,r){return r<t?t:r>i?i:r},br=function(t,i){return!$i(t)||!(i=rF.exec(t))?"":i[1]},pF=function(t,i,r){return Il(r,function(n){return Mp(t,i,n)})},Fw=[].slice,dO=function(t,i){return t&&Sa(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&Sa(t[0]))&&!t.nodeType&&t!==jn},mF=function(t,i,r){return r===void 0&&(r=[]),t.forEach(function(n){var s;return $i(n)&&!i||dO(n,1)?(s=r).push.apply(s,ns(n)):r.push(n)})||r},ns=function(t,i,r){return Li&&!i&&Li.selector?Li.selector(t):$i(t)&&!r&&(zw||!Dh())?Fw.call((i||TS).querySelectorAll(t),0):Tr(t)?mF(t,r):dO(t)?Fw.call(t,0):t?[t]:[]},Uw=function(t){return t=ns(t)[0]||Dv("Invalid scope")||{},function(i){var r=t.current||t.nativeElement||t;return ns(i,r.querySelectorAll?r:r===t?Dv("Invalid scope")||TS.createElement("div"):t)}},fO=function(t){return t.sort(function(){return .5-Math.random()})},pO=function(t){if(wi(t))return t;var i=Sa(t)?t:{each:t},r=yu(i.ease),n=i.from||0,s=parseFloat(i.base)||0,a={},o=n>0&&n<1,l=isNaN(n)||o,u=i.axis,d=n,c=n;return $i(n)?d=c={center:.5,edges:.5,end:1}[n]||0:!o&&l&&(d=n[0],c=n[1]),function(h,f,m){var p=(m||i).length,g=a[p],v,y,x,w,_,b,A,S,M;if(!g){if(M=i.grid==="auto"?0:(i.grid||[1,rs])[1],!M){for(A=-rs;A<(A=m[M++].getBoundingClientRect().left)&&M<p;);M--}for(g=a[p]=[],v=l?Math.min(M,p)*d-.5:n%M,y=M===rs?0:l?p*c/M-.5:n/M|0,A=0,S=rs,b=0;b<p;b++)x=b%M-v,w=y-(b/M|0),g[b]=_=u?Math.abs(u==="y"?w:x):qL(x*x+w*w),_>A&&(A=_),_<S&&(S=_);n==="random"&&fO(g),g.max=A-S,g.min=S,g.v=p=(parseFloat(i.amount)||parseFloat(i.each)*(M>p?p-1:u?u==="y"?p/M:M:Math.max(M,p/M))||0)*(n==="edges"?-1:1),g.b=p<0?s-p:s,g.u=br(i.amount||i.each)||0,r=r&&p<0?bO(r):r}return p=(g[h]-g.min)/g.max||0,sr(g.b+(r?r(p):p)*g.v)+g.u}},Hw=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var n=sr(Math.round(parseFloat(r)/t)*t*i);return(n-n%1)/i+(fo(r)?0:br(r))}},mO=function(t,i){var r=Tr(t),n,s;return!r&&Sa(t)&&(n=r=t.radius||rs,t.values?(t=ns(t.values),(s=!fo(t[0]))&&(n*=n)):t=Hw(t.increment)),Il(i,r?wi(t)?function(a){return s=t(a),Math.abs(s-a)<=n?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),u=rs,d=0,c=t.length,h,f;c--;)s?(h=t[c].x-o,f=t[c].y-l,h=h*h+f*f):h=Math.abs(t[c]-o),h<u&&(u=h,d=c);return d=!n||u<=n?t[d]:a,s||d===a||fo(a)?d:d+br(a)}:Hw(t))},gO=function(t,i,r,n){return Il(Tr(t)?!i:r===!0?!!(r=0):!n,function(){return Tr(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(i-t+r*.99))/r)*r*n)/n})},gF=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return function(n){return i.reduce(function(s,a){return a(s)},n)}},vF=function(t,i){return function(r){return t(parseFloat(r))+(i||br(r))}},yF=function(t,i,r){return yO(t,i,0,1,r)},vO=function(t,i,r){return Il(r,function(n){return t[~~i(n)]})},xF=function e(t,i,r){var n=i-t;return Tr(t)?vO(t,e(0,t.length),i):Il(r,function(s){return(n+(s-t)%n)%n+t})},wF=function e(t,i,r){var n=i-t,s=n*2;return Tr(t)?vO(t,e(0,t.length-1),i):Il(r,function(a){return a=(s+(a-t)%s)%s||0,t+(a>n?s-a:a)})},Qf=function(t){for(var i=0,r="",n,s,a,o;~(n=t.indexOf("random(",i));)a=t.indexOf(")",n),o=t.charAt(n+7)==="[",s=t.substr(n+7,a-n-7).match(o?$L:Iw),r+=t.substr(i,n-i)+gO(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),i=a+1;return r+t.substr(i,t.length-i)},yO=function(t,i,r,n,s){var a=i-t,o=n-r;return Il(s,function(l){return r+((l-t)/a*o||0)})},_F=function e(t,i,r,n){var s=isNaN(t+i)?0:function(f){return(1-f)*t+f*i};if(!s){var a=$i(t),o={},l,u,d,c,h;if(r===!0&&(n=1)&&(r=null),a)t={p:t},i={p:i};else if(Tr(t)&&!Tr(i)){for(d=[],c=t.length,h=c-2,u=1;u<c;u++)d.push(e(t[u-1],t[u]));c--,s=function(m){m*=c;var p=Math.min(h,~~m);return d[p](m-p)},r=i}else n||(t=Iu(Tr(t)?[]:{},t));if(!d){for(l in i)OS.call(o,t,l,"get",i[l]);s=function(m){return BS(m,o)||(a?t.p:t)}}}return Il(r,s)},_2=function(t,i,r){var n=t.labels,s=rs,a,o,l;for(a in n)o=n[a]-i,o<0==!!r&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},ss=function(t,i,r){var n=t.vars,s=n[i],a=Li,o=t._ctx,l,u,d;if(!!s)return l=n[i+"Params"],u=n.callbackScope||t,r&&ml.length&&Pv(),o&&(Li=o),d=l?s.apply(u,l):s.call(u),Li=a,d},Nd=function(t){return po(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&ss(t,"onInterrupt"),t},Xc,bF=function(t){t=!t.name&&t.default||t;var i=t.name,r=wi(t),n=i&&!r&&t.init?function(){this._props=[]}:t,s={init:qf,render:BS,add:OS,kill:NF,modifier:kF,rawVars:0},a={targetTest:0,get:0,getSetter:zS,aliases:{},register:0};if(Dh(),t!==n){if(xn[i])return;fs(n,fs(Lv(t,s),a)),Iu(n.prototype,Iu(s,Lv(t,a))),xn[n.prop=i]=n,t.targetTest&&(Bg.push(n),DS[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}iO(i,n),t.register&&t.register(Rn,n,pn)},qt=255,Fd={aqua:[0,qt,qt],lime:[0,qt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,qt],navy:[0,0,128],white:[qt,qt,qt],olive:[128,128,0],yellow:[qt,qt,0],orange:[qt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[qt,0,0],pink:[qt,192,203],cyan:[0,qt,qt],transparent:[qt,qt,qt,0]},Xy=function(t,i,r){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(r-i)*t*6:t<.5?r:t*3<2?i+(r-i)*(2/3-t)*6:i)*qt+.5|0},xO=function(t,i,r){var n=t?fo(t)?[t>>16,t>>8&qt,t&qt]:0:Fd.black,s,a,o,l,u,d,c,h,f,m;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Fd[t])n=Fd[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+s+s+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&qt,n&qt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&qt,t&qt]}else if(t.substr(0,3)==="hsl"){if(n=m=t.match(Iw),!i)l=+n[0]%360/360,u=+n[1]/100,d=+n[2]/100,a=d<=.5?d*(u+1):d+u-d*u,s=d*2-a,n.length>3&&(n[3]*=1),n[0]=Xy(l+1/3,s,a),n[1]=Xy(l,s,a),n[2]=Xy(l-1/3,s,a);else if(~t.indexOf("="))return n=t.match(KL),r&&n.length<4&&(n[3]=1),n}else n=t.match(Iw)||Fd.transparent;n=n.map(Number)}return i&&!m&&(s=n[0]/qt,a=n[1]/qt,o=n[2]/qt,c=Math.max(s,a,o),h=Math.min(s,a,o),d=(c+h)/2,c===h?l=u=0:(f=c-h,u=d>.5?f/(2-c-h):f/(c+h),l=c===s?(a-o)/f+(a<o?6:0):c===a?(o-s)/f+2:(s-a)/f+4,l*=60),n[0]=~~(l+.5),n[1]=~~(u*100+.5),n[2]=~~(d*100+.5)),r&&n.length<4&&(n[3]=1),n},wO=function(t){var i=[],r=[],n=-1;return t.split(gl).forEach(function(s){var a=s.match(Wc)||[];i.push.apply(i,a),r.push(n+=a.length+1)}),i.c=r,i},b2=function(t,i,r){var n="",s=(t+n).match(gl),a=i?"hsla(":"rgba(",o=0,l,u,d,c;if(!s)return t;if(s=s.map(function(h){return(h=xO(h,i,1))&&a+(i?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(d=wO(t),l=r.c,l.join(n)!==d.c.join(n)))for(u=t.replace(gl,"1").split(Wc),c=u.length-1;o<c;o++)n+=u[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:r).shift());if(!u)for(u=t.split(gl),c=u.length-1;o<c;o++)n+=u[o]+s[o];return n+u[c]},gl=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Fd)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),SF=/hsl[a]?\(/,_O=function(t){var i=t.join(" "),r;if(gl.lastIndex=0,gl.test(i))return r=SF.test(i),t[1]=b2(t[1],r),t[0]=b2(t[0],r,wO(t[1])),!0},Zf,_n=function(){var e=Date.now,t=500,i=33,r=e(),n=r,s=1e3/240,a=s,o=[],l,u,d,c,h,f,m=function p(g){var v=e()-n,y=g===!0,x,w,_,b;if(v>t&&(r+=v-i),n+=v,_=n-r,x=_-a,(x>0||y)&&(b=++c.frame,h=_-c.time*1e3,c.time=_=_/1e3,a+=x+(x>=s?4:s-x),w=1),y||(l=u(p)),w)for(f=0;f<o.length;f++)o[f](_,h,b,g)};return c={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){eO&&(!zw&&QL()&&(jn=zw=window,TS=jn.document||{},On.gsap=Rn,(jn.gsapVersions||(jn.gsapVersions=[])).push(Rn.version),tO(Cv||jn.GreenSockGlobals||!jn.gsap&&jn||{}),d=jn.requestAnimationFrame),l&&c.sleep(),u=d||function(g){return setTimeout(g,a-c.time*1e3+1|0)},Zf=1,m(2))},sleep:function(){(d?jn.cancelAnimationFrame:clearTimeout)(l),Zf=0,u=qf},lagSmoothing:function(g,v){t=g||1/Qt,i=Math.min(v,t,0)},fps:function(g){s=1e3/(g||240),a=c.time*1e3+s},add:function(g,v,y){var x=v?function(w,_,b,A){g(w,_,b,A),c.remove(x)}:g;return c.remove(g),o[y?"unshift":"push"](x),Dh(),x},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&f>=v&&f--},_listeners:o},c}(),Dh=function(){return!Zf&&_n.wake()},Dt={},AF=/^[\d.\-M][\d.\-,\s]/,MF=/["']/g,EF=function(t){for(var i={},r=t.substr(1,t.length-3).split(":"),n=r[0],s=1,a=r.length,o,l,u;s<a;s++)l=r[s],o=s!==a-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),i[n]=isNaN(u)?u.replace(MF,"").trim():+u,n=l.substr(o+1).trim();return i},TF=function(t){var i=t.indexOf("(")+1,r=t.indexOf(")"),n=t.indexOf("(",i);return t.substring(i,~n&&n<r?t.indexOf(")",r+1):r)},CF=function(t){var i=(t+"").split("("),r=Dt[i[0]];return r&&i.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[EF(i[1])]:TF(t).split(",").map(aO)):Dt._CE&&AF.test(t)?Dt._CE("",t):r},bO=function(t){return function(i){return 1-t(1-i)}},SO=function e(t,i){for(var r=t._first,n;r;)r instanceof tn?e(r,i):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==i&&(r.timeline?e(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},yu=function(t,i){return t&&(wi(t)?t:Dt[t]||CF(t))||i},Yu=function(t,i,r,n){r===void 0&&(r=function(l){return 1-i(1-l)}),n===void 0&&(n=function(l){return l<.5?i(l*2)/2:1-i((1-l)*2)/2});var s={easeIn:i,easeOut:r,easeInOut:n},a;return fn(t,function(o){Dt[o]=On[o]=s,Dt[a=o.toLowerCase()]=r;for(var l in s)Dt[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Dt[o+"."+l]=s[l]}),s},AO=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},Yy=function e(t,i,r){var n=i>=1?i:1,s=(r||(t?.3:.45))/(i<1?i:1),a=s/Rw*(Math.asin(1/n)||0),o=function(d){return d===1?1:n*Math.pow(2,-10*d)*iF((d-a)*s)+1},l=t==="out"?o:t==="in"?function(u){return 1-o(1-u)}:AO(o);return s=Rw/s,l.config=function(u,d){return e(t,u,d)},l},qy=function e(t,i){i===void 0&&(i=1.70158);var r=function(a){return a?--a*a*((i+1)*a+i)+1:0},n=t==="out"?r:t==="in"?function(s){return 1-r(1-s)}:AO(r);return n.config=function(s){return e(t,s)},n};fn("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var i=t<5?t+1:t;Yu(e+",Power"+(i-1),t?function(r){return Math.pow(r,i)}:function(r){return r},function(r){return 1-Math.pow(1-r,i)},function(r){return r<.5?Math.pow(r*2,i)/2:1-Math.pow((1-r)*2,i)/2})});Dt.Linear.easeNone=Dt.none=Dt.Linear.easeIn;Yu("Elastic",Yy("in"),Yy("out"),Yy());(function(e,t){var i=1/t,r=2*i,n=2.5*i,s=function(o){return o<i?e*o*o:o<r?e*Math.pow(o-1.5/t,2)+.75:o<n?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Yu("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Yu("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});Yu("Circ",function(e){return-(qL(1-e*e)-1)});Yu("Sine",function(e){return e===1?1:-tF(e*$4)+1});Yu("Back",qy("in"),qy("out"),qy());Dt.SteppedEase=Dt.steps=On.SteppedEase={config:function(t,i){t===void 0&&(t=1);var r=1/t,n=t+(i?0:1),s=i?1:0,a=1-Qt;return function(o){return((n*Mp(0,a,o)|0)+s)*r}}};Eh.ease=Dt["quad.out"];fn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return PS+=e+","+e+"Params,"});var MO=function(t,i){this.id=eF++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:nO,this.set=i?i.getSetter:zS},Ph=function(){function e(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Ch(this,+i.duration,1,1),this.data=i.data,Li&&(this._ctx=Li,Li.data.push(this)),Zf||_n.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Ch(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,n){if(Dh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(I0(this,r),!s._dp||s.parent||uO(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&ia(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Qt||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),sO(this,r,n)),this},t.time=function(r,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+x2(this))%(this._dur+this._rDelay)||(r?this._dur:0),n):this._time},t.totalProgress=function(r,n){return arguments.length?this.totalTime(this.totalDuration()*r,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(r,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+x2(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(r,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,n):this._repeat?Th(this._tTime,s)+1:1},t.timeScale=function(r){if(!arguments.length)return this._rts===-Qt?0:this._rts;if(this._rts===r)return this;var n=this.parent&&this._ts?Ov(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Qt?0:this._rts,this.totalTime(Mp(-this._delay,this._tDur,n),!0),R0(this),lF(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Dh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Qt&&(this._tTime-=Qt)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&ia(n,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(dn(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var n=this.parent||this._dp;return n?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ov(n.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=cf);var n=ls;return ls=r,this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents),this.data!=="nested"&&po(this),ls=n,this},t.globalTime=function(r){for(var n=this,s=arguments.length?r:n.rawTime();n;)s=n._start+s/(n._ts||1),n=n._dp;return!this.parent&&this.vars.immediateRender?-1:s},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,w2(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var n=this._time;return this._rDelay=r,w2(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,n){return this.totalTime(Vn(this,r),dn(n))},t.restart=function(r,n){return this.play().totalTime(r?-this._delay:0,dn(n))},t.play=function(r,n){return r!=null&&this.seek(r,n),this.reversed(!1).paused(!1)},t.reverse=function(r,n){return r!=null&&this.seek(r||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(r,n){return r!=null&&this.seek(r,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Qt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Qt,this},t.isActive=function(){var r=this.parent||this._dp,n=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=n&&s<this.endTime(!0)-Qt)},t.eventCallback=function(r,n,s){var a=this.vars;return arguments.length>1?(n?(a[r]=n,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=n)):delete a[r],this):a[r]},t.then=function(r){var n=this;return new Promise(function(s){var a=wi(r)?r:oO,o=function(){var u=n.then;n.then=null,wi(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=u),s(a),n.then=u};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){Nd(this)},e}();fs(Ph.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Qt,_prom:0,_ps:!1,_rts:1});var tn=function(e){YL(t,e);function t(r,n){var s;return r===void 0&&(r={}),s=e.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=dn(r.sortChildren),oi&&ia(r.parent||oi,Va(s),n),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&cO(Va(s),r.scrollTrigger),s}var i=t.prototype;return i.to=function(n,s,a){return df(0,arguments,this),this},i.from=function(n,s,a){return df(1,arguments,this),this},i.fromTo=function(n,s,a,o){return df(2,arguments,this),this},i.set=function(n,s,a){return s.duration=0,s.parent=this,hf(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Fi(n,s,Vn(this,a),1),this},i.call=function(n,s,a){return ia(this,Fi.delayedCall(0,n,s),a)},i.staggerTo=function(n,s,a,o,l,u,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=d,a.parent=this,new Fi(n,a,Vn(this,l)),this},i.staggerFrom=function(n,s,a,o,l,u,d){return a.runBackwards=1,hf(a).immediateRender=dn(a.immediateRender),this.staggerTo(n,s,a,o,l,u,d)},i.staggerFromTo=function(n,s,a,o,l,u,d,c){return o.startAt=a,hf(o).immediateRender=dn(o.immediateRender),this.staggerTo(n,s,o,l,u,d,c)},i.render=function(n,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=n<=0?0:sr(n),c=this._zTime<0!=n<0&&(this._initted||!u),h,f,m,p,g,v,y,x,w,_,b,A;if(this!==oi&&d>l&&n>=0&&(d=l),d!==this._tTime||a||c){if(o!==this._time&&u&&(d+=this._time-o,n+=this._time-o),h=d,w=this._start,x=this._ts,v=!x,c&&(u||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(b=this._yoyo,g=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,a);if(h=sr(d%g),d===l?(p=this._repeat,h=u):(p=~~(d/g),p&&p===d/g&&(h=u,p--),h>u&&(h=u)),_=Th(this._tTime,g),!o&&this._tTime&&_!==p&&(_=p),b&&p&1&&(h=u-h,A=1),p!==_&&!this._lock){var S=b&&_&1,M=S===(b&&p&1);if(p<_&&(S=!S),o=S?0:u,this._lock=1,this.render(o||(A?0:sr(p*g)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&ss(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,M&&(this._lock=2,o=S?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;SO(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=dF(this,sr(o),sr(h)),y&&(d-=h-(h=y._start))),this._tTime=d,this._time=h,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&h&&!s&&(ss(this,"onStart"),this._tTime!==d))return this;if(h>=o&&n>=0)for(f=this._first;f;){if(m=f._next,(f._act||h>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,s,a);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,a),h!==this._time||!this._ts&&!v){y=0,m&&(d+=this._zTime=-Qt);break}}f=m}else{a=a||ls,f=this._last;for(var E=n<0?n:h;f;){if(m=f._prev,(f._act||E<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,s,a);if(f.render(f._ts>0?(E-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(E-f._start)*f._ts,s,a),h!==this._time||!this._ts&&!v){y=0,m&&(d+=this._zTime=E?-Qt:Qt);break}}f=m}}if(y&&!s&&(this.pause(),y.render(h>=o?0:-Qt)._zTime=h>=o?1:-1,this._ts))return this._start=w,R0(this),this.render(n,s,a);this._onUpdate&&!s&&ss(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&o)&&(w===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(d===l&&this._ts>0||!d&&this._ts<0)&&po(this,1),!s&&!(n<0&&!o)&&(d||o||!l)&&(ss(this,d===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(n,s){var a=this;if(fo(s)||(s=Vn(this,s,n)),!(n instanceof Ph)){if(Tr(n))return n.forEach(function(o){return a.add(o,s)}),this;if($i(n))return this.addLabel(n,s);if(wi(n))n=Fi.delayedCall(0,n);else return this}return this!==n?ia(this,n,s):this},i.getChildren=function(n,s,a,o){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-rs);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof Fi?s&&l.push(u):(a&&l.push(u),n&&l.push.apply(l,u.getChildren(!0,s,a)))),u=u._next;return l},i.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},i.remove=function(n){return $i(n)?this.removeLabel(n):wi(n)?this.killTweensOf(n):(O0(this,n),n===this._recent&&(this._recent=this._last),vu(this))},i.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=sr(_n.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),e.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},i.addLabel=function(n,s){return this.labels[n]=Vn(this,s),this},i.removeLabel=function(n){return delete this.labels[n],this},i.addPause=function(n,s,a){var o=Fi.delayedCall(0,s||qf,a);return o.data="isPause",this._hasPause=1,ia(this,o,Vn(this,n))},i.removePause=function(n){var s=this._first;for(n=Vn(this,n);s;)s._start===n&&s.data==="isPause"&&po(s),s=s._next},i.killTweensOf=function(n,s,a){for(var o=this.getTweensOf(n,a),l=o.length;l--;)Qo!==o[l]&&o[l].kill(n,s);return this},i.getTweensOf=function(n,s){for(var a=[],o=ns(n),l=this._first,u=fo(s),d;l;)l instanceof Fi?sF(l._targets,o)&&(u?(!Qo||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(d=l.getTweensOf(o,s)).length&&a.push.apply(a,d),l=l._next;return a},i.tweenTo=function(n,s){s=s||{};var a=this,o=Vn(a,n),l=s,u=l.startAt,d=l.onStart,c=l.onStartParams,h=l.immediateRender,f,m=Fi.to(a,fs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||Qt,onStart:function(){if(a.pause(),!f){var g=s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());m._dur!==g&&Ch(m,g,0,1).render(m._time,!0,!0),f=1}d&&d.apply(m,c||[])}},s));return h?m.render(0):m},i.tweenFromTo=function(n,s,a){return this.tweenTo(s,fs({startAt:{time:Vn(this,n)}},a))},i.recent=function(){return this._recent},i.nextLabel=function(n){return n===void 0&&(n=this._time),_2(this,Vn(this,n))},i.previousLabel=function(n){return n===void 0&&(n=this._time),_2(this,Vn(this,n),1)},i.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Qt)},i.shiftChildren=function(n,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,u;o;)o._start>=a&&(o._start+=n,o._end+=n),o=o._next;if(s)for(u in l)l[u]>=a&&(l[u]+=n);return vu(this)},i.invalidate=function(){var n=this._first;for(this._lock=0;n;)n.invalidate(),n=n._next;return e.prototype.invalidate.call(this)},i.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),vu(this)},i.totalDuration=function(n){var s=0,a=this,o=a._last,l=rs,u,d,c;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(c=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,ia(a,o,d-o._delay,1)._lock=0):l=d,d<0&&o._ts&&(s-=d,(!c&&!a._dp||c&&c.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=u;Ch(a,a===oi&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(n){if(oi._ts&&(sO(oi,Ov(n,oi)),rO=_n.frame),_n.frame>=v2){v2+=Pn.autoSleep||120;var s=oi._first;if((!s||!s._ts)&&Pn.autoSleep&&_n._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||_n.sleep()}}},t}(Ph);fs(tn.prototype,{_lock:0,_hasPause:0,_forcing:0});var DF=function(t,i,r,n,s,a,o){var l=new pn(this._pt,t,i,0,1,LO,null,s),u=0,d=0,c,h,f,m,p,g,v,y;for(l.b=r,l.e=n,r+="",n+="",(v=~n.indexOf("random("))&&(n=Qf(n)),a&&(y=[r,n],a(y,t,i),r=y[0],n=y[1]),h=r.match(Gy)||[];c=Gy.exec(n);)m=c[0],p=n.substring(u,c.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),m!==h[d++]&&(g=parseFloat(h[d-1])||0,l._pt={_next:l._pt,p:p||d===1?p:",",s:g,c:m.charAt(1)==="="?lh(g,m)-g:parseFloat(m)-g,m:f&&f<4?Math.round:0},u=Gy.lastIndex);return l.c=u<n.length?n.substring(u,n.length):"",l.fp=o,(JL.test(n)||v)&&(l.e=0),this._pt=l,l},OS=function(t,i,r,n,s,a,o,l,u,d){wi(n)&&(n=n(s||0,t,a));var c=t[i],h=r!=="get"?r:wi(c)?u?t[i.indexOf("set")||!wi(t["get"+i.substr(3)])?i:"get"+i.substr(3)](u):t[i]():c,f=wi(c)?u?IF:DO:IS,m;if($i(n)&&(~n.indexOf("random(")&&(n=Qf(n)),n.charAt(1)==="="&&(m=lh(h,n)+(br(h)||0),(m||m===0)&&(n=m))),!d||h!==n||Vw)return!isNaN(h*n)&&n!==""?(m=new pn(this._pt,t,i,+h||0,n-(h||0),typeof c=="boolean"?BF:PO,0,f),u&&(m.fp=u),o&&m.modifier(o,this,t),this._pt=m):(!c&&!(i in t)&&CS(i,n),DF.call(this,t,i,h,n,f,l||Pn.stringFilter,u))},PF=function(t,i,r,n,s){if(wi(t)&&(t=ff(t,s,i,r,n)),!Sa(t)||t.style&&t.nodeType||Tr(t)||ZL(t))return $i(t)?ff(t,s,i,r,n):t;var a={},o;for(o in t)a[o]=ff(t[o],s,i,r,n);return a},EO=function(t,i,r,n,s,a){var o,l,u,d;if(xn[t]&&(o=new xn[t]).init(s,o.rawVars?i[t]:PF(i[t],n,s,a,r),r,n,a)!==!1&&(r._pt=l=new pn(r._pt,s,t,0,1,o.render,o,0,o.priority),r!==Xc))for(u=r._ptLookup[r._targets.indexOf(s)],d=o._props.length;d--;)u[o._props[d]]=l;return o},Qo,Vw,RS=function e(t,i){var r=t.vars,n=r.ease,s=r.startAt,a=r.immediateRender,o=r.lazy,l=r.onUpdate,u=r.onUpdateParams,d=r.callbackScope,c=r.runBackwards,h=r.yoyoEase,f=r.keyframes,m=r.autoRevert,p=t._dur,g=t._startAt,v=t._targets,y=t.parent,x=y&&y.data==="nested"?y.vars.targets:v,w=t._overwrite==="auto"&&!MS,_=t.timeline,b,A,S,M,E,C,L,N,R,V,F,H,P;if(_&&(!f||!n)&&(n="none"),t._ease=yu(n,Eh.ease),t._yEase=h?bO(yu(h===!0?n:h,Eh.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!_&&!!r.runBackwards,!_||f&&!r.stagger){if(N=v[0]?gu(v[0]).harness:0,H=N&&r[N.prop],b=Lv(r,DS),g&&(i<0&&c&&a&&!m?g.render(-1,!0):g.revert(c&&p?cf:nF),g._lazy=0),s){if(po(t._startAt=Fi.set(v,fs({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:dn(o),startAt:null,delay:0,onUpdate:l,onUpdateParams:u,callbackScope:d,stagger:0},s))),i<0&&(ls||!a&&!m)&&t._startAt.revert(cf),a&&p&&i<=0){i&&(t._zTime=i);return}}else if(c&&p&&!g){if(i&&(a=!1),S=fs({overwrite:!1,data:"isFromStart",lazy:a&&dn(o),immediateRender:a,stagger:0,parent:y},b),H&&(S[N.prop]=H),po(t._startAt=Fi.set(v,S)),i<0&&(ls?t._startAt.revert(cf):t._startAt.render(-1,!0)),t._zTime=i,!a)e(t._startAt,Qt);else if(!i)return}for(t._pt=t._ptCache=0,o=p&&dn(o)||o&&!p,A=0;A<v.length;A++){if(E=v[A],L=E._gsap||LS(v)[A]._gsap,t._ptLookup[A]=V={},Bw[L.id]&&ml.length&&Pv(),F=x===v?A:x.indexOf(E),N&&(R=new N).init(E,H||b,t,F,x)!==!1&&(t._pt=M=new pn(t._pt,E,R.name,0,1,R.render,R,0,R.priority),R._props.forEach(function(z){V[z]=M}),R.priority&&(C=1)),!N||H)for(S in b)xn[S]&&(R=EO(S,b,t,F,E,x))?R.priority&&(C=1):V[S]=M=OS.call(t,E,S,"get",b[S],F,x,0,r.stringFilter);t._op&&t._op[A]&&t.kill(E,t._op[A]),w&&t._pt&&(Qo=t,oi.killTweensOf(E,V,t.globalTime(i)),P=!t.parent,Qo=0),t._pt&&o&&(Bw[L.id]=1)}C&&OO(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!P,f&&i<=0&&_.render(rs,!0,!0)},LF=function(t,i,r,n,s,a,o){var l=(t._pt&&t._ptCache||(t._ptCache={}))[i],u,d,c,h;if(!l)for(l=t._ptCache[i]=[],c=t._ptLookup,h=t._targets.length;h--;){if(u=c[h][i],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==i&&u.fp!==i;)u=u._next;if(!u)return Vw=1,t.vars[i]="+=0",RS(t,o),Vw=0,1;l.push(u)}for(h=l.length;h--;)d=l[h],u=d._pt||d,u.s=(n||n===0)&&!s?n:u.s+(n||0)+a*u.c,u.c=r-u.s,d.e&&(d.e=Si(r)+br(d.e)),d.b&&(d.b=u.s+br(d.b))},OF=function(t,i){var r=t[0]?gu(t[0]).harness:0,n=r&&r.aliases,s,a,o,l;if(!n)return i;s=Iu({},i);for(a in n)if(a in s)for(l=n[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},RF=function(t,i,r,n){var s=i.ease||n||"power1.inOut",a,o;if(Tr(i))o=r[t]||(r[t]=[]),i.forEach(function(l,u){return o.push({t:u/(i.length-1)*100,v:l,e:s})});else for(a in i)o=r[a]||(r[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:i[a],e:s})},ff=function(t,i,r,n,s){return wi(t)?t.call(i,r,n,s):$i(t)&&~t.indexOf("random(")?Qf(t):t},TO=PS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",CO={};fn(TO+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return CO[e]=1});var Fi=function(e){YL(t,e);function t(r,n,s,a){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=e.call(this,a?n:hf(n))||this;var l=o.vars,u=l.duration,d=l.delay,c=l.immediateRender,h=l.stagger,f=l.overwrite,m=l.keyframes,p=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=n.parent||oi,x=(Tr(r)||ZL(r)?fo(r[0]):"length"in n)?[r]:ns(r),w,_,b,A,S,M,E,C;if(o._targets=x.length?LS(x):Dv("GSAP target "+r+" not found. https://greensock.com",!Pn.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,m||h||am(u)||am(d)){if(n=o.vars,w=o.timeline=new tn({data:"nested",defaults:p||{},targets:y&&y.data==="nested"?y.vars.targets:x}),w.kill(),w.parent=w._dp=Va(o),w._start=0,h||am(u)||am(d)){if(A=x.length,E=h&&pO(h),Sa(h))for(S in h)~TO.indexOf(S)&&(C||(C={}),C[S]=h[S]);for(_=0;_<A;_++)b=Lv(n,CO),b.stagger=0,v&&(b.yoyoEase=v),C&&Iu(b,C),M=x[_],b.duration=+ff(u,Va(o),_,M,x),b.delay=(+ff(d,Va(o),_,M,x)||0)-o._delay,!h&&A===1&&b.delay&&(o._delay=d=b.delay,o._start+=d,b.delay=0),w.to(M,b,E?E(_,M,x):0),w._ease=Dt.none;w.duration()?u=d=0:o.timeline=0}else if(m){hf(fs(w.vars.defaults,{ease:"none"})),w._ease=yu(m.ease||n.ease||"none");var L=0,N,R,V;if(Tr(m))m.forEach(function(F){return w.to(x,F,">")}),w.duration();else{b={};for(S in m)S==="ease"||S==="easeEach"||RF(S,m[S],b,m.easeEach);for(S in b)for(N=b[S].sort(function(F,H){return F.t-H.t}),L=0,_=0;_<N.length;_++)R=N[_],V={ease:R.e,duration:(R.t-(_?N[_-1].t:0))/100*u},V[S]=R.v,w.to(x,V,L),L+=V.duration;w.duration()<u&&w.to({},{duration:u-w.duration()})}}u||o.duration(u=w.duration())}else o.timeline=0;return f===!0&&!MS&&(Qo=Va(o),oi.killTweensOf(x),Qo=0),ia(y,Va(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(c||!u&&!m&&o._start===sr(y._time)&&dn(c)&&uF(Va(o))&&y.data!=="nested")&&(o._tTime=-Qt,o.render(Math.max(0,-d))),g&&cO(Va(o),g),o}var i=t.prototype;return i.render=function(n,s,a){var o=this._time,l=this._tDur,u=this._dur,d=n<0,c=n>l-Qt&&!d?l:n<Qt?0:n,h,f,m,p,g,v,y,x,w;if(!u)hF(this,n,s,a);else if(c!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(h=c,x=this.timeline,this._repeat){if(p=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+n,s,a);if(h=sr(c%p),c===l?(m=this._repeat,h=u):(m=~~(c/p),m&&m===c/p&&(h=u,m--),h>u&&(h=u)),v=this._yoyo&&m&1,v&&(w=this._yEase,h=u-h),g=Th(this._tTime,p),h===o&&!a&&this._initted)return this._tTime=c,this;m!==g&&(x&&this._yEase&&SO(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=a=1,this.render(sr(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(hO(this,d?n:h,a,s))return this._tTime=0,this;if(o!==this._time)return this;if(u!==this._dur)return this.render(n,s,a)}if(this._tTime=c,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(w||this._ease)(h/u),this._from&&(this.ratio=y=1-y),h&&!o&&!s&&(ss(this,"onStart"),this._tTime!==c))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;x&&x.render(n<0?n:!h&&v?-Qt:x._dur*x._ease(h/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(d&&kw(this,n,s,a),ss(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!s&&this.parent&&ss(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(d&&!this._onUpdate&&kw(this,n,!0,!0),(n||!u)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&po(this,1),!s&&!(d&&!o)&&(c||o)&&(ss(this,c===l?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},i.resetTo=function(n,s,a,o){Zf||_n.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||RS(this,l),u=this._ease(l/this._dur),LF(this,n,s,a,o,u,l)?this.resetTo(n,s,a,o):(I0(this,0),this.parent||lO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Nd(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Qo&&Qo.vars.overwrite!==!0)._first||Nd(this),this.parent&&a!==this.timeline.totalDuration()&&Ch(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=n?ns(n):o,u=this._ptLookup,d=this._pt,c,h,f,m,p,g,v;if((!s||s==="all")&&oF(o,l))return s==="all"&&(this._pt=0),Nd(this);for(c=this._op=this._op||[],s!=="all"&&($i(s)&&(p={},fn(s,function(y){return p[y]=1}),s=p),s=OF(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){h=u[v],s==="all"?(c[v]=s,m=h,f={}):(f=c[v]=c[v]||{},m=s);for(p in m)g=h&&h[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&O0(this,g,"_pt"),delete h[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&d&&Nd(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return df(1,arguments)},t.delayedCall=function(n,s,a,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(n,s,a){return df(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,a){return oi.killTweensOf(n,s,a)},t}(Ph);fs(Fi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});fn("staggerTo,staggerFrom,staggerFromTo",function(e){Fi[e]=function(){var t=new tn,i=Fw.call(arguments,0);return i.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,i)}});var IS=function(t,i,r){return t[i]=r},DO=function(t,i,r){return t[i](r)},IF=function(t,i,r,n){return t[i](n.fp,r)},zF=function(t,i,r){return t.setAttribute(i,r)},zS=function(t,i){return wi(t[i])?DO:ES(t[i])&&t.setAttribute?zF:IS},PO=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},BF=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},LO=function(t,i){var r=i._pt,n="";if(!t&&i.b)n=i.b;else if(t===1&&i.e)n=i.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+n,r=r._next;n+=i.c}i.set(i.t,i.p,n,i)},BS=function(t,i){for(var r=i._pt;r;)r.r(t,r.d),r=r._next},kF=function(t,i,r,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(t,i,r),s=a},NF=function(t){for(var i=this._pt,r,n;i;)n=i._next,i.p===t&&!i.op||i.op===t?O0(this,i,"_pt"):i.dep||(r=1),i=n;return!r},FF=function(t,i,r,n){n.mSet(t,i,n.m.call(n.tween,r,n.mt),n)},OO=function(t){for(var i=t._pt,r,n,s,a;i;){for(r=i._next,n=s;n&&n.pr>i.pr;)n=n._next;(i._prev=n?n._prev:a)?i._prev._next=i:s=i,(i._next=n)?n._prev=i:a=i,i=r}t._pt=s},pn=function(){function e(i,r,n,s,a,o,l,u,d){this.t=r,this.s=s,this.c=a,this.p=n,this.r=o||PO,this.d=l||this,this.set=u||IS,this.pr=d||0,this._next=i,i&&(i._prev=this)}var t=e.prototype;return t.modifier=function(r,n,s){this.mSet=this.mSet||this.set,this.set=FF,this.m=r,this.mt=s,this.tween=n},e}();fn(PS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return DS[e]=1});On.TweenMax=On.TweenLite=Fi;On.TimelineLite=On.TimelineMax=tn;oi=new tn({sortChildren:!1,defaults:Eh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pn.stringFilter=_O;var Lh=[],kg={},UF=[],S2=0,Qy=function(t){return(kg[t]||UF).map(function(i){return i()})},jw=function(){var t=Date.now(),i=[];t-S2>2&&(Qy("matchMediaInit"),Lh.forEach(function(r){var n=r.queries,s=r.conditions,a,o,l,u;for(o in n)a=jn.matchMedia(n[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,u=1);u&&(r.revert(),l&&i.push(r))}),Qy("matchMediaRevert"),i.forEach(function(r){return r.onMatch(r)}),S2=t,Qy("matchMedia"))},RO=function(){function e(i,r){this.selector=r&&Uw(r),this.data=[],this._r=[],this.isReverted=!1,i&&this.add(i)}var t=e.prototype;return t.add=function(r,n,s){wi(r)&&(s=n,n=r,r=wi);var a=this,o=function(){var u=Li,d=a.selector,c;return u&&u!==a&&u.data.push(a),s&&(a.selector=Uw(s)),Li=a,c=n.apply(a,arguments),wi(c)&&a._r.push(c),Li=u,a.selector=d,a.isReverted=!1,c};return a.last=o,r===wi?o(a):r?a[r]=o:o},t.ignore=function(r){var n=Li;Li=null,r(this),Li=n},t.getTweens=function(){var r=[];return this.data.forEach(function(n){return n instanceof e?r.push.apply(r,n.getTweens()):n instanceof Fi&&r.push(n)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,n){var s=this;if(r?(this.getTweens().map(function(o){return{g:o.globalTime(0),t:o}}).sort(function(o,l){return l.g-o.g||-1}).forEach(function(o){return o.t.revert(r)}),this.data.forEach(function(o){return!(o instanceof Ph)&&o.revert&&o.revert(r)}),this._r.forEach(function(o){return o(r,s)}),this.isReverted=!0):this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),n){var a=Lh.indexOf(this);~a&&Lh.splice(a,1)}},t.revert=function(r){this.kill(r||{})},e}(),HF=function(){function e(i){this.contexts=[],this.scope=i}var t=e.prototype;return t.add=function(r,n,s){Sa(r)||(r={matches:r});var a=new RO(0,s||this.scope),o=a.conditions={},l,u,d;this.contexts.push(a),n=a.add("onMatch",n),a.queries=r;for(u in r)u==="all"?d=1:(l=jn.matchMedia(r[u]),l&&(Lh.indexOf(a)<0&&Lh.push(a),(o[u]=l.matches)&&(d=1),l.addListener?l.addListener(jw):l.addEventListener("change",jw)));return d&&n(a),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(n){return n.kill(r,!0)})},e}(),Rv={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];i.forEach(function(n){return bF(n)})},timeline:function(t){return new tn(t)},getTweensOf:function(t,i){return oi.getTweensOf(t,i)},getProperty:function(t,i,r,n){$i(t)&&(t=ns(t)[0]);var s=gu(t||{}).get,a=r?oO:aO;return r==="native"&&(r=""),t&&(i?a((xn[i]&&xn[i].get||s)(t,i,r,n)):function(o,l,u){return a((xn[o]&&xn[o].get||s)(t,o,l,u))})},quickSetter:function(t,i,r){if(t=ns(t),t.length>1){var n=t.map(function(d){return Rn.quickSetter(d,i,r)}),s=n.length;return function(d){for(var c=s;c--;)n[c](d)}}t=t[0]||{};var a=xn[i],o=gu(t),l=o.harness&&(o.harness.aliases||{})[i]||i,u=a?function(d){var c=new a;Xc._pt=0,c.init(t,r?d+r:d,Xc,0,[t]),c.render(1,c),Xc._pt&&BS(1,Xc)}:o.set(t,l);return a?u:function(d){return u(t,l,r?d+r:d,o,1)}},quickTo:function(t,i,r){var n,s=Rn.to(t,Iu((n={},n[i]="+=0.1",n.paused=!0,n),r||{})),a=function(l,u,d){return s.resetTo(i,l,u,d)};return a.tween=s,a},isTweening:function(t){return oi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=yu(t.ease,Eh.ease)),y2(Eh,t||{})},config:function(t){return y2(Pn,t||{})},registerEffect:function(t){var i=t.name,r=t.effect,n=t.plugins,s=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!xn[o]&&!On[o]&&Dv(i+" effect requires "+o+" plugin.")}),Wy[i]=function(o,l,u){return r(ns(o),fs(l||{},s),u)},a&&(tn.prototype[i]=function(o,l,u){return this.add(Wy[i](o,Sa(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,i){Dt[t]=yu(i)},parseEase:function(t,i){return arguments.length?yu(t,i):Dt},getById:function(t){return oi.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var r=new tn(t),n,s;for(r.smoothChildTiming=dn(t.smoothChildTiming),oi.remove(r),r._dp=0,r._time=r._tTime=oi._time,n=oi._first;n;)s=n._next,(i||!(!n._dur&&n instanceof Fi&&n.vars.onComplete===n._targets[0]))&&ia(r,n,n._start-n._delay),n=s;return ia(oi,r,0),r},context:function(t,i){return t?new RO(t,i):Li},matchMedia:function(t){return new HF(t)},matchMediaRefresh:function(){return Lh.forEach(function(t){var i=t.conditions,r,n;for(n in i)i[n]&&(i[n]=!1,r=1);r&&t.revert()})||jw()},addEventListener:function(t,i){var r=kg[t]||(kg[t]=[]);~r.indexOf(i)||r.push(i)},removeEventListener:function(t,i){var r=kg[t],n=r&&r.indexOf(i);n>=0&&r.splice(n,1)},utils:{wrap:xF,wrapYoyo:wF,distribute:pO,random:gO,snap:mO,normalize:yF,getUnit:br,clamp:pF,splitColor:xO,toArray:ns,selector:Uw,mapRange:yO,pipe:gF,unitize:vF,interpolate:_F,shuffle:fO},install:tO,effects:Wy,ticker:_n,updateRoot:tn.updateRoot,plugins:xn,globalTimeline:oi,core:{PropTween:pn,globals:iO,Tween:Fi,Timeline:tn,Animation:Ph,getCache:gu,_removeLinkedListItem:O0,reverting:function(){return ls},context:function(t){return t&&Li&&(Li.data.push(t),t._ctx=Li),Li},suppressOverwrites:function(t){return MS=t}}};fn("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Rv[e]=Fi[e]});_n.add(tn.updateRoot);Xc=Rv.to({},{duration:0});var VF=function(t,i){for(var r=t._pt;r&&r.p!==i&&r.op!==i&&r.fp!==i;)r=r._next;return r},jF=function(t,i){var r=t._targets,n,s,a;for(n in i)for(s=r.length;s--;)a=t._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=VF(a,n)),a&&a.modifier&&a.modifier(i[n],t,r[s],n))},Zy=function(t,i){return{name:t,rawVars:1,init:function(n,s,a){a._onInit=function(o){var l,u;if($i(s)&&(l={},fn(s,function(d){return l[d]=1}),s=l),i){l={};for(u in s)l[u]=i(s[u]);s=l}jF(o,s)}}}},Rn=Rv.registerPlugin({name:"attr",init:function(t,i,r,n,s){var a,o,l;this.tween=r;for(a in i)l=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(l||0)+"",i[a],n,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(t,i){for(var r=i._pt;r;)ls?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,i){for(var r=i.length;r--;)this.add(t,r,t[r]||0,i[r],0,0,0,0,0,1)}},Zy("roundProps",Hw),Zy("modifiers"),Zy("snap",mO))||Rv;Fi.version=tn.version=Rn.version="3.11.1";eO=1;QL()&&Dh();Dt.Power0;Dt.Power1;Dt.Power2;Dt.Power3;Dt.Power4;Dt.Linear;Dt.Quad;Dt.Cubic;Dt.Quart;Dt.Quint;Dt.Strong;Dt.Elastic;Dt.Back;Dt.SteppedEase;Dt.Bounce;Dt.Sine;Dt.Expo;Dt.Circ;/*!
 * CSSPlugin 3.11.1
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var A2,Zo,uh,kS,uu,M2,NS,GF=function(){return typeof window<"u"},mo={},Zl=180/Math.PI,ch=Math.PI/180,tc=Math.atan2,E2=1e8,FS=/([A-Z])/g,WF=/(left|right|width|margin|padding|x)/i,XF=/[\s,\(]\S/,eo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Gw=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},YF=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},qF=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},QF=function(t,i){var r=i.s+i.c*t;i.set(i.t,i.p,~~(r+(r<0?-.5:.5))+i.u,i)},IO=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},zO=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},ZF=function(t,i,r){return t.style[i]=r},KF=function(t,i,r){return t.style.setProperty(i,r)},JF=function(t,i,r){return t._gsap[i]=r},$F=function(t,i,r){return t._gsap.scaleX=t._gsap.scaleY=r},eU=function(t,i,r,n,s){var a=t._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},tU=function(t,i,r,n,s){var a=t._gsap;a[i]=r,a.renderTransform(s,a)},vi="transform",Is=vi+"Origin",iU=function(t){var i=this,r=this.target,n=r.style;if(t in mo){if(this.tfm=this.tfm||{},t!=="transform"&&(t=eo[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return i.tfm[s]=Wa(r,s)}):this.tfm[t]=r._gsap.x?r._gsap[t]:Wa(r,t)),this.props.indexOf(vi)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Is,"")),t=vi}n&&this.props.push(t,n[t])},BO=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},rU=function(){var t=this.props,i=this.target,r=i.style,n=i._gsap,s,a;for(s=0;s<t.length;s+=2)t[s+1]?r[t[s]]=t[s+1]:r.removeProperty(t[s].replace(FS,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),s=NS(),s&&!s.isStart&&!r[vi]&&(BO(r),n.uncache=1)}},kO=function(t,i){var r={target:t,props:[],revert:rU,save:iU};return i&&i.split(",").forEach(function(n){return r.save(n)}),r},NO,Ww=function(t,i){var r=Zo.createElementNS?Zo.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Zo.createElement(t);return r.style?r:Zo.createElement(t)},va=function e(t,i,r){var n=getComputedStyle(t);return n[i]||n.getPropertyValue(i.replace(FS,"-$1").toLowerCase())||n.getPropertyValue(i)||!r&&e(t,Oh(i)||i,1)||""},T2="O,Moz,ms,Ms,Webkit".split(","),Oh=function(t,i,r){var n=i||uu,s=n.style,a=5;if(t in s&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(T2[a]+t in s););return a<0?null:(a===3?"ms":a>=0?T2[a]:"")+t},Xw=function(){GF()&&window.document&&(A2=window,Zo=A2.document,uh=Zo.documentElement,uu=Ww("div")||{style:{}},Ww("div"),vi=Oh(vi),Is=vi+"Origin",uu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",NO=!!Oh("perspective"),NS=Rn.core.reverting,kS=1)},Ky=function e(t){var i=Ww("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,s=this.style.cssText,a;if(uh.appendChild(i),i.appendChild(this),this.style.display="block",t)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch{}else this._gsapBBox&&(a=this._gsapBBox());return r&&(n?r.insertBefore(this,n):r.appendChild(this)),uh.removeChild(i),this.style.cssText=s,a},C2=function(t,i){for(var r=i.length;r--;)if(t.hasAttribute(i[r]))return t.getAttribute(i[r])},FO=function(t){var i;try{i=t.getBBox()}catch{i=Ky.call(t,!0)}return i&&(i.width||i.height)||t.getBBox===Ky||(i=Ky.call(t,!0)),i&&!i.width&&!i.x&&!i.y?{x:+C2(t,["x","cx","x1"])||0,y:+C2(t,["y","cy","y1"])||0,width:0,height:0}:i},UO=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&FO(t))},Kf=function(t,i){if(i){var r=t.style;i in mo&&i!==Is&&(i=vi),r.removeProperty?((i.substr(0,2)==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),r.removeProperty(i.replace(FS,"-$1").toLowerCase())):r.removeAttribute(i)}},Ko=function(t,i,r,n,s,a){var o=new pn(t._pt,i,r,0,1,a?zO:IO);return t._pt=o,o.b=n,o.e=s,t._props.push(r),o},D2={deg:1,rad:1,turn:1},nU={grid:1,flex:1},Sl=function e(t,i,r,n){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",o=uu.style,l=WF.test(i),u=t.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(l?"Width":"Height"),c=100,h=n==="px",f=n==="%",m,p,g,v;return n===a||!s||D2[n]||D2[a]?s:(a!=="px"&&!h&&(s=e(t,i,r,"px")),v=t.getCTM&&UO(t),(f||a==="%")&&(mo[i]||~i.indexOf("adius"))?(m=v?t.getBBox()[l?"width":"height"]:t[d],Si(f?s/m*c:s/100*m)):(o[l?"width":"height"]=c+(h?a:n),p=~i.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,v&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===Zo||!p.appendChild)&&(p=Zo.body),g=p._gsap,g&&f&&g.width&&l&&g.time===_n.time&&!g.uncache?Si(s/g.width*c):((f||a==="%")&&!nU[va(p,"display")]&&(o.position=va(t,"position")),p===t&&(o.position="static"),p.appendChild(uu),m=uu[d],p.removeChild(uu),o.position="absolute",l&&f&&(g=gu(p),g.time=_n.time,g.width=p[d]),Si(h?m*s/c:m&&s?c/m*s:0))))},Wa=function(t,i,r,n){var s;return kS||Xw(),i in eo&&i!=="transform"&&(i=eo[i],~i.indexOf(",")&&(i=i.split(",")[0])),mo[i]&&i!=="transform"?(s=$f(t,n),s=i!=="transformOrigin"?s[i]:s.svg?s.origin:zv(va(t,Is))+" "+s.zOrigin+"px"):(s=t.style[i],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=Iv[i]&&Iv[i](t,i,r)||va(t,i)||nO(t,i)||(i==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Sl(t,i,s,r)+r:s},sU=function(t,i,r,n){if(!r||r==="none"){var s=Oh(i,t,1),a=s&&va(t,s,1);a&&a!==r?(i=s,r=a):i==="borderColor"&&(r=va(t,"borderTopColor"))}var o=new pn(this._pt,t.style,i,0,1,LO),l=0,u=0,d,c,h,f,m,p,g,v,y,x,w,_;if(o.b=r,o.e=n,r+="",n+="",n==="auto"&&(t.style[i]=n,n=va(t,i)||n,t.style[i]=r),d=[r,n],_O(d),r=d[0],n=d[1],h=r.match(Wc)||[],_=n.match(Wc)||[],_.length){for(;c=Wc.exec(n);)g=c[0],y=n.substring(l,c.index),m?m=(m+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(m=1),g!==(p=h[u++]||"")&&(f=parseFloat(p)||0,w=p.substr((f+"").length),g.charAt(1)==="="&&(g=lh(f,g)+w),v=parseFloat(g),x=g.substr((v+"").length),l=Wc.lastIndex-x.length,x||(x=x||Pn.units[i]||w,l===n.length&&(n+=x,o.e+=x)),w!==x&&(f=Sl(t,i,p,x)||0),o._pt={_next:o._pt,p:y||u===1?y:",",s:f,c:v-f,m:m&&m<4||i==="zIndex"?Math.round:0});o.c=l<n.length?n.substring(l,n.length):""}else o.r=i==="display"&&n==="none"?zO:IO;return JL.test(n)&&(o.e=0),this._pt=o,o},P2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},aU=function(t){var i=t.split(" "),r=i[0],n=i[1]||"50%";return(r==="top"||r==="bottom"||n==="left"||n==="right")&&(t=r,r=n,n=t),i[0]=P2[r]||r,i[1]=P2[n]||n,i.join(" ")},oU=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var r=i.t,n=r.style,s=i.u,a=r._gsap,o,l,u;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)o=s[u],mo[o]&&(l=1,o=o==="transformOrigin"?Is:vi),Kf(r,o);l&&(Kf(r,vi),a&&(a.svg&&r.removeAttribute("transform"),$f(r,1),a.uncache=1,BO(n)))}},Iv={clearProps:function(t,i,r,n,s){if(s.data!=="isFromStart"){var a=t._pt=new pn(t._pt,i,r,0,0,oU);return a.u=n,a.pr=-10,a.tween=s,t._props.push(r),1}}},Jf=[1,0,0,1,0,0],HO={},VO=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},L2=function(t){var i=va(t,vi);return VO(i)?Jf:i.substr(7).match(KL).map(Si)},US=function(t,i){var r=t._gsap||gu(t),n=t.style,s=L2(t),a,o,l,u;return r.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Jf:s):(s===Jf&&!t.offsetParent&&t!==uh&&!r.svg&&(l=n.display,n.display="block",a=t.parentNode,(!a||!t.offsetParent)&&(u=1,o=t.nextElementSibling,uh.appendChild(t)),s=L2(t),l?n.display=l:Kf(t,"display"),u&&(o?a.insertBefore(t,o):a?a.appendChild(t):uh.removeChild(t))),i&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Yw=function(t,i,r,n,s,a){var o=t._gsap,l=s||US(t,!0),u=o.xOrigin||0,d=o.yOrigin||0,c=o.xOffset||0,h=o.yOffset||0,f=l[0],m=l[1],p=l[2],g=l[3],v=l[4],y=l[5],x=i.split(" "),w=parseFloat(x[0])||0,_=parseFloat(x[1])||0,b,A,S,M;r?l!==Jf&&(A=f*g-m*p)&&(S=w*(g/A)+_*(-p/A)+(p*y-g*v)/A,M=w*(-m/A)+_*(f/A)-(f*y-m*v)/A,w=S,_=M):(b=FO(t),w=b.x+(~x[0].indexOf("%")?w/100*b.width:w),_=b.y+(~(x[1]||x[0]).indexOf("%")?_/100*b.height:_)),n||n!==!1&&o.smooth?(v=w-u,y=_-d,o.xOffset=c+(v*f+y*p)-v,o.yOffset=h+(v*m+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=_,o.smooth=!!n,o.origin=i,o.originIsAbsolute=!!r,t.style[Is]="0px 0px",a&&(Ko(a,o,"xOrigin",u,w),Ko(a,o,"yOrigin",d,_),Ko(a,o,"xOffset",c,o.xOffset),Ko(a,o,"yOffset",h,o.yOffset)),t.setAttribute("data-svg-origin",w+" "+_)},$f=function(t,i){var r=t._gsap||new MO(t);if("x"in r&&!i&&!r.uncache)return r;var n=t.style,s=r.scaleX<0,a="px",o="deg",l=getComputedStyle(t),u=va(t,Is)||"0",d,c,h,f,m,p,g,v,y,x,w,_,b,A,S,M,E,C,L,N,R,V,F,H,P,z,D,j,B,W,X,$;return d=c=h=p=g=v=y=x=w=0,f=m=1,r.svg=!!(t.getCTM&&UO(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[vi]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+l[vi]),n.scale=n.rotate=n.translate="none"),A=US(t,r.svg),r.svg&&(r.uncache?(P=t.getBBox(),u=r.xOrigin-P.x+"px "+(r.yOrigin-P.y)+"px",H=""):H=!i&&t.getAttribute("data-svg-origin"),Yw(t,H||u,!!H||r.originIsAbsolute,r.smooth!==!1,A)),_=r.xOrigin||0,b=r.yOrigin||0,A!==Jf&&(C=A[0],L=A[1],N=A[2],R=A[3],d=V=A[4],c=F=A[5],A.length===6?(f=Math.sqrt(C*C+L*L),m=Math.sqrt(R*R+N*N),p=C||L?tc(L,C)*Zl:0,y=N||R?tc(N,R)*Zl+p:0,y&&(m*=Math.abs(Math.cos(y*ch))),r.svg&&(d-=_-(_*C+b*N),c-=b-(_*L+b*R))):($=A[6],W=A[7],D=A[8],j=A[9],B=A[10],X=A[11],d=A[12],c=A[13],h=A[14],S=tc($,B),g=S*Zl,S&&(M=Math.cos(-S),E=Math.sin(-S),H=V*M+D*E,P=F*M+j*E,z=$*M+B*E,D=V*-E+D*M,j=F*-E+j*M,B=$*-E+B*M,X=W*-E+X*M,V=H,F=P,$=z),S=tc(-N,B),v=S*Zl,S&&(M=Math.cos(-S),E=Math.sin(-S),H=C*M-D*E,P=L*M-j*E,z=N*M-B*E,X=R*E+X*M,C=H,L=P,N=z),S=tc(L,C),p=S*Zl,S&&(M=Math.cos(S),E=Math.sin(S),H=C*M+L*E,P=V*M+F*E,L=L*M-C*E,F=F*M-V*E,C=H,V=P),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,v=180-v),f=Si(Math.sqrt(C*C+L*L+N*N)),m=Si(Math.sqrt(F*F+$*$)),S=tc(V,F),y=Math.abs(S)>2e-4?S*Zl:0,w=X?1/(X<0?-X:X):0),r.svg&&(H=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!VO(va(t,vi)),H&&t.setAttribute("transform",H))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(f*=-1,y+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),i=i||r.uncache,r.x=d-((r.xPercent=d&&(!i&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+a,r.y=c-((r.yPercent=c&&(!i&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-c)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+a,r.z=h+a,r.scaleX=Si(f),r.scaleY=Si(m),r.rotation=Si(p)+o,r.rotationX=Si(g)+o,r.rotationY=Si(v)+o,r.skewX=y+o,r.skewY=x+o,r.transformPerspective=w+a,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(n[Is]=zv(u)),r.xOffset=r.yOffset=0,r.force3D=Pn.force3D,r.renderTransform=r.svg?uU:NO?jO:lU,r.uncache=0,r},zv=function(t){return(t=t.split(" "))[0]+" "+t[1]},Jy=function(t,i,r){var n=br(i);return Si(parseFloat(i)+parseFloat(Sl(t,"x",r+"px",n)))+n},lU=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,jO(t,i)},Fl="0deg",pd="0px",Ul=") ",jO=function(t,i){var r=i||this,n=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.z,u=r.rotation,d=r.rotationY,c=r.rotationX,h=r.skewX,f=r.skewY,m=r.scaleX,p=r.scaleY,g=r.transformPerspective,v=r.force3D,y=r.target,x=r.zOrigin,w="",_=v==="auto"&&t&&t!==1||v===!0;if(x&&(c!==Fl||d!==Fl)){var b=parseFloat(d)*ch,A=Math.sin(b),S=Math.cos(b),M;b=parseFloat(c)*ch,M=Math.cos(b),a=Jy(y,a,A*M*-x),o=Jy(y,o,-Math.sin(b)*-x),l=Jy(y,l,S*M*-x+x)}g!==pd&&(w+="perspective("+g+Ul),(n||s)&&(w+="translate("+n+"%, "+s+"%) "),(_||a!==pd||o!==pd||l!==pd)&&(w+=l!==pd||_?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Ul),u!==Fl&&(w+="rotate("+u+Ul),d!==Fl&&(w+="rotateY("+d+Ul),c!==Fl&&(w+="rotateX("+c+Ul),(h!==Fl||f!==Fl)&&(w+="skew("+h+", "+f+Ul),(m!==1||p!==1)&&(w+="scale("+m+", "+p+Ul),y.style[vi]=w||"translate(0, 0)"},uU=function(t,i){var r=i||this,n=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.rotation,u=r.skewX,d=r.skewY,c=r.scaleX,h=r.scaleY,f=r.target,m=r.xOrigin,p=r.yOrigin,g=r.xOffset,v=r.yOffset,y=r.forceCSS,x=parseFloat(a),w=parseFloat(o),_,b,A,S,M;l=parseFloat(l),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,l+=d),l||u?(l*=ch,u*=ch,_=Math.cos(l)*c,b=Math.sin(l)*c,A=Math.sin(l-u)*-h,S=Math.cos(l-u)*h,u&&(d*=ch,M=Math.tan(u-d),M=Math.sqrt(1+M*M),A*=M,S*=M,d&&(M=Math.tan(d),M=Math.sqrt(1+M*M),_*=M,b*=M)),_=Si(_),b=Si(b),A=Si(A),S=Si(S)):(_=c,S=h,b=A=0),(x&&!~(a+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(x=Sl(f,"x",a,"px"),w=Sl(f,"y",o,"px")),(m||p||g||v)&&(x=Si(x+m-(m*_+p*A)+g),w=Si(w+p-(m*b+p*S)+v)),(n||s)&&(M=f.getBBox(),x=Si(x+n/100*M.width),w=Si(w+s/100*M.height)),M="matrix("+_+","+b+","+A+","+S+","+x+","+w+")",f.setAttribute("transform",M),y&&(f.style[vi]=M)},cU=function(t,i,r,n,s){var a=360,o=$i(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?Zl:1),u=l-n,d=n+u+"deg",c,h;return o&&(c=s.split("_")[1],c==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),c==="cw"&&u<0?u=(u+a*E2)%a-~~(u/a)*a:c==="ccw"&&u>0&&(u=(u-a*E2)%a-~~(u/a)*a)),t._pt=h=new pn(t._pt,i,r,n,u,YF),h.e=d,h.u="deg",t._props.push(r),h},O2=function(t,i){for(var r in i)t[r]=i[r];return t},hU=function(t,i,r){var n=O2({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,o,l,u,d,c,h,f,m;n.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),a[vi]=i,o=$f(r,1),Kf(r,vi),r.setAttribute("transform",u)):(u=getComputedStyle(r)[vi],a[vi]=i,o=$f(r,1),a[vi]=u);for(l in mo)u=n[l],d=o[l],u!==d&&s.indexOf(l)<0&&(f=br(u),m=br(d),c=f!==m?Sl(r,l,u,m):parseFloat(u),h=parseFloat(d),t._pt=new pn(t._pt,o,l,c,h-c,Gw),t._pt.u=m||0,t._props.push(l));O2(o,n)};fn("padding,margin,Width,Radius",function(e,t){var i="Top",r="Right",n="Bottom",s="Left",a=(t<3?[i,r,n,s]:[i+s,i+r,n+r,n+s]).map(function(o){return t<2?e+o:"border"+o+e});Iv[t>1?"border"+e:e]=function(o,l,u,d,c){var h,f;if(arguments.length<4)return h=a.map(function(m){return Wa(o,m,u)}),f=h.join(" "),f.split(h[0]).length===5?h[0]:f;h=(d+"").split(" "),f={},a.forEach(function(m,p){return f[m]=h[p]=h[p]||h[(p-1)/2|0]}),o.init(l,f,c)}});var GO={name:"css",register:Xw,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,r,n,s){var a=this._props,o=t.style,l=r.vars.startAt,u,d,c,h,f,m,p,g,v,y,x,w,_,b,A,S;kS||Xw(),this.styles=this.styles||kO(t),S=this.styles.props,this.tween=r;for(p in i)if(p!=="autoRound"&&(d=i[p],!(xn[p]&&EO(p,i,r,n,t,s)))){if(f=typeof d,m=Iv[p],f==="function"&&(d=d.call(r,n,t,s),f=typeof d),f==="string"&&~d.indexOf("random(")&&(d=Qf(d)),m)m(this,t,p,d,r)&&(A=1);else if(p.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(p)+"").trim(),d+="",gl.lastIndex=0,gl.test(u)||(g=br(u),v=br(d)),v?g!==v&&(u=Sl(t,p,u,v)+v):g&&(d+=g),this.add(o,"setProperty",u,d,n,s,0,0,p),a.push(p),S.push(p,o[p]);else if(f!=="undefined"){if(l&&p in l?(u=typeof l[p]=="function"?l[p].call(r,n,t,s):l[p],$i(u)&&~u.indexOf("random(")&&(u=Qf(u)),br(u+"")||(u+=Pn.units[p]||br(Wa(t,p))||""),(u+"").charAt(1)==="="&&(u=Wa(t,p))):u=Wa(t,p),h=parseFloat(u),y=f==="string"&&d.charAt(1)==="="&&d.substr(0,2),y&&(d=d.substr(2)),c=parseFloat(d),p in eo&&(p==="autoAlpha"&&(h===1&&Wa(t,"visibility")==="hidden"&&c&&(h=0),S.push("visibility",o.visibility),Ko(this,o,"visibility",h?"inherit":"hidden",c?"inherit":"hidden",!c)),p!=="scale"&&p!=="transform"&&(p=eo[p],~p.indexOf(",")&&(p=p.split(",")[0]))),x=p in mo,x){if(this.styles.save(p),w||(_=t._gsap,_.renderTransform&&!i.parseTransform||$f(t,i.parseTransform),b=i.smoothOrigin!==!1&&_.smooth,w=this._pt=new pn(this._pt,o,vi,0,1,_.renderTransform,_,0,-1),w.dep=1),p==="scale")this._pt=new pn(this._pt,_,"scaleY",_.scaleY,(y?lh(_.scaleY,y+c):c)-_.scaleY||0,Gw),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){S.push(Is,o[Is]),d=aU(d),_.svg?Yw(t,d,0,b,0,this):(v=parseFloat(d.split(" ")[2])||0,v!==_.zOrigin&&Ko(this,_,"zOrigin",_.zOrigin,v),Ko(this,o,p,zv(u),zv(d)));continue}else if(p==="svgOrigin"){Yw(t,d,1,b,0,this);continue}else if(p in HO){cU(this,_,p,h,y?lh(h,y+d):d);continue}else if(p==="smoothOrigin"){Ko(this,_,"smooth",_.smooth,d);continue}else if(p==="force3D"){_[p]=d;continue}else if(p==="transform"){hU(this,d,t);continue}}else p in o||(p=Oh(p)||p);if(x||(c||c===0)&&(h||h===0)&&!XF.test(d)&&p in o)g=(u+"").substr((h+"").length),c||(c=0),v=br(d)||(p in Pn.units?Pn.units[p]:g),g!==v&&(h=Sl(t,p,u,v)),this._pt=new pn(this._pt,x?_:o,p,h,(y?lh(h,y+c):c)-h,!x&&(v==="px"||p==="zIndex")&&i.autoRound!==!1?QF:Gw),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=u,this._pt.r=qF);else if(p in o)sU.call(this,t,p,u,y?y+d:d);else if(p in t)this.add(t,p,u||t[p],y?y+d:d,n,s);else{CS(p,d);continue}x||S.push(p,o[p]),a.push(p)}}A&&OO(this)},render:function(t,i){if(i.tween._time||!NS())for(var r=i._pt;r;)r.r(t,r.d),r=r._next;else i.styles.revert()},get:Wa,aliases:eo,getSetter:function(t,i,r){var n=eo[i];return n&&n.indexOf(",")<0&&(i=n),i in mo&&i!==Is&&(t._gsap.x||Wa(t,"x"))?r&&M2===r?i==="scale"?$F:JF:(M2=r||{})&&(i==="scale"?eU:tU):t.style&&!ES(t.style[i])?ZF:~i.indexOf("-")?KF:zS(t,i)},core:{_removeProperty:Kf,_getMatrix:US}};Rn.utils.checkPrefix=Oh;Rn.core.getStyleSaver=kO;(function(e,t,i,r){var n=fn(e+","+t+","+i,function(s){mo[s]=1});fn(t,function(s){Pn.units[s]="deg",HO[s]=1}),eo[n[13]]=e+","+t,fn(r,function(s){var a=s.split(":");eo[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");fn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Pn.units[e]="px"});Rn.registerPlugin(GO);var gt=Rn.registerPlugin(GO)||Rn;gt.core.Tween;function R2(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dU(e,t,i){return t&&R2(e.prototype,t),i&&R2(e,i),e}/*!
 * Observer 3.11.1
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fr,qw,bn,cu,hu,hh,WO,Kl,pf,XO,to,Es,YO=function(){return Fr||typeof window<"u"&&(Fr=window.gsap)&&Fr.registerPlugin&&Fr},qO=1,Yc=[],kt=[],ya=[],mf=Date.now,Qw=function(t,i){return i},fU=function(){var t=pf.core,i=t.bridge||{},r=t._scrollers,n=t._proxies;r.push.apply(r,kt),n.push.apply(n,ya),kt=r,ya=n,Qw=function(a,o){return i[a](o)}},vl=function(t,i){return~ya.indexOf(t)&&ya[ya.indexOf(t)+1][i]},Ng=function(t){return!!~XO.indexOf(t)},Jr=function(t,i,r,n,s){return t.addEventListener(i,r,{passive:!n,capture:!!s})},Lr=function(t,i,r,n){return t.removeEventListener(i,r,!!n)},om="scrollLeft",lm="scrollTop",I2=function(){return to&&to.isPressed||kt.cache++},Bv=function(t,i){var r=function n(s){if(s||s===0){qO&&(bn.history.scrollRestoration="manual");var a=to&&to.isPressed;s=n.v=Math.round(s)||(to&&to.iOS?1:0),t(s),n.cacheID=kt.cache,a&&Qw("ss",s)}else(i||kt.cache!==n.cacheID||Qw("ref"))&&(n.cacheID=kt.cache,n.v=t());return n.v+n.offset};return r.offset=0,t&&r},Nr={s:om,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Bv(function(e){return arguments.length?bn.scrollTo(e,Ui.sc()):bn.pageXOffset||cu[om]||hu[om]||hh[om]||0})},Ui={s:lm,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Nr,sc:Bv(function(e){return arguments.length?bn.scrollTo(Nr.sc(),e):bn.pageYOffset||cu[lm]||hu[lm]||hh[lm]||0})},$r=function(t){return Fr.utils.toArray(t)[0]||(typeof t=="string"&&Fr.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},Al=function(t,i){var r=i.s,n=i.sc,s=kt.indexOf(t),a=n===Ui.sc?1:2;return!~s&&(s=kt.push(t)-1),kt[s+a]||(kt[s+a]=Bv(vl(t,r),!0)||(Ng(t)?n:Bv(function(o){return arguments.length?t[r]=o:t[r]})))},Zw=function(t,i,r){var n=t,s=t,a=mf(),o=a,l=i||50,u=Math.max(500,l*3),d=function(m,p){var g=mf();p||g-a>l?(s=n,n=m,o=a,a=g):r?n+=m:n=s+(m-s)/(g-o)*(a-o)},c=function(){s=n=r?0:n,o=a=0},h=function(m){var p=o,g=s,v=mf();return(m||m===0)&&m!==n&&d(m),a===o||v-o>u?0:(n+(r?g:-g))/((r?v:a)-p)*1e3};return{update:d,reset:c,getVelocity:h}},md=function(t,i){return i&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},z2=function(t){var i=Math.max.apply(Math,t),r=Math.min.apply(Math,t);return Math.abs(i)>=Math.abs(r)?i:r},QO=function(){pf=Fr.core.globals().ScrollTrigger,pf&&pf.core&&fU()},ZO=function(t){return Fr=t||YO(),Fr&&typeof document<"u"&&document.body&&(bn=window,cu=document,hu=cu.documentElement,hh=cu.body,XO=[bn,cu,hu,hh],Fr.utils.clamp,Kl="onpointerenter"in hh?"pointer":"mouse",WO=Ri.isTouch=bn.matchMedia&&bn.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in bn||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Es=Ri.eventTypes=("ontouchstart"in hu?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in hu?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return qO=0},500),QO(),qw=1),qw};Nr.op=Ui;kt.cache=0;var Ri=function(){function e(i){this.init(i)}var t=e.prototype;return t.init=function(r){qw||ZO(Fr)||console.warn("Please gsap.registerPlugin(Observer)"),pf||QO();var n=r.tolerance,s=r.dragMinimum,a=r.type,o=r.target,l=r.lineHeight,u=r.debounce,d=r.preventDefault,c=r.onStop,h=r.onStopDelay,f=r.ignore,m=r.wheelSpeed,p=r.event,g=r.onDragStart,v=r.onDragEnd,y=r.onDrag,x=r.onPress,w=r.onRelease,_=r.onRight,b=r.onLeft,A=r.onUp,S=r.onDown,M=r.onChangeX,E=r.onChangeY,C=r.onChange,L=r.onToggleX,N=r.onToggleY,R=r.onHover,V=r.onHoverEnd,F=r.onMove,H=r.ignoreCheck,P=r.isNormalizer,z=r.onGestureStart,D=r.onGestureEnd,j=r.onWheel,B=r.onEnable,W=r.onDisable,X=r.onClick,$=r.scrollSpeed,U=r.capture,ne=r.allowClicks,ie=r.lockAxis,re=r.onLockAxis;this.target=o=$r(o)||hu,this.vars=r,f&&(f=Fr.utils.toArray(f)),n=n||1e-9,s=s||0,m=m||1,$=$||1,a=a||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(bn.getComputedStyle(hh).lineHeight)||22);var K,fe,te,ae,pe,me,Ie,Y=this,Se=0,Te=0,at=Al(o,Nr),ct=Al(o,Ui),k=at(),O=ct(),le=~a.indexOf("touch")&&!~a.indexOf("pointer")&&Es[0]==="pointerdown",ge=Ng(o),ve=o.ownerDocument||cu,_e=[0,0,0],Fe=[0,0,0],ue=0,He=function(){return ue=mf()},xe=function(he,Ee){return(Y.event=he)&&f&&~f.indexOf(he.target)||Ee&&le&&he.pointerType!=="touch"||H&&H(he,Ee)},Me=function(){Y._vx.reset(),Y._vy.reset(),fe.pause(),c&&c(Y)},G=function(){var he=Y.deltaX=z2(_e),Ee=Y.deltaY=z2(Fe),Pe=Math.abs(he)>=n,Xe=Math.abs(Ee)>=n;C&&(Pe||Xe)&&C(Y,he,Ee,_e,Fe),Pe&&(_&&Y.deltaX>0&&_(Y),b&&Y.deltaX<0&&b(Y),M&&M(Y),L&&Y.deltaX<0!=Se<0&&L(Y),Se=Y.deltaX,_e[0]=_e[1]=_e[2]=0),Xe&&(S&&Y.deltaY>0&&S(Y),A&&Y.deltaY<0&&A(Y),E&&E(Y),N&&Y.deltaY<0!=Te<0&&N(Y),Te=Y.deltaY,Fe[0]=Fe[1]=Fe[2]=0),(ae||te)&&(F&&F(Y),te&&(y(Y),te=!1),ae=!1),me&&!(me=!1)&&re&&re(Y),pe&&(j(Y),pe=!1),K=0},Ae=function(he,Ee,Pe){_e[Pe]+=he,Fe[Pe]+=Ee,Y._vx.update(he),Y._vy.update(Ee),u?K||(K=requestAnimationFrame(G)):G()},be=function(he,Ee){ie&&!Ie&&(Y.axis=Ie=Math.abs(he)>Math.abs(Ee)?"x":"y",me=!0),Ie!=="y"&&(_e[2]+=he,Y._vx.update(he,!0)),Ie!=="x"&&(Fe[2]+=Ee,Y._vy.update(Ee,!0)),u?K||(K=requestAnimationFrame(G)):G()},Re=function(he){if(!xe(he,1)){he=md(he,d);var Ee=he.clientX,Pe=he.clientY,Xe=Ee-Y.x,Lt=Pe-Y.y,et=Y.isDragging;Y.x=Ee,Y.y=Pe,(et||Math.abs(Y.startX-Ee)>=s||Math.abs(Y.startY-Pe)>=s)&&(y&&(te=!0),et||(Y.isDragging=!0),be(Xe,Lt),et||g&&g(Y))}},ze=Y.onPress=function(We){xe(We,1)||(Y.axis=Ie=null,fe.pause(),Y.isPressed=!0,We=md(We),Se=Te=0,Y.startX=Y.x=We.clientX,Y.startY=Y.y=We.clientY,Y._vx.reset(),Y._vy.reset(),Jr(P?o:ve,Es[1],Re,d,!0),Y.deltaX=Y.deltaY=0,x&&x(Y))},Qe=function(he){if(!xe(he,1)){Lr(P?o:ve,Es[1],Re,!0);var Ee=Y.isDragging&&(Math.abs(Y.x-Y.startX)>3||Math.abs(Y.y-Y.startY)>3),Pe=md(he);Ee||(Y._vx.reset(),Y._vy.reset(),d&&ne&&Fr.delayedCall(.08,function(){if(mf()-ue>300&&!he.defaultPrevented){if(he.target.click)he.target.click();else if(ve.createEvent){var Xe=ve.createEvent("MouseEvents");Xe.initMouseEvent("click",!0,!0,bn,1,Pe.screenX,Pe.screenY,Pe.clientX,Pe.clientY,!1,!1,!1,!1,0,null),he.target.dispatchEvent(Xe)}}})),Y.isDragging=Y.isGesturing=Y.isPressed=!1,c&&!P&&fe.restart(!0),v&&Ee&&v(Y),w&&w(Y,Ee)}},ye=function(he){return he.touches&&he.touches.length>1&&(Y.isGesturing=!0)&&z(he,Y.isDragging)},Ne=function(){return(Y.isGesturing=!1)||D(Y)},Oe=function(he){if(!xe(he)){var Ee=at(),Pe=ct();Ae((Ee-k)*$,(Pe-O)*$,1),k=Ee,O=Pe,c&&fe.restart(!0)}},Ce=function(he){if(!xe(he)){he=md(he,d),j&&(pe=!0);var Ee=(he.deltaMode===1?l:he.deltaMode===2?bn.innerHeight:1)*m;Ae(he.deltaX*Ee,he.deltaY*Ee,0),c&&!P&&fe.restart(!0)}},je=function(he){if(!xe(he)){var Ee=he.clientX,Pe=he.clientY,Xe=Ee-Y.x,Lt=Pe-Y.y;Y.x=Ee,Y.y=Pe,ae=!0,(Xe||Lt)&&be(Xe,Lt)}},tt=function(he){Y.event=he,R(Y)},wt=function(he){Y.event=he,V(Y)},Nt=function(he){return xe(he)||md(he,d)&&X(Y)};fe=Y._dc=Fr.delayedCall(h||.25,Me).pause(),Y.deltaX=Y.deltaY=0,Y._vx=Zw(0,50,!0),Y._vy=Zw(0,50,!0),Y.scrollX=at,Y.scrollY=ct,Y.isDragging=Y.isGesturing=Y.isPressed=!1,Y.enable=function(We){return Y.isEnabled||(Jr(ge?ve:o,"scroll",I2),a.indexOf("scroll")>=0&&Jr(ge?ve:o,"scroll",Oe,d,U),a.indexOf("wheel")>=0&&Jr(o,"wheel",Ce,d,U),(a.indexOf("touch")>=0&&WO||a.indexOf("pointer")>=0)&&(Jr(o,Es[0],ze,d,U),Jr(ve,Es[2],Qe),Jr(ve,Es[3],Qe),ne&&Jr(o,"click",He,!1,!0),X&&Jr(o,"click",Nt),z&&Jr(ve,"gesturestart",ye),D&&Jr(ve,"gestureend",Ne),R&&Jr(o,Kl+"enter",tt),V&&Jr(o,Kl+"leave",wt),F&&Jr(o,Kl+"move",je)),Y.isEnabled=!0,We&&We.type&&ze(We),B&&B(Y)),Y},Y.disable=function(){Y.isEnabled&&(Yc.filter(function(We){return We!==Y&&Ng(We.target)}).length||Lr(ge?ve:o,"scroll",I2),Y.isPressed&&(Y._vx.reset(),Y._vy.reset(),Lr(P?o:ve,Es[1],Re,!0)),Lr(ge?ve:o,"scroll",Oe,U),Lr(o,"wheel",Ce,U),Lr(o,Es[0],ze,U),Lr(ve,Es[2],Qe),Lr(ve,Es[3],Qe),Lr(o,"click",He,!0),Lr(o,"click",Nt),Lr(ve,"gesturestart",ye),Lr(ve,"gestureend",Ne),Lr(o,Kl+"enter",tt),Lr(o,Kl+"leave",wt),Lr(o,Kl+"move",je),Y.isEnabled=Y.isPressed=Y.isDragging=!1,W&&W(Y))},Y.kill=function(){Y.disable();var We=Yc.indexOf(Y);We>=0&&Yc.splice(We,1),to===Y&&(to=0)},Yc.push(Y),P&&Ng(o)&&(to=Y),Y.enable(p)},dU(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();Ri.version="3.11.1";Ri.create=function(e){return new Ri(e)};Ri.register=ZO;Ri.getAll=function(){return Yc.slice()};Ri.getById=function(e){return Yc.filter(function(t){return t.vars.id===e})[0]};YO()&&Fr.registerPlugin(Ri);/*!
 * ScrollTrigger 3.11.1
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nt,Mc,Rt,di,io,fi,KO,kv,Nv,qc,Fg,um,ir,z0,Kw,Br,B2,k2,Ec,JO,$y,$O,Gn,eR,tR,iR,No,Jw,e1,cm=1,kr=Date.now,t1=kr(),us=0,hm=0,N2=function(){return z0=1},F2=function(){return z0=0},Js=function(t){return t},Ud=function(t){return Math.round(t*1e5)/1e5||0},rR=function(){return typeof window<"u"},nR=function(){return nt||rR()&&(nt=window.gsap)&&nt.registerPlugin&&nt},zu=function(t){return!!~KO.indexOf(t)},sR=function(t){return vl(t,"getBoundingClientRect")||(zu(t)?function(){return Xg.width=Rt.innerWidth,Xg.height=Rt.innerHeight,Xg}:function(){return qa(t)})},pU=function(t,i,r){var n=r.d,s=r.d2,a=r.a;return(a=vl(t,"getBoundingClientRect"))?function(){return a()[n]}:function(){return(i?Rt["inner"+s]:t["client"+s])||0}},mU=function(t,i){return!i||~ya.indexOf(t)?sR(t):function(){return Xg}},Jo=function(t,i){var r=i.s,n=i.d2,s=i.d,a=i.a;return(r="scroll"+n)&&(a=vl(t,r))?a()-sR(t)()[s]:zu(t)?(io[r]||fi[r])-(Rt["inner"+n]||io["client"+n]||fi["client"+n]):t[r]-t["offset"+n]},dm=function(t,i){for(var r=0;r<Ec.length;r+=3)(!i||~i.indexOf(Ec[r+1]))&&t(Ec[r],Ec[r+1],Ec[r+2])},Qs=function(t){return typeof t=="string"},ro=function(t){return typeof t=="function"},Hd=function(t){return typeof t=="number"},Ug=function(t){return typeof t=="object"},gd=function(t,i,r){return t&&t.progress(i?0:1)&&r&&t.pause()},i1=function(t,i){if(t.enabled){var r=i(t);r&&r.totalTime&&(t.callbackAnimation=r)}},ic=Math.abs,aR="left",oR="top",HS="right",VS="bottom",xu="width",wu="height",gf="Right",vf="Left",yf="Top",xf="Bottom",Pi="padding",Kn="margin",Rh="Width",jS="Height",Ir="px",ra=function(t){return Rt.getComputedStyle(t)},gU=function(t){var i=ra(t).position;t.style.position=i==="absolute"||i==="fixed"?i:"relative"},U2=function(t,i){for(var r in i)r in t||(t[r]=i[r]);return t},qa=function(t,i){var r=i&&ra(t)[Kw]!=="matrix(1, 0, 0, 1, 0, 0)"&&nt.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return r&&r.progress(0).kill(),n},$w=function(t,i){var r=i.d2;return t["offset"+r]||t["client"+r]||0},lR=function(t){var i=[],r=t.labels,n=t.duration(),s;for(s in r)i.push(r[s]/n);return i},vU=function(t){return function(i){return nt.utils.snap(lR(t),i)}},GS=function(t){var i=nt.utils.snap(t),r=Array.isArray(t)&&t.slice(0).sort(function(n,s){return n-s});return r?function(n,s,a){a===void 0&&(a=.001);var o;if(!s)return i(n);if(s>0){for(n-=a,o=0;o<r.length;o++)if(r[o]>=n)return r[o];return r[o-1]}else for(o=r.length,n+=a;o--;)if(r[o]<=n)return r[o];return r[0]}:function(n,s,a){a===void 0&&(a=.001);var o=i(n);return!s||Math.abs(o-n)<a||o-n<0==s<0?o:i(s<0?n-t:n+t)}},yU=function(t){return function(i,r){return GS(lR(t))(i,r.direction)}},fm=function(t,i,r,n){return r.split(",").forEach(function(s){return t(i,s,n)})},nr=function(t,i,r,n,s){return t.addEventListener(i,r,{passive:!n,capture:!!s})},qi=function(t,i,r,n){return t.removeEventListener(i,r,!!n)},pm=function(t,i,r){return r&&r.wheelHandler&&t(i,"wheel",r)},H2={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},mm={toggleActions:"play",anticipatePin:0},Fv={top:0,left:0,center:.5,bottom:1,right:1},Hg=function(t,i){if(Qs(t)){var r=t.indexOf("="),n=~r?+(t.charAt(r-1)+1)*parseFloat(t.substr(r+1)):0;~r&&(t.indexOf("%")>r&&(n*=i/100),t=t.substr(0,r-1)),t=n+(t in Fv?Fv[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0)}return t},gm=function(t,i,r,n,s,a,o,l){var u=s.startColor,d=s.endColor,c=s.fontSize,h=s.indent,f=s.fontWeight,m=di.createElement("div"),p=zu(r)||vl(r,"pinType")==="fixed",g=t.indexOf("scroller")!==-1,v=p?fi:r,y=t.indexOf("start")!==-1,x=y?u:d,w="border-color:"+x+";font-size:"+c+";color:"+x+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((g||l)&&p?"fixed;":"absolute;"),(g||l||!p)&&(w+=(n===Ui?HS:VS)+":"+(a+parseFloat(h))+"px;"),o&&(w+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=y,m.setAttribute("class","gsap-marker-"+t+(i?" marker-"+i:"")),m.style.cssText=w,m.innerText=i||i===0?t+"-"+i:t,v.children[0]?v.insertBefore(m,v.children[0]):v.appendChild(m),m._offset=m["offset"+n.op.d2],Vg(m,0,n,y),m},Vg=function(t,i,r,n){var s={display:"block"},a=r[n?"os2":"p2"],o=r[n?"p2":"os2"];t._isFlipped=n,s[r.a+"Percent"]=n?-100:0,s[r.a]=n?"1px":0,s["border"+a+Rh]=1,s["border"+o+Rh]=0,s[r.p]=i+"px",nt.set(t,s)},Ct=[],e_={},t_,V2=function(){return kr()-us>34&&ep()},rc=function(){(!Gn||!Gn.isPressed||Gn.startX>fi.clientWidth)&&(kt.cache++,t_||(t_=requestAnimationFrame(ep)),us||ku("scrollStart"),us=kr())},j2=function(){iR=Rt.innerWidth,tR=Rt.innerHeight},Vd=function(){kt.cache++,!ir&&!$O&&!di.fullscreenElement&&!di.webkitFullscreenElement&&(!eR||iR!==Rt.innerWidth||Math.abs(Rt.innerHeight-tR)>Rt.innerHeight*.25)&&kv.restart(!0)},Bu={},xU=[],uR=function e(){return qi(Et,"scrollEnd",e)||Qc(!0)},ku=function(t){return Bu[t]&&Bu[t].map(function(i){return i()})||xU},vn=[],cR=function(t){for(var i=0;i<vn.length;i+=5)(!t||vn[i+4]&&vn[i+4].query===t)&&(vn[i].style.cssText=vn[i+1],vn[i].getBBox&&vn[i].setAttribute("transform",vn[i+2]||""),vn[i+3].uncache=1)},WS=function(t,i){var r;for(Br=0;Br<Ct.length;Br++)r=Ct[Br],r&&(!i||r._ctx===i)&&(t?r.kill(1):r.revert(!0,!0));i&&cR(i),i||ku("revert")},hR=function(){return kt.cache++&&kt.forEach(function(t){return typeof t=="function"&&(t.rec=0)})},Xa,jg=0,Qc=function(t,i){if(us&&!t){nr(Et,"scrollEnd",uR);return}Xa=!0;var r=ku("refreshInit");JO&&Et.sort(),i||WS(),Ct.slice(0).forEach(function(n){return n.refresh()}),Ct.forEach(function(n){return n.vars.end==="max"&&n.setPositions(n.start,Math.max(n.start+1,Jo(n.scroller,n._dir)))}),r.forEach(function(n){return n&&n.render&&n.render(-1)}),kt.forEach(function(n){return typeof n=="function"&&n(n.rec)}),hR(),kv.pause(),jg++,Xa=!1,ku("refresh")},G2=0,Gg=1,iu,ep=function(){if(!Xa){Et.isUpdating=!0,iu&&iu.update(0);var t=Ct.length,i=kr(),r=i-t1>=50,n=t&&Ct[0].scroll();if(Gg=G2>n?-1:1,G2=n,r&&(us&&!z0&&i-us>200&&(us=0,ku("scrollEnd")),Fg=t1,t1=i),Gg<0){for(Br=t;Br-- >0;)Ct[Br]&&Ct[Br].update(0,r);Gg=1}else for(Br=0;Br<t;Br++)Ct[Br]&&Ct[Br].update(0,r);Et.isUpdating=!1}t_=0},i_=[aR,oR,VS,HS,Kn+xf,Kn+gf,Kn+yf,Kn+vf,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Wg=i_.concat([xu,wu,"boxSizing","max"+Rh,"max"+jS,"position",Kn,Pi,Pi+yf,Pi+gf,Pi+xf,Pi+vf]),wU=function(t,i,r){tp(r);var n=t._gsap;if(n.spacerIsNative)tp(n.spacerState);else if(t._gsap.swappedIn){var s=i.parentNode;s&&(s.insertBefore(t,i),s.removeChild(i))}t._gsap.swappedIn=!1},r1=function(t,i,r,n){if(!t._gsap.swappedIn){for(var s=i_.length,a=i.style,o=t.style,l;s--;)l=i_[s],a[l]=r[l];a.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(a.display="inline-block"),o[VS]=o[HS]="auto",a.flexBasis=r.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[xu]=$w(t,Nr)+Ir,a[wu]=$w(t,Ui)+Ir,a[Pi]=o[Kn]=o[oR]=o[aR]="0",tp(n),o[xu]=o["max"+Rh]=r[xu],o[wu]=o["max"+jS]=r[wu],o[Pi]=r[Pi],t.parentNode!==i&&(t.parentNode.insertBefore(i,t),i.appendChild(t)),t._gsap.swappedIn=!0}},_U=/([A-Z])/g,tp=function(t){if(t){var i=t.t.style,r=t.length,n=0,s,a;for((t.t._gsap||nt.core.getCache(t.t)).uncache=1;n<r;n+=2)a=t[n+1],s=t[n],a?i[s]=a:i[s]&&i.removeProperty(s.replace(_U,"-$1").toLowerCase())}},vm=function(t){for(var i=Wg.length,r=t.style,n=[],s=0;s<i;s++)n.push(Wg[s],r[Wg[s]]);return n.t=t,n},bU=function(t,i,r){for(var n=[],s=t.length,a=r?8:0,o;a<s;a+=2)o=t[a],n.push(o,o in i?i[o]:t[a+1]);return n.t=t.t,n},Xg={left:0,top:0},W2=function(t,i,r,n,s,a,o,l,u,d,c,h,f){ro(t)&&(t=t(l)),Qs(t)&&t.substr(0,3)==="max"&&(t=h+(t.charAt(4)==="="?Hg("0"+t.substr(3),r):0));var m=f?f.time():0,p,g,v;if(f&&f.seek(0),Hd(t))o&&Vg(o,r,n,!0);else{ro(i)&&(i=i(l));var y=(t||"0").split(" "),x,w,_,b;v=$r(i)||fi,x=qa(v)||{},(!x||!x.left&&!x.top)&&ra(v).display==="none"&&(b=v.style.display,v.style.display="block",x=qa(v),b?v.style.display=b:v.style.removeProperty("display")),w=Hg(y[0],x[n.d]),_=Hg(y[1]||"0",r),t=x[n.p]-u[n.p]-d+w+s-_,o&&Vg(o,_,n,r-_<20||o._isStart&&_>20),r-=r-_}if(a){var A=t+r,S=a._isStart;p="scroll"+n.d2,Vg(a,A,n,S&&A>20||!S&&(c?Math.max(fi[p],io[p]):a.parentNode[p])<=A+1),c&&(u=qa(o),c&&(a.style[n.op.p]=u[n.op.p]-n.op.m-a._offset+Ir))}return f&&v&&(p=qa(v),f.seek(h),g=qa(v),f._caScrollDist=p[n.p]-g[n.p],t=t/f._caScrollDist*h),f&&f.seek(m),f?t:Math.round(t)},SU=/(webkit|moz|length|cssText|inset)/i,X2=function(t,i,r,n){if(t.parentNode!==i){var s=t.style,a,o;if(i===fi){t._stOrig=s.cssText,o=ra(t);for(a in o)!+a&&!SU.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=r,s.left=n}else s.cssText=t._stOrig;nt.core.getCache(t).uncache=1,i.appendChild(t)}},Y2=function(t,i){var r=Al(t,i),n="_scroll"+i.p2,s,a,o=function l(u,d,c,h,f){var m=l.tween,p=d.onComplete,g={};return c=c||r(),f=h&&f||0,h=h||u-c,m&&m.kill(),s=Math.round(c),d[n]=u,d.modifiers=g,g[n]=function(v){return v=Math.round(r()),v!==s&&v!==a&&Math.abs(v-s)>3&&Math.abs(v-a)>3?(m.kill(),l.tween=0):v=c+h*m.ratio+f*m.ratio*m.ratio,a=s,s=Math.round(v)},d.onComplete=function(){l.tween=0,p&&p.call(m)},m=l.tween=nt.to(t,d),m};return t[n]=r,r.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},nr(t,"wheel",r.wheelHandler),o},Et=function(){function e(i,r){Mc||e.register(nt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(i,r)}var t=e.prototype;return t.init=function(r,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!hm){this.update=this.refresh=this.kill=Js;return}r=U2(Qs(r)||Hd(r)||r.nodeType?{trigger:r}:r,mm);var s=r,a=s.onUpdate,o=s.toggleClass,l=s.id,u=s.onToggle,d=s.onRefresh,c=s.scrub,h=s.trigger,f=s.pin,m=s.pinSpacing,p=s.invalidateOnRefresh,g=s.anticipatePin,v=s.onScrubComplete,y=s.onSnapComplete,x=s.once,w=s.snap,_=s.pinReparent,b=s.pinSpacer,A=s.containerAnimation,S=s.fastScrollEnd,M=s.preventOverlaps,E=r.horizontal||r.containerAnimation&&r.horizontal!==!1?Nr:Ui,C=!c&&c!==0,L=$r(r.scroller||Rt),N=nt.core.getCache(L),R=zu(L),V=("pinType"in r?r.pinType:vl(L,"pinType")||R&&"fixed")==="fixed",F=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],H=C&&r.toggleActions.split(" "),P="markers"in r?r.markers:mm.markers,z=R?0:parseFloat(ra(L)["border"+E.p2+Rh])||0,D=this,j=r.onRefreshInit&&function(){return r.onRefreshInit(D)},B=pU(L,R,E),W=mU(L,R),X=0,$=0,U=Al(L,E),ne,ie,re,K,fe,te,ae,pe,me,Ie,Y,Se,Te,at,ct,k,O,le,ge,ve,_e,Fe,ue,He,xe,Me,G,Ae,be,Re,ze,Qe,ye,Ne,Oe,Ce,je,tt;if(Jw(D),D._dir=E,g*=45,D.scroller=L,D.scroll=A?A.time.bind(A):U,K=U(),D.vars=r,n=n||r.animation,"refreshPriority"in r&&(JO=1,r.refreshPriority===-9999&&(iu=D)),N.tweenScroll=N.tweenScroll||{top:Y2(L,Ui),left:Y2(L,Nr)},D.tweenTo=ne=N.tweenScroll[E.p],D.scrubDuration=function(he){ze=Hd(he)&&he,ze?Re?Re.duration(he):Re=nt.to(n,{ease:"expo",totalProgress:"+=0.001",duration:ze,paused:!0,onComplete:function(){return v&&v(D)}}):(Re&&Re.progress(1).kill(),Re=0)},n&&(n.vars.lazy=!1,n._initted||n.vars.immediateRender!==!1&&r.immediateRender!==!1&&n.render(0,!0,!0),D.animation=n.pause(),n.scrollTrigger=D,D.scrubDuration(c),Ae=0,l||(l=n.vars.id)),Ct.push(D),w&&((!Ug(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in fi.style&&nt.set(R?[fi,io]:L,{scrollBehavior:"auto"}),re=ro(w.snapTo)?w.snapTo:w.snapTo==="labels"?vU(n):w.snapTo==="labelsDirectional"?yU(n):w.directional!==!1?function(he,Ee){return GS(w.snapTo)(he,kr()-$<500?0:Ee.direction)}:nt.utils.snap(w.snapTo),Qe=w.duration||{min:.1,max:2},Qe=Ug(Qe)?qc(Qe.min,Qe.max):qc(Qe,Qe),ye=nt.delayedCall(w.delay||ze/2||.1,function(){var he=U(),Ee=kr()-$<500,Pe=ne.tween;if((Ee||Math.abs(D.getVelocity())<10)&&!Pe&&!z0&&X!==he){var Xe=(he-te)/Te,Lt=n&&!C?n.totalProgress():Xe,et=Ee?0:(Lt-be)/(kr()-Fg)*1e3||0,I=nt.utils.clamp(-Xe,1-Xe,ic(et/2)*et/.185),Z=Xe+(w.inertia===!1?0:I),oe=qc(0,1,re(Z,D)),J=Math.round(te+oe*Te),ce=w,Ue=ce.onStart,Ye=ce.onInterrupt,qe=ce.onComplete;if(he<=ae&&he>=te&&J!==he){if(Pe&&!Pe._initted&&Pe.data<=ic(J-he))return;w.inertia===!1&&(I=oe-Xe),ne(J,{duration:Qe(ic(Math.max(ic(Z-Lt),ic(oe-Lt))*.185/et/.05||0)),ease:w.ease||"power3",data:ic(J-he),onInterrupt:function(){return ye.restart(!0)&&Ye&&Ye(D)},onComplete:function(){D.update(),X=U(),Ae=be=n&&!C?n.totalProgress():D.progress,y&&y(D),qe&&qe(D)}},he,I*Te,J-he-I*Te),Ue&&Ue(D,ne.tween)}}else D.isActive&&X!==he&&ye.restart(!0)}).pause()),l&&(e_[l]=D),h=D.trigger=$r(h||f),tt=h&&h._gsap&&h._gsap.stRevert,tt&&(tt=tt(D)),f=f===!0?h:$r(f),Qs(o)&&(o={targets:h,className:o}),f&&(m===!1||m===Kn||(m=!m&&ra(f.parentNode).display==="flex"?!1:Pi),D.pin=f,r.force3D!==!1&&nt.set(f,{force3D:!0}),ie=nt.core.getCache(f),ie.spacer?at=ie.pinState:(b&&(b=$r(b),b&&!b.nodeType&&(b=b.current||b.nativeElement),ie.spacerIsNative=!!b,b&&(ie.spacerState=vm(b))),ie.spacer=O=b||di.createElement("div"),O.classList.add("pin-spacer"),l&&O.classList.add("pin-spacer-"+l),ie.pinState=at=vm(f)),D.spacer=O=ie.spacer,G=ra(f),ue=G[m+E.os2],ge=nt.getProperty(f),ve=nt.quickSetter(f,E.a,Ir),r1(f,O,G),k=vm(f)),P){Se=Ug(P)?U2(P,H2):H2,Ie=gm("scroller-start",l,L,E,Se,0),Y=gm("scroller-end",l,L,E,Se,0,Ie),le=Ie["offset"+E.op.d2];var wt=$r(vl(L,"content")||L);pe=this.markerStart=gm("start",l,wt,E,Se,le,0,A),me=this.markerEnd=gm("end",l,wt,E,Se,le,0,A),A&&(je=nt.quickSetter([pe,me],E.a,Ir)),!V&&!(ya.length&&vl(L,"fixedMarkers")===!0)&&(gU(R?fi:L),nt.set([Ie,Y],{force3D:!0}),xe=nt.quickSetter(Ie,E.a,Ir),Me=nt.quickSetter(Y,E.a,Ir))}if(A){var Nt=A.vars.onUpdate,We=A.vars.onUpdateParams;A.eventCallback("onUpdate",function(){D.update(0,0,1),Nt&&Nt.apply(We||[])})}D.previous=function(){return Ct[Ct.indexOf(D)-1]},D.next=function(){return Ct[Ct.indexOf(D)+1]},D.revert=function(he,Ee){if(!Ee)return D.kill(!0);var Pe=he!==!1||!D.enabled,Xe=ir;Pe!==D.isReverted&&(Pe&&(!D.scroll.rec&&(ir||Xa)&&(D.scroll.rec=U(),Xa&&U(0)),Oe=Math.max(U(),D.scroll.rec||0),Ne=D.progress,Ce=n&&n.progress()),pe&&[pe,me,Ie,Y].forEach(function(Lt){return Lt.style.display=Pe?"none":"block"}),Pe&&(ir=1),D.update(Pe),ir=Xe,f&&(Pe?wU(f,O,at):(!_||!D.isActive)&&r1(f,O,ra(f),He)),D.isReverted=Pe)},D.refresh=function(he,Ee){if(!((ir||!D.enabled)&&!Ee)){if(f&&he&&us){nr(e,"scrollEnd",uR);return}!Xa&&j&&j(D),ir=1,$=kr(),ne.tween&&(ne.tween.kill(),ne.tween=0),Re&&Re.pause(),p&&n&&n.revert().invalidate(),D.isReverted||D.revert(!0,!0);for(var Pe=B(),Xe=W(),Lt=A?A.duration():Jo(L,E),et=0,I=0,Z=r.end,oe=r.endTrigger||h,J=r.start||(r.start===0||!h?0:f?"0 0":"0 100%"),ce=D.pinnedContainer=r.pinnedContainer&&$r(r.pinnedContainer),Ue=h&&Math.max(0,Ct.indexOf(D))||0,Ye=Ue,qe,rt,Ut,pt,st,_t,tr,Fs,Oa,dr;Ye--;)_t=Ct[Ye],_t.end||_t.refresh(0,1)||(ir=1),tr=_t.pin,tr&&(tr===h||tr===f)&&!_t.isReverted&&(dr||(dr=[]),dr.unshift(_t),_t.revert(!0,!0)),_t!==Ct[Ye]&&(Ue--,Ye--);for(ro(J)&&(J=J(D)),te=W2(J,h,Pe,E,U(),pe,Ie,D,Xe,z,V,Lt,A)||(f?-.001:0),ro(Z)&&(Z=Z(D)),Qs(Z)&&!Z.indexOf("+=")&&(~Z.indexOf(" ")?Z=(Qs(J)?J.split(" ")[0]:"")+Z:(et=Hg(Z.substr(2),Pe),Z=Qs(J)?J:te+et,oe=h)),ae=Math.max(te,W2(Z||(oe?"100% 0":Lt),oe,Pe,E,U()+et,me,Y,D,Xe,z,V,Lt,A))||-.001,Te=ae-te||(te-=.01)&&.001,et=0,Ye=Ue;Ye--;)_t=Ct[Ye],tr=_t.pin,tr&&_t.start-_t._pinPush<te&&!A&&_t.end>0&&(qe=_t.end-_t.start,(tr===h||tr===ce)&&!Hd(J)&&(et+=qe*(1-_t.progress)),tr===f&&(I+=qe));if(te+=et,ae+=et,D._pinPush=I,pe&&et&&(qe={},qe[E.a]="+="+et,ce&&(qe[E.p]="-="+U()),nt.set([pe,me],qe)),f)qe=ra(f),pt=E===Ui,Ut=U(),_e=parseFloat(ge(E.a))+I,!Lt&&ae>1&&((R?fi:L).style["overflow-"+E.a]="scroll"),r1(f,O,qe),k=vm(f),rt=qa(f,!0),Fs=V&&Al(L,pt?Nr:Ui)(),m&&(He=[m+E.os2,Te+I+Ir],He.t=O,Ye=m===Pi?$w(f,E)+Te+I:0,Ye&&He.push(E.d,Ye+Ir),tp(He),V&&U(Oe)),V&&(st={top:rt.top+(pt?Ut-te:Fs)+Ir,left:rt.left+(pt?Fs:Ut-te)+Ir,boxSizing:"border-box",position:"fixed"},st[xu]=st["max"+Rh]=Math.ceil(rt.width)+Ir,st[wu]=st["max"+jS]=Math.ceil(rt.height)+Ir,st[Kn]=st[Kn+yf]=st[Kn+gf]=st[Kn+xf]=st[Kn+vf]="0",st[Pi]=qe[Pi],st[Pi+yf]=qe[Pi+yf],st[Pi+gf]=qe[Pi+gf],st[Pi+xf]=qe[Pi+xf],st[Pi+vf]=qe[Pi+vf],ct=bU(at,st,_),Xa&&U(0)),n?(Oa=n._initted,$y(1),n.render(n.duration(),!0,!0),Fe=ge(E.a)-_e+Te+I,Te!==Fe&&V&&ct.splice(ct.length-2,2),n.render(0,!0,!0),Oa||n.invalidate(),$y(0)):Fe=Te;else if(h&&U()&&!A)for(rt=h.parentNode;rt&&rt!==fi;)rt._pinOffset&&(te-=rt._pinOffset,ae-=rt._pinOffset),rt=rt.parentNode;dr&&dr.forEach(function(zt){return zt.revert(!1,!0)}),D.start=te,D.end=ae,K=fe=U(),!A&&!Xa&&(K<Oe&&U(Oe),D.scroll.rec=0),D.revert(!1,!0),ye&&(X=-1,D.isActive&&U(te+Te*Ne),ye.restart(!0)),ir=0,n&&C&&(n._initted||Ce)&&n.progress()!==Ce&&n.progress(Ce,!0).render(n.time(),!0,!0),(Ne!==D.progress||A)&&(n&&!C&&n.totalProgress(Ne,!0),D.progress=(K-te)/Te===Ne?0:Ne,D.update(0,0,1)),f&&m&&(O._pinOffset=Math.round(D.progress*Fe)),d&&d(D)}},D.getVelocity=function(){return(U()-fe)/(kr()-Fg)*1e3||0},D.endAnimation=function(){gd(D.callbackAnimation),n&&(Re?Re.progress(1):n.paused()?C||gd(n,D.direction<0,1):gd(n,n.reversed()))},D.labelToScroll=function(he){return n&&n.labels&&(te||D.refresh()||te)+n.labels[he]/n.duration()*Te||0},D.getTrailing=function(he){var Ee=Ct.indexOf(D),Pe=D.direction>0?Ct.slice(0,Ee).reverse():Ct.slice(Ee+1);return(Qs(he)?Pe.filter(function(Xe){return Xe.vars.preventOverlaps===he}):Pe).filter(function(Xe){return D.direction>0?Xe.end<=te:Xe.start>=ae})},D.update=function(he,Ee,Pe){if(!(A&&!Pe&&!he)){var Xe=D.scroll(),Lt=he?0:(Xe-te)/Te,et=Lt<0?0:Lt>1?1:Lt||0,I=D.progress,Z,oe,J,ce,Ue,Ye,qe,rt;if(Ee&&(fe=K,K=A?U():Xe,w&&(be=Ae,Ae=n&&!C?n.totalProgress():et)),g&&!et&&f&&!ir&&!cm&&us&&te<Xe+(Xe-fe)/(kr()-Fg)*g&&(et=1e-4),et!==I&&D.enabled){if(Z=D.isActive=!!et&&et<1,oe=!!I&&I<1,Ye=Z!==oe,Ue=Ye||!!et!=!!I,D.direction=et>I?1:-1,D.progress=et,Ue&&!ir&&(J=et&&!I?0:et===1?1:I===1?2:3,C&&(ce=!Ye&&H[J+1]!=="none"&&H[J+1]||H[J],rt=n&&(ce==="complete"||ce==="reset"||ce in n))),M&&(Ye||rt)&&(rt||c||!n)&&(ro(M)?M(D):D.getTrailing(M).forEach(function(_t){return _t.endAnimation()})),C||(Re&&!ir&&!cm?((A||iu&&iu!==D)&&Re.render(Re._dp._time-Re._start),Re.resetTo?Re.resetTo("totalProgress",et,n._tTime/n._tDur):(Re.vars.totalProgress=et,Re.invalidate().restart())):n&&n.totalProgress(et,!!ir)),f){if(he&&m&&(O.style[m+E.os2]=ue),!V)ve(Ud(_e+Fe*et));else if(Ue){if(qe=!he&&et>I&&ae+1>Xe&&Xe+1>=Jo(L,E),_)if(!he&&(Z||qe)){var Ut=qa(f,!0),pt=Xe-te;X2(f,fi,Ut.top+(E===Ui?pt:0)+Ir,Ut.left+(E===Ui?0:pt)+Ir)}else X2(f,O);tp(Z||qe?ct:k),Fe!==Te&&et<1&&Z||ve(_e+(et===1&&!qe?Fe:0))}}w&&!ne.tween&&!ir&&!cm&&ye.restart(!0),o&&(Ye||x&&et&&(et<1||!e1))&&Nv(o.targets).forEach(function(_t){return _t.classList[Z||x?"add":"remove"](o.className)}),a&&!C&&!he&&a(D),Ue&&!ir?(C&&(rt&&(ce==="complete"?n.pause().totalProgress(1):ce==="reset"?n.restart(!0).pause():ce==="restart"?n.restart(!0):n[ce]()),a&&a(D)),(Ye||!e1)&&(u&&Ye&&i1(D,u),F[J]&&i1(D,F[J]),x&&(et===1?D.kill(!1,1):F[J]=0),Ye||(J=et===1?1:3,F[J]&&i1(D,F[J]))),S&&!Z&&Math.abs(D.getVelocity())>(Hd(S)?S:2500)&&(gd(D.callbackAnimation),Re?Re.progress(1):gd(n,ce==="reverse"?1:!et,1))):C&&a&&!ir&&a(D)}if(Me){var st=A?Xe/A.duration()*(A._caScrollDist||0):Xe;xe(st+(Ie._isFlipped?1:0)),Me(st)}je&&je(-Xe/A.duration()*(A._caScrollDist||0))}},D.enable=function(he,Ee){D.enabled||(D.enabled=!0,nr(L,"resize",Vd),nr(R?di:L,"scroll",rc),j&&nr(e,"refreshInit",j),he!==!1&&(D.progress=Ne=0,K=fe=X=U()),Ee!==!1&&D.refresh())},D.getTween=function(he){return he&&ne?ne.tween:Re},D.setPositions=function(he,Ee){f&&(_e+=he-te,Fe+=Ee-he-Te),D.start=te=he,D.end=ae=Ee,Te=Ee-he,D.update()},D.disable=function(he,Ee){if(D.enabled&&(he!==!1&&D.revert(!0,!0),D.enabled=D.isActive=!1,Ee||Re&&Re.pause(),Oe=0,ie&&(ie.uncache=1),j&&qi(e,"refreshInit",j),ye&&(ye.pause(),ne.tween&&ne.tween.kill()&&(ne.tween=0)),!R)){for(var Pe=Ct.length;Pe--;)if(Ct[Pe].scroller===L&&Ct[Pe]!==D)return;qi(L,"resize",Vd),qi(L,"scroll",rc)}},D.kill=function(he,Ee){D.disable(he,Ee),Re&&!Ee&&Re.kill(),l&&delete e_[l];var Pe=Ct.indexOf(D);Pe>=0&&Ct.splice(Pe,1),Pe===Br&&Gg>0&&Br--,Pe=0,Ct.forEach(function(Xe){return Xe.scroller===D.scroller&&(Pe=1)}),Pe||Xa||(D.scroll.rec=0),n&&(n.scrollTrigger=null,he&&n.render(-1),Ee||n.kill()),pe&&[pe,me,Ie,Y].forEach(function(Xe){return Xe.parentNode&&Xe.parentNode.removeChild(Xe)}),iu===D&&(iu=0),f&&(ie&&(ie.uncache=1),Pe=0,Ct.forEach(function(Xe){return Xe.pin===f&&Pe++}),Pe||(ie.spacer=0)),r.onKill&&r.onKill(D)},D.enable(!1,!1),tt&&tt(D),!n||!n.add||Te?D.refresh():nt.delayedCall(.01,function(){return te||ae||D.refresh()})&&(Te=.01)&&(te=ae=0)},e.register=function(r){return Mc||(nt=r||nR(),rR()&&window.document&&e.enable(),Mc=hm),Mc},e.defaults=function(r){if(r)for(var n in r)mm[n]=r[n];return mm},e.disable=function(r,n){hm=0,Ct.forEach(function(a){return a[n?"kill":"disable"](r)}),qi(Rt,"wheel",rc),qi(di,"scroll",rc),clearInterval(um),qi(di,"touchcancel",Js),qi(fi,"touchstart",Js),fm(qi,di,"pointerdown,touchstart,mousedown",N2),fm(qi,di,"pointerup,touchend,mouseup",F2),kv.kill(),dm(qi);for(var s=0;s<kt.length;s+=3)pm(qi,kt[s],kt[s+1]),pm(qi,kt[s],kt[s+2])},e.enable=function(){if(Rt=window,di=document,io=di.documentElement,fi=di.body,nt&&(Nv=nt.utils.toArray,qc=nt.utils.clamp,Jw=nt.core.context||Js,$y=nt.core.suppressOverwrites||Js,nt.core.globals("ScrollTrigger",e),fi)){hm=1,Ri.register(nt),e.isTouch=Ri.isTouch,No=Ri.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),nr(Rt,"wheel",rc),KO=[Rt,di,io,fi],nt.matchMedia?(e.matchMedia=function(l){var u=nt.matchMedia(),d;for(d in l)u.add(d,l[d]);return u},nt.addEventListener("matchMediaInit",function(){return WS()}),nt.addEventListener("matchMediaRevert",function(){return cR()}),nt.addEventListener("matchMedia",function(){Qc(0,1),ku("matchMedia")}),nt.matchMedia("(orientation: portrait)",function(){return j2(),j2})):console.warn("Requires GSAP 3.11.0 or later"),nr(di,"scroll",rc);var r=fi.style,n=r.borderTopStyle,s=nt.core.Animation.prototype,a,o;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=qa(fi),Ui.m=Math.round(a.top+Ui.sc())||0,Nr.m=Math.round(a.left+Nr.sc())||0,n?r.borderTopStyle=n:r.removeProperty("border-top-style"),um=setInterval(V2,250),nt.delayedCall(.5,function(){return cm=0}),nr(di,"touchcancel",Js),nr(fi,"touchstart",Js),fm(nr,di,"pointerdown,touchstart,mousedown",N2),fm(nr,di,"pointerup,touchend,mouseup",F2),Kw=nt.utils.checkPrefix("transform"),Wg.push(Kw),Mc=kr(),kv=nt.delayedCall(.2,Qc).pause(),Ec=[di,"visibilitychange",function(){var l=Rt.innerWidth,u=Rt.innerHeight;di.hidden?(B2=l,k2=u):(B2!==l||k2!==u)&&Vd()},di,"DOMContentLoaded",Qc,Rt,"load",Qc,Rt,"resize",Vd],dm(nr),Ct.forEach(function(l){return l.enable(0,1)}),o=0;o<kt.length;o+=3)pm(qi,kt[o],kt[o+1]),pm(qi,kt[o],kt[o+2])}},e.config=function(r){"limitCallbacks"in r&&(e1=!!r.limitCallbacks);var n=r.syncInterval;n&&clearInterval(um)||(um=n)&&setInterval(V2,n),"ignoreMobileResize"in r&&(eR=e.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(dm(qi)||dm(nr,r.autoRefreshEvents||"none"),$O=(r.autoRefreshEvents+"").indexOf("resize")===-1)},e.scrollerProxy=function(r,n){var s=$r(r),a=kt.indexOf(s),o=zu(s);~a&&kt.splice(a,o?6:2),n&&(o?ya.unshift(Rt,n,fi,n,io,n):ya.unshift(s,n))},e.clearMatchMedia=function(r){Ct.forEach(function(n){return n._ctx&&n._ctx.query===r&&n._ctx.kill(!0,!0)})},e.isInViewport=function(r,n,s){var a=(Qs(r)?$r(r):r).getBoundingClientRect(),o=a[s?xu:wu]*n||0;return s?a.right-o>0&&a.left+o<Rt.innerWidth:a.bottom-o>0&&a.top+o<Rt.innerHeight},e.positionInViewport=function(r,n,s){Qs(r)&&(r=$r(r));var a=r.getBoundingClientRect(),o=a[s?xu:wu],l=n==null?o/2:n in Fv?Fv[n]*o:~n.indexOf("%")?parseFloat(n)*o/100:parseFloat(n)||0;return s?(a.left+l)/Rt.innerWidth:(a.top+l)/Rt.innerHeight},e.killAll=function(r){if(Ct.forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var n=Bu.killAll||[];Bu={},n.forEach(function(s){return s()})}},e}();Et.version="3.11.1";Et.saveStyles=function(e){return e?Nv(e).forEach(function(t){if(t&&t.style){var i=vn.indexOf(t);i>=0&&vn.splice(i,5),vn.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),nt.core.getCache(t),Jw())}}):vn};Et.revert=function(e,t){return WS(!e,t)};Et.create=function(e,t){return new Et(e,t)};Et.refresh=function(e){return e?Vd():(Mc||Et.register())&&Qc(!0)};Et.update=ep;Et.clearScrollMemory=hR;Et.maxScroll=function(e,t){return Jo(e,t?Nr:Ui)};Et.getScrollFunc=function(e,t){return Al($r(e),t?Nr:Ui)};Et.getById=function(e){return e_[e]};Et.getAll=function(){return Ct.filter(function(e){return e.vars.id!=="ScrollSmoother"})};Et.isScrolling=function(){return!!us};Et.snapDirectional=GS;Et.addEventListener=function(e,t){var i=Bu[e]||(Bu[e]=[]);~i.indexOf(t)||i.push(t)};Et.removeEventListener=function(e,t){var i=Bu[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)};Et.batch=function(e,t){var i=[],r={},n=t.interval||.016,s=t.batchMax||1e9,a=function(u,d){var c=[],h=[],f=nt.delayedCall(n,function(){d(c,h),c=[],h=[]}).pause();return function(m){c.length||f.restart(!0),c.push(m.trigger),h.push(m),s<=c.length&&f.progress(1)}},o;for(o in t)r[o]=o.substr(0,2)==="on"&&ro(t[o])&&o!=="onRefreshInit"?a(o,t[o]):t[o];return ro(s)&&(s=s(),nr(Et,"refresh",function(){return s=t.batchMax()})),Nv(e).forEach(function(l){var u={};for(o in r)u[o]=r[o];u.trigger=l,i.push(Et.create(u))}),i};var q2=function(t,i,r,n){return i>n?t(n):i<0&&t(0),r>n?(n-i)/(r-i):r<0?i/(i-r):1},n1=function e(t,i){i===!0?t.style.removeProperty("touch-action"):t.style.touchAction=i===!0?"auto":i?"pan-"+i+(Ri.isTouch?" pinch-zoom":""):"none",t===io&&e(fi,i)},Q2={auto:1,scroll:1},AU=function(t){var i=t.event,r=t.target,n=t.axis,s=(i.changedTouches?i.changedTouches[0]:i).target,a=s._gsap||nt.core.getCache(s),o=kr(),l;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s.scrollHeight<=s.clientHeight;)s=s.parentNode;a._isScroll=s&&!zu(s)&&s!==r&&(Q2[(l=ra(s)).overflowY]||Q2[l.overflowX]),a._isScrollT=o}(a._isScroll||n==="x")&&(i.stopPropagation(),i._gsapAllow=!0)},dR=function(t,i,r,n){return Ri.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:i,onWheel:n=n&&AU,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return r&&nr(di,Ri.eventTypes[0],K2,!1,!0)},onDisable:function(){return qi(di,Ri.eventTypes[0],K2,!0)}})},MU=/(input|label|select|textarea)/i,Z2,K2=function(t){var i=MU.test(t.target.tagName);(i||Z2)&&(t._gsapAllow=!0,Z2=i)},EU=function(t){Ug(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var i=t,r=i.normalizeScrollX,n=i.momentum,s=i.allowNestedScroll,a,o,l=$r(t.target)||io,u=nt.core.globals().ScrollSmoother,d=u&&u.get(),c=No&&(t.content&&$r(t.content)||d&&t.content!==!1&&!d.smooth()&&d.content()),h=Al(l,Ui),f=Al(l,Nr),m=1,p=(Ri.isTouch&&Rt.visualViewport?Rt.visualViewport.scale*Rt.visualViewport.width:Rt.outerWidth)/Rt.innerWidth,g=0,v=ro(n)?function(){return n(a)}:function(){return n||2.8},y,x,w=dR(l,t.type,!0,s),_=function(){return x=!1},b=Js,A=Js,S=function(){o=Jo(l,Ui),A=qc(No?1:0,o),r&&(b=qc(0,Jo(l,Nr))),y=jg},M=function(){c._gsap.y=Ud(parseFloat(c._gsap.y)+h.offset)+"px",c.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(c._gsap.y)+", 0, 1)",h.offset=h.cacheID=0},E=function(){if(x){requestAnimationFrame(_);var H=Ud(a.deltaY/2),P=A(h.v-H);if(c&&P!==h.v+h.offset){h.offset=P-h.v;var z=Ud((parseFloat(c&&c._gsap.y)||0)-h.offset);c.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+z+", 0, 1)",c._gsap.y=z+"px",h.cacheID=kt.cache,ep()}return!0}h.offset&&M(),x=!0},C,L,N,R,V=function(){S(),C.isActive()&&C.vars.scrollY>o&&(h()>o?C.progress(1)&&h(o):C.resetTo("scrollY",o))};return c&&nt.set(c,{y:"+=0"}),t.ignoreCheck=function(F){return No&&F.type==="touchmove"&&E()||m>1.05&&F.type!=="touchstart"||a.isGesturing||F.touches&&F.touches.length>1},t.onPress=function(){var F=m;m=Ud((Rt.visualViewport&&Rt.visualViewport.scale||1)/p),C.pause(),F!==m&&n1(l,m>1.01?!0:r?!1:"x"),L=f(),N=h(),S(),y=jg},t.onRelease=t.onGestureStart=function(F,H){if(h.offset&&M(),!H)R.restart(!0);else{kt.cache++;var P=v(),z,D;r&&(z=f(),D=z+P*.05*-F.velocityX/.227,P*=q2(f,z,D,Jo(l,Nr)),C.vars.scrollX=b(D)),z=h(),D=z+P*.05*-F.velocityY/.227,P*=q2(h,z,D,Jo(l,Ui)),C.vars.scrollY=A(D),C.invalidate().duration(P).play(.01),(No&&C.vars.scrollY>=o||z>=o-1)&&nt.to({},{onUpdate:V,duration:P})}},t.onWheel=function(){C._ts&&C.pause(),kr()-g>1e3&&(y=0,g=kr())},t.onChange=function(F,H,P,z,D){if(jg!==y&&S(),H&&r&&f(b(z[2]===H?L+(F.startX-F.x):f()+H-z[1])),P){h.offset&&M();var j=D[2]===P,B=j?N+F.startY-F.y:h()+P-D[1],W=A(B);j&&B!==W&&(N+=W-B),h(W)}(P||H)&&ep()},t.onEnable=function(){n1(l,r?!1:"x"),nr(Rt,"resize",V),w.enable()},t.onDisable=function(){n1(l,!0),qi(Rt,"resize",V),w.kill()},t.lockAxis=t.lockAxis!==!1,a=new Ri(t),a.iOS=No,No&&!h()&&h(1),No&&nt.ticker.add(Js),R=a._dc,C=nt.to(a,{ease:"power4",paused:!0,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:R.vars.onComplete}),a};Et.sort=function(e){return Ct.sort(e||function(t,i){return(t.vars.refreshPriority||0)*-1e6+t.start-(i.start+(i.vars.refreshPriority||0)*-1e6)})};Et.observe=function(e){return new Ri(e)};Et.normalizeScroll=function(e){if(typeof e>"u")return Gn;if(e===!0&&Gn)return Gn.enable();if(e===!1)return Gn&&Gn.kill();var t=e instanceof Ri?e:EU(e);return Gn&&Gn.target===t.target&&Gn.kill(),zu(t.target)&&(Gn=t),t};Et.core={_getVelocityProp:Zw,_inputObserver:dR,_scrollers:kt,_proxies:ya,bridge:{ss:function(){us||ku("scrollStart"),us=kr()},ref:function(){return ir}}};nR()&&nt.registerPlugin(Et);const J2={duration:1,y:200,ease:"power4.out",skewY:50,stagger:{amount:1}},Qa={duration:1,opacity:0,y:20,ease:"power4.out"},ym={duration:1,opacity:0,scale:1.1,y:20,ease:"power3.out"};function zl(e){const t=s=>typeof window<"u"?window.matchMedia(s).matches:!1,[i,r]=De.exports.useState(t(e));function n(){r(t(e))}return De.exports.useEffect(()=>{const s=window.matchMedia(e);return n(),s.addListener?s.addListener(n):s.addEventListener("change",n),()=>{s.removeListener?s.removeListener(n):s.removeEventListener("change",n)}},[e]),i}const TU=typeof window<"u"?De.exports.useLayoutEffect:De.exports.useEffect;function $2(e,t,i,r){const n=De.exports.useRef(t);TU(()=>{n.current=t},[t]),De.exports.useEffect(()=>{const s=(i==null?void 0:i.current)||window;if(!(s&&s.addEventListener))return;const a=o=>n.current(o);return s.addEventListener(e,a,r),()=>{s.removeEventListener(e,a)}},[e,i,r])}function CU(e){const[t,i]=De.exports.useState(!1),r=()=>i(!0),n=()=>i(!1);return $2("mouseenter",r,e),$2("mouseleave",n,e),t}var B0={exports:{}},k0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DU=De.exports,PU=Symbol.for("react.element"),LU=Symbol.for("react.fragment"),OU=Object.prototype.hasOwnProperty,RU=DU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IU={key:!0,ref:!0,__self:!0,__source:!0};function fR(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)OU.call(t,r)&&!IU.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:PU,type:e,key:s,ref:a,props:n,_owner:RU.current}}k0.Fragment=LU;k0.jsx=fR;k0.jsxs=fR;(function(e){e.exports=k0})(B0);const ip=B0.exports.Fragment,Q=B0.exports.jsx,Je=B0.exports.jsxs;gt.registerPlugin(Et);const zU=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=De.exports.useRef(null),r=De.exports.useRef(null),n=De.exports.useRef(null),s=De.exports.useRef(null),a=zl("(min-width: 1024px)");return De.exports.useLayoutEffect(()=>{if(a){const o=e.current,l=t.current,u=i.current,d=r.current,c=n.current,h=s.current;let f=gt.from(l,{...Qa,scrollTrigger:{immediateRender:!1,trigger:o,start:"top center"}}),m=gt.from(u,{...Qa,scrollTrigger:{immediateRender:!1,trigger:o,start:"top center"},delay:.1}),p=gt.from(d,{...Qa,scrollTrigger:{immediateRender:!1,trigger:o,start:"top center"},delay:.2}),g=gt.from(c,{...Qa,scrollTrigger:{immediateRender:!1,trigger:o,start:"top center"},delay:.3}),v=gt.from(h,{...Qa,scrollTrigger:{immediateRender:!1,trigger:o,start:"top center"},delay:.4});return()=>{f.kill(),m.kill(),p.kill(),g.kill(),v.kill()}}},[]),Q("div",{className:"flex w-full flex-col items-center",ref:e,children:Je("div",{className:"w-52 text-justify md:w-72 2xl:w-96",children:[Je("h2",{children:[Q("span",{className:"text-5xl font-semibold text-teal-800 lg:text-7xl 2xl:text-[7rem]",ref:t,children:"dwyl"}),Q("sup",{className:"align-super text-lg font-semibold text-teal-700/75 lg:text-2xl 2xl:text-[2.2rem]",ref:i,children:"[/dw\u026A\u026B/]"})]}),Je("div",{children:[Q("h1",{className:"mt-1 italic text-gray-500 2xl:text-xl",ref:r,children:"noun"}),Je("h1",{className:"text-base leading-4 text-gray-800 2xl:text-2xl",ref:n,children:[Q("b",{children:"origin"}),": Do What You Love"]})]}),Q("p",{className:"mt-3 text-sm font-medium leading-none text-stone-800 2xl:text-base",ref:s,children:"1. Community of people on a mission to change the world using technology."})]})})};var pR={},XS={exports:{}},BU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kU=BU,NU=kU;function mR(){}function gR(){}gR.resetWarningCache=mR;var FU=function(){function e(r,n,s,a,o,l){if(l!==NU){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gR,resetWarningCache:mR};return i.PropTypes=i,i};XS.exports=FU();(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(De.exports),i=r(XS.exports);function r(_){return _&&_.__esModule?_:{default:_}}function n(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return n=function(){return _},_}function s(_){if(_&&_.__esModule)return _;if(_===null||d(_)!=="object"&&typeof _!="function")return{default:_};var b=n();if(b&&b.has(_))return b.get(_);var A={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in _)if(Object.prototype.hasOwnProperty.call(_,M)){var E=S?Object.getOwnPropertyDescriptor(_,M):null;E&&(E.get||E.set)?Object.defineProperty(A,M,E):A[M]=_[M]}return A.default=_,b&&b.set(_,A),A}function a(){return a=Object.assign||function(_){for(var b=1;b<arguments.length;b++){var A=arguments[b];for(var S in A)Object.prototype.hasOwnProperty.call(A,S)&&(_[S]=A[S])}return _},a.apply(this,arguments)}function o(_,b){var A=Object.keys(_);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(_);b&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(_,M).enumerable})),A.push.apply(A,S)}return A}function l(_){for(var b=1;b<arguments.length;b++){var A=arguments[b]!=null?arguments[b]:{};b%2?o(Object(A),!0).forEach(function(S){u(_,S,A[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(A)):o(Object(A)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(A,S))})}return _}function u(_,b,A){return b in _?Object.defineProperty(_,b,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[b]=A,_}function d(_){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(A){return typeof A}:d=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},d(_)}function c(_,b){return g(_)||p(_,b)||f(_,b)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(_,b){if(!!_){if(typeof _=="string")return m(_,b);var A=Object.prototype.toString.call(_).slice(8,-1);if(A==="Object"&&_.constructor&&(A=_.constructor.name),A==="Map"||A==="Set")return Array.from(_);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return m(_,b)}}function m(_,b){(b==null||b>_.length)&&(b=_.length);for(var A=0,S=new Array(b);A<b;A++)S[A]=_[A];return S}function p(_,b){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var A=[],S=!0,M=!1,E=void 0;try{for(var C=_[Symbol.iterator](),L;!(S=(L=C.next()).done)&&(A.push(L.value),!(b&&A.length===b));S=!0);}catch(N){M=!0,E=N}finally{try{!S&&C.return!=null&&C.return()}finally{if(M)throw E}}return A}}function g(_){if(Array.isArray(_))return _}function v(_,b){if(_==null)return{};var A=y(_,b),S,M;if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(_);for(M=0;M<E.length;M++)S=E[M],!(b.indexOf(S)>=0)&&(!Object.prototype.propertyIsEnumerable.call(_,S)||(A[S]=_[S]))}return A}function y(_,b){if(_==null)return{};var A={},S=Object.keys(_),M,E;for(E=0;E<S.length;E++)M=S[E],!(b.indexOf(M)>=0)&&(A[M]=_[M]);return A}var x=function(b){var A=b.element,S=b.children,M=b.tel,E=b.sms,C=b.facetime,L=b.email,N=b.href,R=b.headers,V=b.obfuscate,F=b.obfuscateChildren,H=b.linkText,P=b.style,z=b.onClick,D=v(b,["element","children","tel","sms","facetime","email","href","headers","obfuscate","obfuscateChildren","linkText","style","onClick"]),j=(0,t.useState)(!1),B=c(j,2),W=B[0],X=B[1],$=S||M||E||C||L||N,U=A,ne=function(){var pe,me=function(Y){return Object.keys(Y).map(function(Se){return"".concat(Se,"=").concat(encodeURIComponent(Y[Se]))}).join("&")};if(L)pe="mailto:".concat(L),R&&(pe+="?".concat(me(R)));else if(M)pe="tel:".concat(M);else if(E)pe="sms:".concat(E);else if(C)pe="facetime:".concat(C);else if(N)pe=N;else if(d(S)!=="object")pe=S;else return"";return pe},ie=function(){z&&typeof z=="function"&&z(),W===!1&&(window.location.href=ne())},re=function(pe){return typeof pe<"u"&&pe.split("").reverse().join("").replace("(",")").replace(")","(")},K=l(l({},P),{},{unicodeBidi:"bidi-override",direction:W===!0||V===!1||F===!1?"ltr":"rtl"}),fe=W===!0||V===!1||d(S)==="object"||F===!1?$:re($),te=U==="a"?{href:W===!0||V===!1?ne():H||"obfuscated",onClick:ie}:{};return t.default.createElement(U,a({onFocus:function(){return X(!0)},onMouseOver:function(){return X(!0)},onContextMenu:function(){return X(!0)}},D,te,{style:K}),fe)};x.propTypes={element:i.default.string,children:i.default.node,tel:i.default.string,sms:i.default.string,facetime:i.default.string,email:i.default.string,href:i.default.string,headers:i.default.shape({}),obfuscate:i.default.bool,obfuscateChildren:i.default.bool,linkText:i.default.string,style:i.default.shape({}),onClick:i.default.func},x.defaultProps={element:"a",children:void 0,tel:void 0,sms:void 0,facetime:void 0,email:void 0,href:void 0,headers:void 0,obfuscate:void 0,obfuscateChildren:void 0,linkText:void 0,style:{},onClick:void 0};var w=x;e.default=w})(pR);const eE=B3(pR),UU=()=>Je("div",{className:"pr-10 pl-10",children:[Q("h2",{className:"text-[41px] font-semibold text-[#248680] md:text-[61px]",children:"let's talk"}),Q("h4",{className:"text-lg font-semibold text-stone-500 md:text-2xl",children:"We'll get back to you within 24 hours"}),Q("div",{className:"mt-10 text-[26px] font-semibold text-[#D14E4E] underline md:text-[32px]",children:Q(eE,{email:"hello@dwyl.com",children:"hello@dwyl.com"})}),Q("h4",{className:"text-[22px] font-semibold text-[#444444] md:text-[28px]",children:Q(eE,{href:"tel:+44 (0) 7708 796446",children:"+44 (0) 7708 796446"})}),Je("div",{className:"mt-28 flex flex-row items-end justify-between pb-10",children:[Je("span",{className:"text-[11px] font-normal text-[#248680] opacity-40 md:text-[17px]",children:["@ 2014 - ",new Date().getFullYear()," dwyl, LLC"]}),Je("div",{className:"flex flex-row",children:[Q("svg",{onClick:()=>window.open("https://github.com/dwyl/start-here","_blank"),className:"mr-3 h-6 w-6 cursor-pointer text-gray-900",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:Q("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),Q("svg",{onClick:()=>window.open("https://twitter.com/dwyl","_blank"),className:"h-6 w-6 cursor-pointer text-blue-900",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:Q("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})]})]})]}),HU="modulepreload",VU=function(e){return"/"+e},tE={},vR=function(t,i,r){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=VU(n),n in tE)return;tE[n]=!0;const s=n.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":HU,s||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),s)return new Promise((l,u)=>{o.addEventListener("load",l),o.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};var jU=Object.create,YS=Object.defineProperty,GU=Object.getOwnPropertyDescriptor,WU=Object.getOwnPropertyNames,XU=Object.getPrototypeOf,YU=Object.prototype.hasOwnProperty,yR=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qU=(e,t)=>{for(var i in t)YS(e,i,{get:t[i],enumerable:!0})},QU=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of WU(t))!YU.call(e,n)&&n!==i&&YS(e,n,{get:()=>t[n],enumerable:!(r=GU(t,n))||r.enumerable});return e},xR=(e,t,i)=>(i=e!=null?jU(XU(e)):{},QU(t||!e||!e.__esModule?YS(i,"default",{value:e,enumerable:!0}):i,e)),ZU=yR(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||i;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var h=this||i;if(c=parseFloat(c),h.ctx||d(),typeof c<"u"&&c>=0&&c<=1){if(h._volume=c,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c,i.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=h._howls[f]._soundById(m[p]);g&&g._node&&(g._node.volume=g._volume*c)}return h}return h._volume},mute:function(c){var h=this||i;h.ctx||d(),h._muted=c,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c?0:h._volume,i.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=h._howls[f]._soundById(m[p]);g&&g._node&&(g._node.muted=c?!0:g._muted)}return h},stop:function(){for(var c=this||i,h=0;h<c._howls.length;h++)c._howls[h].stop();return c},unload:function(){for(var c=this||i,h=c._howls.length-1;h>=0;h--)c._howls[h].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,d()),c},codecs:function(c){return(this||i)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||i;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var h=new Audio;h.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||i,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return c}if(!h||typeof h.canPlayType!="function")return c;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),m=c._navigator?c._navigator.userAgent:"",p=m.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,v=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,y=m.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!g&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||i;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var h=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,c._releaseHtml5Audio(m)}catch{c.noAudio=!0;break}for(var p=0;p<c._howls.length;p++)if(!c._howls[p]._webAudio)for(var g=c._howls[p]._getSoundIds(),v=0;v<g.length;v++){var y=c._howls[p]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var x=c.ctx.createBufferSource();x.buffer=c._scratchBuffer,x.connect(c.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),x.onended=function(){x.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var w=0;w<c._howls.length;w++)c._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),c}},_obtainHtml5Audio:function(){var c=this||i;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var h=this||i;return c._unlocked&&h._html5AudioPool.push(c),h},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!i.usingWebAudio)){for(var h=0;h<c._howls.length;h++)if(c._howls[h]._webAudio){for(var f=0;f<c._howls[h]._sounds.length;f++)if(!c._howls[h]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var m=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(m,m)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!i.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var h=0;h<c._howls.length;h++)c._howls[h]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var i=new t,r=function(c){var h=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(c)};r.prototype={init:function(c){var h=this;return i.ctx||d(),h._autoplay=c.autoplay||!1,h._format=typeof c.format!="string"?c.format:[c.format],h._html5=c.html5||!1,h._muted=c.mute||!1,h._loop=c.loop||!1,h._pool=c.pool||5,h._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,h._rate=c.rate||1,h._sprite=c.sprite||{},h._src=typeof c.src!="string"?c.src:[c.src],h._volume=c.volume!==void 0?c.volume:1,h._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=c.onend?[{fn:c.onend}]:[],h._onfade=c.onfade?[{fn:c.onfade}]:[],h._onload=c.onload?[{fn:c.onload}]:[],h._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],h._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],h._onpause=c.onpause?[{fn:c.onpause}]:[],h._onplay=c.onplay?[{fn:c.onplay}]:[],h._onstop=c.onstop?[{fn:c.onstop}]:[],h._onmute=c.onmute?[{fn:c.onmute}]:[],h._onvolume=c.onvolume?[{fn:c.onvolume}]:[],h._onrate=c.onrate?[{fn:c.onrate}]:[],h._onseek=c.onseek?[{fn:c.onseek}]:[],h._onunlock=c.onunlock?[{fn:c.onunlock}]:[],h._onresume=[],h._webAudio=i.usingWebAudio&&!h._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var c=this,h=null;if(i.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var m,p;if(c._format&&c._format[f])m=c._format[f];else{if(p=c._src[f],typeof p!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(p),m||(m=/\.([^.]+)$/.exec(p.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&i.codecs(m)){h=c._src[f];break}}if(!h){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=h,c._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new n(c),c._webAudio&&a(c),c},play:function(c,h){var f=this,m=null;if(typeof c=="number")m=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var p=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(p++,m=f._sounds[g]._id);p===1?c=null:m=null}}var v=m?f._soundById(m):f._inactiveSound();if(!v)return null;if(m&&!c&&(c=v._sprite||"__default"),f._state!=="loaded"){v._sprite=c,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(m&&!v._paused)return h||f._loadQueue("play"),v._id;f._webAudio&&i._autoResume();var x=Math.max(0,v._seek>0?v._seek:f._sprite[c][0]/1e3),w=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-x),_=w*1e3/Math.abs(v._rate),b=f._sprite[c][0]/1e3,A=(f._sprite[c][0]+f._sprite[c][1])/1e3;v._sprite=c,v._ended=!1;var S=function(){v._paused=!1,v._seek=x,v._start=b,v._stop=A,v._loop=!!(v._loop||f._sprite[c][2])};if(x>=A){f._ended(v);return}var M=v._node;if(f._webAudio){var E=function(){f._playLock=!1,S(),f._refreshBuffer(v);var R=v._muted||f._muted?0:v._volume;M.gain.setValueAtTime(R,i.ctx.currentTime),v._playStart=i.ctx.currentTime,typeof M.bufferSource.start>"u"?v._loop?M.bufferSource.noteGrainOn(0,x,86400):M.bufferSource.noteGrainOn(0,x,w):v._loop?M.bufferSource.start(0,x,86400):M.bufferSource.start(0,x,w),_!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),_)),h||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?E():(f._playLock=!0,f.once("resume",E),f._clearTimer(v._id))}else{var C=function(){M.currentTime=x,M.muted=v._muted||f._muted||i._muted||M.muted,M.volume=v._volume*i.volume(),M.playbackRate=v._rate;try{var R=M.play();if(R&&typeof Promise<"u"&&(R instanceof Promise||typeof R.then=="function")?(f._playLock=!0,S(),R.then(function(){f._playLock=!1,M._unlocked=!0,h?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):h||(f._playLock=!1,S(),f._emit("play",v._id)),M.playbackRate=v._rate,M.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),_):(f._endTimers[v._id]=function(){f._ended(v),M.removeEventListener("ended",f._endTimers[v._id],!1)},M.addEventListener("ended",f._endTimers[v._id],!1))}catch(V){f._emit("playerror",v._id,V)}};M.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(M.src=f._src,M.load());var L=window&&window.ejecta||!M.readyState&&i._navigator.isCocoonJS;if(M.readyState>=3||L)C();else{f._playLock=!0,f._state="loading";var N=function(){f._state="loaded",C(),M.removeEventListener(i._canPlayEvent,N,!1)};M.addEventListener(i._canPlayEvent,N,!1),f._clearTimer(v._id)}}return v._id},pause:function(c){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(c)}}),h;for(var f=h._getSoundIds(c),m=0;m<f.length;m++){h._clearTimer(f[m]);var p=h._soundById(f[m]);if(p&&!p._paused&&(p._seek=h.seek(f[m]),p._rateSeek=0,p._paused=!0,h._stopFade(f[m]),p._node))if(h._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),h._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||h._emit("pause",p?p._id:null)}return h},stop:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var m=f._getSoundIds(c),p=0;p<m.length;p++){f._clearTimer(m[p]);var g=f._soundById(m[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[p]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),h||f._emit("stop",g._id))}return f},mute:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,h)}}),f;if(typeof h>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var m=f._getSoundIds(h),p=0;p<m.length;p++){var g=f._soundById(m[p]);g&&(g._muted=c,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(c?0:g._volume,i.ctx.currentTime):g._node&&(g._node.muted=i._muted?!0:c),f._emit("mute",g._id))}return f},volume:function(){var c=this,h=arguments,f,m;if(h.length===0)return c._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,h)}}),c;typeof m>"u"&&(c._volume=f),m=c._getSoundIds(m);for(var y=0;y<m.length;y++)v=c._soundById(m[y]),v&&(v._volume=f,h[2]||c._stopFade(m[y]),c._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,i.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*i.volume()),c._emit("volume",v._id))}else return v=m?c._soundById(m):c._sounds[0],v?v._volume:0;return c},fade:function(c,h,f,m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(c,h,f,m)}}),p;c=Math.min(Math.max(0,parseFloat(c)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),p.volume(c,m);for(var g=p._getSoundIds(m),v=0;v<g.length;v++){var y=p._soundById(g[v]);if(y){if(m||p._stopFade(g[v]),p._webAudio&&!y._muted){var x=i.ctx.currentTime,w=x+f/1e3;y._volume=c,y._node.gain.setValueAtTime(c,x),y._node.gain.linearRampToValueAtTime(h,w)}p._startFadeInterval(y,c,h,f,g[v],typeof m>"u")}}return p},_startFadeInterval:function(c,h,f,m,p,g){var v=this,y=h,x=f-h,w=Math.abs(x/.01),_=Math.max(4,w>0?m/w:m),b=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var A=(Date.now()-b)/m;b=Date.now(),y+=x*A,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?c._volume=y:v.volume(y,c._id,!0),g&&(v._volume=y),(f<h&&y<=f||f>h&&y>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,v.volume(f,c._id),v._emit("fade",c._id))},_)},_stopFade:function(c){var h=this,f=h._soundById(c);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,c),f._fadeTo=null,h._emit("fade",c)),h},loop:function(){var c=this,h=arguments,f,m,p;if(h.length===0)return c._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],c._loop=f;else return p=c._soundById(parseInt(h[0],10)),p?p._loop:!1;else h.length===2&&(f=h[0],m=parseInt(h[1],10));for(var g=c._getSoundIds(m),v=0;v<g.length;v++)p=c._soundById(g[v]),p&&(p._loop=f,c._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=f,f&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,c.playing(g[v])&&(c.pause(g[v],!0),c.play(g[v],!0)))));return c},rate:function(){var c=this,h=arguments,f,m;if(h.length===0)m=c._sounds[0]._id;else if(h.length===1){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,h)}}),c;typeof m>"u"&&(c._rate=f),m=c._getSoundIds(m);for(var y=0;y<m.length;y++)if(v=c._soundById(m[y]),v){c.playing(m[y])&&(v._rateSeek=c.seek(m[y]),v._playStart=c._webAudio?i.ctx.currentTime:v._playStart),v._rate=f,c._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,i.ctx.currentTime):v._node&&(v._node.playbackRate=f);var x=c.seek(m[y]),w=(c._sprite[v._sprite][0]+c._sprite[v._sprite][1])/1e3-x,_=w*1e3/Math.abs(v._rate);(c._endTimers[m[y]]||!v._paused)&&(c._clearTimer(m[y]),c._endTimers[m[y]]=setTimeout(c._ended.bind(c,v),_)),c._emit("rate",v._id)}}else return v=c._soundById(m),v?v._rate:c._rate;return c},seek:function(){var c=this,h=arguments,f,m;if(h.length===0)c._sounds.length&&(m=c._sounds[0]._id);else if(h.length===1){var p=c._getSoundIds(),g=p.indexOf(h[0]);g>=0?m=parseInt(h[0],10):c._sounds.length&&(m=c._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,h)}}),c;var v=c._soundById(m);if(v)if(typeof f=="number"&&f>=0){var y=c.playing(m);y&&c.pause(m,!0),v._seek=f,v._ended=!1,c._clearTimer(m),!c._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var x=function(){y&&c.play(m,!0),c._emit("seek",m)};if(y&&!c._webAudio){var w=function(){c._playLock?setTimeout(w,0):x()};setTimeout(w,0)}else x()}else if(c._webAudio){var _=c.playing(m)?i.ctx.currentTime-v._playStart:0,b=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(b+_*Math.abs(v._rate))}else return v._node.currentTime;return c},playing:function(c){var h=this;if(typeof c=="number"){var f=h._soundById(c);return f?!f._paused:!1}for(var m=0;m<h._sounds.length;m++)if(!h._sounds[m]._paused)return!0;return!1},duration:function(c){var h=this,f=h._duration,m=h._soundById(c);return m&&(f=h._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,h=c._sounds,f=0;f<h.length;f++)h[f]._paused||c.stop(h[f]._id),c._webAudio||(c._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(i._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),i._releaseHtml5Audio(h[f]._node)),delete h[f]._node,c._clearTimer(h[f]._id);var m=i._howls.indexOf(c);m>=0&&i._howls.splice(m,1);var p=!0;for(f=0;f<i._howls.length;f++)if(i._howls[f]._src===c._src||c._src.indexOf(i._howls[f]._src)>=0){p=!1;break}return s&&p&&delete s[c._src],i.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,h,f,m){var p=this,g=p["_on"+c];return typeof h=="function"&&g.push(m?{id:f,fn:h,once:m}:{id:f,fn:h}),p},off:function(c,h,f){var m=this,p=m["_on"+c],g=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(g=0;g<p.length;g++){var v=f===p[g].id;if(h===p[g].fn&&v||!h&&v){p.splice(g,1);break}}else if(c)m["_on"+c]=[];else{var y=Object.keys(m);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(m[y[g]])&&(m[y[g]]=[])}return m},once:function(c,h,f){var m=this;return m.on(c,h,f,1),m},_emit:function(c,h,f){for(var m=this,p=m["_on"+c],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===h||c==="load")&&(setTimeout(function(v){v.call(this,h,f)}.bind(m,p[g].fn),0),p[g].once&&m.off(c,p[g].fn,p[g].id));return m._loadQueue(c),m},_loadQueue:function(c){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===c&&(h._queue.shift(),h._loadQueue()),c||f.action()}return h},_ended:function(c){var h=this,f=c._sprite;if(!h._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(h._ended.bind(h,c),100),h;var m=!!(c._loop||h._sprite[f][2]);if(h._emit("end",c._id),!h._webAudio&&m&&h.stop(c._id,!0).play(c._id),h._webAudio&&m){h._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=i.ctx.currentTime;var p=(c._stop-c._start)*1e3/Math.abs(c._rate);h._endTimers[c._id]=setTimeout(h._ended.bind(h,c),p)}return h._webAudio&&!m&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,h._clearTimer(c._id),h._cleanBuffer(c._node),i._autoSuspend()),!h._webAudio&&!m&&h.stop(c._id,!0),h},_clearTimer:function(c){var h=this;if(h._endTimers[c]){if(typeof h._endTimers[c]!="function")clearTimeout(h._endTimers[c]);else{var f=h._soundById(c);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[c],!1)}delete h._endTimers[c]}return h},_soundById:function(c){for(var h=this,f=0;f<h._sounds.length;f++)if(c===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var h=0;h<c._sounds.length;h++)if(c._sounds[h]._ended)return c._sounds[h].reset();return new n(c)},_drain:function(){var c=this,h=c._pool,f=0,m=0;if(!(c._sounds.length<h)){for(m=0;m<c._sounds.length;m++)c._sounds[m]._ended&&f++;for(m=c._sounds.length-1;m>=0;m--){if(f<=h)return;c._sounds[m]._ended&&(c._webAudio&&c._sounds[m]._node&&c._sounds[m]._node.disconnect(0),c._sounds.splice(m,1),f--)}}},_getSoundIds:function(c){var h=this;if(typeof c>"u"){for(var f=[],m=0;m<h._sounds.length;m++)f.push(h._sounds[m]._id);return f}else return[c]},_refreshBuffer:function(c){var h=this;return c._node.bufferSource=i.ctx.createBufferSource(),c._node.bufferSource.buffer=s[h._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,i.ctx.currentTime),h},_cleanBuffer:function(c){var h=this,f=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=i._scratchBuffer}catch{}return c.bufferSource=null,h},_clearSound:function(c){var h=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);h||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(c){this._parent=c,this.init()};n.prototype={init:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++i._counter,h._sounds.push(c),c.create(),c},create:function(){var c=this,h=c._parent,f=i._muted||c._muted||c._parent._muted?0:c._volume;return h._webAudio?(c._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),c._node.gain.setValueAtTime(f,i.ctx.currentTime),c._node.paused=!0,c._node.connect(i.masterGain)):i.noAudio||(c._node=i._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(i._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=h._src,c._node.preload=h._preload===!0?"auto":h._preload,c._node.volume=f*i.volume(),c._node.load()),c},reset:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++i._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,h=c._parent;h._duration=Math.ceil(c._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),c._node.removeEventListener(i._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,h=c._parent;h._duration===1/0&&(h._duration=Math.ceil(c._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},a=function(c){var h=c._src;if(s[h]){c._duration=s[h].duration,u(c);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),m=new Uint8Array(f.length),p=0;p<f.length;++p)m[p]=f.charCodeAt(p);l(m.buffer,c)}else{var g=new XMLHttpRequest;g.open(c._xhr.method,h,!0),g.withCredentials=c._xhr.withCredentials,g.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(v){g.setRequestHeader(v,c._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,c)},g.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[h],c.load())},o(g)}},o=function(c){try{c.send()}catch{c.onerror()}},l=function(c,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},m=function(p){p&&h._sounds.length>0?(s[h._src]=p,u(h,p)):f()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(c).then(m).catch(f):i.ctx.decodeAudioData(c,m,f)},u=function(c,h){h&&!c._duration&&(c._duration=h.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},d=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),h=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(c&&f&&f<9){var m=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!m&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:i,Howl:r}}),typeof e<"u"&&(e.Howler=i,e.Howl=r),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=i,global.Howl=r,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=i,window.Howl=r,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var n=r._howls.length-1;n>=0;n--)r._howls[n].stereo(i);return r},HowlerGlobal.prototype.pos=function(i,r,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,n=typeof n!="number"?s._pos[2]:n,typeof i=="number")s._pos=[i,r,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(i,r,n,s,a,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(r=typeof r!="number"?u[1]:r,n=typeof n!="number"?u[2]:n,s=typeof s!="number"?u[3]:s,a=typeof a!="number"?u[4]:a,o=typeof o!="number"?u[5]:o,typeof i=="number")l._orientation=[i,r,n,s,a,o],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(i,r,n,s,a,o);else return u;return l},Howl.prototype.init=function(i){return function(r){var n=this;return n._orientation=r.orientation||[1,0,0],n._stereo=r.stereo||null,n._pos=r.pos||null,n._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},n._onstereo=r.onstereo?[{fn:r.onstereo}]:[],n._onpos=r.onpos?[{fn:r.onpos}]:[],n._onorientation=r.onorientation?[{fn:r.onorientation}]:[],i.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,r){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(i,r)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof i=="number")n._stereo=i,n._pos=[i,0,0];else return n._stereo;for(var a=n._getSoundIds(r),o=0;o<a.length;o++){var l=n._soundById(a[o]);if(l)if(typeof i=="number")l._stereo=i,l._pos=[i,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(i,0,0):l._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(i,r,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(i,r,n,s)}}),a;if(r=typeof r!="number"?0:r,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof i=="number")a._pos=[i,r,n];else return a._pos;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var u=a._soundById(o[l]);if(u)if(typeof i=="number")u._pos=[i,r,n],u._node&&((!u._panner||u._panner.pan)&&t(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setPosition(i,r,n)),a._emit("pos",u._id);else return u._pos}return a},Howl.prototype.orientation=function(i,r,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(i,r,n,s)}}),a;if(r=typeof r!="number"?a._orientation[1]:r,n=typeof n!="number"?a._orientation[2]:n,typeof s>"u")if(typeof i=="number")a._orientation=[i,r,n];else return a._orientation;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var u=a._soundById(o[l]);if(u)if(typeof i=="number")u._orientation=[i,r,n],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),t(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setOrientation(i,r,n)),a._emit("orientation",u._id);else return u._orientation}return a},Howl.prototype.pannerAttr=function(){var i=this,r=arguments,n,s,a;if(!i._webAudio)return i;if(r.length===0)return i._pannerAttr;if(r.length===1)if(typeof r[0]=="object")n=r[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),i._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:i._panningModel});else return a=i._soundById(parseInt(r[0],10)),a?a._pannerAttr:i._pannerAttr;else r.length===2&&(n=r[0],s=parseInt(r[1],10));for(var o=i._getSoundIds(s),l=0;l<o.length;l++)if(a=i._soundById(o[l]),a){var u=a._pannerAttr;u={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:u.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:u.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:u.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:u.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:u.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:u.panningModel};var d=a._panner;d?(d.coneInnerAngle=u.coneInnerAngle,d.coneOuterAngle=u.coneOuterAngle,d.coneOuterGain=u.coneOuterGain,d.distanceModel=u.distanceModel,d.maxDistance=u.maxDistance,d.refDistance=u.refDistance,d.rolloffFactor=u.rolloffFactor,d.panningModel=u.panningModel):(a._pos||(a._pos=i._pos||[0,0,-.5]),t(a,"spatial"))}return i},Sound.prototype.init=function(i){return function(){var r=this,n=r._parent;r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,i.call(this),r._stereo?n.stereo(r._stereo):r._pos&&n.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var r=this,n=r._parent;return r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,r._stereo?n.stereo(r._stereo):r._pos?n.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,n._refreshBuffer(r)),i.call(this)}}(Sound.prototype.reset);var t=function(i,r){r=r||"spatial",r==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}()}),KU=yR((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,u,d,c,h,f,m,p,g,v,y,x,w=r[0].length,_=r.length;if(_<w)throw new TypeError("Invalid matrix: m < n");for(var b=[],A=[],S=[],M=n==="f"?_:w,E=v=m=0;E<_;E++)A[E]=new Array(M).fill(0);for(E=0;E<w;E++)S[E]=new Array(w).fill(0);var C,L=new Array(w).fill(0);for(E=0;E<_;E++)for(l=0;l<w;l++)A[E][l]=r[E][l];for(E=0;E<w;E++){for(b[E]=m,g=0,d=E+1,l=E;l<_;l++)g+=Math.pow(A[l][E],2);if(g<o)m=0;else for(p=(f=A[E][E])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,A[E][E]=f-m,l=d;l<w;l++){for(g=0,u=E;u<_;u++)g+=A[u][E]*A[u][l];for(f=g/p,u=E;u<_;u++)A[u][l]=A[u][l]+f*A[u][E]}for(L[E]=m,g=0,l=d;l<w;l++)g+=Math.pow(A[E][l],2);if(g<o)m=0;else{for(p=(f=A[E][E+1])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,A[E][E+1]=f-m,l=d;l<w;l++)b[l]=A[E][l]/p;for(l=d;l<_;l++){for(g=0,u=d;u<w;u++)g+=A[l][u]*A[E][u];for(u=d;u<w;u++)A[l][u]=A[l][u]+g*b[u]}}v<(y=Math.abs(L[E])+Math.abs(b[E]))&&(v=y)}if(s)for(E=w-1;0<=E;E--){if(m!==0){for(p=A[E][E+1]*m,l=d;l<w;l++)S[l][E]=A[E][l]/p;for(l=d;l<w;l++){for(g=0,u=d;u<w;u++)g+=A[E][u]*S[u][l];for(u=d;u<w;u++)S[u][l]=S[u][l]+g*S[u][E]}}for(l=d;l<w;l++)S[E][l]=0,S[l][E]=0;S[E][E]=1,m=b[E],d=E}if(n){if(n==="f")for(E=w;E<_;E++){for(l=w;l<_;l++)A[E][l]=0;A[E][E]=1}for(E=w-1;0<=E;E--){for(d=E+1,m=L[E],l=d;l<M;l++)A[E][l]=0;if(m!==0){for(p=A[E][E]*m,l=d;l<M;l++){for(g=0,u=d;u<_;u++)g+=A[u][E]*A[u][l];for(f=g/p,u=E;u<_;u++)A[u][l]=A[u][l]+f*A[u][E]}for(l=E;l<_;l++)A[l][E]=A[l][E]/m}else for(l=E;l<_;l++)A[l][E]=0;A[E][E]=A[E][E]+1}}for(a*=v,u=w-1;0<=u;u--)for(var N=0;N<50;N++){for(C=!1,d=u;0<=d;d--){if(Math.abs(b[d])<=a){C=!0;break}if(Math.abs(L[d-1])<=a)break}if(!C){for(h=0,c=d-(g=1),E=d;E<u+1&&(f=g*b[E],b[E]=h*b[E],!(Math.abs(f)<=a));E++)if(m=L[E],L[E]=Math.sqrt(f*f+m*m),h=m/(p=L[E]),g=-f/p,n)for(l=0;l<_;l++)y=A[l][c],x=A[l][E],A[l][c]=y*h+x*g,A[l][E]=-y*g+x*h}if(x=L[u],d===u){if(x<0&&(L[u]=-x,s))for(l=0;l<w;l++)S[l][u]=-S[l][u];break}for(v=L[d],f=(((y=L[u-1])-x)*(y+x)+((m=b[u-1])-(p=b[u]))*(m+p))/(2*p*y),m=Math.sqrt(f*f+1),f=((v-x)*(v+x)+p*(y/(f<0?f-m:f+m)-p))/v,E=d+(g=h=1);E<u+1;E++){if(m=b[E],y=L[E],p=g*m,m*=h,x=Math.sqrt(f*f+p*p),f=v*(h=f/(b[E-1]=x))+m*(g=p/x),m=-v*g+m*h,p=y*g,y*=h,s)for(l=0;l<w;l++)v=S[l][E-1],x=S[l][E],S[l][E-1]=v*h+x*g,S[l][E]=-v*g+x*h;if(x=Math.sqrt(f*f+p*p),f=(h=f/(L[E-1]=x))*m+(g=p/x)*y,v=-g*m+h*y,n)for(l=0;l<_;l++)y=A[l][E-1],x=A[l][E],A[l][E-1]=y*h+x*g,A[l][E]=-y*g+x*h}b[d]=0,b[u]=f,L[u]=v}for(E=0;E<w;E++)L[E]<a&&(L[E]=0);return{u:A,q:L,v:S}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),Ep="142",Nn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},JU=0,iE=1,$U=2,qS=1,wR=2,jd=3,go=0,or=1,Ur=2,e5=1,ur=0,_u=1,rE=2,nE=3,sE=4,t5=5,Tc=100,i5=101,r5=102,aE=103,oE=104,n5=200,s5=201,a5=202,o5=203,_R=204,bR=205,l5=206,u5=207,c5=208,h5=209,d5=210,f5=0,p5=1,m5=2,r_=3,g5=4,v5=5,y5=6,x5=7,SR=0,w5=1,_5=2,so=0,b5=1,S5=2,A5=3,M5=4,E5=5,AR=300,Nu=301,Fu=302,n_=303,s_=304,Tp=306,rp=1e3,Sn=1001,a_=1002,mi=1003,lE=1004,uE=1005,Xt=1006,T5=1007,Cp=1008,Dr=1009,C5=1010,D5=1011,MR=1012,P5=1013,$o=1014,el=1015,np=1016,L5=1017,O5=1018,bu=1020,R5=1021,I5=1022,oa=1023,z5=1024,B5=1025,Su=1026,Uu=1027,k5=1028,N5=1029,F5=1030,U5=1031,H5=1033,s1=33776,a1=33777,o1=33778,l1=33779,cE=35840,hE=35841,dE=35842,fE=35843,V5=36196,pE=37492,mE=37496,gE=37808,vE=37809,yE=37810,xE=37811,wE=37812,_E=37813,bE=37814,SE=37815,AE=37816,ME=37817,EE=37818,TE=37819,CE=37820,DE=37821,PE=36492,Aa=3e3,yt=3001,wo=3200,ER=3201,j5=0,G5=1,ja="srgb",du="srgb-linear",u1=7680,W5=519,o_=35044,LE="300 es",l_=1035,Kr=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,n=i.length;r<n;r++)i[r].call(this,e);e.target=null}}},mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],OE=1234567,wf=Math.PI/180,sp=180/Math.PI;function xa(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(mr[e&255]+mr[e>>8&255]+mr[e>>16&255]+mr[e>>24&255]+"-"+mr[t&255]+mr[t>>8&255]+"-"+mr[t>>16&15|64]+mr[t>>24&255]+"-"+mr[i&63|128]+mr[i>>8&255]+"-"+mr[i>>16&255]+mr[i>>24&255]+mr[r&255]+mr[r>>8&255]+mr[r>>16&255]+mr[r>>24&255]).toLowerCase()}function Hi(e,t,i){return Math.max(t,Math.min(i,e))}function QS(e,t){return(e%t+t)%t}function X5(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)}function Y5(e,t,i){return e!==t?(i-e)/(t-e):0}function _f(e,t,i){return(1-i)*e+i*t}function q5(e,t,i,r){return _f(e,t,1-Math.exp(-i*r))}function Q5(e,t=1){return t-Math.abs(QS(e,t*2)-t)}function Z5(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function K5(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function J5(e,t){return e+Math.floor(Math.random()*(t-e+1))}function $5(e,t){return e+Math.random()*(t-e)}function eH(e){return e*(.5-Math.random())}function tH(e){e!==void 0&&(OE=e);let t=OE+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function iH(e){return e*wf}function rH(e){return e*sp}function u_(e){return(e&e-1)===0&&e!==0}function nH(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Uv(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function sH(e,t,i,r,n){let s=Math.cos,a=Math.sin,o=s(i/2),l=a(i/2),u=s((t+r)/2),d=a((t+r)/2),c=s((t-r)/2),h=a((t-r)/2),f=s((r-t)/2),m=a((r-t)/2);switch(n){case"XYX":e.set(o*d,l*c,l*h,o*u);break;case"YZY":e.set(l*h,o*d,l*c,o*u);break;case"ZXZ":e.set(l*c,l*h,o*d,o*u);break;case"XZX":e.set(o*d,l*m,l*f,o*u);break;case"YXY":e.set(l*f,o*d,l*m,o*u);break;case"ZYZ":e.set(l*m,l*f,o*d,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function aH(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function oH(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Mt=Object.freeze({__proto__:null,DEG2RAD:wf,RAD2DEG:sp,generateUUID:xa,clamp:Hi,euclideanModulo:QS,mapLinear:X5,inverseLerp:Y5,lerp:_f,damp:q5,pingpong:Q5,smoothstep:Z5,smootherstep:K5,randInt:J5,randFloat:$5,randFloatSpread:eH,seededRandom:tH,degToRad:iH,radToDeg:rH,isPowerOfTwo:u_,ceilPowerOfTwo:nH,floorPowerOfTwo:Uv,setQuaternionFromProperEuler:sH,normalize:oH,denormalize:aH}),q=class{constructor(e=0,t=0){q.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*i-s*r+e.x,this.y=n*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ar=class{constructor(){Ar.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,n,s,a,o,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=n,u[5]=o,u[6]=i,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],u=i[4],d=i[7],c=i[2],h=i[5],f=i[8],m=r[0],p=r[3],g=r[6],v=r[1],y=r[4],x=r[7],w=r[2],_=r[5],b=r[8];return n[0]=s*m+a*v+o*w,n[3]=s*p+a*y+o*_,n[6]=s*g+a*x+o*b,n[1]=l*m+u*v+d*w,n[4]=l*p+u*y+d*_,n[7]=l*g+u*x+d*b,n[2]=c*m+h*v+f*w,n[5]=c*p+h*y+f*_,n[8]=c*g+h*x+f*b,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-i*n*u+i*a*o+r*n*l-r*s*o}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],d=u*s-a*l,c=a*o-u*n,h=l*n-s*o,f=t*d+i*c+r*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=d*m,e[1]=(r*l-u*i)*m,e[2]=(a*i-r*s)*m,e[3]=c*m,e[4]=(u*t-r*o)*m,e[5]=(r*n-a*t)*m,e[6]=h*m,e[7]=(i*o-l*t)*m,e[8]=(s*t-i*n)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(i*o,i*l,-i*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.elements,n=r[0],s=r[3],a=r[6],o=r[1],l=r[4],u=r[7];return r[0]=t*n+i*o,r[3]=t*s+i*l,r[6]=t*a+i*u,r[1]=-i*n+t*o,r[4]=-i*s+t*l,r[7]=-i*a+t*u,this}translate(e,t){let i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function TR(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var lH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xm(e,t){return new lH[e](t)}function Hv(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Au(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Yg(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var c1={[ja]:{[du]:Au},[du]:{[ja]:Yg}},gs={legacyMode:!0,get workingColorSpace(){return du},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(c1[t]&&c1[t][i]!==void 0){let r=c1[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},CR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bi={r:0,g:0,b:0},vs={h:0,s:0,l:0},wm={h:0,s:0,l:0};function h1(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function _m(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var dt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ja){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gs.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=du){return this.r=e,this.g=t,this.b=i,gs.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=du){if(e=QS(e,1),t=Hi(t,0,1),i=Hi(i,0,1),t===0)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=h1(s,n,e+1/3),this.g=h1(s,n,e),this.b=h1(s,n,e-1/3)}return gs.toWorkingColorSpace(this,r),this}setStyle(e,t=ja){function i(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,gs.toWorkingColorSpace(this,t),i(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,gs.toWorkingColorSpace(this,t),i(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let o=parseFloat(n[1])/360,l=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return i(n[4]),this.setHSL(o,l,u,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=r[1],s=n.length;if(s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,gs.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,gs.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ja){let i=CR[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Au(e.r),this.g=Au(e.g),this.b=Au(e.b),this}copyLinearToSRGB(e){return this.r=Yg(e.r),this.g=Yg(e.g),this.b=Yg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ja){return gs.fromWorkingColorSpace(_m(this,Bi),e),Hi(Bi.r*255,0,255)<<16^Hi(Bi.g*255,0,255)<<8^Hi(Bi.b*255,0,255)<<0}getHexString(e=ja){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=du){gs.fromWorkingColorSpace(_m(this,Bi),t);let i=Bi.r,r=Bi.g,n=Bi.b,s=Math.max(i,r,n),a=Math.min(i,r,n),o,l,u=(a+s)/2;if(a===s)o=0,l=0;else{let d=s-a;switch(l=u<=.5?d/(s+a):d/(2-s-a),s){case i:o=(r-n)/d+(r<n?6:0);break;case r:o=(n-i)/d+2;break;case n:o=(i-r)/d+4;break}o/=6}return e.h=o,e.s=l,e.l=u,e}getRGB(e,t=du){return gs.fromWorkingColorSpace(_m(this,Bi),t),e.r=Bi.r,e.g=Bi.g,e.b=Bi.b,e}getStyle(e=ja){return gs.fromWorkingColorSpace(_m(this,Bi),e),e!==ja?`color(${e} ${Bi.r} ${Bi.g} ${Bi.b})`:`rgb(${Bi.r*255|0},${Bi.g*255|0},${Bi.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(vs),vs.h+=e,vs.s+=t,vs.l+=i,this.setHSL(vs.h,vs.s,vs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(vs),e.getHSL(wm);let i=_f(vs.h,wm.h,t),r=_f(vs.s,wm.s,t),n=_f(vs.l,wm.l,t);return this.setHSL(i,r,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};dt.NAMES=CR;var nc,DR=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nc===void 0&&(nc=Hv("canvas")),nc.width=e.width,nc.height=e.height;let i=nc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=nc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Hv("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),n=r.data;for(let s=0;s<n.length;s++)n[s]=Au(n[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Au(t[i]/255)*255):t[i]=Au(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},PR=class{constructor(e=null){this.isSource=!0,this.uuid=xa(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let n;if(Array.isArray(r)){n=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?n.push(d1(r[s].image)):n.push(d1(r[s]))}else n=d1(r);i.url=n}return t||(e.images[this.uuid]=i),i}};function d1(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?DR.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var uH=0,Gr=class extends Kr{constructor(e=Gr.DEFAULT_IMAGE,t=Gr.DEFAULT_MAPPING,i=Sn,r=Sn,n=Xt,s=Cp,a=oa,o=Dr,l=1,u=Aa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uH++}),this.uuid=xa(),this.name="",this.source=new PR(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new q(0,0),this.repeat=new q(1,1),this.center=new q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ar,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==AR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rp:e.x=e.x-Math.floor(e.x);break;case Sn:e.x=e.x<0?0:1;break;case a_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rp:e.y=e.y-Math.floor(e.y);break;case Sn:e.y=e.y<0?0:1;break;case a_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Gr.DEFAULT_IMAGE=null;Gr.DEFAULT_MAPPING=AR;var vt=class{constructor(e=0,t=0,i=0,r=1){vt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,n,s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],d=s[5],c=s[9],h=s[2],f=s[6],m=s[10];if(Math.abs(o-u)<.01&&Math.abs(l-h)<.01&&Math.abs(c-f)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+h)<.1&&Math.abs(c+f)<.1&&Math.abs(a+d+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(a+1)/2,v=(d+1)/2,y=(m+1)/2,x=(o+u)/4,w=(l+h)/4,_=(c+f)/4;return g>v&&g>y?g<.01?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(g),r=x/i,n=w/i):v>y?v<.01?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(v),i=x/r,n=_/r):y<.01?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(y),i=w/n,r=_/n),this.set(i,r,n,t),this}let p=Math.sqrt((f-c)*(f-c)+(l-h)*(l-h)+(u-o)*(u-o));return Math.abs(p)<.001&&(p=1),this.x=(f-c)/p,this.y=(l-h)/p,this.z=(u-o)/p,this.w=Math.acos((a+d+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Ei=class extends Kr{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vt(0,0,e,t),this.scissorTest=!1,this.viewport=new vt(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new Gr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Xt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new PR(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},LR=class extends Gr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=mi,this.minFilter=mi,this.wrapR=Sn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},cH=class extends Gr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=mi,this.minFilter=mi,this.wrapR=Sn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ii=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,n,s,a){let o=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],c=n[s+0],h=n[s+1],f=n[s+2],m=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(d!==m||o!==c||l!==h||u!==f){let p=1-a,g=o*c+l*h+u*f+d*m,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let w=Math.sqrt(y),_=Math.atan2(w,g*v);p=Math.sin(p*_)/w,a=Math.sin(a*_)/w}let x=a*v;if(o=o*p+c*x,l=l*p+h*x,u=u*p+f*x,d=d*p+m*x,p===1-a){let w=1/Math.sqrt(o*o+l*l+u*u+d*d);o*=w,l*=w,u*=w,d*=w}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,n,s){let a=i[r],o=i[r+1],l=i[r+2],u=i[r+3],d=n[s],c=n[s+1],h=n[s+2],f=n[s+3];return e[t]=a*f+u*d+o*h-l*c,e[t+1]=o*f+u*c+l*d-a*h,e[t+2]=l*f+u*h+a*c-o*d,e[t+3]=u*f-a*d-o*c-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let i=e._x,r=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(i/2),u=a(r/2),d=a(n/2),c=o(i/2),h=o(r/2),f=o(n/2);switch(s){case"XYZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"YXZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"ZXY":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"ZYX":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"YZX":this._x=c*u*d+l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d-c*h*f;break;case"XZY":this._x=c*u*d-l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d+c*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],u=t[6],d=t[10],c=i+a+d;if(c>0){let h=.5/Math.sqrt(c+1);this._w=.25/h,this._x=(u-o)*h,this._y=(n-l)*h,this._z=(s-r)*h}else if(i>a&&i>d){let h=2*Math.sqrt(1+i-a-d);this._w=(u-o)/h,this._x=.25*h,this._y=(r+s)/h,this._z=(n+l)/h}else if(a>d){let h=2*Math.sqrt(1+a-i-d);this._w=(n-l)/h,this._x=(r+s)/h,this._y=.25*h,this._z=(o+u)/h}else{let h=2*Math.sqrt(1+d-i-a);this._w=(s-r)/h,this._x=(n+l)/h,this._y=(o+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hi(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=i*u+s*a+r*l-n*o,this._y=r*u+s*o+n*a-i*l,this._z=n*u+s*l+i*o-r*a,this._w=s*u-i*a-r*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,n=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let h=1-t;return this._w=h*s+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,c=Math.sin(t*u)/l;return this._w=s*d+this._w*c,this._x=i*d+this._x*c,this._y=r*d+this._y*c,this._z=n*d+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(n),i*Math.cos(n),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},T=class{constructor(e=0,t=0,i=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(RE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RE.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=e.elements,s=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*i,u=o*i+a*t-n*r,d=o*r+n*i-s*t,c=-n*t-s*i-a*r;return this.x=l*o+c*-n+u*-a-d*-s,this.y=u*o+c*-s+d*-n-l*-a,this.z=d*o+c*-a+l*-s-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return f1.copy(this).projectOnVector(e),this.sub(f1)}reflect(e){return this.sub(f1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Hi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},f1=new T,RE=new ii,Xi=class{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let u=e[o],d=e[o+1],c=e[o+2];u<t&&(t=u),d<i&&(i=d),c<r&&(r=c),u>n&&(n=u),d>s&&(s=d),c>a&&(a=c)}return this.min.set(t,i,r),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let u=e.getX(o),d=e.getY(o),c=e.getZ(o);u<t&&(t=u),d<i&&(i=d),c<r&&(r=c),u>n&&(n=u),d>s&&(s=d),c>a&&(a=c)}return this.min.set(t,i,r),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Hl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){let n=i.attributes.position;for(let s=0,a=n.count;s<a;s++)Hl.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Hl)}else i.boundingBox===null&&i.computeBoundingBox(),p1.copy(i.boundingBox),p1.applyMatrix4(e.matrixWorld),this.union(p1);let r=e.children;for(let n=0,s=r.length;n<s;n++)this.expandByObject(r[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hl),Hl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vd),bm.subVectors(this.max,vd),sc.subVectors(e.a,vd),ac.subVectors(e.b,vd),oc.subVectors(e.c,vd),Ao.subVectors(ac,sc),Mo.subVectors(oc,ac),Vl.subVectors(sc,oc);let t=[0,-Ao.z,Ao.y,0,-Mo.z,Mo.y,0,-Vl.z,Vl.y,Ao.z,0,-Ao.x,Mo.z,0,-Mo.x,Vl.z,0,-Vl.x,-Ao.y,Ao.x,0,-Mo.y,Mo.x,0,-Vl.y,Vl.x,0];return!m1(t,sc,ac,oc,bm)||(t=[1,0,0,0,1,0,0,0,1],!m1(t,sc,ac,oc,bm))?!1:(Sm.crossVectors(Ao,Mo),t=[Sm.x,Sm.y,Sm.z],m1(t,sc,ac,oc,bm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Hl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Hl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ra[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ra[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ra[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ra[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ra[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ra[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ra[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ra[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ra),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ra=[new T,new T,new T,new T,new T,new T,new T,new T],Hl=new T,p1=new Xi,sc=new T,ac=new T,oc=new T,Ao=new T,Mo=new T,Vl=new T,vd=new T,bm=new T,Sm=new T,jl=new T;function m1(e,t,i,r,n){for(let s=0,a=e.length-3;s<=a;s+=3){jl.fromArray(e,s);let o=n.x*Math.abs(jl.x)+n.y*Math.abs(jl.y)+n.z*Math.abs(jl.z),l=t.dot(jl),u=i.dot(jl),d=r.dot(jl);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>o)return!1}return!0}var hH=new Xi,IE=new T,Am=new T,g1=new T,ks=class{constructor(e=new T,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):hH.setFromPoints(e).getCenter(i);let r=0;for(let n=0,s=e.length;n<s;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){g1.subVectors(e,this.center);let t=g1.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(g1.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?Am.set(0,0,1).multiplyScalar(e.radius):Am.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(IE.copy(e.center).add(Am)),this.expandByPoint(IE.copy(e.center).sub(Am)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ia=new T,v1=new T,Mm=new T,Eo=new T,y1=new T,Em=new T,x1=new T,Dp=class{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ia)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ia.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ia.copy(this.direction).multiplyScalar(t).add(this.origin),Ia.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){v1.copy(e).add(t).multiplyScalar(.5),Mm.copy(t).sub(e).normalize(),Eo.copy(this.origin).sub(v1);let n=e.distanceTo(t)*.5,s=-this.direction.dot(Mm),a=Eo.dot(this.direction),o=-Eo.dot(Mm),l=Eo.lengthSq(),u=Math.abs(1-s*s),d,c,h,f;if(u>0)if(d=s*o-a,c=s*a-o,f=n*u,d>=0)if(c>=-f)if(c<=f){let m=1/u;d*=m,c*=m,h=d*(d+s*c+2*a)+c*(s*d+c+2*o)+l}else c=n,d=Math.max(0,-(s*c+a)),h=-d*d+c*(c+2*o)+l;else c=-n,d=Math.max(0,-(s*c+a)),h=-d*d+c*(c+2*o)+l;else c<=-f?(d=Math.max(0,-(-s*n+a)),c=d>0?-n:Math.min(Math.max(-n,-o),n),h=-d*d+c*(c+2*o)+l):c<=f?(d=0,c=Math.min(Math.max(-n,-o),n),h=c*(c+2*o)+l):(d=Math.max(0,-(s*n+a)),c=d>0?n:Math.min(Math.max(-n,-o),n),h=-d*d+c*(c+2*o)+l);else c=s>0?-n:n,d=Math.max(0,-(s*c+a)),h=-d*d+c*(c+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Mm).multiplyScalar(c).add(v1),h}intersectSphere(e,t){Ia.subVectors(e.center,this.origin);let i=Ia.dot(this.direction),r=Ia.dot(Ia)-i*i,n=e.radius*e.radius;if(r>n)return null;let s=Math.sqrt(n-r),a=i-s,o=i+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,n,s,a,o,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,c=this.origin;return l>=0?(i=(e.min.x-c.x)*l,r=(e.max.x-c.x)*l):(i=(e.max.x-c.x)*l,r=(e.min.x-c.x)*l),u>=0?(n=(e.min.y-c.y)*u,s=(e.max.y-c.y)*u):(n=(e.max.y-c.y)*u,s=(e.min.y-c.y)*u),i>s||n>r||((n>i||i!==i)&&(i=n),(s<r||r!==r)&&(r=s),d>=0?(a=(e.min.z-c.z)*d,o=(e.max.z-c.z)*d):(a=(e.max.z-c.z)*d,o=(e.min.z-c.z)*d),i>o||a>r)||((a>i||i!==i)&&(i=a),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ia)!==null}intersectTriangle(e,t,i,r,n){y1.subVectors(t,e),Em.subVectors(i,e),x1.crossVectors(y1,Em);let s=this.direction.dot(x1),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Eo.subVectors(this.origin,e);let o=a*this.direction.dot(Em.crossVectors(Eo,Em));if(o<0)return null;let l=a*this.direction.dot(y1.cross(Eo));if(l<0||o+l>s)return null;let u=-a*Eo.dot(x1);return u<0?null:this.at(u/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ke=class{constructor(){Ke.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,n,s,a,o,l,u,d,c,h,f,m,p){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=u,g[10]=d,g[14]=c,g[3]=h,g[7]=f,g[11]=m,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ke().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/lc.setFromMatrixColumn(e,0).length(),n=1/lc.setFromMatrixColumn(e,1).length(),s=1/lc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,i=e.x,r=e.y,n=e.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),l=Math.sin(r),u=Math.cos(n),d=Math.sin(n);if(e.order==="XYZ"){let c=s*u,h=s*d,f=a*u,m=a*d;t[0]=o*u,t[4]=-o*d,t[8]=l,t[1]=h+f*l,t[5]=c-m*l,t[9]=-a*o,t[2]=m-c*l,t[6]=f+h*l,t[10]=s*o}else if(e.order==="YXZ"){let c=o*u,h=o*d,f=l*u,m=l*d;t[0]=c+m*a,t[4]=f*a-h,t[8]=s*l,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=h*a-f,t[6]=m+c*a,t[10]=s*o}else if(e.order==="ZXY"){let c=o*u,h=o*d,f=l*u,m=l*d;t[0]=c-m*a,t[4]=-s*d,t[8]=f+h*a,t[1]=h+f*a,t[5]=s*u,t[9]=m-c*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let c=s*u,h=s*d,f=a*u,m=a*d;t[0]=o*u,t[4]=f*l-h,t[8]=c*l+m,t[1]=o*d,t[5]=m*l+c,t[9]=h*l-f,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let c=s*o,h=s*l,f=a*o,m=a*l;t[0]=o*u,t[4]=m-c*d,t[8]=f*d+h,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+f,t[10]=c-m*d}else if(e.order==="XZY"){let c=s*o,h=s*l,f=a*o,m=a*l;t[0]=o*u,t[4]=-d,t[8]=l*u,t[1]=c*d+m,t[5]=s*u,t[9]=h*d-f,t[2]=f*d-h,t[6]=a*u,t[10]=m*d+c}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dH,e,fH)}lookAt(e,t,i){let r=this.elements;return mn.subVectors(e,t),mn.lengthSq()===0&&(mn.z=1),mn.normalize(),To.crossVectors(i,mn),To.lengthSq()===0&&(Math.abs(i.z)===1?mn.x+=1e-4:mn.z+=1e-4,mn.normalize(),To.crossVectors(i,mn)),To.normalize(),Tm.crossVectors(mn,To),r[0]=To.x,r[4]=Tm.x,r[8]=mn.x,r[1]=To.y,r[5]=Tm.y,r[9]=mn.y,r[2]=To.z,r[6]=Tm.z,r[10]=mn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],u=i[1],d=i[5],c=i[9],h=i[13],f=i[2],m=i[6],p=i[10],g=i[14],v=i[3],y=i[7],x=i[11],w=i[15],_=r[0],b=r[4],A=r[8],S=r[12],M=r[1],E=r[5],C=r[9],L=r[13],N=r[2],R=r[6],V=r[10],F=r[14],H=r[3],P=r[7],z=r[11],D=r[15];return n[0]=s*_+a*M+o*N+l*H,n[4]=s*b+a*E+o*R+l*P,n[8]=s*A+a*C+o*V+l*z,n[12]=s*S+a*L+o*F+l*D,n[1]=u*_+d*M+c*N+h*H,n[5]=u*b+d*E+c*R+h*P,n[9]=u*A+d*C+c*V+h*z,n[13]=u*S+d*L+c*F+h*D,n[2]=f*_+m*M+p*N+g*H,n[6]=f*b+m*E+p*R+g*P,n[10]=f*A+m*C+p*V+g*z,n[14]=f*S+m*L+p*F+g*D,n[3]=v*_+y*M+x*N+w*H,n[7]=v*b+y*E+x*R+w*P,n[11]=v*A+y*C+x*V+w*z,n[15]=v*S+y*L+x*F+w*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],d=e[6],c=e[10],h=e[14],f=e[3],m=e[7],p=e[11],g=e[15];return f*(+n*o*d-r*l*d-n*a*c+i*l*c+r*a*h-i*o*h)+m*(+t*o*h-t*l*c+n*s*c-r*s*h+r*l*u-n*o*u)+p*(+t*l*d-t*a*h-n*s*d+i*s*h+n*a*u-i*l*u)+g*(-r*a*u-t*o*d+t*a*c+r*s*d-i*s*c+i*o*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],d=e[9],c=e[10],h=e[11],f=e[12],m=e[13],p=e[14],g=e[15],v=d*p*l-m*c*l+m*o*h-a*p*h-d*o*g+a*c*g,y=f*c*l-u*p*l-f*o*h+s*p*h+u*o*g-s*c*g,x=u*m*l-f*d*l+f*a*h-s*m*h-u*a*g+s*d*g,w=f*d*o-u*m*o-f*a*c+s*m*c+u*a*p-s*d*p,_=t*v+i*y+r*x+n*w;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=v*b,e[1]=(m*c*n-d*p*n-m*r*h+i*p*h+d*r*g-i*c*g)*b,e[2]=(a*p*n-m*o*n+m*r*l-i*p*l-a*r*g+i*o*g)*b,e[3]=(d*o*n-a*c*n-d*r*l+i*c*l+a*r*h-i*o*h)*b,e[4]=y*b,e[5]=(u*p*n-f*c*n+f*r*h-t*p*h-u*r*g+t*c*g)*b,e[6]=(f*o*n-s*p*n-f*r*l+t*p*l+s*r*g-t*o*g)*b,e[7]=(s*c*n-u*o*n+u*r*l-t*c*l-s*r*h+t*o*h)*b,e[8]=x*b,e[9]=(f*d*n-u*m*n-f*i*h+t*m*h+u*i*g-t*d*g)*b,e[10]=(s*m*n-f*a*n+f*i*l-t*m*l-s*i*g+t*a*g)*b,e[11]=(u*a*n-s*d*n-u*i*l+t*d*l+s*i*h-t*a*h)*b,e[12]=w*b,e[13]=(u*m*r-f*d*r+f*i*c-t*m*c-u*i*p+t*d*p)*b,e[14]=(f*a*r-s*m*r-f*i*o+t*m*o+s*i*p-t*a*p)*b,e[15]=(s*d*r-u*a*r+u*i*o-t*d*o-s*i*c+t*a*c)*b,this}scale(e){let t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),n=1-i,s=e.x,a=e.y,o=e.z,l=n*s,u=n*a;return this.set(l*s+i,l*a-r*o,l*o+r*a,0,l*a+r*o,u*a+i,u*o-r*s,0,l*o-r*a,u*o+r*s,n*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,n,s){return this.set(1,i,n,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,u=s+s,d=a+a,c=n*l,h=n*u,f=n*d,m=s*u,p=s*d,g=a*d,v=o*l,y=o*u,x=o*d,w=i.x,_=i.y,b=i.z;return r[0]=(1-(m+g))*w,r[1]=(h+x)*w,r[2]=(f-y)*w,r[3]=0,r[4]=(h-x)*_,r[5]=(1-(c+g))*_,r[6]=(p+v)*_,r[7]=0,r[8]=(f+y)*b,r[9]=(p-v)*b,r[10]=(1-(c+m))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,n=lc.set(r[0],r[1],r[2]).length(),s=lc.set(r[4],r[5],r[6]).length(),a=lc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],ys.copy(this);let o=1/n,l=1/s,u=1/a;return ys.elements[0]*=o,ys.elements[1]*=o,ys.elements[2]*=o,ys.elements[4]*=l,ys.elements[5]*=l,ys.elements[6]*=l,ys.elements[8]*=u,ys.elements[9]*=u,ys.elements[10]*=u,t.setFromRotationMatrix(ys),i.x=n,i.y=s,i.z=a,this}makePerspective(e,t,i,r,n,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let a=this.elements,o=2*n/(t-e),l=2*n/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),c=-(s+n)/(s-n),h=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,n,s){let a=this.elements,o=1/(t-e),l=1/(i-r),u=1/(s-n),d=(t+e)*o,c=(i+r)*l,h=(s+n)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},lc=new T,ys=new Ke,dH=new T(0,0,0),fH=new T(1,1,1),To=new T,Tm=new T,mn=new T,zE=new Ke,BE=new ii,$n=class{constructor(e=0,t=0,i=0,r=$n.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,n=r[0],s=r[4],a=r[8],o=r[1],l=r[5],u=r[9],d=r[2],c=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Hi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Hi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(Hi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Hi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(c,h),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Hi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Hi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return zE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zE,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BE.setFromEuler(this),this.setFromQuaternion(BE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};$n.DefaultOrder="XYZ";$n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var ZS=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},pH=0,kE=new T,uc=new ii,za=new Ke,Cm=new T,yd=new T,mH=new T,gH=new ii,NE=new T(1,0,0),FE=new T(0,1,0),UE=new T(0,0,1),vH={type:"added"},HE={type:"removed"},Yt=class extends Kr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pH++}),this.uuid=xa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DefaultUp.clone();let e=new T,t=new $n,i=new ii,r=new T(1,1,1);function n(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(n),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ke},normalMatrix:{value:new Ar}}),this.matrix=new Ke,this.matrixWorld=new Ke,this.matrixAutoUpdate=Yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ZS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uc.setFromAxisAngle(e,t),this.quaternion.multiply(uc),this}rotateOnWorldAxis(e,t){return uc.setFromAxisAngle(e,t),this.quaternion.premultiply(uc),this}rotateX(e){return this.rotateOnAxis(NE,e)}rotateY(e){return this.rotateOnAxis(FE,e)}rotateZ(e){return this.rotateOnAxis(UE,e)}translateOnAxis(e,t){return kE.copy(e).applyQuaternion(this.quaternion),this.position.add(kE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NE,e)}translateY(e){return this.translateOnAxis(FE,e)}translateZ(e){return this.translateOnAxis(UE,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(za.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Cm.copy(e):Cm.set(e,t,i);let r=this.parent;this.updateWorldMatrix(!0,!1),yd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?za.lookAt(yd,Cm,this.up):za.lookAt(Cm,yd,this.up),this.quaternion.setFromRotationMatrix(za),r&&(za.extractRotation(r.matrixWorld),uc.setFromRotationMatrix(za),this.quaternion.premultiply(uc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(vH)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HE)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(HE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),za.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),za.multiply(e.parent.matrixWorld)),e.applyMatrix4(za),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){let n=this.children[i].getObjectByProperty(e,t);if(n!==void 0)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yd,e,mH),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yd,gH,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let n=0,s=r.length;n<s;n++)r[n].updateWorldMatrix(!1,!0)}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,u=o.length;l<u;l++){let d=o[l];n(e.shapes,d)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));r.material=a}else r.material=n(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];r.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),u=s(e.images),d=s(e.shapes),c=s(e.skeletons),h=s(e.animations),f=s(e.nodes);a.length>0&&(i.geometries=a),o.length>0&&(i.materials=o),l.length>0&&(i.textures=l),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),c.length>0&&(i.skeletons=c),h.length>0&&(i.animations=h),f.length>0&&(i.nodes=f)}return i.object=r,i;function s(a){let o=[];for(let l in a){let u=a[l];delete u.metadata,o.push(u)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let r=e.children[i];this.add(r.clone())}return this}};Yt.DefaultUp=new T(0,1,0);Yt.DefaultMatrixAutoUpdate=!0;var xs=new T,Ba=new T,w1=new T,ka=new T,cc=new T,hc=new T,VE=new T,_1=new T,b1=new T,S1=new T,es=class{constructor(e=new T,t=new T,i=new T){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),xs.subVectors(e,t),r.cross(xs);let n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(e,t,i,r,n){xs.subVectors(r,t),Ba.subVectors(i,t),w1.subVectors(e,t);let s=xs.dot(xs),a=xs.dot(Ba),o=xs.dot(w1),l=Ba.dot(Ba),u=Ba.dot(w1),d=s*l-a*a;if(d===0)return n.set(-2,-1,-1);let c=1/d,h=(l*o-a*u)*c,f=(s*u-a*o)*c;return n.set(1-h-f,f,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ka),ka.x>=0&&ka.y>=0&&ka.x+ka.y<=1}static getUV(e,t,i,r,n,s,a,o){return this.getBarycoord(e,t,i,r,ka),o.set(0,0),o.addScaledVector(n,ka.x),o.addScaledVector(s,ka.y),o.addScaledVector(a,ka.z),o}static isFrontFacing(e,t,i,r){return xs.subVectors(i,t),Ba.subVectors(e,t),xs.cross(Ba).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xs.subVectors(this.c,this.b),Ba.subVectors(this.a,this.b),xs.cross(Ba).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return es.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return es.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,n){return es.getUV(e,this.a,this.b,this.c,t,i,r,n)}containsPoint(e){return es.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return es.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,n=this.c,s,a;cc.subVectors(r,i),hc.subVectors(n,i),_1.subVectors(e,i);let o=cc.dot(_1),l=hc.dot(_1);if(o<=0&&l<=0)return t.copy(i);b1.subVectors(e,r);let u=cc.dot(b1),d=hc.dot(b1);if(u>=0&&d<=u)return t.copy(r);let c=o*d-u*l;if(c<=0&&o>=0&&u<=0)return s=o/(o-u),t.copy(i).addScaledVector(cc,s);S1.subVectors(e,n);let h=cc.dot(S1),f=hc.dot(S1);if(f>=0&&h<=f)return t.copy(n);let m=h*l-o*f;if(m<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(i).addScaledVector(hc,a);let p=u*f-h*d;if(p<=0&&d-u>=0&&h-f>=0)return VE.subVectors(n,r),a=(d-u)/(d-u+(h-f)),t.copy(r).addScaledVector(VE,a);let g=1/(p+m+c);return s=m*g,a=c*g,t.copy(i).addScaledVector(cc,s).addScaledVector(hc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},yH=0,Pp=class extends Kr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yH++}),this.uuid=xa(),this.name="",this.type="Material",this.blending=_u,this.side=go,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=_R,this.blendDst=bR,this.blendEquation=Tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=r_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=W5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=u1,this.stencilZFail=u1,this.stencilZPass=u1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===e5;continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==_u&&(i.blending=this.blending),this.side!==go&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=r(e.textures),s=r(e.images);n.length>0&&(i.textures=n),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ih=class extends Pp{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=SR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ci=new T,Dm=new q,xt=class{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=o_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new dt),t[i++]=s.r,t[i++]=s.g,t[i++]=s.b}return this}copyVector2sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new q),t[i++]=s.x,t[i++]=s.y}return this}copyVector3sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new T),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this}copyVector4sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new vt),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z,t[i++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Dm.fromBufferAttribute(this,t),Dm.applyMatrix3(e),this.setXY(t,Dm.x,Dm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix3(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix4(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyNormalMatrix(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.transformDirection(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o_&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},OR=class extends xt{constructor(e,t,i){super(new Uint16Array(e),t,i)}},bf=class extends xt{constructor(e,t,i){super(new Uint32Array(e),t,i)}},ke=class extends xt{constructor(e,t,i){super(new Float32Array(e),t,i)}},xH=0,Fn=new Ke,A1=new Yt,dc=new T,gn=new Xi,xd=new Xi,Yi=new T,ft=class extends Kr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xH++}),this.uuid=xa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TR(e)?bf:OR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let n=new Ar().getNormalMatrix(e);i.applyNormalMatrix(n),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fn.makeRotationFromQuaternion(e),this.applyMatrix4(Fn),this}rotateX(e){return Fn.makeRotationX(e),this.applyMatrix4(Fn),this}rotateY(e){return Fn.makeRotationY(e),this.applyMatrix4(Fn),this}rotateZ(e){return Fn.makeRotationZ(e),this.applyMatrix4(Fn),this}translate(e,t,i){return Fn.makeTranslation(e,t,i),this.applyMatrix4(Fn),this}scale(e,t,i){return Fn.makeScale(e,t,i),this.applyMatrix4(Fn),this}lookAt(e){return A1.lookAt(e),A1.updateMatrix(),this.applyMatrix4(A1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dc).negate(),this.translate(dc.x,dc.y,dc.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new ke(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let n=t[i];gn.setFromBufferAttribute(n),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,gn.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,gn.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(gn.min),this.boundingBox.expandByPoint(gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ks);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new T,1/0);return}if(e){let i=this.boundingSphere.center;if(gn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];xd.setFromBufferAttribute(a),this.morphTargetsRelative?(Yi.addVectors(gn.min,xd.min),gn.expandByPoint(Yi),Yi.addVectors(gn.max,xd.max),gn.expandByPoint(Yi)):(gn.expandByPoint(xd.min),gn.expandByPoint(xd.max))}gn.getCenter(i);let r=0;for(let n=0,s=e.count;n<s;n++)Yi.fromBufferAttribute(e,n),r=Math.max(r,i.distanceToSquared(Yi));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Yi.fromBufferAttribute(a,l),o&&(dc.fromBufferAttribute(e,l),Yi.add(dc)),r=Math.max(r,i.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,n=t.normal.array,s=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xt(new Float32Array(4*a),4));let o=this.getAttribute("tangent").array,l=[],u=[];for(let M=0;M<a;M++)l[M]=new T,u[M]=new T;let d=new T,c=new T,h=new T,f=new q,m=new q,p=new q,g=new T,v=new T;function y(M,E,C){d.fromArray(r,M*3),c.fromArray(r,E*3),h.fromArray(r,C*3),f.fromArray(s,M*2),m.fromArray(s,E*2),p.fromArray(s,C*2),c.sub(d),h.sub(d),m.sub(f),p.sub(f);let L=1/(m.x*p.y-p.x*m.y);!isFinite(L)||(g.copy(c).multiplyScalar(p.y).addScaledVector(h,-m.y).multiplyScalar(L),v.copy(h).multiplyScalar(m.x).addScaledVector(c,-p.x).multiplyScalar(L),l[M].add(g),l[E].add(g),l[C].add(g),u[M].add(v),u[E].add(v),u[C].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:i.length}]);for(let M=0,E=x.length;M<E;++M){let C=x[M],L=C.start,N=C.count;for(let R=L,V=L+N;R<V;R+=3)y(i[R+0],i[R+1],i[R+2])}let w=new T,_=new T,b=new T,A=new T;function S(M){b.fromArray(n,M*3),A.copy(b);let E=l[M];w.copy(E),w.sub(b.multiplyScalar(b.dot(E))).normalize(),_.crossVectors(A,E);let C=_.dot(u[M])<0?-1:1;o[M*4]=w.x,o[M*4+1]=w.y,o[M*4+2]=w.z,o[M*4+3]=C}for(let M=0,E=x.length;M<E;++M){let C=x[M],L=C.start,N=C.count;for(let R=L,V=L+N;R<V;R+=3)S(i[R+0]),S(i[R+1]),S(i[R+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let c=0,h=i.count;c<h;c++)i.setXYZ(c,0,0,0);let r=new T,n=new T,s=new T,a=new T,o=new T,l=new T,u=new T,d=new T;if(e)for(let c=0,h=e.count;c<h;c+=3){let f=e.getX(c+0),m=e.getX(c+1),p=e.getX(c+2);r.fromBufferAttribute(t,f),n.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),u.subVectors(s,n),d.subVectors(r,n),u.cross(d),a.fromBufferAttribute(i,f),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,p),a.add(u),o.add(u),l.add(u),i.setXYZ(f,a.x,a.y,a.z),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z)}else for(let c=0,h=t.count;c<h;c+=3)r.fromBufferAttribute(t,c+0),n.fromBufferAttribute(t,c+1),s.fromBufferAttribute(t,c+2),u.subVectors(s,n),d.subVectors(r,n),u.cross(d),i.setXYZ(c+0,u.x,u.y,u.z),i.setXYZ(c+1,u.x,u.y,u.z),i.setXYZ(c+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let i=this.attributes;for(let r in i){if(e.attributes[r]===void 0)continue;let n=i[r].array,s=e.attributes[r],a=s.array,o=s.itemSize*t,l=Math.min(a.length,n.length-o);for(let u=0,d=o;u<l;u++,d++)n[d]=a[u]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Yi.fromBufferAttribute(e,t),Yi.normalize(),e.setXYZ(t,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function e(a,o){let l=a.array,u=a.itemSize,d=a.normalized,c=new l.constructor(o.length*u),h=0,f=0;for(let m=0,p=o.length;m<p;m++){a.isInterleavedBufferAttribute?h=o[m]*a.data.stride+a.offset:h=o[m]*u;for(let g=0;g<u;g++)c[f++]=l[h++]}return new xt(c,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new ft,i=this.index.array,r=this.attributes;for(let a in r){let o=r[a],l=e(o,i);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let u=0,d=l.length;u<d;u++){let c=l[u],h=e(c,i);o.push(h)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let l=i[o];e.data.attributes[o]=l.toJSON(e.data)}let r={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],u=[];for(let d=0,c=l.length;d<c;d++){let h=l[d];u.push(h.toJSON(e.data))}u.length>0&&(r[o]=u,n=!0)}n&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let n=e.morphAttributes;for(let l in n){let u=[],d=n[l];for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,u=s.length;l<u;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},jE=new Ke,fc=new Dp,M1=new ks,Co=new T,Do=new T,Po=new T,E1=new T,T1=new T,C1=new T,Pm=new T,Lm=new T,Om=new T,Rm=new q,Im=new q,zm=new q,D1=new T,Bm=new T,Mr=class extends Yt{constructor(e=new ft,t=new Ih){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}raycast(e,t){let i=this.geometry,r=this.material,n=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),M1.copy(i.boundingSphere),M1.applyMatrix4(n),e.ray.intersectsSphere(M1)===!1)||(jE.copy(n).invert(),fc.copy(e.ray).applyMatrix4(jE),i.boundingBox!==null&&fc.intersectsBox(i.boundingBox)===!1))return;let s,a=i.index,o=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,c=i.attributes.uv2,h=i.groups,f=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,p=h.length;m<p;m++){let g=h[m],v=r[g.materialIndex],y=Math.max(g.start,f.start),x=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let w=y,_=x;w<_;w+=3){let b=a.getX(w),A=a.getX(w+1),S=a.getX(w+2);s=km(this,v,e,fc,o,l,u,d,c,b,A,S),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let g=m,v=p;g<v;g+=3){let y=a.getX(g),x=a.getX(g+1),w=a.getX(g+2);s=km(this,r,e,fc,o,l,u,d,c,y,x,w),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(r))for(let m=0,p=h.length;m<p;m++){let g=h[m],v=r[g.materialIndex],y=Math.max(g.start,f.start),x=Math.min(o.count,Math.min(g.start+g.count,f.start+f.count));for(let w=y,_=x;w<_;w+=3){let b=w,A=w+1,S=w+2;s=km(this,v,e,fc,o,l,u,d,c,b,A,S),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),p=Math.min(o.count,f.start+f.count);for(let g=m,v=p;g<v;g+=3){let y=g,x=g+1,w=g+2;s=km(this,r,e,fc,o,l,u,d,c,y,x,w),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}};function wH(e,t,i,r,n,s,a,o){let l;if(t.side===or?l=r.intersectTriangle(a,s,n,!0,o):l=r.intersectTriangle(n,s,a,t.side!==Ur,o),l===null)return null;Bm.copy(o),Bm.applyMatrix4(e.matrixWorld);let u=i.ray.origin.distanceTo(Bm);return u<i.near||u>i.far?null:{distance:u,point:Bm.clone(),object:e}}function km(e,t,i,r,n,s,a,o,l,u,d,c){Co.fromBufferAttribute(n,u),Do.fromBufferAttribute(n,d),Po.fromBufferAttribute(n,c);let h=e.morphTargetInfluences;if(s&&h){Pm.set(0,0,0),Lm.set(0,0,0),Om.set(0,0,0);for(let m=0,p=s.length;m<p;m++){let g=h[m],v=s[m];g!==0&&(E1.fromBufferAttribute(v,u),T1.fromBufferAttribute(v,d),C1.fromBufferAttribute(v,c),a?(Pm.addScaledVector(E1,g),Lm.addScaledVector(T1,g),Om.addScaledVector(C1,g)):(Pm.addScaledVector(E1.sub(Co),g),Lm.addScaledVector(T1.sub(Do),g),Om.addScaledVector(C1.sub(Po),g)))}Co.add(Pm),Do.add(Lm),Po.add(Om)}e.isSkinnedMesh&&(e.boneTransform(u,Co),e.boneTransform(d,Do),e.boneTransform(c,Po));let f=wH(e,t,i,r,Co,Do,Po,D1);if(f){o&&(Rm.fromBufferAttribute(o,u),Im.fromBufferAttribute(o,d),zm.fromBufferAttribute(o,c),f.uv=es.getUV(D1,Co,Do,Po,Rm,Im,zm,new q)),l&&(Rm.fromBufferAttribute(l,u),Im.fromBufferAttribute(l,d),zm.fromBufferAttribute(l,c),f.uv2=es.getUV(D1,Co,Do,Po,Rm,Im,zm,new q));let m={a:u,b:d,c,normal:new T,materialIndex:0};es.getNormal(Co,Do,Po,m.normal),f.face=m}return f}var Ml=class extends ft{constructor(e=1,t=1,i=1,r=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:s};let a=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],u=[],d=[],c=0,h=0;f("z","y","x",-1,-1,i,t,e,s,n,0),f("z","y","x",1,-1,i,t,-e,s,n,1),f("x","z","y",1,1,e,i,t,r,s,2),f("x","z","y",1,-1,e,i,-t,r,s,3),f("x","y","z",1,-1,e,t,i,r,n,4),f("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(o),this.setAttribute("position",new ke(l,3)),this.setAttribute("normal",new ke(u,3)),this.setAttribute("uv",new ke(d,2));function f(m,p,g,v,y,x,w,_,b,A,S){let M=x/b,E=w/A,C=x/2,L=w/2,N=_/2,R=b+1,V=A+1,F=0,H=0,P=new T;for(let z=0;z<V;z++){let D=z*E-L;for(let j=0;j<R;j++){let B=j*M-C;P[m]=B*v,P[p]=D*y,P[g]=N,l.push(P.x,P.y,P.z),P[m]=0,P[p]=0,P[g]=_>0?1:-1,u.push(P.x,P.y,P.z),d.push(j/b),d.push(1-z/A),F+=1}}for(let z=0;z<A;z++)for(let D=0;D<b;D++){let j=c+D+R*z,B=c+D+R*(z+1),W=c+(D+1)+R*(z+1),X=c+(D+1)+R*z;o.push(j,B,X),o.push(B,W,X),H+=6}a.addGroup(h,H,S),h+=H,c+=F}}static fromJSON(e){return new Ml(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function zh(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function vr(e){let t={};for(let i=0;i<e.length;i++){let r=zh(e[i]);for(let n in r)t[n]=r[n]}return t}var jh={clone:zh,merge:vr},_H=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Gi=class extends Pp{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=_H,this.fragmentShader=bH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Gh=class extends Yt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ke,this.projectionMatrix=new Ke,this.projectionMatrixInverse=new Ke}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},_r=class extends Gh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=sp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(wf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sp*2*Math.atan(Math.tan(wf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(wf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*r/o,t-=s.offsetY*i/l,r*=s.width/o,i*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},pc=90,mc=1,SH=class extends Yt{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;let r=new _r(pc,mc,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new T(1,0,0)),this.add(r);let n=new _r(pc,mc,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new T(-1,0,0)),this.add(n);let s=new _r(pc,mc,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new T(0,1,0)),this.add(s);let a=new _r(pc,mc,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new T(0,-1,0)),this.add(a);let o=new _r(pc,mc,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new T(0,0,1)),this.add(o);let l=new _r(pc,mc,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new T(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,n,s,a,o,l]=this.children,u=e.getRenderTarget(),d=e.toneMapping,c=e.xr.enabled;e.toneMapping=so,e.xr.enabled=!1;let h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,n),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=c,i.texture.needsPMREMUpdate=!0}},KS=class extends Gr{constructor(e,t,i,r,n,s,a,o,l,u){e=e!==void 0?e:[],t=t!==void 0?t:Nu,super(e,t,i,r,n,s,a,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},AH=class extends Ei{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new KS(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Xt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ml(5,5,5),n=new Gi({name:"CubemapFromEquirect",uniforms:zh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:or,blending:ur});n.uniforms.tEquirect.value=t;let s=new Mr(r,n),a=t.minFilter;return t.minFilter===Cp&&(t.minFilter=Xt),new SH(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(n)}},P1=new T,MH=new T,EH=new Ar,Jn=class{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=P1.subVectors(i,t).cross(MH.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(P1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:t.copy(i).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||EH.getNormalMatrix(e),r=this.coplanarPoint(P1).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},gc=new ks,Nm=new T,JS=class{constructor(e=new Jn,t=new Jn,i=new Jn,r=new Jn,n=new Jn,s=new Jn){this.planes=[e,t,i,r,n,s]}set(e,t,i,r,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],n=i[1],s=i[2],a=i[3],o=i[4],l=i[5],u=i[6],d=i[7],c=i[8],h=i[9],f=i[10],m=i[11],p=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(a-r,d-o,m-c,y-p).normalize(),t[1].setComponents(a+r,d+o,m+c,y+p).normalize(),t[2].setComponents(a+n,d+l,m+h,y+g).normalize(),t[3].setComponents(a-n,d-l,m-h,y-g).normalize(),t[4].setComponents(a-s,d-u,m-f,y-v).normalize(),t[5].setComponents(a+s,d+u,m+f,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),gc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSprite(e){return gc.center.set(0,0,0),gc.radius=.7071067811865476,gc.applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Nm.x=r.normal.x>0?e.max.x:e.min.x,Nm.y=r.normal.y>0?e.max.y:e.min.y,Nm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nm)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function RR(){let e=null,t=!1,i=null,r=null;function n(s,a){i(s,a),r=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(s){i=s},setContext:function(s){e=s}}}function TH(e,t){let i=t.isWebGL2,r=new WeakMap;function n(u,d){let c=u.array,h=u.usage,f=e.createBuffer();e.bindBuffer(d,f),e.bufferData(d,c,h),u.onUploadCallback();let m;if(c instanceof Float32Array)m=5126;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(i)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(c instanceof Int16Array)m=5122;else if(c instanceof Uint32Array)m=5125;else if(c instanceof Int32Array)m=5124;else if(c instanceof Int8Array)m=5120;else if(c instanceof Uint8Array)m=5121;else if(c instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,c){let h=d.array,f=d.updateRange;e.bindBuffer(c,u),f.count===-1?e.bufferSubData(c,0,h):(i?e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);let d=r.get(u);d&&(e.deleteBuffer(d.buffer),r.delete(u))}function l(u,d){if(u.isGLBufferAttribute){let h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let c=r.get(u);c===void 0?r.set(u,n(u,d)):c.version<u.version&&(s(c.buffer,u,d),c.version=u.version)}return{get:a,remove:o,update:l}}var N0=class extends ft{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let n=e/2,s=t/2,a=Math.floor(i),o=Math.floor(r),l=a+1,u=o+1,d=e/a,c=t/o,h=[],f=[],m=[],p=[];for(let g=0;g<u;g++){let v=g*c-s;for(let y=0;y<l;y++){let x=y*d-n;f.push(x,-v,0),m.push(0,0,1),p.push(y/a),p.push(1-g/o)}}for(let g=0;g<o;g++)for(let v=0;v<a;v++){let y=v+l*g,x=v+l*(g+1),w=v+1+l*(g+1),_=v+1+l*g;h.push(y,x,_),h.push(x,w,_)}this.setIndex(h),this.setAttribute("position",new ke(f,3)),this.setAttribute("normal",new ke(m,3)),this.setAttribute("uv",new ke(p,2))}static fromJSON(e){return new N0(e.width,e.height,e.widthSegments,e.heightSegments)}},CH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,DH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PH=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,LH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,RH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IH="vec3 transformed = vec3( position );",zH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,BH=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kH=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,NH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,FH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,UH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,WH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,XH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,YH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,qH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,QH=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ZH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,JH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$H=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,e6="gl_FragColor = linearToOutputTexel( gl_FragColor );",t6=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,i6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,r6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,n6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,a6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,o6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,l6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,u6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,c6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,h6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,d6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,f6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,p6=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,m6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,g6=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,v6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,y6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,x6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,w6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,_6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,b6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,S6=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,A6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,M6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,E6=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,T6=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,C6=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,D6=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,P6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,L6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,O6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,R6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,z6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,B6=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,k6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,N6=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,F6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,U6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,H6=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,V6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,j6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,W6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,X6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Y6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,q6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Q6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Z6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,K6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,J6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,nV=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sV=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aV=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,oV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gV=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,vV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,yV=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,xV=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,wV=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,_V=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,bV=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,SV=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,AV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,MV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,EV=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,TV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CV=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,PV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,LV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kV=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FV=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UV=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,GV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,WV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$V=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ej=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ij=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mt={alphamap_fragment:CH,alphamap_pars_fragment:DH,alphatest_fragment:PH,alphatest_pars_fragment:LH,aomap_fragment:OH,aomap_pars_fragment:RH,begin_vertex:IH,beginnormal_vertex:zH,bsdfs:BH,iridescence_fragment:kH,bumpmap_pars_fragment:NH,clipping_planes_fragment:FH,clipping_planes_pars_fragment:UH,clipping_planes_pars_vertex:HH,clipping_planes_vertex:VH,color_fragment:jH,color_pars_fragment:GH,color_pars_vertex:WH,color_vertex:XH,common:YH,cube_uv_reflection_fragment:qH,defaultnormal_vertex:QH,displacementmap_pars_vertex:ZH,displacementmap_vertex:KH,emissivemap_fragment:JH,emissivemap_pars_fragment:$H,encodings_fragment:e6,encodings_pars_fragment:t6,envmap_fragment:i6,envmap_common_pars_fragment:r6,envmap_pars_fragment:n6,envmap_pars_vertex:s6,envmap_physical_pars_fragment:g6,envmap_vertex:a6,fog_vertex:o6,fog_pars_vertex:l6,fog_fragment:u6,fog_pars_fragment:c6,gradientmap_pars_fragment:h6,lightmap_fragment:d6,lightmap_pars_fragment:f6,lights_lambert_vertex:p6,lights_pars_begin:m6,lights_toon_fragment:v6,lights_toon_pars_fragment:y6,lights_phong_fragment:x6,lights_phong_pars_fragment:w6,lights_physical_fragment:_6,lights_physical_pars_fragment:b6,lights_fragment_begin:S6,lights_fragment_maps:A6,lights_fragment_end:M6,logdepthbuf_fragment:E6,logdepthbuf_pars_fragment:T6,logdepthbuf_pars_vertex:C6,logdepthbuf_vertex:D6,map_fragment:P6,map_pars_fragment:L6,map_particle_fragment:O6,map_particle_pars_fragment:R6,metalnessmap_fragment:I6,metalnessmap_pars_fragment:z6,morphcolor_vertex:B6,morphnormal_vertex:k6,morphtarget_pars_vertex:N6,morphtarget_vertex:F6,normal_fragment_begin:U6,normal_fragment_maps:H6,normal_pars_fragment:V6,normal_pars_vertex:j6,normal_vertex:G6,normalmap_pars_fragment:W6,clearcoat_normal_fragment_begin:X6,clearcoat_normal_fragment_maps:Y6,clearcoat_pars_fragment:q6,iridescence_pars_fragment:Q6,output_fragment:Z6,packing:K6,premultiplied_alpha_fragment:J6,project_vertex:$6,dithering_fragment:eV,dithering_pars_fragment:tV,roughnessmap_fragment:iV,roughnessmap_pars_fragment:rV,shadowmap_pars_fragment:nV,shadowmap_pars_vertex:sV,shadowmap_vertex:aV,shadowmask_pars_fragment:oV,skinbase_vertex:lV,skinning_pars_vertex:uV,skinning_vertex:cV,skinnormal_vertex:hV,specularmap_fragment:dV,specularmap_pars_fragment:fV,tonemapping_fragment:pV,tonemapping_pars_fragment:mV,transmission_fragment:gV,transmission_pars_fragment:vV,uv_pars_fragment:yV,uv_pars_vertex:xV,uv_vertex:wV,uv2_pars_fragment:_V,uv2_pars_vertex:bV,uv2_vertex:SV,worldpos_vertex:AV,background_vert:MV,background_frag:EV,cube_vert:TV,cube_frag:CV,depth_vert:DV,depth_frag:PV,distanceRGBA_vert:LV,distanceRGBA_frag:OV,equirect_vert:RV,equirect_frag:IV,linedashed_vert:zV,linedashed_frag:BV,meshbasic_vert:kV,meshbasic_frag:NV,meshlambert_vert:FV,meshlambert_frag:UV,meshmatcap_vert:HV,meshmatcap_frag:VV,meshnormal_vert:jV,meshnormal_frag:GV,meshphong_vert:WV,meshphong_frag:XV,meshphysical_vert:YV,meshphysical_frag:qV,meshtoon_vert:QV,meshtoon_frag:ZV,points_vert:KV,points_frag:JV,shadow_vert:$V,shadow_frag:ej,sprite_vert:tj,sprite_frag:ij},Le={common:{diffuse:{value:new dt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ar},uv2Transform:{value:new Ar},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ar}},sprite:{diffuse:{value:new dt(16777215)},opacity:{value:1},center:{value:new q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ar}}},$s={basic:{uniforms:vr([Le.common,Le.specularmap,Le.envmap,Le.aomap,Le.lightmap,Le.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:vr([Le.common,Le.specularmap,Le.envmap,Le.aomap,Le.lightmap,Le.emissivemap,Le.fog,Le.lights,{emissive:{value:new dt(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:vr([Le.common,Le.specularmap,Le.envmap,Le.aomap,Le.lightmap,Le.emissivemap,Le.bumpmap,Le.normalmap,Le.displacementmap,Le.fog,Le.lights,{emissive:{value:new dt(0)},specular:{value:new dt(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:vr([Le.common,Le.envmap,Le.aomap,Le.lightmap,Le.emissivemap,Le.bumpmap,Le.normalmap,Le.displacementmap,Le.roughnessmap,Le.metalnessmap,Le.fog,Le.lights,{emissive:{value:new dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:vr([Le.common,Le.aomap,Le.lightmap,Le.emissivemap,Le.bumpmap,Le.normalmap,Le.displacementmap,Le.gradientmap,Le.fog,Le.lights,{emissive:{value:new dt(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:vr([Le.common,Le.bumpmap,Le.normalmap,Le.displacementmap,Le.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:vr([Le.points,Le.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:vr([Le.common,Le.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:vr([Le.common,Le.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:vr([Le.common,Le.bumpmap,Le.normalmap,Le.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:vr([Le.sprite,Le.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ar},t2D:{value:null}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},cube:{uniforms:vr([Le.envmap,{opacity:{value:1}}]),vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:vr([Le.common,Le.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:vr([Le.lights,Le.fog,{color:{value:new dt(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};$s.physical={uniforms:vr([$s.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new q(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new dt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new dt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new dt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};function rj(e,t,i,r,n,s){let a=new dt(0),o=n===!0?0:1,l,u,d=null,c=0,h=null;function f(p,g){let v=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=t.get(y));let x=e.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(y=null),y===null?m(a,o):y&&y.isColor&&(m(y,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Tp)?(u===void 0&&(u=new Mr(new Ml(1,1,1),new Gi({name:"BackgroundCubeMaterial",uniforms:zh($s.cube.uniforms),vertexShader:$s.cube.vertexShader,fragmentShader:$s.cube.fragmentShader,side:or,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,b,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(d!==y||c!==y.version||h!==e.toneMapping)&&(u.material.needsUpdate=!0,d=y,c=y.version,h=e.toneMapping),u.layers.enableAll(),p.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Mr(new N0(2,2),new Gi({name:"BackgroundMaterial",uniforms:zh($s.background.uniforms),vertexShader:$s.background.vertexShader,fragmentShader:$s.background.fragmentShader,side:go,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||c!==y.version||h!==e.toneMapping)&&(l.material.needsUpdate=!0,d=y,c=y.version,h=e.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}function m(p,g){i.buffers.color.setClear(p.r,p.g,p.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(p,g=1){a.set(p),o=g,m(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,m(a,o)},render:f}}function nj(e,t,i,r){let n=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=g(null),u=l,d=!1;function c(R,V,F,H,P){let z=!1;if(a){let D=p(H,F,V);u!==D&&(u=D,f(u.object)),z=v(R,H,F,P),z&&y(R,H,F,P)}else{let D=V.wireframe===!0;(u.geometry!==H.id||u.program!==F.id||u.wireframe!==D)&&(u.geometry=H.id,u.program=F.id,u.wireframe=D,z=!0)}P!==null&&i.update(P,34963),(z||d)&&(d=!1,S(R,V,F,H),P!==null&&e.bindBuffer(34963,i.get(P).buffer))}function h(){return r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(R){return r.isWebGL2?e.bindVertexArray(R):s.bindVertexArrayOES(R)}function m(R){return r.isWebGL2?e.deleteVertexArray(R):s.deleteVertexArrayOES(R)}function p(R,V,F){let H=F.wireframe===!0,P=o[R.id];P===void 0&&(P={},o[R.id]=P);let z=P[V.id];z===void 0&&(z={},P[V.id]=z);let D=z[H];return D===void 0&&(D=g(h()),z[H]=D),D}function g(R){let V=[],F=[],H=[];for(let P=0;P<n;P++)V[P]=0,F[P]=0,H[P]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:F,attributeDivisors:H,object:R,attributes:{},index:null}}function v(R,V,F,H){let P=u.attributes,z=V.attributes,D=0,j=F.getAttributes();for(let B in j)if(j[B].location>=0){let W=P[B],X=z[B];if(X===void 0&&(B==="instanceMatrix"&&R.instanceMatrix&&(X=R.instanceMatrix),B==="instanceColor"&&R.instanceColor&&(X=R.instanceColor)),W===void 0||W.attribute!==X||X&&W.data!==X.data)return!0;D++}return u.attributesNum!==D||u.index!==H}function y(R,V,F,H){let P={},z=V.attributes,D=0,j=F.getAttributes();for(let B in j)if(j[B].location>=0){let W=z[B];W===void 0&&(B==="instanceMatrix"&&R.instanceMatrix&&(W=R.instanceMatrix),B==="instanceColor"&&R.instanceColor&&(W=R.instanceColor));let X={};X.attribute=W,W&&W.data&&(X.data=W.data),P[B]=X,D++}u.attributes=P,u.attributesNum=D,u.index=H}function x(){let R=u.newAttributes;for(let V=0,F=R.length;V<F;V++)R[V]=0}function w(R){_(R,0)}function _(R,V){let F=u.newAttributes,H=u.enabledAttributes,P=u.attributeDivisors;F[R]=1,H[R]===0&&(e.enableVertexAttribArray(R),H[R]=1),P[R]!==V&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,V),P[R]=V)}function b(){let R=u.newAttributes,V=u.enabledAttributes;for(let F=0,H=V.length;F<H;F++)V[F]!==R[F]&&(e.disableVertexAttribArray(F),V[F]=0)}function A(R,V,F,H,P,z){r.isWebGL2===!0&&(F===5124||F===5125)?e.vertexAttribIPointer(R,V,F,P,z):e.vertexAttribPointer(R,V,F,H,P,z)}function S(R,V,F,H){if(r.isWebGL2===!1&&(R.isInstancedMesh||H.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let P=H.attributes,z=F.getAttributes(),D=V.defaultAttributeValues;for(let j in z){let B=z[j];if(B.location>=0){let W=P[j];if(W===void 0&&(j==="instanceMatrix"&&R.instanceMatrix&&(W=R.instanceMatrix),j==="instanceColor"&&R.instanceColor&&(W=R.instanceColor)),W!==void 0){let X=W.normalized,$=W.itemSize,U=i.get(W);if(U===void 0)continue;let ne=U.buffer,ie=U.type,re=U.bytesPerElement;if(W.isInterleavedBufferAttribute){let K=W.data,fe=K.stride,te=W.offset;if(K.isInstancedInterleavedBuffer){for(let ae=0;ae<B.locationSize;ae++)_(B.location+ae,K.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let ae=0;ae<B.locationSize;ae++)w(B.location+ae);e.bindBuffer(34962,ne);for(let ae=0;ae<B.locationSize;ae++)A(B.location+ae,$/B.locationSize,ie,X,fe*re,(te+$/B.locationSize*ae)*re)}else{if(W.isInstancedBufferAttribute){for(let K=0;K<B.locationSize;K++)_(B.location+K,W.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let K=0;K<B.locationSize;K++)w(B.location+K);e.bindBuffer(34962,ne);for(let K=0;K<B.locationSize;K++)A(B.location+K,$/B.locationSize,ie,X,$*re,$/B.locationSize*K*re)}}else if(D!==void 0){let X=D[j];if(X!==void 0)switch(X.length){case 2:e.vertexAttrib2fv(B.location,X);break;case 3:e.vertexAttrib3fv(B.location,X);break;case 4:e.vertexAttrib4fv(B.location,X);break;default:e.vertexAttrib1fv(B.location,X)}}}}b()}function M(){L();for(let R in o){let V=o[R];for(let F in V){let H=V[F];for(let P in H)m(H[P].object),delete H[P];delete V[F]}delete o[R]}}function E(R){if(o[R.id]===void 0)return;let V=o[R.id];for(let F in V){let H=V[F];for(let P in H)m(H[P].object),delete H[P];delete V[F]}delete o[R.id]}function C(R){for(let V in o){let F=o[V];if(F[R.id]===void 0)continue;let H=F[R.id];for(let P in H)m(H[P].object),delete H[P];delete F[R.id]}}function L(){N(),d=!0,u!==l&&(u=l,f(u.object))}function N(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:L,resetDefaultState:N,dispose:M,releaseStatesOfGeometry:E,releaseStatesOfProgram:C,initAttributes:x,enableAttribute:w,disableUnusedAttributes:b}}function sj(e,t,i,r){let n=r.isWebGL2,s;function a(u){s=u}function o(u,d){e.drawArrays(s,u,d),i.update(d,s,1)}function l(u,d,c){if(c===0)return;let h,f;if(n)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,u,d,c),i.update(d,s,c)}this.setMode=a,this.render=o,this.renderInstances=l}function aj(e,t,i){let r;function n(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let A=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(A){if(A==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,o=i.precision!==void 0?i.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let u=a||t.has("WEBGL_draw_buffers"),d=i.logarithmicDepthBuffer===!0,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),m=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=h>0,w=a||t.has("OES_texture_float"),_=x&&w,b=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:_,maxSamples:b}}function oj(e){let t=this,i=null,r=0,n=!1,s=!1,a=new Jn,o=new Ar,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,h,f){let m=c.length!==0||h||r!==0||n;return n=h,i=d(c,f,0),r=c.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,u()},this.setState=function(c,h,f){let m=c.clippingPlanes,p=c.clipIntersection,g=c.clipShadows,v=e.get(c);if(!n||m===null||m.length===0||s&&!g)s?d(null):u();else{let y=s?0:r,x=y*4,w=v.clippingState||null;l.value=w,w=d(m,h,x,f);for(let _=0;_!==x;++_)w[_]=i[_];v.clippingState=w,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function d(c,h,f,m){let p=c!==null?c.length:0,g=null;if(p!==0){if(g=l.value,m!==!0||g===null){let v=f+p*4,y=h.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,w=f;x!==p;++x,w+=4)a.copy(c[x]).applyMatrix4(y,o),a.normal.toArray(g,w),g[w+3]=a.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,g}}function lj(e){let t=new WeakMap;function i(a,o){return o===n_?a.mapping=Nu:o===s_&&(a.mapping=Fu),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===n_||o===s_)if(t.has(a)){let l=t.get(a).texture;return i(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let u=new AH(l.height/2);return u.fromEquirectangularTexture(e,a),t.set(a,u),a.addEventListener("dispose",n),i(u.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:r,dispose:s}}var $S=class extends Gh{constructor(e=-1,t=1,i=1,r=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,s=i+e,a=r+t,o=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=u*this.view.offsetY,o=a-u*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Zc=4,GE=[.125,.215,.35,.446,.526,.582],ru=20,L1=new $S,WE=new dt,O1=null,Jl=(1+Math.sqrt(5))/2,vc=1/Jl,XE=[new T(1,1,1),new T(-1,1,1),new T(1,1,-1),new T(-1,1,-1),new T(0,Jl,vc),new T(0,Jl,-vc),new T(vc,0,Jl),new T(-vc,0,Jl),new T(Jl,vc,0),new T(-Jl,vc,0)],YE=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){O1=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,r,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=QE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(O1),e.scissorTest=!1,Fm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Nu||e.mapping===Fu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),O1=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Xt,minFilter:Xt,generateMipmaps:!1,type:np,format:oa,encoding:Aa,depthBuffer:!1},r=qE(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qE(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uj(n)),this._blurMaterial=cj(n,e,t)}return r}_compileMaterial(e){let t=new Mr(this._lodPlanes[0],e);this._renderer.compile(t,L1)}_sceneToCubeUV(e,t,i,r){let n=new _r(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(WE),o.toneMapping=so,o.autoClear=!1;let d=new Ih({name:"PMREM.Background",side:or,depthWrite:!1,depthTest:!1}),c=new Mr(new Ml,d),h=!1,f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,h=!0):(d.color.copy(WE),h=!0);for(let m=0;m<6;m++){let p=m%3;p===0?(n.up.set(0,s[m],0),n.lookAt(a[m],0,0)):p===1?(n.up.set(0,0,s[m]),n.lookAt(0,a[m],0)):(n.up.set(0,s[m],0),n.lookAt(0,0,a[m]));let g=this._cubeSize;Fm(r,p*g,m>2?g:0,g,g),o.setRenderTarget(r),h&&o.render(c,n),o.render(e,n)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Nu||e.mapping===Fu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=QE());let n=r?this._cubemapMaterial:this._equirectMaterial,s=new Mr(this._lodPlanes[0],n),a=n.uniforms;a.envMap.value=e;let o=this._cubeSize;Fm(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(s,L1)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),s=XE[(r-1)%XE.length];this._blur(e,r-1,r,n,s)}t.autoClear=i}_blur(e,t,i,r,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",n),this._halfBlur(s,e,i,i,r,"longitudinal",n)}_halfBlur(e,t,i,r,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new Mr(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[i]-1,f=isFinite(n)?Math.PI/(2*h):2*Math.PI/(2*ru-1),m=n/f,p=isFinite(n)?1+Math.floor(u*m):ru;p>ru&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${ru}`);let g=[],v=0;for(let b=0;b<ru;++b){let A=b/m,S=Math.exp(-A*A/2);g.push(S),b===0?v+=S:b<p&&(v+=2*S)}for(let b=0;b<g.length;b++)g[b]=g[b]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=g,c.latitudinal.value=s==="latitudinal",a&&(c.poleAxis.value=a);let{_lodMax:y}=this;c.dTheta.value=f,c.mipInt.value=y-i;let x=this._sizeLods[r],w=3*x*(r>y-Zc?r-y+Zc:0),_=4*(this._cubeSize-x);Fm(t,w,_,3*x,2*x),o.setRenderTarget(t),o.render(d,L1)}};function uj(e){let t=[],i=[],r=[],n=e,s=e-Zc+1+GE.length;for(let a=0;a<s;a++){let o=Math.pow(2,n);i.push(o);let l=1/o;a>e-Zc?l=GE[a-e+Zc-1]:a===0&&(l=0),r.push(l);let u=1/(o-2),d=-u,c=1+u,h=[d,d,c,d,c,c,d,d,c,c,d,c],f=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*f),x=new Float32Array(g*m*f),w=new Float32Array(v*m*f);for(let b=0;b<f;b++){let A=b%3*2/3-1,S=b>2?0:-1,M=[A,S,0,A+2/3,S,0,A+2/3,S+1,0,A,S,0,A+2/3,S+1,0,A,S+1,0];y.set(M,p*m*b),x.set(h,g*m*b);let E=[b,b,b,b,b,b];w.set(E,v*m*b)}let _=new ft;_.setAttribute("position",new xt(y,p)),_.setAttribute("uv",new xt(x,g)),_.setAttribute("faceIndex",new xt(w,v)),t.push(_),n>Zc&&n--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function qE(e,t,i){let r=new Ei(e,t,i);return r.texture.mapping=Tp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Fm(e,t,i,r,n){e.viewport.set(t,i,r,n),e.scissor.set(t,i,r,n)}function cj(e,t,i){let r=new Float32Array(ru),n=new T(0,1,0);return new Gi({name:"SphericalGaussianBlur",defines:{n:ru,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:eA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ur,depthTest:!1,depthWrite:!1})}function QE(){return new Gi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:eA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ur,depthTest:!1,depthWrite:!1})}function ZE(){return new Gi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:eA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ur,depthTest:!1,depthWrite:!1})}function eA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hj(e){let t=new WeakMap,i=null;function r(o){if(o&&o.isTexture){let l=o.mapping,u=l===n_||l===s_,d=l===Nu||l===Fu;if(u||d)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let c=t.get(o);return i===null&&(i=new YE(e)),c=u?i.fromEquirectangular(o,c):i.fromCubemap(o,c),t.set(o,c),c.texture}else{if(t.has(o))return t.get(o).texture;{let c=o.image;if(u&&c&&c.height>0||d&&c&&n(c)){i===null&&(i=new YE(e));let h=u?i.fromEquirectangular(o):i.fromCubemap(o);return t.set(o,h),o.addEventListener("dispose",s),h.texture}else return null}}}return o}function n(o){let l=0,u=6;for(let d=0;d<u;d++)o[d]!==void 0&&l++;return l===u}function s(o){let l=o.target;l.removeEventListener("dispose",s);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function a(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:a}}function dj(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return t[r]=n,n}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let n=i(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function fj(e,t,i,r){let n={},s=new WeakMap;function a(c){let h=c.target;h.index!==null&&t.remove(h.index);for(let m in h.attributes)t.remove(h.attributes[m]);h.removeEventListener("dispose",a),delete n[h.id];let f=s.get(h);f&&(t.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function o(c,h){return n[h.id]===!0||(h.addEventListener("dispose",a),n[h.id]=!0,i.memory.geometries++),h}function l(c){let h=c.attributes;for(let m in h)t.update(h[m],34962);let f=c.morphAttributes;for(let m in f){let p=f[m];for(let g=0,v=p.length;g<v;g++)t.update(p[g],34962)}}function u(c){let h=[],f=c.index,m=c.attributes.position,p=0;if(f!==null){let y=f.array;p=f.version;for(let x=0,w=y.length;x<w;x+=3){let _=y[x+0],b=y[x+1],A=y[x+2];h.push(_,b,b,A,A,_)}}else{let y=m.array;p=m.version;for(let x=0,w=y.length/3-1;x<w;x+=3){let _=x+0,b=x+1,A=x+2;h.push(_,b,b,A,A,_)}}let g=new(TR(h)?bf:OR)(h,1);g.version=p;let v=s.get(c);v&&t.remove(v),s.set(c,g)}function d(c){let h=s.get(c);if(h){let f=c.index;f!==null&&h.version<f.version&&u(c)}else u(c);return s.get(c)}return{get:o,update:l,getWireframeAttribute:d}}function pj(e,t,i,r){let n=r.isWebGL2,s;function a(h){s=h}let o,l;function u(h){o=h.type,l=h.bytesPerElement}function d(h,f){e.drawElements(s,f,o,h*l),i.update(f,s,1)}function c(h,f,m){if(m===0)return;let p,g;if(n)p=e,g="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,f,o,h*l,m),i.update(f,s,m)}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=c}function mj(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(i.calls++,a){case 4:i.triangles+=o*(s/3);break;case 1:i.lines+=o*(s/2);break;case 3:i.lines+=o*(s-1);break;case 2:i.lines+=o*s;break;case 0:i.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:n,update:r}}function gj(e,t){return e[0]-t[0]}function vj(e,t){return Math.abs(t[1])-Math.abs(e[1])}function R1(e,t){let i=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?i=127:r instanceof Uint8Array?i=255:r instanceof Uint16Array?i=65535:r instanceof Int16Array?i=32767:r instanceof Int32Array?i=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(i)}function yj(e,t,i){let r={},n=new Float32Array(8),s=new WeakMap,a=new vt,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,d,c,h){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,p=m!==void 0?m.length:0,g=s.get(d);if(g===void 0||g.count!==p){let x=function(){R.dispose(),s.delete(d),d.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let w=d.morphAttributes.position!==void 0,_=d.morphAttributes.normal!==void 0,b=d.morphAttributes.color!==void 0,A=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],M=d.morphAttributes.color||[],E=0;w===!0&&(E=1),_===!0&&(E=2),b===!0&&(E=3);let C=d.attributes.position.count*E,L=1;C>t.maxTextureSize&&(L=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);let N=new Float32Array(C*L*4*p),R=new LR(N,C,L,p);R.type=el,R.needsUpdate=!0;let V=E*4;for(let F=0;F<p;F++){let H=A[F],P=S[F],z=M[F],D=C*L*4*F;for(let j=0;j<H.count;j++){let B=j*V;w===!0&&(a.fromBufferAttribute(H,j),H.normalized===!0&&R1(a,H),N[D+B+0]=a.x,N[D+B+1]=a.y,N[D+B+2]=a.z,N[D+B+3]=0),_===!0&&(a.fromBufferAttribute(P,j),P.normalized===!0&&R1(a,P),N[D+B+4]=a.x,N[D+B+5]=a.y,N[D+B+6]=a.z,N[D+B+7]=0),b===!0&&(a.fromBufferAttribute(z,j),z.normalized===!0&&R1(a,z),N[D+B+8]=a.x,N[D+B+9]=a.y,N[D+B+10]=a.z,N[D+B+11]=z.itemSize===4?a.w:1)}}g={count:p,texture:R,size:new q(C,L)},s.set(d,g),d.addEventListener("dispose",x)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];let y=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(e,"morphTargetBaseInfluence",y),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",g.texture,i),h.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=f===void 0?0:f.length,p=r[d.id];if(p===void 0||p.length!==m){p=[];for(let w=0;w<m;w++)p[w]=[w,0];r[d.id]=p}for(let w=0;w<m;w++){let _=p[w];_[0]=w,_[1]=f[w]}p.sort(vj);for(let w=0;w<8;w++)w<m&&p[w][1]?(o[w][0]=p[w][0],o[w][1]=p[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(gj);let g=d.morphAttributes.position,v=d.morphAttributes.normal,y=0;for(let w=0;w<8;w++){let _=o[w],b=_[0],A=_[1];b!==Number.MAX_SAFE_INTEGER&&A?(g&&d.getAttribute("morphTarget"+w)!==g[b]&&d.setAttribute("morphTarget"+w,g[b]),v&&d.getAttribute("morphNormal"+w)!==v[b]&&d.setAttribute("morphNormal"+w,v[b]),n[w]=A,y+=A):(g&&d.hasAttribute("morphTarget"+w)===!0&&d.deleteAttribute("morphTarget"+w),v&&d.hasAttribute("morphNormal"+w)===!0&&d.deleteAttribute("morphNormal"+w),n[w]=0)}let x=d.morphTargetsRelative?1:1-y;h.getUniforms().setValue(e,"morphTargetBaseInfluence",x),h.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function xj(e,t,i,r){let n=new WeakMap;function s(l){let u=r.render.frame,d=l.geometry,c=t.get(l,d);return n.get(c)!==u&&(t.update(c),n.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),c}function a(){n=new WeakMap}function o(l){let u=l.target;u.removeEventListener("dispose",o),i.remove(u.instanceMatrix),u.instanceColor!==null&&i.remove(u.instanceColor)}return{update:s,dispose:a}}var IR=new Gr,zR=new LR,BR=new cH,kR=new KS,KE=[],JE=[],$E=new Float32Array(16),eT=new Float32Array(9),tT=new Float32Array(4);function Wh(e,t,i){let r=e[0];if(r<=0||r>0)return e;let n=t*i,s=KE[n];if(s===void 0&&(s=new Float32Array(n),KE[n]=s),t!==0){r.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=i,e[a].toArray(s,o)}return s}function Wr(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Xr(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function F0(e,t){let i=JE[t];i===void 0&&(i=new Int32Array(t),JE[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function wj(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function _j(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Wr(i,t))return;e.uniform2fv(this.addr,t),Xr(i,t)}}function bj(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Wr(i,t))return;e.uniform3fv(this.addr,t),Xr(i,t)}}function Sj(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Wr(i,t))return;e.uniform4fv(this.addr,t),Xr(i,t)}}function Aj(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Wr(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Xr(i,t)}else{if(Wr(i,r))return;tT.set(r),e.uniformMatrix2fv(this.addr,!1,tT),Xr(i,r)}}function Mj(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Wr(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Xr(i,t)}else{if(Wr(i,r))return;eT.set(r),e.uniformMatrix3fv(this.addr,!1,eT),Xr(i,r)}}function Ej(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Wr(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Xr(i,t)}else{if(Wr(i,r))return;$E.set(r),e.uniformMatrix4fv(this.addr,!1,$E),Xr(i,r)}}function Tj(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Cj(e,t){let i=this.cache;Wr(i,t)||(e.uniform2iv(this.addr,t),Xr(i,t))}function Dj(e,t){let i=this.cache;Wr(i,t)||(e.uniform3iv(this.addr,t),Xr(i,t))}function Pj(e,t){let i=this.cache;Wr(i,t)||(e.uniform4iv(this.addr,t),Xr(i,t))}function Lj(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Oj(e,t){let i=this.cache;Wr(i,t)||(e.uniform2uiv(this.addr,t),Xr(i,t))}function Rj(e,t){let i=this.cache;Wr(i,t)||(e.uniform3uiv(this.addr,t),Xr(i,t))}function Ij(e,t){let i=this.cache;Wr(i,t)||(e.uniform4uiv(this.addr,t),Xr(i,t))}function zj(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||IR,n)}function Bj(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||BR,n)}function kj(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||kR,n)}function Nj(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||zR,n)}function Fj(e){switch(e){case 5126:return wj;case 35664:return _j;case 35665:return bj;case 35666:return Sj;case 35674:return Aj;case 35675:return Mj;case 35676:return Ej;case 5124:case 35670:return Tj;case 35667:case 35671:return Cj;case 35668:case 35672:return Dj;case 35669:case 35673:return Pj;case 5125:return Lj;case 36294:return Oj;case 36295:return Rj;case 36296:return Ij;case 35678:case 36198:case 36298:case 36306:case 35682:return zj;case 35679:case 36299:case 36307:return Bj;case 35680:case 36300:case 36308:case 36293:return kj;case 36289:case 36303:case 36311:case 36292:return Nj}}function Uj(e,t){e.uniform1fv(this.addr,t)}function Hj(e,t){let i=Wh(t,this.size,2);e.uniform2fv(this.addr,i)}function Vj(e,t){let i=Wh(t,this.size,3);e.uniform3fv(this.addr,i)}function jj(e,t){let i=Wh(t,this.size,4);e.uniform4fv(this.addr,i)}function Gj(e,t){let i=Wh(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Wj(e,t){let i=Wh(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Xj(e,t){let i=Wh(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function Yj(e,t){e.uniform1iv(this.addr,t)}function qj(e,t){e.uniform2iv(this.addr,t)}function Qj(e,t){e.uniform3iv(this.addr,t)}function Zj(e,t){e.uniform4iv(this.addr,t)}function Kj(e,t){e.uniform1uiv(this.addr,t)}function Jj(e,t){e.uniform2uiv(this.addr,t)}function $j(e,t){e.uniform3uiv(this.addr,t)}function eG(e,t){e.uniform4uiv(this.addr,t)}function tG(e,t,i){let r=t.length,n=F0(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture2D(t[s]||IR,n[s])}function iG(e,t,i){let r=t.length,n=F0(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture3D(t[s]||BR,n[s])}function rG(e,t,i){let r=t.length,n=F0(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTextureCube(t[s]||kR,n[s])}function nG(e,t,i){let r=t.length,n=F0(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture2DArray(t[s]||zR,n[s])}function sG(e){switch(e){case 5126:return Uj;case 35664:return Hj;case 35665:return Vj;case 35666:return jj;case 35674:return Gj;case 35675:return Wj;case 35676:return Xj;case 5124:case 35670:return Yj;case 35667:case 35671:return qj;case 35668:case 35672:return Qj;case 35669:case 35673:return Zj;case 5125:return Kj;case 36294:return Jj;case 36295:return $j;case 36296:return eG;case 35678:case 36198:case 36298:case 36306:case 35682:return tG;case 35679:case 36299:case 36307:return iG;case 35680:case 36300:case 36308:case 36293:return rG;case 36289:case 36303:case 36311:case 36292:return nG}}var aG=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Fj(t.type)}},oG=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=sG(t.type)}},lG=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let n=0,s=r.length;n!==s;++n){let a=r[n];a.setValue(e,t[a.id],i)}}},I1=/(\w+)(\])?(\[|\.)?/g;function iT(e,t){e.seq.push(t),e.map[t.id]=t}function uG(e,t,i){let r=e.name,n=r.length;for(I1.lastIndex=0;;){let s=I1.exec(r),a=I1.lastIndex,o=s[1],l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===n){iT(i,u===void 0?new aG(o,e,t):new oG(o,e,t));break}else{let d=i.map[o];d===void 0&&(d=new lG(o),iT(i,d)),i=d}}}var qg=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let n=e.getActiveUniform(t,r),s=e.getUniformLocation(t,n.name);uG(n,s,this)}}setValue(e,t,i,r){let n=this.map[t];n!==void 0&&n.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=i[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,n=e.length;r!==n;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function rT(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var cG=0;function hG(e,t){let i=e.split(`
`),r=[],n=Math.max(t-6,0),s=Math.min(t+6,i.length);for(let a=n;a<s;a++){let o=a+1;r.push(`${o===t?">":" "} ${o}: ${i[a]}`)}return r.join(`
`)}function dG(e){switch(e){case Aa:return["Linear","( value )"];case yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function nT(e,t,i){let r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(r&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let a=parseInt(s[1]);return i.toUpperCase()+`

`+n+`

`+hG(e.getShaderSource(t),a)}else return n}function fG(e,t){let i=dG(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function pG(e,t){let i;switch(t){case b5:i="Linear";break;case S5:i="Reinhard";break;case A5:i="OptimizedCineon";break;case M5:i="ACESFilmic";break;case E5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function mG(e){return[e.extensionDerivatives||!!e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gd).join(`
`)}function gG(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function vG(e,t){let i={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){let s=e.getActiveAttrib(t,n),a=s.name,o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),i[a]={type:s.type,location:e.getAttribLocation(t,a),locationSize:o}}return i}function Gd(e){return e!==""}function sT(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function aT(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var yG=/^[ \t]*#include +<([\w\d./]+)>/gm;function c_(e){return e.replace(yG,xG)}function xG(e,t){let i=mt[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return c_(i)}var wG=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,_G=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oT(e){return e.replace(_G,NR).replace(wG,bG)}function bG(e,t,i,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),NR(e,t,i,r)}function NR(e,t,i,r){let n="";for(let s=parseInt(t);s<parseInt(i);s++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function lT(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function SG(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===qS?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===wR?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===jd&&(t="SHADOWMAP_TYPE_VSM"),t}function AG(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Nu:case Fu:t="ENVMAP_TYPE_CUBE";break;case Tp:t="ENVMAP_TYPE_CUBE_UV";break}return t}function MG(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Fu:t="ENVMAP_MODE_REFRACTION";break}return t}function EG(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case SR:t="ENVMAP_BLENDING_MULTIPLY";break;case w5:t="ENVMAP_BLENDING_MIX";break;case _5:t="ENVMAP_BLENDING_ADD";break}return t}function TG(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function CG(e,t,i,r){let n=e.getContext(),s=i.defines,a=i.vertexShader,o=i.fragmentShader,l=SG(i),u=AG(i),d=MG(i),c=EG(i),h=TG(i),f=i.isWebGL2?"":mG(i),m=gG(s),p=n.createProgram(),g,v,y=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(g=[m].filter(Gd).join(`
`),g.length>0&&(g+=`
`),v=[f,m].filter(Gd).join(`
`),v.length>0&&(v+=`
`)):(g=[lT(i),"#define SHADER_NAME "+i.shaderName,m,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gd).join(`
`),v=[f,lT(i),"#define SHADER_NAME "+i.shaderName,m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+d:"",i.envMap?"#define "+c:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==so?"#define TONE_MAPPING":"",i.toneMapping!==so?mt.tonemapping_pars_fragment:"",i.toneMapping!==so?pG("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",mt.encodings_pars_fragment,fG("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Gd).join(`
`)),a=c_(a),a=sT(a,i),a=aT(a,i),o=c_(o),o=sT(o,i),o=aT(o,i),a=oT(a),o=oT(o),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",i.glslVersion===LE?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===LE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+a,w=y+v+o,_=rT(n,35633,x),b=rT(n,35632,w);if(n.attachShader(p,_),n.attachShader(p,b),i.index0AttributeName!==void 0?n.bindAttribLocation(p,0,i.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(p,0,"position"),n.linkProgram(p),e.debug.checkShaderErrors){let M=n.getProgramInfoLog(p).trim(),E=n.getShaderInfoLog(_).trim(),C=n.getShaderInfoLog(b).trim(),L=!0,N=!0;if(n.getProgramParameter(p,35714)===!1){L=!1;let R=nT(n,_,"vertex"),V=nT(n,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(p,35715)+`

Program Info Log: `+M+`
`+R+`
`+V)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(E===""||C==="")&&(N=!1);N&&(this.diagnostics={runnable:L,programLog:M,vertexShader:{log:E,prefix:g},fragmentShader:{log:C,prefix:v}})}n.deleteShader(_),n.deleteShader(b);let A;this.getUniforms=function(){return A===void 0&&(A=new qg(n,p)),A};let S;return this.getAttributes=function(){return S===void 0&&(S=vG(n,p)),S},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.name=i.shaderName,this.id=cG++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=_,this.fragmentShader=b,this}var DG=0,PG=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),n=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){let t=this.shaderCache;if(t.has(e)===!1){let i=new LG(e);t.set(e,i)}return t.get(e)}},LG=class{constructor(e){this.id=DG++,this.code=e,this.usedTimes=0}};function OG(e,t,i,r,n,s,a){let o=new ZS,l=new PG,u=[],d=n.isWebGL2,c=n.logarithmicDepthBuffer,h=n.vertexTextures,f=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(S,M,E,C,L){let N=C.fog,R=L.geometry,V=S.isMeshStandardMaterial?C.environment:null,F=(S.isMeshStandardMaterial?i:t).get(S.envMap||V),H=!!F&&F.mapping===Tp?F.image.height:null,P=m[S.type];S.precision!==null&&(f=n.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let z=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,D=z!==void 0?z.length:0,j=0;R.morphAttributes.position!==void 0&&(j=1),R.morphAttributes.normal!==void 0&&(j=2),R.morphAttributes.color!==void 0&&(j=3);let B,W,X,$;if(P){let K=$s[P];B=K.vertexShader,W=K.fragmentShader}else B=S.vertexShader,W=S.fragmentShader,l.update(S),X=l.getVertexShaderID(S),$=l.getFragmentShaderID(S);let U=e.getRenderTarget(),ne=S.alphaTest>0,ie=S.clearcoat>0,re=S.iridescence>0;return{isWebGL2:d,shaderID:P,shaderName:S.type,vertexShader:B,fragmentShader:W,defines:S.defines,customVertexShaderID:X,customFragmentShaderID:$,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:L.isInstancedMesh===!0,instancingColor:L.isInstancedMesh===!0&&L.instanceColor!==null,supportsVertexTextures:h,outputEncoding:U===null?e.outputEncoding:U.isXRRenderTarget===!0?U.texture.encoding:Aa,map:!!S.map,matcap:!!S.matcap,envMap:!!F,envMapMode:F&&F.mapping,envMapCubeUVHeight:H,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===G5,tangentSpaceNormalMap:S.normalMapType===j5,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===yt,clearcoat:ie,clearcoatMap:ie&&!!S.clearcoatMap,clearcoatRoughnessMap:ie&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!S.clearcoatNormalMap,iridescence:re,iridescenceMap:re&&!!S.iridescenceMap,iridescenceThicknessMap:re&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===_u,alphaMap:!!S.alphaMap,alphaTest:ne,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!R.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!R.attributes.color&&R.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||S.transmission>0||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||S.sheen>0||!!S.sheenColorMap||!!S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!N,useFog:S.fog===!0,fogExp2:N&&N.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:c,skinning:L.isSkinnedMesh===!0,morphTargets:R.morphAttributes.position!==void 0,morphNormals:R.morphAttributes.normal!==void 0,morphColors:R.morphAttributes.color!==void 0,morphTargetsCount:D,morphTextureStride:j,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:S.dithering,shadowMapEnabled:e.shadowMap.enabled&&E.length>0,shadowMapType:e.shadowMap.type,toneMapping:S.toneMapped?e.toneMapping:so,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Ur,flipSided:S.side===or,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){let M=[];if(S.shaderID?M.push(S.shaderID):(M.push(S.customVertexShaderID),M.push(S.customFragmentShaderID)),S.defines!==void 0)for(let E in S.defines)M.push(E),M.push(S.defines[E]);return S.isRawShaderMaterial===!1&&(v(M,S),y(M,S),M.push(e.outputEncoding)),M.push(S.customProgramCacheKey),M.join()}function v(S,M){S.push(M.precision),S.push(M.outputEncoding),S.push(M.envMapMode),S.push(M.envMapCubeUVHeight),S.push(M.combine),S.push(M.vertexUvs),S.push(M.fogExp2),S.push(M.sizeAttenuation),S.push(M.morphTargetsCount),S.push(M.morphAttributeCount),S.push(M.numDirLights),S.push(M.numPointLights),S.push(M.numSpotLights),S.push(M.numHemiLights),S.push(M.numRectAreaLights),S.push(M.numDirLightShadows),S.push(M.numPointLightShadows),S.push(M.numSpotLightShadows),S.push(M.shadowMapType),S.push(M.toneMapping),S.push(M.numClippingPlanes),S.push(M.numClipIntersection),S.push(M.depthPacking)}function y(S,M){o.disableAll(),M.isWebGL2&&o.enable(0),M.supportsVertexTextures&&o.enable(1),M.instancing&&o.enable(2),M.instancingColor&&o.enable(3),M.map&&o.enable(4),M.matcap&&o.enable(5),M.envMap&&o.enable(6),M.lightMap&&o.enable(7),M.aoMap&&o.enable(8),M.emissiveMap&&o.enable(9),M.bumpMap&&o.enable(10),M.normalMap&&o.enable(11),M.objectSpaceNormalMap&&o.enable(12),M.tangentSpaceNormalMap&&o.enable(13),M.clearcoat&&o.enable(14),M.clearcoatMap&&o.enable(15),M.clearcoatRoughnessMap&&o.enable(16),M.clearcoatNormalMap&&o.enable(17),M.iridescence&&o.enable(18),M.iridescenceMap&&o.enable(19),M.iridescenceThicknessMap&&o.enable(20),M.displacementMap&&o.enable(21),M.specularMap&&o.enable(22),M.roughnessMap&&o.enable(23),M.metalnessMap&&o.enable(24),M.gradientMap&&o.enable(25),M.alphaMap&&o.enable(26),M.alphaTest&&o.enable(27),M.vertexColors&&o.enable(28),M.vertexAlphas&&o.enable(29),M.vertexUvs&&o.enable(30),M.vertexTangents&&o.enable(31),M.uvsVertexOnly&&o.enable(32),M.fog&&o.enable(33),S.push(o.mask),o.disableAll(),M.useFog&&o.enable(0),M.flatShading&&o.enable(1),M.logarithmicDepthBuffer&&o.enable(2),M.skinning&&o.enable(3),M.morphTargets&&o.enable(4),M.morphNormals&&o.enable(5),M.morphColors&&o.enable(6),M.premultipliedAlpha&&o.enable(7),M.shadowMapEnabled&&o.enable(8),M.physicallyCorrectLights&&o.enable(9),M.doubleSided&&o.enable(10),M.flipSided&&o.enable(11),M.useDepthPacking&&o.enable(12),M.dithering&&o.enable(13),M.specularIntensityMap&&o.enable(14),M.specularColorMap&&o.enable(15),M.transmission&&o.enable(16),M.transmissionMap&&o.enable(17),M.thicknessMap&&o.enable(18),M.sheen&&o.enable(19),M.sheenColorMap&&o.enable(20),M.sheenRoughnessMap&&o.enable(21),M.decodeVideoTexture&&o.enable(22),M.opaque&&o.enable(23),S.push(o.mask)}function x(S){let M=m[S.type],E;if(M){let C=$s[M];E=jh.clone(C.uniforms)}else E=S.uniforms;return E}function w(S,M){let E;for(let C=0,L=u.length;C<L;C++){let N=u[C];if(N.cacheKey===M){E=N,++E.usedTimes;break}}return E===void 0&&(E=new CG(e,M,S,s),u.push(E)),E}function _(S){if(--S.usedTimes===0){let M=u.indexOf(S);u[M]=u[u.length-1],u.pop(),S.destroy()}}function b(S){l.remove(S)}function A(){l.dispose()}return{getParameters:p,getProgramCacheKey:g,getUniforms:x,acquireProgram:w,releaseProgram:_,releaseShaderCache:b,programs:u,dispose:A}}function RG(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function i(s){e.delete(s)}function r(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:n}}function IG(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function uT(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cT(){let e=[],t=0,i=[],r=[],n=[];function s(){t=0,i.length=0,r.length=0,n.length=0}function a(c,h,f,m,p,g){let v=e[t];return v===void 0?(v={id:c.id,object:c,geometry:h,material:f,groupOrder:m,renderOrder:c.renderOrder,z:p,group:g},e[t]=v):(v.id=c.id,v.object=c,v.geometry=h,v.material=f,v.groupOrder=m,v.renderOrder=c.renderOrder,v.z=p,v.group=g),t++,v}function o(c,h,f,m,p,g){let v=a(c,h,f,m,p,g);f.transmission>0?r.push(v):f.transparent===!0?n.push(v):i.push(v)}function l(c,h,f,m,p,g){let v=a(c,h,f,m,p,g);f.transmission>0?r.unshift(v):f.transparent===!0?n.unshift(v):i.unshift(v)}function u(c,h){i.length>1&&i.sort(c||IG),r.length>1&&r.sort(h||uT),n.length>1&&n.sort(h||uT)}function d(){for(let c=t,h=e.length;c<h;c++){let f=e[c];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:r,transparent:n,init:s,push:o,unshift:l,finish:d,sort:u}}function zG(){let e=new WeakMap;function t(r,n){let s;return e.has(r)===!1?(s=new cT,e.set(r,[s])):n>=e.get(r).length?(s=new cT,e.get(r).push(s)):s=e.get(r)[n],s}function i(){e=new WeakMap}return{get:t,dispose:i}}function BG(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new T,color:new dt};break;case"SpotLight":i={position:new T,direction:new T,color:new dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new T,color:new dt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new T,skyColor:new dt,groundColor:new dt};break;case"RectAreaLight":i={color:new dt,position:new T,halfWidth:new T,halfHeight:new T};break}return e[t.id]=i,i}}}function kG(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var NG=0;function FG(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function UG(e,t){let i=new BG,r=kG(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)n.probe.push(new T);let s=new T,a=new Ke,o=new Ke;function l(d,c){let h=0,f=0,m=0;for(let M=0;M<9;M++)n.probe[M].set(0,0,0);let p=0,g=0,v=0,y=0,x=0,w=0,_=0,b=0;d.sort(FG);let A=c!==!0?Math.PI:1;for(let M=0,E=d.length;M<E;M++){let C=d[M],L=C.color,N=C.intensity,R=C.distance,V=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)h+=L.r*N*A,f+=L.g*N*A,m+=L.b*N*A;else if(C.isLightProbe)for(let F=0;F<9;F++)n.probe[F].addScaledVector(C.sh.coefficients[F],N);else if(C.isDirectionalLight){let F=i.get(C);if(F.color.copy(C.color).multiplyScalar(C.intensity*A),C.castShadow){let H=C.shadow,P=r.get(C);P.shadowBias=H.bias,P.shadowNormalBias=H.normalBias,P.shadowRadius=H.radius,P.shadowMapSize=H.mapSize,n.directionalShadow[p]=P,n.directionalShadowMap[p]=V,n.directionalShadowMatrix[p]=C.shadow.matrix,w++}n.directional[p]=F,p++}else if(C.isSpotLight){let F=i.get(C);if(F.position.setFromMatrixPosition(C.matrixWorld),F.color.copy(L).multiplyScalar(N*A),F.distance=R,F.coneCos=Math.cos(C.angle),F.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),F.decay=C.decay,C.castShadow){let H=C.shadow,P=r.get(C);P.shadowBias=H.bias,P.shadowNormalBias=H.normalBias,P.shadowRadius=H.radius,P.shadowMapSize=H.mapSize,n.spotShadow[v]=P,n.spotShadowMap[v]=V,n.spotShadowMatrix[v]=C.shadow.matrix,b++}n.spot[v]=F,v++}else if(C.isRectAreaLight){let F=i.get(C);F.color.copy(L).multiplyScalar(N),F.halfWidth.set(C.width*.5,0,0),F.halfHeight.set(0,C.height*.5,0),n.rectArea[y]=F,y++}else if(C.isPointLight){let F=i.get(C);if(F.color.copy(C.color).multiplyScalar(C.intensity*A),F.distance=C.distance,F.decay=C.decay,C.castShadow){let H=C.shadow,P=r.get(C);P.shadowBias=H.bias,P.shadowNormalBias=H.normalBias,P.shadowRadius=H.radius,P.shadowMapSize=H.mapSize,P.shadowCameraNear=H.camera.near,P.shadowCameraFar=H.camera.far,n.pointShadow[g]=P,n.pointShadowMap[g]=V,n.pointShadowMatrix[g]=C.shadow.matrix,_++}n.point[g]=F,g++}else if(C.isHemisphereLight){let F=i.get(C);F.skyColor.copy(C.color).multiplyScalar(N*A),F.groundColor.copy(C.groundColor).multiplyScalar(N*A),n.hemi[x]=F,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Le.LTC_FLOAT_1,n.rectAreaLTC2=Le.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Le.LTC_HALF_1,n.rectAreaLTC2=Le.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=h,n.ambient[1]=f,n.ambient[2]=m;let S=n.hash;(S.directionalLength!==p||S.pointLength!==g||S.spotLength!==v||S.rectAreaLength!==y||S.hemiLength!==x||S.numDirectionalShadows!==w||S.numPointShadows!==_||S.numSpotShadows!==b)&&(n.directional.length=p,n.spot.length=v,n.rectArea.length=y,n.point.length=g,n.hemi.length=x,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=_,n.spotShadowMatrix.length=b,S.directionalLength=p,S.pointLength=g,S.spotLength=v,S.rectAreaLength=y,S.hemiLength=x,S.numDirectionalShadows=w,S.numPointShadows=_,S.numSpotShadows=b,n.version=NG++)}function u(d,c){let h=0,f=0,m=0,p=0,g=0,v=c.matrixWorldInverse;for(let y=0,x=d.length;y<x;y++){let w=d[y];if(w.isDirectionalLight){let _=n.directional[h];_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),h++}else if(w.isSpotLight){let _=n.spot[m];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),m++}else if(w.isRectAreaLight){let _=n.rectArea[p];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),o.identity(),a.copy(w.matrixWorld),a.premultiply(v),o.extractRotation(a),_.halfWidth.set(w.width*.5,0,0),_.halfHeight.set(0,w.height*.5,0),_.halfWidth.applyMatrix4(o),_.halfHeight.applyMatrix4(o),p++}else if(w.isPointLight){let _=n.point[f];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),f++}else if(w.isHemisphereLight){let _=n.hemi[g];_.direction.setFromMatrixPosition(w.matrixWorld),_.direction.transformDirection(v),g++}}}return{setup:l,setupView:u,state:n}}function hT(e,t){let i=new UG(e,t),r=[],n=[];function s(){r.length=0,n.length=0}function a(d){r.push(d)}function o(d){n.push(d)}function l(d){i.setup(r,d)}function u(d){i.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:n,lights:i},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function HG(e,t){let i=new WeakMap;function r(s,a=0){let o;return i.has(s)===!1?(o=new hT(e,t),i.set(s,[o])):a>=i.get(s).length?(o=new hT(e,t),i.get(s).push(o)):o=i.get(s)[a],o}function n(){i=new WeakMap}return{get:r,dispose:n}}var FR=class extends Pp{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wo,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},VG=class extends Pp{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new T,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},jG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WG(e,t,i){let r=new JS,n=new q,s=new q,a=new vt,o=new FR({depthPacking:ER}),l=new VG,u={},d=i.maxTextureSize,c={0:or,1:go,2:Ur},h=new Gi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new q},radius:{value:4}},vertexShader:jG,fragmentShader:GG}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new ft;m.setAttribute("position",new xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new Mr(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qS,this.render=function(w,_,b){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;let A=e.getRenderTarget(),S=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),E=e.state;E.setBlending(ur),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let C=0,L=w.length;C<L;C++){let N=w[C],R=N.shadow;if(R===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(R.autoUpdate===!1&&R.needsUpdate===!1)continue;n.copy(R.mapSize);let V=R.getFrameExtents();if(n.multiply(V),s.copy(R.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(s.x=Math.floor(d/V.x),n.x=s.x*V.x,R.mapSize.x=s.x),n.y>d&&(s.y=Math.floor(d/V.y),n.y=s.y*V.y,R.mapSize.y=s.y)),R.map===null){let H=this.type!==jd?{minFilter:mi,magFilter:mi}:{};R.map=new Ei(n.x,n.y,H),R.map.texture.name=N.name+".shadowMap",R.camera.updateProjectionMatrix()}e.setRenderTarget(R.map),e.clear();let F=R.getViewportCount();for(let H=0;H<F;H++){let P=R.getViewport(H);a.set(s.x*P.x,s.y*P.y,s.x*P.z,s.y*P.w),E.viewport(a),R.updateMatrices(N,H),r=R.getFrustum(),x(_,b,R.camera,N,this.type)}R.isPointLightShadow!==!0&&this.type===jd&&v(R,b),R.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(A,S,M)};function v(w,_){let b=t.update(p);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Ei(n.x,n.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,e.setRenderTarget(w.mapPass),e.clear(),e.renderBufferDirect(_,null,b,h,p,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,e.setRenderTarget(w.map),e.clear(),e.renderBufferDirect(_,null,b,f,p,null)}function y(w,_,b,A,S,M){let E=null,C=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(C!==void 0?E=C:E=b.isPointLight===!0?l:o,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0){let L=E.uuid,N=_.uuid,R=u[L];R===void 0&&(R={},u[L]=R);let V=R[N];V===void 0&&(V=E.clone(),R[N]=V),E=V}return E.visible=_.visible,E.wireframe=_.wireframe,M===jd?E.side=_.shadowSide!==null?_.shadowSide:_.side:E.side=_.shadowSide!==null?_.shadowSide:c[_.side],E.alphaMap=_.alphaMap,E.alphaTest=_.alphaTest,E.clipShadows=_.clipShadows,E.clippingPlanes=_.clippingPlanes,E.clipIntersection=_.clipIntersection,E.displacementMap=_.displacementMap,E.displacementScale=_.displacementScale,E.displacementBias=_.displacementBias,E.wireframeLinewidth=_.wireframeLinewidth,E.linewidth=_.linewidth,b.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(b.matrixWorld),E.nearDistance=A,E.farDistance=S),E}function x(w,_,b,A,S){if(w.visible===!1)return;if(w.layers.test(_.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&S===jd)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);let E=t.update(w),C=w.material;if(Array.isArray(C)){let L=E.groups;for(let N=0,R=L.length;N<R;N++){let V=L[N],F=C[V.materialIndex];if(F&&F.visible){let H=y(w,F,A,b.near,b.far,S);e.renderBufferDirect(b,null,E,H,w,V)}}}else if(C.visible){let L=y(w,C,A,b.near,b.far,S);e.renderBufferDirect(b,null,E,L,w,null)}}let M=w.children;for(let E=0,C=M.length;E<C;E++)x(M[E],_,b,A,S)}}function XG(e,t,i){let r=i.isWebGL2;function n(){let G=!1,Ae=new vt,be=null,Re=new vt(0,0,0,0);return{setMask:function(ze){be!==ze&&!G&&(e.colorMask(ze,ze,ze,ze),be=ze)},setLocked:function(ze){G=ze},setClear:function(ze,Qe,ye,Ne,Oe){Oe===!0&&(ze*=Ne,Qe*=Ne,ye*=Ne),Ae.set(ze,Qe,ye,Ne),Re.equals(Ae)===!1&&(e.clearColor(ze,Qe,ye,Ne),Re.copy(Ae))},reset:function(){G=!1,be=null,Re.set(-1,0,0,0)}}}function s(){let G=!1,Ae=null,be=null,Re=null;return{setTest:function(ze){ze?$(2929):U(2929)},setMask:function(ze){Ae!==ze&&!G&&(e.depthMask(ze),Ae=ze)},setFunc:function(ze){if(be!==ze){if(ze)switch(ze){case f5:e.depthFunc(512);break;case p5:e.depthFunc(519);break;case m5:e.depthFunc(513);break;case r_:e.depthFunc(515);break;case g5:e.depthFunc(514);break;case v5:e.depthFunc(518);break;case y5:e.depthFunc(516);break;case x5:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);be=ze}},setLocked:function(ze){G=ze},setClear:function(ze){Re!==ze&&(e.clearDepth(ze),Re=ze)},reset:function(){G=!1,Ae=null,be=null,Re=null}}}function a(){let G=!1,Ae=null,be=null,Re=null,ze=null,Qe=null,ye=null,Ne=null,Oe=null;return{setTest:function(Ce){G||(Ce?$(2960):U(2960))},setMask:function(Ce){Ae!==Ce&&!G&&(e.stencilMask(Ce),Ae=Ce)},setFunc:function(Ce,je,tt){(be!==Ce||Re!==je||ze!==tt)&&(e.stencilFunc(Ce,je,tt),be=Ce,Re=je,ze=tt)},setOp:function(Ce,je,tt){(Qe!==Ce||ye!==je||Ne!==tt)&&(e.stencilOp(Ce,je,tt),Qe=Ce,ye=je,Ne=tt)},setLocked:function(Ce){G=Ce},setClear:function(Ce){Oe!==Ce&&(e.clearStencil(Ce),Oe=Ce)},reset:function(){G=!1,Ae=null,be=null,Re=null,ze=null,Qe=null,ye=null,Ne=null,Oe=null}}}let o=new n,l=new s,u=new a,d={},c={},h=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,x=null,w=null,_=null,b=null,A=!1,S=null,M=null,E=null,C=null,L=null,N=e.getParameter(35661),R=!1,V=0,F=e.getParameter(7938);F.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(F)[1]),R=V>=1):F.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),R=V>=2);let H=null,P={},z=e.getParameter(3088),D=e.getParameter(2978),j=new vt().fromArray(z),B=new vt().fromArray(D);function W(G,Ae,be){let Re=new Uint8Array(4),ze=e.createTexture();e.bindTexture(G,ze),e.texParameteri(G,10241,9728),e.texParameteri(G,10240,9728);for(let Qe=0;Qe<be;Qe++)e.texImage2D(Ae+Qe,0,6408,1,1,0,6408,5121,Re);return ze}let X={};X[3553]=W(3553,3553,1),X[34067]=W(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),$(2929),l.setFunc(r_),pe(!1),me(iE),$(2884),te(ur);function $(G){d[G]!==!0&&(e.enable(G),d[G]=!0)}function U(G){d[G]!==!1&&(e.disable(G),d[G]=!1)}function ne(G,Ae){return c[G]!==Ae?(e.bindFramebuffer(G,Ae),c[G]=Ae,r&&(G===36009&&(c[36160]=Ae),G===36160&&(c[36009]=Ae)),!0):!1}function ie(G,Ae){let be=f,Re=!1;if(G)if(be=h.get(Ae),be===void 0&&(be=[],h.set(Ae,be)),G.isWebGLMultipleRenderTargets){let ze=G.texture;if(be.length!==ze.length||be[0]!==36064){for(let Qe=0,ye=ze.length;Qe<ye;Qe++)be[Qe]=36064+Qe;be.length=ze.length,Re=!0}}else be[0]!==36064&&(be[0]=36064,Re=!0);else be[0]!==1029&&(be[0]=1029,Re=!0);Re&&(i.isWebGL2?e.drawBuffers(be):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function re(G){return m!==G?(e.useProgram(G),m=G,!0):!1}let K={[Tc]:32774,[i5]:32778,[r5]:32779};if(r)K[aE]=32775,K[oE]=32776;else{let G=t.get("EXT_blend_minmax");G!==null&&(K[aE]=G.MIN_EXT,K[oE]=G.MAX_EXT)}let fe={[n5]:0,[s5]:1,[a5]:768,[_R]:770,[d5]:776,[c5]:774,[l5]:772,[o5]:769,[bR]:771,[h5]:775,[u5]:773};function te(G,Ae,be,Re,ze,Qe,ye,Ne){if(G===ur){p===!0&&(U(3042),p=!1);return}if(p===!1&&($(3042),p=!0),G!==t5){if(G!==g||Ne!==A){if((v!==Tc||w!==Tc)&&(e.blendEquation(32774),v=Tc,w=Tc),Ne)switch(G){case _u:e.blendFuncSeparate(1,771,1,771);break;case rE:e.blendFunc(1,1);break;case nE:e.blendFuncSeparate(0,769,0,1);break;case sE:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case _u:e.blendFuncSeparate(770,771,1,771);break;case rE:e.blendFunc(770,1);break;case nE:e.blendFuncSeparate(0,769,0,1);break;case sE:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}y=null,x=null,_=null,b=null,g=G,A=Ne}return}ze=ze||Ae,Qe=Qe||be,ye=ye||Re,(Ae!==v||ze!==w)&&(e.blendEquationSeparate(K[Ae],K[ze]),v=Ae,w=ze),(be!==y||Re!==x||Qe!==_||ye!==b)&&(e.blendFuncSeparate(fe[be],fe[Re],fe[Qe],fe[ye]),y=be,x=Re,_=Qe,b=ye),g=G,A=null}function ae(G,Ae){G.side===Ur?U(2884):$(2884);let be=G.side===or;Ae&&(be=!be),pe(be),G.blending===_u&&G.transparent===!1?te(ur):te(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),l.setFunc(G.depthFunc),l.setTest(G.depthTest),l.setMask(G.depthWrite),o.setMask(G.colorWrite);let Re=G.stencilWrite;u.setTest(Re),Re&&(u.setMask(G.stencilWriteMask),u.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),u.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),Y(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?$(32926):U(32926)}function pe(G){S!==G&&(G?e.frontFace(2304):e.frontFace(2305),S=G)}function me(G){G!==JU?($(2884),G!==M&&(G===iE?e.cullFace(1029):G===$U?e.cullFace(1028):e.cullFace(1032))):U(2884),M=G}function Ie(G){G!==E&&(R&&e.lineWidth(G),E=G)}function Y(G,Ae,be){G?($(32823),(C!==Ae||L!==be)&&(e.polygonOffset(Ae,be),C=Ae,L=be)):U(32823)}function Se(G){G?$(3089):U(3089)}function Te(G){G===void 0&&(G=33984+N-1),H!==G&&(e.activeTexture(G),H=G)}function at(G,Ae){H===null&&Te();let be=P[H];be===void 0&&(be={type:void 0,texture:void 0},P[H]=be),(be.type!==G||be.texture!==Ae)&&(e.bindTexture(G,Ae||X[G]),be.type=G,be.texture=Ae)}function ct(){let G=P[H];G!==void 0&&G.type!==void 0&&(e.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function k(){try{e.compressedTexImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function O(){try{e.texSubImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function le(){try{e.texSubImage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ge(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ve(){try{e.texStorage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function _e(){try{e.texStorage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Fe(){try{e.texImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ue(){try{e.texImage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function He(G){j.equals(G)===!1&&(e.scissor(G.x,G.y,G.z,G.w),j.copy(G))}function xe(G){B.equals(G)===!1&&(e.viewport(G.x,G.y,G.z,G.w),B.copy(G))}function Me(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},H=null,P={},c={},h=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,x=null,w=null,_=null,b=null,A=!1,S=null,M=null,E=null,C=null,L=null,j.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:$,disable:U,bindFramebuffer:ne,drawBuffers:ie,useProgram:re,setBlending:te,setMaterial:ae,setFlipSided:pe,setCullFace:me,setLineWidth:Ie,setPolygonOffset:Y,setScissorTest:Se,activeTexture:Te,bindTexture:at,unbindTexture:ct,compressedTexImage2D:k,texImage2D:Fe,texImage3D:ue,texStorage2D:ve,texStorage3D:_e,texSubImage2D:O,texSubImage3D:le,compressedTexSubImage2D:ge,scissor:He,viewport:xe,reset:Me}}function YG(e,t,i,r,n,s,a){let o=n.isWebGL2,l=n.maxTextures,u=n.maxCubemapSize,d=n.maxTextureSize,c=n.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,p,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(k,O){return v?new OffscreenCanvas(k,O):Hv("canvas")}function x(k,O,le,ge){let ve=1;if((k.width>ge||k.height>ge)&&(ve=ge/Math.max(k.width,k.height)),ve<1||O===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){let _e=O?Uv:Math.floor,Fe=_e(ve*k.width),ue=_e(ve*k.height);p===void 0&&(p=y(Fe,ue));let He=le?y(Fe,ue):p;return He.width=Fe,He.height=ue,He.getContext("2d").drawImage(k,0,0,Fe,ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+Fe+"x"+ue+")."),He}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function w(k){return u_(k.width)&&u_(k.height)}function _(k){return o?!1:k.wrapS!==Sn||k.wrapT!==Sn||k.minFilter!==mi&&k.minFilter!==Xt}function b(k,O){return k.generateMipmaps&&O&&k.minFilter!==mi&&k.minFilter!==Xt}function A(k){e.generateMipmap(k)}function S(k,O,le,ge,ve=!1){if(o===!1)return O;if(k!==null){if(e[k]!==void 0)return e[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let _e=O;return O===6403&&(le===5126&&(_e=33326),le===5131&&(_e=33325),le===5121&&(_e=33321)),O===33319&&(le===5126&&(_e=33328),le===5131&&(_e=33327),le===5121&&(_e=33323)),O===6408&&(le===5126&&(_e=34836),le===5131&&(_e=34842),le===5121&&(_e=ge===yt&&ve===!1?35907:32856),le===32819&&(_e=32854),le===32820&&(_e=32855)),(_e===33325||_e===33326||_e===33327||_e===33328||_e===34842||_e===34836)&&t.get("EXT_color_buffer_float"),_e}function M(k,O,le){return b(k,le)===!0||k.isFramebufferTexture&&k.minFilter!==mi&&k.minFilter!==Xt?Math.log2(Math.max(O.width,O.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?O.mipmaps.length:1}function E(k){return k===mi||k===lE||k===uE?9728:9729}function C(k){let O=k.target;O.removeEventListener("dispose",C),N(O),O.isVideoTexture&&m.delete(O)}function L(k){let O=k.target;O.removeEventListener("dispose",L),V(O)}function N(k){let O=r.get(k);if(O.__webglInit===void 0)return;let le=k.source,ge=g.get(le);if(ge){let ve=ge[O.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&R(k),Object.keys(ge).length===0&&g.delete(le)}r.remove(k)}function R(k){let O=r.get(k);e.deleteTexture(O.__webglTexture);let le=k.source,ge=g.get(le);delete ge[O.__cacheKey],a.memory.textures--}function V(k){let O=k.texture,le=r.get(k),ge=r.get(O);if(ge.__webglTexture!==void 0&&(e.deleteTexture(ge.__webglTexture),a.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)e.deleteFramebuffer(le.__webglFramebuffer[ve]),le.__webglDepthbuffer&&e.deleteRenderbuffer(le.__webglDepthbuffer[ve]);else{if(e.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&e.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&e.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let ve=0;ve<le.__webglColorRenderbuffer.length;ve++)le.__webglColorRenderbuffer[ve]&&e.deleteRenderbuffer(le.__webglColorRenderbuffer[ve]);le.__webglDepthRenderbuffer&&e.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let ve=0,_e=O.length;ve<_e;ve++){let Fe=r.get(O[ve]);Fe.__webglTexture&&(e.deleteTexture(Fe.__webglTexture),a.memory.textures--),r.remove(O[ve])}r.remove(O),r.remove(k)}let F=0;function H(){F=0}function P(){let k=F;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),F+=1,k}function z(k){let O=[];return O.push(k.wrapS),O.push(k.wrapT),O.push(k.magFilter),O.push(k.minFilter),O.push(k.anisotropy),O.push(k.internalFormat),O.push(k.format),O.push(k.type),O.push(k.generateMipmaps),O.push(k.premultiplyAlpha),O.push(k.flipY),O.push(k.unpackAlignment),O.push(k.encoding),O.join()}function D(k,O){let le=r.get(k);if(k.isVideoTexture&&at(k),k.isRenderTargetTexture===!1&&k.version>0&&le.__version!==k.version){let ge=k.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(le,k,O);return}}i.activeTexture(33984+O),i.bindTexture(3553,le.__webglTexture)}function j(k,O){let le=r.get(k);if(k.version>0&&le.__version!==k.version){ie(le,k,O);return}i.activeTexture(33984+O),i.bindTexture(35866,le.__webglTexture)}function B(k,O){let le=r.get(k);if(k.version>0&&le.__version!==k.version){ie(le,k,O);return}i.activeTexture(33984+O),i.bindTexture(32879,le.__webglTexture)}function W(k,O){let le=r.get(k);if(k.version>0&&le.__version!==k.version){re(le,k,O);return}i.activeTexture(33984+O),i.bindTexture(34067,le.__webglTexture)}let X={[rp]:10497,[Sn]:33071,[a_]:33648},$={[mi]:9728,[lE]:9984,[uE]:9986,[Xt]:9729,[T5]:9985,[Cp]:9987};function U(k,O,le){if(le?(e.texParameteri(k,10242,X[O.wrapS]),e.texParameteri(k,10243,X[O.wrapT]),(k===32879||k===35866)&&e.texParameteri(k,32882,X[O.wrapR]),e.texParameteri(k,10240,$[O.magFilter]),e.texParameteri(k,10241,$[O.minFilter])):(e.texParameteri(k,10242,33071),e.texParameteri(k,10243,33071),(k===32879||k===35866)&&e.texParameteri(k,32882,33071),(O.wrapS!==Sn||O.wrapT!==Sn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(k,10240,E(O.magFilter)),e.texParameteri(k,10241,E(O.minFilter)),O.minFilter!==mi&&O.minFilter!==Xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let ge=t.get("EXT_texture_filter_anisotropic");if(O.type===el&&t.has("OES_texture_float_linear")===!1||o===!1&&O.type===np&&t.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(e.texParameterf(k,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,n.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function ne(k,O){let le=!1;k.__webglInit===void 0&&(k.__webglInit=!0,O.addEventListener("dispose",C));let ge=O.source,ve=g.get(ge);ve===void 0&&(ve={},g.set(ge,ve));let _e=z(O);if(_e!==k.__cacheKey){ve[_e]===void 0&&(ve[_e]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,le=!0),ve[_e].usedTimes++;let Fe=ve[k.__cacheKey];Fe!==void 0&&(ve[k.__cacheKey].usedTimes--,Fe.usedTimes===0&&R(O)),k.__cacheKey=_e,k.__webglTexture=ve[_e].texture}return le}function ie(k,O,le){let ge=3553;O.isDataArrayTexture&&(ge=35866),O.isData3DTexture&&(ge=32879);let ve=ne(k,O),_e=O.source;if(i.activeTexture(33984+le),i.bindTexture(ge,k.__webglTexture),_e.version!==_e.__currentVersion||ve===!0){e.pixelStorei(37440,O.flipY),e.pixelStorei(37441,O.premultiplyAlpha),e.pixelStorei(3317,O.unpackAlignment),e.pixelStorei(37443,0);let Fe=_(O)&&w(O.image)===!1,ue=x(O.image,Fe,!1,d);ue=ct(O,ue);let He=w(ue)||o,xe=s.convert(O.format,O.encoding),Me=s.convert(O.type),G=S(O.internalFormat,xe,Me,O.encoding,O.isVideoTexture);U(ge,O,He);let Ae,be=O.mipmaps,Re=o&&O.isVideoTexture!==!0,ze=_e.__currentVersion===void 0||ve===!0,Qe=M(O,ue,He);if(O.isDepthTexture)G=6402,o?O.type===el?G=36012:O.type===$o?G=33190:O.type===bu?G=35056:G=33189:O.type===el&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Su&&G===6402&&O.type!==MR&&O.type!==$o&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=$o,Me=s.convert(O.type)),O.format===Uu&&G===6402&&(G=34041,O.type!==bu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=bu,Me=s.convert(O.type))),ze&&(Re?i.texStorage2D(3553,1,G,ue.width,ue.height):i.texImage2D(3553,0,G,ue.width,ue.height,0,xe,Me,null));else if(O.isDataTexture)if(be.length>0&&He){Re&&ze&&i.texStorage2D(3553,Qe,G,be[0].width,be[0].height);for(let ye=0,Ne=be.length;ye<Ne;ye++)Ae=be[ye],Re?i.texSubImage2D(3553,ye,0,0,Ae.width,Ae.height,xe,Me,Ae.data):i.texImage2D(3553,ye,G,Ae.width,Ae.height,0,xe,Me,Ae.data);O.generateMipmaps=!1}else Re?(ze&&i.texStorage2D(3553,Qe,G,ue.width,ue.height),i.texSubImage2D(3553,0,0,0,ue.width,ue.height,xe,Me,ue.data)):i.texImage2D(3553,0,G,ue.width,ue.height,0,xe,Me,ue.data);else if(O.isCompressedTexture){Re&&ze&&i.texStorage2D(3553,Qe,G,be[0].width,be[0].height);for(let ye=0,Ne=be.length;ye<Ne;ye++)Ae=be[ye],O.format!==oa?xe!==null?Re?i.compressedTexSubImage2D(3553,ye,0,0,Ae.width,Ae.height,xe,Ae.data):i.compressedTexImage2D(3553,ye,G,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?i.texSubImage2D(3553,ye,0,0,Ae.width,Ae.height,xe,Me,Ae.data):i.texImage2D(3553,ye,G,Ae.width,Ae.height,0,xe,Me,Ae.data)}else if(O.isDataArrayTexture)Re?(ze&&i.texStorage3D(35866,Qe,G,ue.width,ue.height,ue.depth),i.texSubImage3D(35866,0,0,0,0,ue.width,ue.height,ue.depth,xe,Me,ue.data)):i.texImage3D(35866,0,G,ue.width,ue.height,ue.depth,0,xe,Me,ue.data);else if(O.isData3DTexture)Re?(ze&&i.texStorage3D(32879,Qe,G,ue.width,ue.height,ue.depth),i.texSubImage3D(32879,0,0,0,0,ue.width,ue.height,ue.depth,xe,Me,ue.data)):i.texImage3D(32879,0,G,ue.width,ue.height,ue.depth,0,xe,Me,ue.data);else if(O.isFramebufferTexture){if(ze)if(Re)i.texStorage2D(3553,Qe,G,ue.width,ue.height);else{let ye=ue.width,Ne=ue.height;for(let Oe=0;Oe<Qe;Oe++)i.texImage2D(3553,Oe,G,ye,Ne,0,xe,Me,null),ye>>=1,Ne>>=1}}else if(be.length>0&&He){Re&&ze&&i.texStorage2D(3553,Qe,G,be[0].width,be[0].height);for(let ye=0,Ne=be.length;ye<Ne;ye++)Ae=be[ye],Re?i.texSubImage2D(3553,ye,0,0,xe,Me,Ae):i.texImage2D(3553,ye,G,xe,Me,Ae);O.generateMipmaps=!1}else Re?(ze&&i.texStorage2D(3553,Qe,G,ue.width,ue.height),i.texSubImage2D(3553,0,0,0,xe,Me,ue)):i.texImage2D(3553,0,G,xe,Me,ue);b(O,He)&&A(ge),_e.__currentVersion=_e.version,O.onUpdate&&O.onUpdate(O)}k.__version=O.version}function re(k,O,le){if(O.image.length!==6)return;let ge=ne(k,O),ve=O.source;if(i.activeTexture(33984+le),i.bindTexture(34067,k.__webglTexture),ve.version!==ve.__currentVersion||ge===!0){e.pixelStorei(37440,O.flipY),e.pixelStorei(37441,O.premultiplyAlpha),e.pixelStorei(3317,O.unpackAlignment),e.pixelStorei(37443,0);let _e=O.isCompressedTexture||O.image[0].isCompressedTexture,Fe=O.image[0]&&O.image[0].isDataTexture,ue=[];for(let ye=0;ye<6;ye++)!_e&&!Fe?ue[ye]=x(O.image[ye],!1,!0,u):ue[ye]=Fe?O.image[ye].image:O.image[ye],ue[ye]=ct(O,ue[ye]);let He=ue[0],xe=w(He)||o,Me=s.convert(O.format,O.encoding),G=s.convert(O.type),Ae=S(O.internalFormat,Me,G,O.encoding),be=o&&O.isVideoTexture!==!0,Re=ve.__currentVersion===void 0||ge===!0,ze=M(O,He,xe);U(34067,O,xe);let Qe;if(_e){be&&Re&&i.texStorage2D(34067,ze,Ae,He.width,He.height);for(let ye=0;ye<6;ye++){Qe=ue[ye].mipmaps;for(let Ne=0;Ne<Qe.length;Ne++){let Oe=Qe[Ne];O.format!==oa?Me!==null?be?i.compressedTexSubImage2D(34069+ye,Ne,0,0,Oe.width,Oe.height,Me,Oe.data):i.compressedTexImage2D(34069+ye,Ne,Ae,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):be?i.texSubImage2D(34069+ye,Ne,0,0,Oe.width,Oe.height,Me,G,Oe.data):i.texImage2D(34069+ye,Ne,Ae,Oe.width,Oe.height,0,Me,G,Oe.data)}}}else{Qe=O.mipmaps,be&&Re&&(Qe.length>0&&ze++,i.texStorage2D(34067,ze,Ae,ue[0].width,ue[0].height));for(let ye=0;ye<6;ye++)if(Fe){be?i.texSubImage2D(34069+ye,0,0,0,ue[ye].width,ue[ye].height,Me,G,ue[ye].data):i.texImage2D(34069+ye,0,Ae,ue[ye].width,ue[ye].height,0,Me,G,ue[ye].data);for(let Ne=0;Ne<Qe.length;Ne++){let Oe=Qe[Ne].image[ye].image;be?i.texSubImage2D(34069+ye,Ne+1,0,0,Oe.width,Oe.height,Me,G,Oe.data):i.texImage2D(34069+ye,Ne+1,Ae,Oe.width,Oe.height,0,Me,G,Oe.data)}}else{be?i.texSubImage2D(34069+ye,0,0,0,Me,G,ue[ye]):i.texImage2D(34069+ye,0,Ae,Me,G,ue[ye]);for(let Ne=0;Ne<Qe.length;Ne++){let Oe=Qe[Ne];be?i.texSubImage2D(34069+ye,Ne+1,0,0,Me,G,Oe.image[ye]):i.texImage2D(34069+ye,Ne+1,Ae,Me,G,Oe.image[ye])}}}b(O,xe)&&A(34067),ve.__currentVersion=ve.version,O.onUpdate&&O.onUpdate(O)}k.__version=O.version}function K(k,O,le,ge,ve){let _e=s.convert(le.format,le.encoding),Fe=s.convert(le.type),ue=S(le.internalFormat,_e,Fe,le.encoding);r.get(O).__hasExternalTextures||(ve===32879||ve===35866?i.texImage3D(ve,0,ue,O.width,O.height,O.depth,0,_e,Fe,null):i.texImage2D(ve,0,ue,O.width,O.height,0,_e,Fe,null)),i.bindFramebuffer(36160,k),Te(O)?h.framebufferTexture2DMultisampleEXT(36160,ge,ve,r.get(le).__webglTexture,0,Se(O)):e.framebufferTexture2D(36160,ge,ve,r.get(le).__webglTexture,0),i.bindFramebuffer(36160,null)}function fe(k,O,le){if(e.bindRenderbuffer(36161,k),O.depthBuffer&&!O.stencilBuffer){let ge=33189;if(le||Te(O)){let ve=O.depthTexture;ve&&ve.isDepthTexture&&(ve.type===el?ge=36012:ve.type===$o&&(ge=33190));let _e=Se(O);Te(O)?h.renderbufferStorageMultisampleEXT(36161,_e,ge,O.width,O.height):e.renderbufferStorageMultisample(36161,_e,ge,O.width,O.height)}else e.renderbufferStorage(36161,ge,O.width,O.height);e.framebufferRenderbuffer(36160,36096,36161,k)}else if(O.depthBuffer&&O.stencilBuffer){let ge=Se(O);le&&Te(O)===!1?e.renderbufferStorageMultisample(36161,ge,35056,O.width,O.height):Te(O)?h.renderbufferStorageMultisampleEXT(36161,ge,35056,O.width,O.height):e.renderbufferStorage(36161,34041,O.width,O.height),e.framebufferRenderbuffer(36160,33306,36161,k)}else{let ge=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let ve=0;ve<ge.length;ve++){let _e=ge[ve],Fe=s.convert(_e.format,_e.encoding),ue=s.convert(_e.type),He=S(_e.internalFormat,Fe,ue,_e.encoding),xe=Se(O);le&&Te(O)===!1?e.renderbufferStorageMultisample(36161,xe,He,O.width,O.height):Te(O)?h.renderbufferStorageMultisampleEXT(36161,xe,He,O.width,O.height):e.renderbufferStorage(36161,He,O.width,O.height)}}e.bindRenderbuffer(36161,null)}function te(k,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,k),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),D(O.depthTexture,0);let le=r.get(O.depthTexture).__webglTexture,ge=Se(O);if(O.depthTexture.format===Su)Te(O)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,ge):e.framebufferTexture2D(36160,36096,3553,le,0);else if(O.depthTexture.format===Uu)Te(O)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,ge):e.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function ae(k){let O=r.get(k),le=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!O.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");te(O.__webglFramebuffer,k)}else if(le){O.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)i.bindFramebuffer(36160,O.__webglFramebuffer[ge]),O.__webglDepthbuffer[ge]=e.createRenderbuffer(),fe(O.__webglDepthbuffer[ge],k,!1)}else i.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=e.createRenderbuffer(),fe(O.__webglDepthbuffer,k,!1);i.bindFramebuffer(36160,null)}function pe(k,O,le){let ge=r.get(k);O!==void 0&&K(ge.__webglFramebuffer,k,k.texture,36064,3553),le!==void 0&&ae(k)}function me(k){let O=k.texture,le=r.get(k),ge=r.get(O);k.addEventListener("dispose",L),k.isWebGLMultipleRenderTargets!==!0&&(ge.__webglTexture===void 0&&(ge.__webglTexture=e.createTexture()),ge.__version=O.version,a.memory.textures++);let ve=k.isWebGLCubeRenderTarget===!0,_e=k.isWebGLMultipleRenderTargets===!0,Fe=w(k)||o;if(ve){le.__webglFramebuffer=[];for(let ue=0;ue<6;ue++)le.__webglFramebuffer[ue]=e.createFramebuffer()}else{if(le.__webglFramebuffer=e.createFramebuffer(),_e)if(n.drawBuffers){let ue=k.texture;for(let He=0,xe=ue.length;He<xe;He++){let Me=r.get(ue[He]);Me.__webglTexture===void 0&&(Me.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&k.samples>0&&Te(k)===!1){let ue=_e?O:[O];le.__webglMultisampledFramebuffer=e.createFramebuffer(),le.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let He=0;He<ue.length;He++){let xe=ue[He];le.__webglColorRenderbuffer[He]=e.createRenderbuffer(),e.bindRenderbuffer(36161,le.__webglColorRenderbuffer[He]);let Me=s.convert(xe.format,xe.encoding),G=s.convert(xe.type),Ae=S(xe.internalFormat,Me,G,xe.encoding),be=Se(k);e.renderbufferStorageMultisample(36161,be,Ae,k.width,k.height),e.framebufferRenderbuffer(36160,36064+He,36161,le.__webglColorRenderbuffer[He])}e.bindRenderbuffer(36161,null),k.depthBuffer&&(le.__webglDepthRenderbuffer=e.createRenderbuffer(),fe(le.__webglDepthRenderbuffer,k,!0)),i.bindFramebuffer(36160,null)}}if(ve){i.bindTexture(34067,ge.__webglTexture),U(34067,O,Fe);for(let ue=0;ue<6;ue++)K(le.__webglFramebuffer[ue],k,O,36064,34069+ue);b(O,Fe)&&A(34067),i.unbindTexture()}else if(_e){let ue=k.texture;for(let He=0,xe=ue.length;He<xe;He++){let Me=ue[He],G=r.get(Me);i.bindTexture(3553,G.__webglTexture),U(3553,Me,Fe),K(le.__webglFramebuffer,k,Me,36064+He,3553),b(Me,Fe)&&A(3553)}i.unbindTexture()}else{let ue=3553;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(o?ue=k.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(ue,ge.__webglTexture),U(ue,O,Fe),K(le.__webglFramebuffer,k,O,36064,ue),b(O,Fe)&&A(ue),i.unbindTexture()}k.depthBuffer&&ae(k)}function Ie(k){let O=w(k)||o,le=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let ge=0,ve=le.length;ge<ve;ge++){let _e=le[ge];if(b(_e,O)){let Fe=k.isWebGLCubeRenderTarget?34067:3553,ue=r.get(_e).__webglTexture;i.bindTexture(Fe,ue),A(Fe),i.unbindTexture()}}}function Y(k){if(o&&k.samples>0&&Te(k)===!1){let O=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],le=k.width,ge=k.height,ve=16384,_e=[],Fe=k.stencilBuffer?33306:36096,ue=r.get(k),He=k.isWebGLMultipleRenderTargets===!0;if(He)for(let xe=0;xe<O.length;xe++)i.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+xe,36161,null),i.bindFramebuffer(36160,ue.__webglFramebuffer),e.framebufferTexture2D(36009,36064+xe,3553,null,0);i.bindFramebuffer(36008,ue.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,ue.__webglFramebuffer);for(let xe=0;xe<O.length;xe++){_e.push(36064+xe),k.depthBuffer&&_e.push(Fe);let Me=ue.__ignoreDepthValues!==void 0?ue.__ignoreDepthValues:!1;if(Me===!1&&(k.depthBuffer&&(ve|=256),k.stencilBuffer&&(ve|=1024)),He&&e.framebufferRenderbuffer(36008,36064,36161,ue.__webglColorRenderbuffer[xe]),Me===!0&&(e.invalidateFramebuffer(36008,[Fe]),e.invalidateFramebuffer(36009,[Fe])),He){let G=r.get(O[xe]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,G,0)}e.blitFramebuffer(0,0,le,ge,0,0,le,ge,ve,9728),f&&e.invalidateFramebuffer(36008,_e)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),He)for(let xe=0;xe<O.length;xe++){i.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+xe,36161,ue.__webglColorRenderbuffer[xe]);let Me=r.get(O[xe]).__webglTexture;i.bindFramebuffer(36160,ue.__webglFramebuffer),e.framebufferTexture2D(36009,36064+xe,3553,Me,0)}i.bindFramebuffer(36009,ue.__webglMultisampledFramebuffer)}}function Se(k){return Math.min(c,k.samples)}function Te(k){let O=r.get(k);return o&&k.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function at(k){let O=a.render.frame;m.get(k)!==O&&(m.set(k,O),k.update())}function ct(k,O){let le=k.encoding,ge=k.format,ve=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||k.format===l_||le!==Aa&&(le===yt?o===!1?t.has("EXT_sRGB")===!0&&ge===oa?(k.format=l_,k.minFilter=Xt,k.generateMipmaps=!1):O=DR.sRGBToLinear(O):(ge!==oa||ve!==Dr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),O}this.allocateTextureUnit=P,this.resetTextureUnits=H,this.setTexture2D=D,this.setTexture2DArray=j,this.setTexture3D=B,this.setTextureCube=W,this.rebindTextures=pe,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=Y,this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=K,this.useMultisampledRTT=Te}function qG(e,t,i){let r=i.isWebGL2;function n(s,a=null){let o;if(s===Dr)return 5121;if(s===L5)return 32819;if(s===O5)return 32820;if(s===C5)return 5120;if(s===D5)return 5122;if(s===MR)return 5123;if(s===P5)return 5124;if(s===$o)return 5125;if(s===el)return 5126;if(s===np)return r?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===R5)return 6406;if(s===oa)return 6408;if(s===z5)return 6409;if(s===B5)return 6410;if(s===Su)return 6402;if(s===Uu)return 34041;if(s===k5)return 6403;if(s===I5)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===l_)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===N5)return 36244;if(s===F5)return 33319;if(s===U5)return 33320;if(s===H5)return 36249;if(s===s1||s===a1||s===o1||s===l1)if(a===yt)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===s1)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===a1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===o1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===l1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===s1)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===a1)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===o1)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===l1)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===cE||s===hE||s===dE||s===fE)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===cE)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===hE)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===dE)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===fE)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===V5)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===pE||s===mE)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(s===pE)return a===yt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===mE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===gE||s===vE||s===yE||s===xE||s===wE||s===_E||s===bE||s===SE||s===AE||s===ME||s===EE||s===TE||s===CE||s===DE)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(s===gE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===vE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===yE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===xE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===wE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===_E)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===bE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===SE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===AE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ME)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===EE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===TE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===CE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===DE)return a===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===PE)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(s===PE)return a===yt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===bu?r?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var QG=class extends _r{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Wd=class extends Yt{constructor(){super(),this.isGroup=!0,this.type="Group"}},ZG={type:"move"},z1=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let m of e.hand.values()){let p=t.getJointPose(m,i);if(l.joints[m.jointName]===void 0){let v=new Wd;v.matrixAutoUpdate=!1,v.visible=!1,l.joints[m.jointName]=v,l.add(v)}let g=l.joints[m.jointName];p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=p.radius),g.visible=p!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],c=u.position.distanceTo(d.position),h=.02,f=.005;l.inputState.pinching&&c>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&n!==null&&(r=n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ZG)))}return a!==null&&(a.visible=r!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}},tA=class extends Gr{constructor(e,t,i,r,n,s,a,o,l,u){if(u=u!==void 0?u:Su,u!==Su&&u!==Uu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Su&&(i=$o),i===void 0&&u===Uu&&(i=bu),super(null,r,n,s,a,o,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:mi,this.minFilter=o!==void 0?o:mi,this.flipY=!1,this.generateMipmaps=!1}},KG=class extends Kr{constructor(e,t){super();let i=this,r=null,n=1,s=null,a="local-floor",o=null,l=null,u=null,d=null,c=null,h=null,f=t.getContextAttributes(),m=null,p=null,g=[],v=[],y=new _r;y.layers.enable(1),y.viewport=new vt;let x=new _r;x.layers.enable(2),x.viewport=new vt;let w=[y,x],_=new QG;_.layers.enable(1),_.layers.enable(2);let b=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(P){let z=g[P];return z===void 0&&(z=new z1,g[P]=z),z.getTargetRaySpace()},this.getControllerGrip=function(P){let z=g[P];return z===void 0&&(z=new z1,g[P]=z),z.getGripSpace()},this.getHand=function(P){let z=g[P];return z===void 0&&(z=new z1,g[P]=z),z.getHandSpace()};function S(P){let z=v.indexOf(P.inputSource);if(z===-1)return;let D=g[z];D!==void 0&&D.dispatchEvent({type:P.type,data:P.inputSource})}function M(){r.removeEventListener("select",S),r.removeEventListener("selectstart",S),r.removeEventListener("selectend",S),r.removeEventListener("squeeze",S),r.removeEventListener("squeezestart",S),r.removeEventListener("squeezeend",S),r.removeEventListener("end",M),r.removeEventListener("inputsourceschange",E);for(let P=0;P<g.length;P++){let z=v[P];z!==null&&(v[P]=null,g[P].disconnect(z))}b=null,A=null,e.setRenderTarget(m),c=null,d=null,u=null,r=null,p=null,H.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(P){n=P,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(P){a=P,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||s},this.setReferenceSpace=function(P){o=P},this.getBaseLayer=function(){return d!==null?d:c},this.getBinding=function(){return u},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(P){if(r=P,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",S),r.addEventListener("selectstart",S),r.addEventListener("selectend",S),r.addEventListener("squeeze",S),r.addEventListener("squeezestart",S),r.addEventListener("squeezeend",S),r.addEventListener("end",M),r.addEventListener("inputsourceschange",E),f.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let z={antialias:r.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:n};c=new XRWebGLLayer(r,t,z),r.updateRenderState({baseLayer:c}),p=new Ei(c.framebufferWidth,c.framebufferHeight,{format:oa,type:Dr,encoding:e.outputEncoding})}else{let z=null,D=null,j=null;f.depth&&(j=f.stencil?35056:33190,z=f.stencil?Uu:Su,D=f.stencil?bu:$o);let B={colorFormat:32856,depthFormat:j,scaleFactor:n};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(B),r.updateRenderState({layers:[d]}),p=new Ei(d.textureWidth,d.textureHeight,{format:oa,type:Dr,depthTexture:new tA(d.textureWidth,d.textureHeight,D,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let W=e.properties.get(p);W.__ignoreDepthValues=d.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),o=null,s=await r.requestReferenceSpace(a),H.setContext(r),H.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function E(P){for(let z=0;z<P.removed.length;z++){let D=P.removed[z],j=v.indexOf(D);j>=0&&(v[j]=null,g[j].dispatchEvent({type:"disconnected",data:D}))}for(let z=0;z<P.added.length;z++){let D=P.added[z],j=v.indexOf(D);if(j===-1){for(let W=0;W<g.length;W++)if(W>=v.length){v.push(D),j=W;break}else if(v[W]===null){v[W]=D,j=W;break}if(j===-1)break}let B=g[j];B&&B.dispatchEvent({type:"connected",data:D})}}let C=new T,L=new T;function N(P,z,D){C.setFromMatrixPosition(z.matrixWorld),L.setFromMatrixPosition(D.matrixWorld);let j=C.distanceTo(L),B=z.projectionMatrix.elements,W=D.projectionMatrix.elements,X=B[14]/(B[10]-1),$=B[14]/(B[10]+1),U=(B[9]+1)/B[5],ne=(B[9]-1)/B[5],ie=(B[8]-1)/B[0],re=(W[8]+1)/W[0],K=X*ie,fe=X*re,te=j/(-ie+re),ae=te*-ie;z.matrixWorld.decompose(P.position,P.quaternion,P.scale),P.translateX(ae),P.translateZ(te),P.matrixWorld.compose(P.position,P.quaternion,P.scale),P.matrixWorldInverse.copy(P.matrixWorld).invert();let pe=X+te,me=$+te,Ie=K-ae,Y=fe+(j-ae),Se=U*$/me*pe,Te=ne*$/me*pe;P.projectionMatrix.makePerspective(Ie,Y,Se,Te,pe,me)}function R(P,z){z===null?P.matrixWorld.copy(P.matrix):P.matrixWorld.multiplyMatrices(z.matrixWorld,P.matrix),P.matrixWorldInverse.copy(P.matrixWorld).invert()}this.updateCamera=function(P){if(r===null)return;_.near=x.near=y.near=P.near,_.far=x.far=y.far=P.far,(b!==_.near||A!==_.far)&&(r.updateRenderState({depthNear:_.near,depthFar:_.far}),b=_.near,A=_.far);let z=P.parent,D=_.cameras;R(_,z);for(let B=0;B<D.length;B++)R(D[B],z);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),P.position.copy(_.position),P.quaternion.copy(_.quaternion),P.scale.copy(_.scale),P.matrix.copy(_.matrix),P.matrixWorld.copy(_.matrixWorld);let j=P.children;for(let B=0,W=j.length;B<W;B++)j[B].updateMatrixWorld(!0);D.length===2?N(_,y,x):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(c!==null)return c.fixedFoveation},this.setFoveation=function(P){d!==null&&(d.fixedFoveation=P),c!==null&&c.fixedFoveation!==void 0&&(c.fixedFoveation=P)};let V=null;function F(P,z){if(l=z.getViewerPose(o||s),h=z,l!==null){let D=l.views;c!==null&&(e.setRenderTargetFramebuffer(p,c.framebuffer),e.setRenderTarget(p));let j=!1;D.length!==_.cameras.length&&(_.cameras.length=0,j=!0);for(let B=0;B<D.length;B++){let W=D[B],X=null;if(c!==null)X=c.getViewport(W);else{let U=u.getViewSubImage(d,W);X=U.viewport,B===0&&(e.setRenderTargetTextures(p,U.colorTexture,d.ignoreDepthValues?void 0:U.depthStencilTexture),e.setRenderTarget(p))}let $=w[B];$===void 0&&($=new _r,$.layers.enable(B),$.viewport=new vt,w[B]=$),$.matrix.fromArray(W.transform.matrix),$.projectionMatrix.fromArray(W.projectionMatrix),$.viewport.set(X.x,X.y,X.width,X.height),B===0&&_.matrix.copy($.matrix),j===!0&&_.cameras.push($)}}for(let D=0;D<g.length;D++){let j=v[D],B=g[D];j!==null&&B!==void 0&&B.update(j,z,o||s)}V&&V(P,z),h=null}let H=new RR;H.setAnimationLoop(F),this.setAnimationLoop=function(P){V=P},this.dispose=function(){}}};function JG(e,t){function i(p,g){p.fogColor.value.copy(g.color),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)}function r(p,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(p,g):g.isMeshToonMaterial?(n(p,g),d(p,g)):g.isMeshPhongMaterial?(n(p,g),u(p,g)):g.isMeshStandardMaterial?(n(p,g),c(p,g),g.isMeshPhysicalMaterial&&h(p,g,x)):g.isMeshMatcapMaterial?(n(p,g),f(p,g)):g.isMeshDepthMaterial?n(p,g):g.isMeshDistanceMaterial?(n(p,g),m(p,g)):g.isMeshNormalMaterial?n(p,g):g.isLineBasicMaterial?(s(p,g),g.isLineDashedMaterial&&a(p,g)):g.isPointsMaterial?o(p,g,v,y):g.isSpriteMaterial?l(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,g.side===or&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),g.side===or&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;let w=e.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*w}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uv2Transform.value.copy(x.matrix))}function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}function a(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}function o(p,g,v,y){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=y*.5,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uvTransform.value.copy(x.matrix))}function l(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}function u(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}function d(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}function c(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}function h(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===or&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function $G(){let e=Hv("canvas");return e.style.display="block",e}function UR(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:$G(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,d;i!==null?d=i.getContextAttributes().alpha:d=e.alpha!==void 0?e.alpha:!1;let c=null,h=null,f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Aa,this.physicallyCorrectLights=!1,this.toneMapping=so,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});let p=this,g=!1,v=0,y=0,x=null,w=-1,_=null,b=new vt,A=new vt,S=null,M=t.width,E=t.height,C=1,L=null,N=null,R=new vt(0,0,M,E),V=new vt(0,0,M,E),F=!1,H=new JS,P=!1,z=!1,D=null,j=new Ke,B=new q,W=new T,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return x===null?C:1}let U=i;function ne(I,Z){for(let oe=0;oe<I.length;oe++){let J=I[oe],ce=t.getContext(J,Z);if(ce!==null)return ce}return null}try{let I={alpha:!0,depth:r,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ep}`),t.addEventListener("webglcontextlost",G,!1),t.addEventListener("webglcontextrestored",Ae,!1),t.addEventListener("webglcontextcreationerror",be,!1),U===null){let Z=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Z.shift(),U=ne(Z,I),U===null)throw ne(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}U.getShaderPrecisionFormat===void 0&&(U.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let ie,re,K,fe,te,ae,pe,me,Ie,Y,Se,Te,at,ct,k,O,le,ge,ve,_e,Fe,ue,He;function xe(){ie=new dj(U),re=new aj(U,ie,e),ie.init(re),ue=new qG(U,ie,re),K=new XG(U,ie,re),fe=new mj,te=new RG,ae=new YG(U,ie,K,te,re,ue,fe),pe=new lj(p),me=new hj(p),Ie=new TH(U,re),He=new nj(U,ie,Ie,re),Y=new fj(U,Ie,fe,He),Se=new xj(U,Y,Ie,fe),ve=new yj(U,re,ae),O=new oj(te),Te=new OG(p,pe,me,ie,re,He,O),at=new JG(p,te),ct=new zG,k=new HG(ie,re),ge=new rj(p,pe,K,Se,d,a),le=new WG(p,Se,re),_e=new sj(U,ie,fe,re),Fe=new pj(U,ie,fe,re),fe.programs=Te.programs,p.capabilities=re,p.extensions=ie,p.properties=te,p.renderLists=ct,p.shadowMap=le,p.state=K,p.info=fe}xe();let Me=new KG(p,U);this.xr=Me,this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){let I=ie.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){let I=ie.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(I){I!==void 0&&(C=I,this.setSize(M,E,!1))},this.getSize=function(I){return I.set(M,E)},this.setSize=function(I,Z,oe){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=I,E=Z,t.width=Math.floor(I*C),t.height=Math.floor(Z*C),oe!==!1&&(t.style.width=I+"px",t.style.height=Z+"px"),this.setViewport(0,0,I,Z)},this.getDrawingBufferSize=function(I){return I.set(M*C,E*C).floor()},this.setDrawingBufferSize=function(I,Z,oe){M=I,E=Z,C=oe,t.width=Math.floor(I*oe),t.height=Math.floor(Z*oe),this.setViewport(0,0,I,Z)},this.getCurrentViewport=function(I){return I.copy(b)},this.getViewport=function(I){return I.copy(R)},this.setViewport=function(I,Z,oe,J){I.isVector4?R.set(I.x,I.y,I.z,I.w):R.set(I,Z,oe,J),K.viewport(b.copy(R).multiplyScalar(C).floor())},this.getScissor=function(I){return I.copy(V)},this.setScissor=function(I,Z,oe,J){I.isVector4?V.set(I.x,I.y,I.z,I.w):V.set(I,Z,oe,J),K.scissor(A.copy(V).multiplyScalar(C).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(I){K.setScissorTest(F=I)},this.setOpaqueSort=function(I){L=I},this.setTransparentSort=function(I){N=I},this.getClearColor=function(I){return I.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(I=!0,Z=!0,oe=!0){let J=0;I&&(J|=16384),Z&&(J|=256),oe&&(J|=1024),U.clear(J)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",G,!1),t.removeEventListener("webglcontextrestored",Ae,!1),t.removeEventListener("webglcontextcreationerror",be,!1),ct.dispose(),k.dispose(),te.dispose(),pe.dispose(),me.dispose(),Se.dispose(),He.dispose(),Te.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Oe),Me.removeEventListener("sessionend",Ce),D&&(D.dispose(),D=null),je.stop()};function G(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let I=fe.autoReset,Z=le.enabled,oe=le.autoUpdate,J=le.needsUpdate,ce=le.type;xe(),fe.autoReset=I,le.enabled=Z,le.autoUpdate=oe,le.needsUpdate=J,le.type=ce}function be(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function Re(I){let Z=I.target;Z.removeEventListener("dispose",Re),ze(Z)}function ze(I){Qe(I),te.remove(I)}function Qe(I){let Z=te.get(I).programs;Z!==void 0&&(Z.forEach(function(oe){Te.releaseProgram(oe)}),I.isShaderMaterial&&Te.releaseShaderCache(I))}this.renderBufferDirect=function(I,Z,oe,J,ce,Ue){Z===null&&(Z=X);let Ye=ce.isMesh&&ce.matrixWorld.determinant()<0,qe=Xe(I,Z,oe,J,ce);K.setMaterial(J,Ye);let rt=oe.index,Ut=oe.attributes.position;if(rt===null){if(Ut===void 0||Ut.count===0)return}else if(rt.count===0)return;let pt=1;J.wireframe===!0&&(rt=Y.getWireframeAttribute(oe),pt=2),He.setup(ce,J,qe,oe,rt);let st,_t=_e;rt!==null&&(st=Ie.get(rt),_t=Fe,_t.setIndex(st));let tr=rt!==null?rt.count:Ut.count,Fs=oe.drawRange.start*pt,Oa=oe.drawRange.count*pt,dr=Ue!==null?Ue.start*pt:0,zt=Ue!==null?Ue.count*pt:1/0,$u=Math.max(Fs,dr),rd=Math.min(tr,Fs+Oa,dr+zt)-1,Us=Math.max(0,rd-$u+1);if(Us!==0){if(ce.isMesh)J.wireframe===!0?(K.setLineWidth(J.wireframeLinewidth*$()),_t.setMode(1)):_t.setMode(4);else if(ce.isLine){let bo=J.linewidth;bo===void 0&&(bo=1),K.setLineWidth(bo*$()),ce.isLineSegments?_t.setMode(1):ce.isLineLoop?_t.setMode(2):_t.setMode(3)}else ce.isPoints?_t.setMode(0):ce.isSprite&&_t.setMode(4);if(ce.isInstancedMesh)_t.renderInstances($u,Us,ce.count);else if(oe.isInstancedBufferGeometry){let bo=Math.min(oe.instanceCount,oe._maxInstanceCount);_t.renderInstances($u,Us,bo)}else _t.render($u,Us)}},this.compile=function(I,Z){h=k.get(I),h.init(),m.push(h),I.traverseVisible(function(oe){oe.isLight&&oe.layers.test(Z.layers)&&(h.pushLight(oe),oe.castShadow&&h.pushShadow(oe))}),h.setupLights(p.physicallyCorrectLights),I.traverse(function(oe){let J=oe.material;if(J)if(Array.isArray(J))for(let ce=0;ce<J.length;ce++){let Ue=J[ce];Ee(Ue,I,oe)}else Ee(J,I,oe)}),m.pop(),h=null};let ye=null;function Ne(I){ye&&ye(I)}function Oe(){je.stop()}function Ce(){je.start()}let je=new RR;je.setAnimationLoop(Ne),typeof self<"u"&&je.setContext(self),this.setAnimationLoop=function(I){ye=I,Me.setAnimationLoop(I),I===null?je.stop():je.start()},Me.addEventListener("sessionstart",Oe),Me.addEventListener("sessionend",Ce),this.render=function(I,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;I.autoUpdate===!0&&I.updateMatrixWorld(),Z.parent===null&&Z.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(Z),Z=Me.getCamera()),I.isScene===!0&&I.onBeforeRender(p,I,Z,x),h=k.get(I,m.length),h.init(),m.push(h),j.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),H.setFromProjectionMatrix(j),z=this.localClippingEnabled,P=O.init(this.clippingPlanes,z,Z),c=ct.get(I,f.length),c.init(),f.push(c),tt(I,Z,0,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(L,N),P===!0&&O.beginShadows();let oe=h.state.shadowsArray;if(le.render(oe,I,Z),P===!0&&O.endShadows(),this.info.autoReset===!0&&this.info.reset(),ge.render(c,I),h.setupLights(p.physicallyCorrectLights),Z.isArrayCamera){let J=Z.cameras;for(let ce=0,Ue=J.length;ce<Ue;ce++){let Ye=J[ce];wt(c,I,Ye,Ye.viewport)}}else wt(c,I,Z);x!==null&&(ae.updateMultisampleRenderTarget(x),ae.updateRenderTargetMipmap(x)),I.isScene===!0&&I.onAfterRender(p,I,Z),He.resetDefaultState(),w=-1,_=null,m.pop(),m.length>0?h=m[m.length-1]:h=null,f.pop(),f.length>0?c=f[f.length-1]:c=null};function tt(I,Z,oe,J){if(I.visible===!1)return;if(I.layers.test(Z.layers)){if(I.isGroup)oe=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Z);else if(I.isLight)h.pushLight(I),I.castShadow&&h.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||H.intersectsSprite(I)){J&&W.setFromMatrixPosition(I.matrixWorld).applyMatrix4(j);let Ue=Se.update(I),Ye=I.material;Ye.visible&&c.push(I,Ue,Ye,oe,W.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(I.isSkinnedMesh&&I.skeleton.frame!==fe.render.frame&&(I.skeleton.update(),I.skeleton.frame=fe.render.frame),!I.frustumCulled||H.intersectsObject(I))){J&&W.setFromMatrixPosition(I.matrixWorld).applyMatrix4(j);let Ue=Se.update(I),Ye=I.material;if(Array.isArray(Ye)){let qe=Ue.groups;for(let rt=0,Ut=qe.length;rt<Ut;rt++){let pt=qe[rt],st=Ye[pt.materialIndex];st&&st.visible&&c.push(I,Ue,st,oe,W.z,pt)}}else Ye.visible&&c.push(I,Ue,Ye,oe,W.z,null)}}let ce=I.children;for(let Ue=0,Ye=ce.length;Ue<Ye;Ue++)tt(ce[Ue],Z,oe,J)}function wt(I,Z,oe,J){let ce=I.opaque,Ue=I.transmissive,Ye=I.transparent;h.setupLightsView(oe),Ue.length>0&&Nt(ce,Z,oe),J&&K.viewport(b.copy(J)),ce.length>0&&We(ce,Z,oe),Ue.length>0&&We(Ue,Z,oe),Ye.length>0&&We(Ye,Z,oe),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Nt(I,Z,oe){let J=re.isWebGL2;D===null&&(D=new Ei(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?np:Dr,minFilter:Cp,samples:J&&s===!0?4:0})),p.getDrawingBufferSize(B),J?D.setSize(B.x,B.y):D.setSize(Uv(B.x),Uv(B.y));let ce=p.getRenderTarget();p.setRenderTarget(D),p.clear();let Ue=p.toneMapping;p.toneMapping=so,We(I,Z,oe),p.toneMapping=Ue,ae.updateMultisampleRenderTarget(D),ae.updateRenderTargetMipmap(D),p.setRenderTarget(ce)}function We(I,Z,oe){let J=Z.isScene===!0?Z.overrideMaterial:null;for(let ce=0,Ue=I.length;ce<Ue;ce++){let Ye=I[ce],qe=Ye.object,rt=Ye.geometry,Ut=J===null?Ye.material:J,pt=Ye.group;qe.layers.test(oe.layers)&&he(qe,Z,oe,rt,Ut,pt)}}function he(I,Z,oe,J,ce,Ue){I.onBeforeRender(p,Z,oe,J,ce,Ue),I.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),ce.onBeforeRender(p,Z,oe,J,I,Ue),ce.transparent===!0&&ce.side===Ur?(ce.side=or,ce.needsUpdate=!0,p.renderBufferDirect(oe,Z,J,ce,I,Ue),ce.side=go,ce.needsUpdate=!0,p.renderBufferDirect(oe,Z,J,ce,I,Ue),ce.side=Ur):p.renderBufferDirect(oe,Z,J,ce,I,Ue),I.onAfterRender(p,Z,oe,J,ce,Ue)}function Ee(I,Z,oe){Z.isScene!==!0&&(Z=X);let J=te.get(I),ce=h.state.lights,Ue=h.state.shadowsArray,Ye=ce.state.version,qe=Te.getParameters(I,ce.state,Ue,Z,oe),rt=Te.getProgramCacheKey(qe),Ut=J.programs;J.environment=I.isMeshStandardMaterial?Z.environment:null,J.fog=Z.fog,J.envMap=(I.isMeshStandardMaterial?me:pe).get(I.envMap||J.environment),Ut===void 0&&(I.addEventListener("dispose",Re),Ut=new Map,J.programs=Ut);let pt=Ut.get(rt);if(pt!==void 0){if(J.currentProgram===pt&&J.lightsStateVersion===Ye)return Pe(I,qe),pt}else qe.uniforms=Te.getUniforms(I),I.onBuild(oe,qe,p),I.onBeforeCompile(qe,p),pt=Te.acquireProgram(qe,rt),Ut.set(rt,pt),J.uniforms=qe.uniforms;let st=J.uniforms;(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(st.clippingPlanes=O.uniform),Pe(I,qe),J.needsLights=et(I),J.lightsStateVersion=Ye,J.needsLights&&(st.ambientLightColor.value=ce.state.ambient,st.lightProbe.value=ce.state.probe,st.directionalLights.value=ce.state.directional,st.directionalLightShadows.value=ce.state.directionalShadow,st.spotLights.value=ce.state.spot,st.spotLightShadows.value=ce.state.spotShadow,st.rectAreaLights.value=ce.state.rectArea,st.ltc_1.value=ce.state.rectAreaLTC1,st.ltc_2.value=ce.state.rectAreaLTC2,st.pointLights.value=ce.state.point,st.pointLightShadows.value=ce.state.pointShadow,st.hemisphereLights.value=ce.state.hemi,st.directionalShadowMap.value=ce.state.directionalShadowMap,st.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,st.spotShadowMap.value=ce.state.spotShadowMap,st.spotShadowMatrix.value=ce.state.spotShadowMatrix,st.pointShadowMap.value=ce.state.pointShadowMap,st.pointShadowMatrix.value=ce.state.pointShadowMatrix);let _t=pt.getUniforms(),tr=qg.seqWithValue(_t.seq,st);return J.currentProgram=pt,J.uniformsList=tr,pt}function Pe(I,Z){let oe=te.get(I);oe.outputEncoding=Z.outputEncoding,oe.instancing=Z.instancing,oe.skinning=Z.skinning,oe.morphTargets=Z.morphTargets,oe.morphNormals=Z.morphNormals,oe.morphColors=Z.morphColors,oe.morphTargetsCount=Z.morphTargetsCount,oe.numClippingPlanes=Z.numClippingPlanes,oe.numIntersection=Z.numClipIntersection,oe.vertexAlphas=Z.vertexAlphas,oe.vertexTangents=Z.vertexTangents,oe.toneMapping=Z.toneMapping}function Xe(I,Z,oe,J,ce){Z.isScene!==!0&&(Z=X),ae.resetTextureUnits();let Ue=Z.fog,Ye=J.isMeshStandardMaterial?Z.environment:null,qe=x===null?p.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Aa,rt=(J.isMeshStandardMaterial?me:pe).get(J.envMap||Ye),Ut=J.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pt=!!J.normalMap&&!!oe.attributes.tangent,st=!!oe.morphAttributes.position,_t=!!oe.morphAttributes.normal,tr=!!oe.morphAttributes.color,Fs=J.toneMapped?p.toneMapping:so,Oa=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,dr=Oa!==void 0?Oa.length:0,zt=te.get(J),$u=h.state.lights;if(P===!0&&(z===!0||I!==_)){let Hs=I===_&&J.id===w;O.setState(J,I,Hs)}let rd=!1;J.version===zt.__version?(zt.needsLights&&zt.lightsStateVersion!==$u.state.version||zt.outputEncoding!==qe||ce.isInstancedMesh&&zt.instancing===!1||!ce.isInstancedMesh&&zt.instancing===!0||ce.isSkinnedMesh&&zt.skinning===!1||!ce.isSkinnedMesh&&zt.skinning===!0||zt.envMap!==rt||J.fog===!0&&zt.fog!==Ue||zt.numClippingPlanes!==void 0&&(zt.numClippingPlanes!==O.numPlanes||zt.numIntersection!==O.numIntersection)||zt.vertexAlphas!==Ut||zt.vertexTangents!==pt||zt.morphTargets!==st||zt.morphNormals!==_t||zt.morphColors!==tr||zt.toneMapping!==Fs||re.isWebGL2===!0&&zt.morphTargetsCount!==dr)&&(rd=!0):(rd=!0,zt.__version=J.version);let Us=zt.currentProgram;rd===!0&&(Us=Ee(J,Z,ce));let bo=!1,nd=!1,gy=!1,Pr=Us.getUniforms(),sd=zt.uniforms;if(K.useProgram(Us.program)&&(bo=!0,nd=!0,gy=!0),J.id!==w&&(w=J.id,nd=!0),bo||_!==I){if(Pr.setValue(U,"projectionMatrix",I.projectionMatrix),re.logarithmicDepthBuffer&&Pr.setValue(U,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),_!==I&&(_=I,nd=!0,gy=!0),J.isShaderMaterial||J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshStandardMaterial||J.envMap){let Hs=Pr.map.cameraPosition;Hs!==void 0&&Hs.setValue(U,W.setFromMatrixPosition(I.matrixWorld))}(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&Pr.setValue(U,"isOrthographic",I.isOrthographicCamera===!0),(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial||J.isShadowMaterial||ce.isSkinnedMesh)&&Pr.setValue(U,"viewMatrix",I.matrixWorldInverse)}if(ce.isSkinnedMesh){Pr.setOptional(U,ce,"bindMatrix"),Pr.setOptional(U,ce,"bindMatrixInverse");let Hs=ce.skeleton;Hs&&(re.floatVertexTextures?(Hs.boneTexture===null&&Hs.computeBoneTexture(),Pr.setValue(U,"boneTexture",Hs.boneTexture,ae),Pr.setValue(U,"boneTextureSize",Hs.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let vy=oe.morphAttributes;return(vy.position!==void 0||vy.normal!==void 0||vy.color!==void 0&&re.isWebGL2===!0)&&ve.update(ce,oe,J,Us),(nd||zt.receiveShadow!==ce.receiveShadow)&&(zt.receiveShadow=ce.receiveShadow,Pr.setValue(U,"receiveShadow",ce.receiveShadow)),nd&&(Pr.setValue(U,"toneMappingExposure",p.toneMappingExposure),zt.needsLights&&Lt(sd,gy),Ue&&J.fog===!0&&at.refreshFogUniforms(sd,Ue),at.refreshMaterialUniforms(sd,J,C,E,D),qg.upload(U,zt.uniformsList,sd,ae)),J.isShaderMaterial&&J.uniformsNeedUpdate===!0&&(qg.upload(U,zt.uniformsList,sd,ae),J.uniformsNeedUpdate=!1),J.isSpriteMaterial&&Pr.setValue(U,"center",ce.center),Pr.setValue(U,"modelViewMatrix",ce.modelViewMatrix),Pr.setValue(U,"normalMatrix",ce.normalMatrix),Pr.setValue(U,"modelMatrix",ce.matrixWorld),Us}function Lt(I,Z){I.ambientLightColor.needsUpdate=Z,I.lightProbe.needsUpdate=Z,I.directionalLights.needsUpdate=Z,I.directionalLightShadows.needsUpdate=Z,I.pointLights.needsUpdate=Z,I.pointLightShadows.needsUpdate=Z,I.spotLights.needsUpdate=Z,I.spotLightShadows.needsUpdate=Z,I.rectAreaLights.needsUpdate=Z,I.hemisphereLights.needsUpdate=Z}function et(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(I,Z,oe){te.get(I.texture).__webglTexture=Z,te.get(I.depthTexture).__webglTexture=oe;let J=te.get(I);J.__hasExternalTextures=!0,J.__hasExternalTextures&&(J.__autoAllocateDepthBuffer=oe===void 0,J.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),J.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,Z){let oe=te.get(I);oe.__webglFramebuffer=Z,oe.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(I,Z=0,oe=0){x=I,v=Z,y=oe;let J=!0;if(I){let qe=te.get(I);qe.__useDefaultFramebuffer!==void 0?(K.bindFramebuffer(36160,null),J=!1):qe.__webglFramebuffer===void 0?ae.setupRenderTarget(I):qe.__hasExternalTextures&&ae.rebindTextures(I,te.get(I.texture).__webglTexture,te.get(I.depthTexture).__webglTexture)}let ce=null,Ue=!1,Ye=!1;if(I){let qe=I.texture;(qe.isData3DTexture||qe.isDataArrayTexture)&&(Ye=!0);let rt=te.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(ce=rt[Z],Ue=!0):re.isWebGL2&&I.samples>0&&ae.useMultisampledRTT(I)===!1?ce=te.get(I).__webglMultisampledFramebuffer:ce=rt,b.copy(I.viewport),A.copy(I.scissor),S=I.scissorTest}else b.copy(R).multiplyScalar(C).floor(),A.copy(V).multiplyScalar(C).floor(),S=F;if(K.bindFramebuffer(36160,ce)&&re.drawBuffers&&J&&K.drawBuffers(I,ce),K.viewport(b),K.scissor(A),K.setScissorTest(S),Ue){let qe=te.get(I.texture);U.framebufferTexture2D(36160,36064,34069+Z,qe.__webglTexture,oe)}else if(Ye){let qe=te.get(I.texture),rt=Z||0;U.framebufferTextureLayer(36160,36064,qe.__webglTexture,oe||0,rt)}w=-1},this.readRenderTargetPixels=function(I,Z,oe,J,ce,Ue,Ye){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qe=te.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&Ye!==void 0&&(qe=qe[Ye]),qe){K.bindFramebuffer(36160,qe);try{let rt=I.texture,Ut=rt.format,pt=rt.type;if(Ut!==oa&&ue.convert(Ut)!==U.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let st=pt===np&&(ie.has("EXT_color_buffer_half_float")||re.isWebGL2&&ie.has("EXT_color_buffer_float"));if(pt!==Dr&&ue.convert(pt)!==U.getParameter(35738)&&!(pt===el&&(re.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!st){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=I.width-J&&oe>=0&&oe<=I.height-ce&&U.readPixels(Z,oe,J,ce,ue.convert(Ut),ue.convert(pt),Ue)}finally{let rt=x!==null?te.get(x).__webglFramebuffer:null;K.bindFramebuffer(36160,rt)}}},this.copyFramebufferToTexture=function(I,Z,oe=0){let J=Math.pow(2,-oe),ce=Math.floor(Z.image.width*J),Ue=Math.floor(Z.image.height*J);ae.setTexture2D(Z,0),U.copyTexSubImage2D(3553,oe,0,0,I.x,I.y,ce,Ue),K.unbindTexture()},this.copyTextureToTexture=function(I,Z,oe,J=0){let ce=Z.image.width,Ue=Z.image.height,Ye=ue.convert(oe.format),qe=ue.convert(oe.type);ae.setTexture2D(oe,0),U.pixelStorei(37440,oe.flipY),U.pixelStorei(37441,oe.premultiplyAlpha),U.pixelStorei(3317,oe.unpackAlignment),Z.isDataTexture?U.texSubImage2D(3553,J,I.x,I.y,ce,Ue,Ye,qe,Z.image.data):Z.isCompressedTexture?U.compressedTexSubImage2D(3553,J,I.x,I.y,Z.mipmaps[0].width,Z.mipmaps[0].height,Ye,Z.mipmaps[0].data):U.texSubImage2D(3553,J,I.x,I.y,Ye,qe,Z.image),J===0&&oe.generateMipmaps&&U.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(I,Z,oe,J,ce=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ue=I.max.x-I.min.x+1,Ye=I.max.y-I.min.y+1,qe=I.max.z-I.min.z+1,rt=ue.convert(J.format),Ut=ue.convert(J.type),pt;if(J.isData3DTexture)ae.setTexture3D(J,0),pt=32879;else if(J.isDataArrayTexture)ae.setTexture2DArray(J,0),pt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}U.pixelStorei(37440,J.flipY),U.pixelStorei(37441,J.premultiplyAlpha),U.pixelStorei(3317,J.unpackAlignment);let st=U.getParameter(3314),_t=U.getParameter(32878),tr=U.getParameter(3316),Fs=U.getParameter(3315),Oa=U.getParameter(32877),dr=oe.isCompressedTexture?oe.mipmaps[0]:oe.image;U.pixelStorei(3314,dr.width),U.pixelStorei(32878,dr.height),U.pixelStorei(3316,I.min.x),U.pixelStorei(3315,I.min.y),U.pixelStorei(32877,I.min.z),oe.isDataTexture||oe.isData3DTexture?U.texSubImage3D(pt,ce,Z.x,Z.y,Z.z,Ue,Ye,qe,rt,Ut,dr.data):oe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),U.compressedTexSubImage3D(pt,ce,Z.x,Z.y,Z.z,Ue,Ye,qe,rt,dr.data)):U.texSubImage3D(pt,ce,Z.x,Z.y,Z.z,Ue,Ye,qe,rt,Ut,dr),U.pixelStorei(3314,st),U.pixelStorei(32878,_t),U.pixelStorei(3316,tr),U.pixelStorei(3315,Fs),U.pixelStorei(32877,Oa),ce===0&&J.generateMipmaps&&U.generateMipmap(pt),K.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?ae.setTextureCube(I,0):I.isData3DTexture?ae.setTexture3D(I,0):I.isDataArrayTexture?ae.setTexture2DArray(I,0):ae.setTexture2D(I,0),K.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,K.reset(),He.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var e8=class extends UR{};e8.prototype.isWebGL1Renderer=!0;var HR=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new dt(e),this.near=t,this.far=i}clone(){return new HR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Mu=class extends Yt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}},t8=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=o_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Or=new T,h_=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix4(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Or.fromBufferAttribute(this,t),Or.applyNormalMatrix(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Or.fromBufferAttribute(this,t),Or.transformDirection(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return new xt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new h_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},i8=class extends xt{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Bl=class extends Pp{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},dT=new T,fT=new T,pT=new Ke,B1=new Dp,Um=new ks,Vv=class extends Yt{constructor(e=new ft,t=new Bl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,n=t.count;r<n;r++)dT.fromBufferAttribute(t,r-1),fT.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=dT.distanceTo(fT);e.setAttribute("lineDistance",new ke(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,n=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Um.copy(i.boundingSphere),Um.applyMatrix4(r),Um.radius+=n,e.ray.intersectsSphere(Um)===!1)return;pT.copy(r).invert(),B1.copy(e.ray).applyMatrix4(pT);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new T,u=new T,d=new T,c=new T,h=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){let p=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=p,y=g-1;v<y;v+=h){let x=f.getX(v),w=f.getX(v+1);if(l.fromBufferAttribute(m,x),u.fromBufferAttribute(m,w),B1.distanceSqToSegment(l,u,c,d)>o)continue;c.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let p=Math.max(0,s.start),g=Math.min(m.count,s.start+s.count);for(let v=p,y=g-1;v<y;v+=h){if(l.fromBufferAttribute(m,v),u.fromBufferAttribute(m,v+1),B1.distanceSqToSegment(l,u,c,d)>o)continue;c.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(c);x<e.near||x>e.far||t.push({distance:x,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}},mT=new T,gT=new T,Lp=class extends Vv{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,n=t.count;r<n;r+=2)mT.fromBufferAttribute(t,r),gT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+mT.distanceTo(gT);e.setAttribute("lineDistance",new ke(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Da=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),n+=i.distanceTo(r),t.push(n),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,n=i.length,s;t?s=t:s=e*i[n-1];let a=0,o=n-1,l;for(;a<=o;)if(r=Math.floor(a+(o-a)/2),l=i[r]-s,l<0)a=r+1;else if(l>0)o=r-1;else{o=r;break}if(r=o,i[r]===s)return r/(n-1);let u=i[r],d=i[r+1]-u,c=(s-u)/d;return(r+c)/(n-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let n=this.getPoint(i),s=this.getPoint(r),a=t||(n.isVector2?new q:new T);return a.copy(s).sub(n).normalize(),a}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new T,r=[],n=[],s=[],a=new T,o=new Ke;for(let h=0;h<=e;h++){let f=h/e;r[h]=this.getTangentAt(f,new T)}n[0]=new T,s[0]=new T;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),d=Math.abs(r[0].y),c=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),c<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],a),s[0].crossVectors(r[0],n[0]);for(let h=1;h<=e;h++){if(n[h]=n[h-1].clone(),s[h]=s[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();let f=Math.acos(Hi(r[h-1].dot(r[h]),-1,1));n[h].applyMatrix4(o.makeRotationAxis(a,f))}s[h].crossVectors(r[h],n[h])}if(t===!0){let h=Math.acos(Hi(n[0].dot(n[e]),-1,1));h/=e,r[0].dot(a.crossVectors(n[0],n[e]))>0&&(h=-h);for(let f=1;f<=e;f++)n[f].applyMatrix4(o.makeRotationAxis(r[f],h*f)),s[f].crossVectors(r[f],n[f])}return{tangents:r,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},U0=class extends Da{constructor(e=0,t=0,i=1,r=1,n=0,s=Math.PI*2,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let i=t||new q,r=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(s?n=0:n=r),this.aClockwise===!0&&!s&&(n===r?n=-r:n=n-r);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),c=o-this.aX,h=l-this.aY;o=c*u-h*d+this.aX,l=c*d+h*u+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},r8=class extends U0{constructor(e,t,i,r,n,s){super(e,t,i,i,r,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function iA(){let e=0,t=0,i=0,r=0;function n(s,a,o,l){e=s,t=o,i=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){n(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,d,c){let h=(a-s)/u-(o-s)/(u+d)+(o-a)/d,f=(o-a)/d-(l-a)/(d+c)+(l-o)/c;h*=d,f*=d,n(a,o,h,f)},calc:function(s){let a=s*s,o=a*s;return e+t*s+i*a+r*o}}}var Hm=new T,k1=new iA,N1=new iA,F1=new iA,n8=class extends Da{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new T){let i=t,r=this.points,n=r.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,u;this.closed||a>0?l=r[(a-1)%n]:(Hm.subVectors(r[0],r[1]).add(r[0]),l=Hm);let d=r[a%n],c=r[(a+1)%n];if(this.closed||a+2<n?u=r[(a+2)%n]:(Hm.subVectors(r[n-1],r[n-2]).add(r[n-1]),u=Hm),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(u),h);m<1e-4&&(m=1),f<1e-4&&(f=m),p<1e-4&&(p=m),k1.initNonuniformCatmullRom(l.x,d.x,c.x,u.x,f,m,p),N1.initNonuniformCatmullRom(l.y,d.y,c.y,u.y,f,m,p),F1.initNonuniformCatmullRom(l.z,d.z,c.z,u.z,f,m,p)}else this.curveType==="catmullrom"&&(k1.initCatmullRom(l.x,d.x,c.x,u.x,this.tension),N1.initCatmullRom(l.y,d.y,c.y,u.y,this.tension),F1.initCatmullRom(l.z,d.z,c.z,u.z,this.tension));return i.set(k1.calc(o),N1.calc(o),F1.calc(o)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new T().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function vT(e,t,i,r,n){let s=(r-t)*.5,a=(n-i)*.5,o=e*e,l=e*o;return(2*i-2*r+s+a)*l+(-3*i+3*r-2*s-a)*o+s*e+i}function s8(e,t){let i=1-e;return i*i*t}function a8(e,t){return 2*(1-e)*e*t}function o8(e,t){return e*e*t}function Sf(e,t,i,r){return s8(e,t)+a8(e,i)+o8(e,r)}function l8(e,t){let i=1-e;return i*i*i*t}function u8(e,t){let i=1-e;return 3*i*i*e*t}function c8(e,t){return 3*(1-e)*e*e*t}function h8(e,t){return e*e*e*t}function Af(e,t,i,r,n){return l8(e,t)+u8(e,i)+c8(e,r)+h8(e,n)}var la=class extends Da{constructor(e=new q,t=new q,i=new q,r=new q){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new q){let i=t,r=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Af(e,r.x,n.x,s.x,a.x),Af(e,r.y,n.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},d8=class extends Da{constructor(e=new T,t=new T,i=new T,r=new T){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new T){let i=t,r=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Af(e,r.x,n.x,s.x,a.x),Af(e,r.y,n.y,s.y,a.y),Af(e,r.z,n.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},wa=class extends Da{constructor(e=new q,t=new q){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new q){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new q;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},VR=class extends Da{constructor(e=new T,t=new T){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new T){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Hu=class extends Da{constructor(e=new q,t=new q,i=new q){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new q){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Sf(e,r.x,n.x,s.x),Sf(e,r.y,n.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},f8=class extends Da{constructor(e=new T,t=new T,i=new T){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new T){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Sf(e,r.x,n.x,s.x),Sf(e,r.y,n.y,s.y),Sf(e,r.z,n.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},rA=class extends Da{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new q){let i=t,r=this.points,n=(r.length-1)*e,s=Math.floor(n),a=n-s,o=r[s===0?s:s-1],l=r[s],u=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(vT(a,o.x,l.x,u.x,d.x),vT(a,o.y,l.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new q().fromArray(r))}return this}},p8=Object.freeze({__proto__:null,ArcCurve:r8,CatmullRomCurve3:n8,CubicBezierCurve:la,CubicBezierCurve3:d8,EllipseCurve:U0,LineCurve:wa,LineCurve3:VR,QuadraticBezierCurve:Hu,QuadraticBezierCurve3:f8,SplineCurve:rA}),m8=class extends Da{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wa(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),n=0;for(;n<r.length;){if(r[n]>=i){let s=r[n]-i,a=this.curves[n],o=a.getLength(),l=o===0?0:1-s/o;return a.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,n=this.curves;r<n.length;r++){let s=n[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let u=o[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new p8[r.type]().fromJSON(r))}return this}},d_=class extends m8{constructor(e){super(),this.type="Path",this.currentPoint=new q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new wa(this.currentPoint.clone(),new q(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let n=new Hu(this.currentPoint.clone(),new q(e,t),new q(i,r));return this.curves.push(n),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,n,s){let a=new la(this.currentPoint.clone(),new q(e,t),new q(i,r),new q(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new rA(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,i,r,n,s),this}absarc(e,t,i,r,n,s){return this.absellipse(e,t,i,i,r,n,s),this}ellipse(e,t,i,r,n,s,a,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,n,s,a,o),this}absellipse(e,t,i,r,n,s,a,o){let l=new U0(e,t,i,r,n,s,a,o);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},jR=class extends ft{constructor(e=[new q(0,.5),new q(.5,0),new q(0,-.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Hi(r,0,Math.PI*2);let n=[],s=[],a=[],o=[],l=[],u=1/t,d=new T,c=new q,h=new T,f=new T,m=new T,p=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=g*1,h.y=-p,h.z=g*0,m.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(m.x,m.y,m.z);break;default:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=g*1,h.y=-p,h.z=g*0,f.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),o.push(h.x,h.y,h.z),m.copy(f)}for(let v=0;v<=t;v++){let y=i+v*u*r,x=Math.sin(y),w=Math.cos(y);for(let _=0;_<=e.length-1;_++){d.x=e[_].x*x,d.y=e[_].y,d.z=e[_].x*w,s.push(d.x,d.y,d.z),c.x=v/t,c.y=_/(e.length-1),a.push(c.x,c.y);let b=o[3*_+0]*x,A=o[3*_+1],S=o[3*_+0]*w;l.push(b,A,S)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let x=y+v*e.length,w=x,_=x+e.length,b=x+e.length+1,A=x+1;n.push(w,_,A),n.push(b,A,_)}this.setIndex(n),this.setAttribute("position",new ke(s,3)),this.setAttribute("uv",new ke(a,2)),this.setAttribute("normal",new ke(l,3))}static fromJSON(e){return new jR(e.points,e.segments,e.phiStart,e.phiLength)}},nA=class extends ft{constructor(e=1,t=1,i=1,r=8,n=1,s=!1,a=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;r=Math.floor(r),n=Math.floor(n);let u=[],d=[],c=[],h=[],f=0,m=[],p=i/2,g=0;v(),s===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new ke(d,3)),this.setAttribute("normal",new ke(c,3)),this.setAttribute("uv",new ke(h,2));function v(){let x=new T,w=new T,_=0,b=(t-e)/i;for(let A=0;A<=n;A++){let S=[],M=A/n,E=M*(t-e)+e;for(let C=0;C<=r;C++){let L=C/r,N=L*o+a,R=Math.sin(N),V=Math.cos(N);w.x=E*R,w.y=-M*i+p,w.z=E*V,d.push(w.x,w.y,w.z),x.set(R,b,V).normalize(),c.push(x.x,x.y,x.z),h.push(L,1-M),S.push(f++)}m.push(S)}for(let A=0;A<r;A++)for(let S=0;S<n;S++){let M=m[S][A],E=m[S+1][A],C=m[S+1][A+1],L=m[S][A+1];u.push(M,E,L),u.push(E,C,L),_+=6}l.addGroup(g,_,0),g+=_}function y(x){let w=f,_=new q,b=new T,A=0,S=x===!0?e:t,M=x===!0?1:-1;for(let C=1;C<=r;C++)d.push(0,p*M,0),c.push(0,M,0),h.push(.5,.5),f++;let E=f;for(let C=0;C<=r;C++){let L=C/r*o+a,N=Math.cos(L),R=Math.sin(L);b.x=S*R,b.y=p*M,b.z=S*N,d.push(b.x,b.y,b.z),c.push(0,M,0),_.x=N*.5+.5,_.y=R*.5*M+.5,h.push(_.x,_.y),f++}for(let C=0;C<r;C++){let L=w+C,N=E+C;x===!0?u.push(N,N+1,L):u.push(N+1,N,L),A+=3}l.addGroup(g,A,x===!0?1:2),g+=A}}static fromJSON(e){return new nA(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},GR=class extends nA{constructor(e=1,t=1,i=8,r=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,i,r,n,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new GR(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},sA=class extends ft{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let n=[],s=[];a(r),l(i),u(),this.setAttribute("position",new ke(n,3)),this.setAttribute("normal",new ke(n.slice(),3)),this.setAttribute("uv",new ke(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let y=new T,x=new T,w=new T;for(let _=0;_<t.length;_+=3)h(t[_+0],y),h(t[_+1],x),h(t[_+2],w),o(y,x,w,v)}function o(v,y,x,w){let _=w+1,b=[];for(let A=0;A<=_;A++){b[A]=[];let S=v.clone().lerp(x,A/_),M=y.clone().lerp(x,A/_),E=_-A;for(let C=0;C<=E;C++)C===0&&A===_?b[A][C]=S:b[A][C]=S.clone().lerp(M,C/E)}for(let A=0;A<_;A++)for(let S=0;S<2*(_-A)-1;S++){let M=Math.floor(S/2);S%2===0?(c(b[A][M+1]),c(b[A+1][M]),c(b[A][M])):(c(b[A][M+1]),c(b[A+1][M+1]),c(b[A+1][M]))}}function l(v){let y=new T;for(let x=0;x<n.length;x+=3)y.x=n[x+0],y.y=n[x+1],y.z=n[x+2],y.normalize().multiplyScalar(v),n[x+0]=y.x,n[x+1]=y.y,n[x+2]=y.z}function u(){let v=new T;for(let y=0;y<n.length;y+=3){v.x=n[y+0],v.y=n[y+1],v.z=n[y+2];let x=p(v)/2/Math.PI+.5,w=g(v)/Math.PI+.5;s.push(x,1-w)}f(),d()}function d(){for(let v=0;v<s.length;v+=6){let y=s[v+0],x=s[v+2],w=s[v+4],_=Math.max(y,x,w),b=Math.min(y,x,w);_>.9&&b<.1&&(y<.2&&(s[v+0]+=1),x<.2&&(s[v+2]+=1),w<.2&&(s[v+4]+=1))}}function c(v){n.push(v.x,v.y,v.z)}function h(v,y){let x=v*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function f(){let v=new T,y=new T,x=new T,w=new T,_=new q,b=new q,A=new q;for(let S=0,M=0;S<n.length;S+=9,M+=6){v.set(n[S+0],n[S+1],n[S+2]),y.set(n[S+3],n[S+4],n[S+5]),x.set(n[S+6],n[S+7],n[S+8]),_.set(s[M+0],s[M+1]),b.set(s[M+2],s[M+3]),A.set(s[M+4],s[M+5]),w.copy(v).add(y).add(x).divideScalar(3);let E=p(w);m(_,M+0,v,E),m(b,M+2,y,E),m(A,M+4,x,E)}}function m(v,y,x,w){w<0&&v.x===1&&(s[y]=v.x-1),x.x===0&&x.z===0&&(s[y]=w/2/Math.PI+.5)}function p(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new sA(e.vertices,e.indices,e.radius,e.details)}},WR=class extends sA{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new WR(e.radius,e.detail)}},Eu=class extends d_{constructor(e){super(e),this.uuid=xa(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new d_().fromJSON(r))}return this}},g8={triangulate:function(e,t,i=2){let r=t&&t.length,n=r?t[0]*i:e.length,s=XR(e,0,n,i,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,u,d,c,h,f;if(r&&(s=_8(e,t,s,i)),e.length>80*i){o=u=e[0],l=d=e[1];for(let m=i;m<n;m+=i)c=e[m],h=e[m+1],c<o&&(o=c),h<l&&(l=h),c>u&&(u=c),h>d&&(d=h);f=Math.max(u-o,d-l),f=f!==0?1/f:0}return ap(s,a,i,o,l,f),a}};function XR(e,t,i,r,n){let s,a;if(n===O8(e,t,i,r)>0)for(s=t;s<i;s+=r)a=yT(s,e[s],e[s+1],a);else for(s=i-r;s>=t;s-=r)a=yT(s,e[s],e[s+1],a);return a&&H0(a,a.next)&&(lp(a),a=a.next),a}function El(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(H0(i,i.next)||li(i.prev,i,i.next)===0)){if(lp(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function ap(e,t,i,r,n,s,a){if(!e)return;!a&&s&&E8(e,r,n,s);let o=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,s?y8(e,r,n,s):v8(e)){t.push(l.i/i),t.push(e.i/i),t.push(u.i/i),lp(e),e=u.next,o=u.next;continue}if(e=u,e===o){a?a===1?(e=x8(El(e),t,i),ap(e,t,i,r,n,s,2)):a===2&&w8(e,t,i,r,n,s):ap(El(e),t,i,r,n,s,1);break}}}function v8(e){let t=e.prev,i=e,r=e.next;if(li(t,i,r)>=0)return!1;let n=e.next.next;for(;n!==e.prev;){if(Kc(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&li(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function y8(e,t,i,r){let n=e.prev,s=e,a=e.next;if(li(n,s,a)>=0)return!1;let o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,l=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,u=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,d=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,c=f_(o,l,t,i,r),h=f_(u,d,t,i,r),f=e.prevZ,m=e.nextZ;for(;f&&f.z>=c&&m&&m.z<=h;){if(f!==e.prev&&f!==e.next&&Kc(n.x,n.y,s.x,s.y,a.x,a.y,f.x,f.y)&&li(f.prev,f,f.next)>=0||(f=f.prevZ,m!==e.prev&&m!==e.next&&Kc(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&li(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=c;){if(f!==e.prev&&f!==e.next&&Kc(n.x,n.y,s.x,s.y,a.x,a.y,f.x,f.y)&&li(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==e.prev&&m!==e.next&&Kc(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&li(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function x8(e,t,i){let r=e;do{let n=r.prev,s=r.next.next;!H0(n,s)&&YR(n,r,r.next,s)&&op(n,s)&&op(s,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(s.i/i),lp(r),lp(r.next),r=e=s),r=r.next}while(r!==e);return El(r)}function w8(e,t,i,r,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&D8(a,o)){let l=qR(a,o);a=El(a,a.next),l=El(l,l.next),ap(a,t,i,r,n,s),ap(l,t,i,r,n,s);return}o=o.next}a=a.next}while(a!==e)}function _8(e,t,i,r){let n=[],s,a,o,l,u;for(s=0,a=t.length;s<a;s++)o=t[s]*r,l=s<a-1?t[s+1]*r:e.length,u=XR(e,o,l,r,!1),u===u.next&&(u.steiner=!0),n.push(C8(u));for(n.sort(b8),s=0;s<n.length;s++)S8(n[s],i),i=El(i,i.next);return i}function b8(e,t){return e.x-t.x}function S8(e,t){if(t=A8(e,t),t){let i=qR(t,e);El(t,t.next),El(i,i.next)}}function A8(e,t){let i=t,r=e.x,n=e.y,s=-1/0,a;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){let h=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=r&&h>s){if(s=h,h===r){if(n===i.y)return i;if(n===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(r===s)return a;let o=a,l=a.x,u=a.y,d=1/0,c;i=a;do r>=i.x&&i.x>=l&&r!==i.x&&Kc(n<u?r:s,n,l,u,n<u?s:r,n,i.x,i.y)&&(c=Math.abs(n-i.y)/(r-i.x),op(i,e)&&(c<d||c===d&&(i.x>a.x||i.x===a.x&&M8(a,i)))&&(a=i,d=c)),i=i.next;while(i!==o);return a}function M8(e,t){return li(e.prev,e,t.prev)<0&&li(t.next,e,e.next)<0}function E8(e,t,i,r){let n=e;do n.z===null&&(n.z=f_(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,T8(n)}function T8(e){let t,i,r,n,s,a,o,l,u=1;do{for(i=e,e=null,s=null,a=0;i;){for(a++,r=i,o=0,t=0;t<u&&(o++,r=r.nextZ,!!r);t++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;i=r}s.nextZ=null,u*=2}while(a>1);return e}function f_(e,t,i,r,n){return e=32767*(e-i)*n,t=32767*(t-r)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function C8(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Kc(e,t,i,r,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(r-o)-(i-a)*(t-o)>=0&&(i-a)*(s-o)-(n-a)*(r-o)>=0}function D8(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!P8(e,t)&&(op(e,t)&&op(t,e)&&L8(e,t)&&(li(e.prev,e,t.prev)||li(e,t.prev,t))||H0(e,t)&&li(e.prev,e,e.next)>0&&li(t.prev,t,t.next)>0)}function li(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function H0(e,t){return e.x===t.x&&e.y===t.y}function YR(e,t,i,r){let n=jm(li(e,t,i)),s=jm(li(e,t,r)),a=jm(li(i,r,e)),o=jm(li(i,r,t));return!!(n!==s&&a!==o||n===0&&Vm(e,i,t)||s===0&&Vm(e,r,t)||a===0&&Vm(i,e,r)||o===0&&Vm(i,t,r))}function Vm(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function jm(e){return e>0?1:e<0?-1:0}function P8(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&YR(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function op(e,t){return li(e.prev,e,e.next)<0?li(e,t,e.next)>=0&&li(e,e.prev,t)>=0:li(e,t,e.prev)<0||li(e,e.next,t)<0}function L8(e,t){let i=e,r=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function qR(e,t){let i=new p_(e.i,e.x,e.y),r=new p_(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function yT(e,t,i,r){let n=new p_(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function lp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function p_(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O8(e,t,i,r){let n=0;for(let s=t,a=i-r;s<i;s+=r)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var Mf=class{static area(e){let t=e.length,i=0;for(let r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return i*.5}static isClockWise(e){return Mf.area(e)<0}static triangulateShape(e,t){let i=[],r=[],n=[];xT(e),wT(i,e);let s=e.length;t.forEach(xT);for(let o=0;o<t.length;o++)r.push(s),s+=t[o].length,wT(i,t[o]);let a=g8.triangulate(i,r);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function xT(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wT(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var QR=class extends sA{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new QR(e.radius,e.detail)}},ZR=class extends ft{constructor(e=new Eu([new q(0,.5),new q(-.5,-.5),new q(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],n=[],s=[],a=0,o=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,o,u),a+=o,o=0;this.setIndex(i),this.setAttribute("position",new ke(r,3)),this.setAttribute("normal",new ke(n,3)),this.setAttribute("uv",new ke(s,2));function l(u){let d=r.length/3,c=u.extractPoints(t),h=c.shape,f=c.holes;Mf.isClockWise(h)===!1&&(h=h.reverse());for(let p=0,g=f.length;p<g;p++){let v=f[p];Mf.isClockWise(v)===!0&&(f[p]=v.reverse())}let m=Mf.triangulateShape(h,f);for(let p=0,g=f.length;p<g;p++){let v=f[p];h=h.concat(v)}for(let p=0,g=h.length;p<g;p++){let v=h[p];r.push(v.x,v.y,0),n.push(0,0,1),s.push(v.x,v.y)}for(let p=0,g=m.length;p<g;p++){let v=m[p],y=v[0]+d,x=v[1]+d,w=v[2]+d;i.push(y,x,w),o+=3}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return R8(t,e)}static fromJSON(e,t){let i=[];for(let r=0,n=e.shapes.length;r<n;r++){let s=t[e.shapes[r]];i.push(s)}return new ZR(i,e.curveSegments)}};function R8(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){let n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}var aA=class extends ft{constructor(e=1,t=32,i=16,r=0,n=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(s+a,Math.PI),l=0,u=[],d=new T,c=new T,h=[],f=[],m=[],p=[];for(let g=0;g<=i;g++){let v=[],y=g/i,x=0;g==0&&s==0?x=.5/t:g==i&&o==Math.PI&&(x=-.5/t);for(let w=0;w<=t;w++){let _=w/t;d.x=-e*Math.cos(r+_*n)*Math.sin(s+y*a),d.y=e*Math.cos(s+y*a),d.z=e*Math.sin(r+_*n)*Math.sin(s+y*a),f.push(d.x,d.y,d.z),c.copy(d).normalize(),m.push(c.x,c.y,c.z),p.push(_+x,1-y),v.push(l++)}u.push(v)}for(let g=0;g<i;g++)for(let v=0;v<t;v++){let y=u[g][v+1],x=u[g][v],w=u[g+1][v],_=u[g+1][v+1];(g!==0||s>0)&&h.push(y,x,_),(g!==i-1||o<Math.PI)&&h.push(x,w,_)}this.setIndex(h),this.setAttribute("position",new ke(f,3)),this.setAttribute("normal",new ke(m,3)),this.setAttribute("uv",new ke(p,2))}static fromJSON(e){return new aA(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},KR=class extends ft{constructor(e=1,t=.4,i=64,r=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],o=[],l=[],u=[],d=new T,c=new T,h=new T,f=new T,m=new T,p=new T,g=new T;for(let y=0;y<=i;++y){let x=y/i*n*Math.PI*2;v(x,n,s,e,h),v(x+.01,n,s,e,f),p.subVectors(f,h),g.addVectors(f,h),m.crossVectors(p,g),g.crossVectors(m,p),m.normalize(),g.normalize();for(let w=0;w<=r;++w){let _=w/r*Math.PI*2,b=-t*Math.cos(_),A=t*Math.sin(_);d.x=h.x+(b*g.x+A*m.x),d.y=h.y+(b*g.y+A*m.y),d.z=h.z+(b*g.z+A*m.z),o.push(d.x,d.y,d.z),c.subVectors(d,h).normalize(),l.push(c.x,c.y,c.z),u.push(y/i),u.push(w/r)}}for(let y=1;y<=i;y++)for(let x=1;x<=r;x++){let w=(r+1)*(y-1)+(x-1),_=(r+1)*y+(x-1),b=(r+1)*y+x,A=(r+1)*(y-1)+x;a.push(w,_,A),a.push(_,b,A)}this.setIndex(a),this.setAttribute("position",new ke(o,3)),this.setAttribute("normal",new ke(l,3)),this.setAttribute("uv",new ke(u,2));function v(y,x,w,_,b){let A=Math.cos(y),S=Math.sin(y),M=w/x*y,E=Math.cos(M);b.x=_*(2+E)*.5*A,b.y=_*(2+E)*S*.5,b.z=_*Math.sin(M)*.5}}static fromJSON(e){return new KR(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},_T={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},JR=class{constructor(e,t,i){let r=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,n===!1&&r.onStart!==void 0&&r.onStart(u,s,a),n=!0},this.itemEnd=function(u){s++,r.onProgress!==void 0&&r.onProgress(u,s,a),s===a&&(n=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return o?o(u):u},this.setURLModifier=function(u){return o=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,c=l.length;d<c;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return f}return null}}},I8=new JR,V0=class{constructor(e){this.manager=e!==void 0?e:I8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,n){i.load(e,r,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Na={},jv=class extends V0{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=_T.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Na[e]!==void 0){Na[e].push({onLoad:t,onProgress:i,onError:r});return}Na[e]=[],Na[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Na[e],d=l.body.getReader(),c=l.headers.get("Content-Length"),h=c?parseInt(c):0,f=h!==0,m=0,p=new ReadableStream({start(g){v();function v(){d.read().then(({done:y,value:x})=>{if(y)g.close();else{m+=x.byteLength;let w=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:h});for(let _=0,b=u.length;_<b;_++){let A=u[_];A.onProgress&&A.onProgress(w)}g.enqueue(x),v()}})}}});return new Response(p)}else throw Error(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,c=new TextDecoder(d);return l.arrayBuffer().then(h=>c.decode(h))}}}).then(l=>{_T.add(e,l);let u=Na[e];delete Na[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=Na[e];if(u===void 0)throw this.manager.itemError(e),l;delete Na[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},j0=class extends Yt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},m_=class extends j0{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.groundColor=new dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},bT=new Ke,ST=new T,AT=new T,oA=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new q(512,512),this.map=null,this.mapPass=null,this.matrix=new Ke,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new JS,this._frameExtents=new q(1,1),this._viewportCount=1,this._viewports=[new vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;ST.setFromMatrixPosition(e.matrixWorld),t.position.copy(ST),AT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(AT),t.updateMatrixWorld(),bT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},z8=class extends oA{constructor(){super(new _r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=sp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(i!==t.fov||r!==t.aspect||n!==t.far)&&(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},B8=class extends j0{constructor(e,t,i=0,r=Math.PI/3,n=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.distance=i,this.angle=r,this.penumbra=n,this.decay=s,this.shadow=new z8}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},MT=new Ke,wd=new T,U1=new T,k8=class extends oA{constructor(){super(new _r(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new q(4,2),this._viewportCount=6,this._viewports=[new vt(2,1,1,1),new vt(0,1,1,1),new vt(3,1,1,1),new vt(1,1,1,1),new vt(3,0,1,1),new vt(1,0,1,1)],this._cubeDirections=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],this._cubeUps=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),wd.setFromMatrixPosition(e.matrixWorld),i.position.copy(wd),U1.copy(i.position),U1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(U1),i.updateMatrixWorld(),r.makeTranslation(-wd.x,-wd.y,-wd.z),MT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MT)}},N8=class extends j0{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new k8}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},F8=class extends oA{constructor(){super(new $S(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},U8=class extends j0{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.shadow=new F8}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},H8=class extends ft{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},$R=class extends V0{constructor(e){super(e)}load(e,t,i,r){let n=this,s=new jv(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){r?r(o):console.error(o),n.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(c,h){if(t[h]!==void 0)return t[h];let f=c.interleavedBuffers[h],m=n(c,f.buffer),p=xm(f.type,m),g=new t8(p,f.stride);return g.uuid=f.uuid,t[h]=g,g}function n(c,h){if(i[h]!==void 0)return i[h];let f=c.arrayBuffers[h],m=new Uint32Array(f).buffer;return i[h]=m,m}let s=e.isInstancedBufferGeometry?new H8:new ft,a=e.data.index;if(a!==void 0){let c=xm(a.type,a.array);s.setIndex(new xt(c,1))}let o=e.data.attributes;for(let c in o){let h=o[c],f;if(h.isInterleavedBufferAttribute){let m=r(e.data,h.data);f=new h_(m,h.itemSize,h.offset,h.normalized)}else{let m=xm(h.type,h.array),p=h.isInstancedBufferAttribute?i8:xt;f=new p(m,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),s.setAttribute(c,f)}let l=e.data.morphAttributes;if(l)for(let c in l){let h=l[c],f=[];for(let m=0,p=h.length;m<p;m++){let g=h[m],v;if(g.isInterleavedBufferAttribute){let y=r(e.data,g.data);v=new h_(y,g.itemSize,g.offset,g.normalized)}else{let y=xm(g.type,g.array);v=new xt(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}s.morphAttributes[c]=f}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let c=0,h=u.length;c!==h;++c){let f=u[c];s.addGroup(f.start,f.count,f.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let c=new T;d.center!==void 0&&c.fromArray(d.center),s.boundingSphere=new ks(c,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},V8=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ET(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=ET();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function ET(){return(typeof performance>"u"?Date:performance).now()}var eI="\\[\\]\\.:\\/",lA="[^"+eI+"]",j8="[^"+eI.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",lA);/(WCOD+)?/.source.replace("WCOD",j8);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lA);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lA);var Ze=class{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Ze(this.value.clone===void 0?this.value:this.value.clone())}},tI=class{constructor(e,t,i=0,r=1/0){this.ray=new Dp(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ZS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return g_(e,this,i,t),i.sort(TT),i}intersectObjects(e,t=!0,i=[]){for(let r=0,n=e.length;r<n;r++)g_(e[r],this,i,t);return i.sort(TT),i}};function TT(e,t){return e.distance-t.distance}function g_(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)g_(n[s],t,i,!0)}}var CT=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Hi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},DT=new T,Gm=new T,cs=class{constructor(e=new T,t=new T){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){DT.subVectors(e,this.start),Gm.subVectors(this.end,this.start);let i=Gm.dot(Gm),r=Gm.dot(DT)/i;return t&&(r=Hi(r,0,1)),r}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},PT=new T,G8=class extends Yt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let i=new ft,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,u=a/o*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ke(r,3));let n=new Bl({fog:!1,toneMapped:!1});this.cone=new Lp(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),PT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(PT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},W8=class extends Mr{constructor(e,t,i){let r=new aA(t,4,2),n=new Ih({wireframe:!0,fog:!1,toneMapped:!1});super(r,n),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},LT=new T,Wm=new T,OT=new T,X8=class extends Yt{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new ft;r.setAttribute("position",new ke([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Bl({fog:!1,toneMapped:!1});this.lightPlane=new Vv(r,n),this.add(this.lightPlane),r=new ft,r.setAttribute("position",new ke([0,0,0,0,0,1],3)),this.targetLine=new Vv(r,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){LT.setFromMatrixPosition(this.light.matrixWorld),Wm.setFromMatrixPosition(this.light.target.matrixWorld),OT.subVectors(Wm,LT),this.lightPlane.lookAt(Wm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wm),this.targetLine.scale.z=OT.length()}},Xm=new T,hi=new Gh,tl=class extends Lp{constructor(e){let t=new ft,i=new Bl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(f,m){o(f),o(m)}function o(f){r.push(0,0,0),n.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(r.length/3-1)}t.setAttribute("position",new ke(r,3)),t.setAttribute("color",new ke(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new dt(16755200),u=new dt(16711680),d=new dt(43775),c=new dt(16777215),h=new dt(3355443);this.setColors(l,u,d,c,h)}setColors(e,t,i,r,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;hi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_i("c",t,e,hi,0,0,-1),_i("t",t,e,hi,0,0,1),_i("n1",t,e,hi,-i,-r,-1),_i("n2",t,e,hi,i,-r,-1),_i("n3",t,e,hi,-i,r,-1),_i("n4",t,e,hi,i,r,-1),_i("f1",t,e,hi,-i,-r,1),_i("f2",t,e,hi,i,-r,1),_i("f3",t,e,hi,-i,r,1),_i("f4",t,e,hi,i,r,1),_i("u1",t,e,hi,i*.7,r*1.1,-1),_i("u2",t,e,hi,-i*.7,r*1.1,-1),_i("u3",t,e,hi,0,r*2,-1),_i("cf1",t,e,hi,-i,0,1),_i("cf2",t,e,hi,i,0,1),_i("cf3",t,e,hi,0,-r,1),_i("cf4",t,e,hi,0,r,1),_i("cn1",t,e,hi,-i,0,-1),_i("cn2",t,e,hi,i,0,-1),_i("cn3",t,e,hi,0,-r,-1),_i("cn4",t,e,hi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function _i(e,t,i,r,n,s,a){Xm.set(n,s,a).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let u=0,d=o.length;u<d;u++)l.setXYZ(o[u],Xm.x,Xm.y,Xm.z)}}var Ym=class extends Lp{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new ft;n.setIndex(new xt(i,1)),n.setAttribute("position",new ke(r,3)),super(n,new Bl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},Y8=class extends Lp{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ft;r.setAttribute("position",new ke(t,3)),r.setAttribute("color",new ke(i,3));let n=new Bl({vertexColors:!0,toneMapped:!1});super(r,n),this.type="AxesHelper"}setColors(e,t,i){let r=new dt,n=this.geometry.attributes.color.array;return r.set(e),r.toArray(n,0),r.toArray(n,3),r.set(t),r.toArray(n,6),r.toArray(n,9),r.set(i),r.toArray(n,12),r.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},q8=class{constructor(){this.type="ShapePath",this.color=new dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new d_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,s){return this.currentPath.bezierCurveTo(e,t,i,r,n,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(v){let y=[];for(let x=0,w=v.length;x<w;x++){let _=v[x],b=new Eu;b.curves=_.curves,y.push(b)}return y}function r(v,y){let x=y.length,w=!1;for(let _=x-1,b=0;b<x;_=b++){let A=y[_],S=y[b],M=S.x-A.x,E=S.y-A.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(A=y[b],M=-M,S=y[_],E=-E),v.y<A.y||v.y>S.y)continue;if(v.y===A.y){if(v.x===A.x)return!0}else{let C=E*(v.x-A.x)-M*(v.y-A.y);if(C===0)return!0;if(C<0)continue;w=!w}}else{if(v.y!==A.y)continue;if(S.x<=v.x&&v.x<=A.x||A.x<=v.x&&v.x<=S.x)return!0}}return w}let n=Mf.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return i(s);let a,o,l,u=[];if(s.length===1)return o=s[0],l=new Eu,l.curves=o.curves,u.push(l),u;let d=!n(s[0].getPoints());d=e?!d:d;let c=[],h=[],f=[],m=0,p;h[m]=void 0,f[m]=[];for(let v=0,y=s.length;v<y;v++)o=s[v],p=o.getPoints(),a=n(p),a=e?!a:a,a?(!d&&h[m]&&m++,h[m]={s:new Eu,p},h[m].s.curves=o.curves,d&&m++,f[m]=[]):f[m].push({h:o,p:p[0]});if(!h[0])return i(s);if(h.length>1){let v=!1,y=0;for(let x=0,w=h.length;x<w;x++)c[x]=[];for(let x=0,w=h.length;x<w;x++){let _=f[x];for(let b=0;b<_.length;b++){let A=_[b],S=!0;for(let M=0;M<h.length;M++)r(A.p,h[M].p)&&(x!==M&&y++,S?(S=!1,c[M].push(A)):v=!0);S&&c[x].push(A)}}y>0&&v===!1&&(f=c)}let g;for(let v=0,y=h.length;v<y;v++){l=h[v].s,u.push(l),g=f[v];for(let x=0,w=g.length;x<w;x++)l.holes.push(g[x].h)}return u}};Q8();function Q8(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(r[l]=0,r[l|256]=32768,n[l]=24,n[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,n[l]=-u-1,n[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,n[l]=13,n[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,n[l]=24,n[l|256]=24):(r[l]=31744,r[l|256]=64512,n[l]=13,n[l|256]=13)}let s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;(u&8388608)===0;)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:n,mantissaTable:s,exponentTable:a,offsetTable:o}}var Z8=class extends Ei{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ep}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ep);var _d=".",uA=Symbol("target"),iI=Symbol("unsubscribe");function v_(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function K8(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var na=Array.isArray;function cA(e){return typeof e=="symbol"}var J8={after:(e,t)=>na(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>na(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=_d),cA(t)?e+t.toString():e+t):e,initial:e=>{if(na(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(_d);return t===-1?"":e.slice(0,t)},last:e=>{if(na(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(_d);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(na(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf(_d);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf(_d,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},Xn=J8;function $8(e){return typeof e=="object"&&typeof e.next=="function"}function eW(e,t,i,r,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],r),a.value[1]=n(a.value[1],t,a.value[0],r)),a};else if(t.name==="values"){let a=i[uA].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,r)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,r)),a};return e}function RT(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&cA(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var tW=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let n=e[r],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,i):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Xn.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,n){if(!this._equals(n,i)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function y_(e){return toString.call(e)==="[object Object]"}function qm(){return!0}function yc(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var rI=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),iW=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),nI={push:qm,pop:qm,shift:qm,unshift:qm,copyWithin:yc,reverse:yc,sort:yc,splice:yc,flat:yc,fill:yc},rW=new Set([...rI,...iW,...Object.keys(nI)]);function Qm(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var sI=["keys","values","entries"],aI=new Set(["has","toString"]),oI={add:Qm,clear:Qm,delete:Qm,forEach:Qm},nW=new Set([...aI,...Object.keys(oI),...sI]);function Zm(e,t){if(e.size!==t.size)return!0;let i;for(let[r,n]of e)if(i=t.get(r),i!==n||i===void 0&&!t.has(r))return!0;return!1}var sW=new Set([...aI,"get"]),lI={set:Zm,clear:Zm,delete:Zm,forEach:Zm},aW=new Set([...sW,...Object.keys(lI),...sI]),Tl=class{constructor(e,t,i,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return rI.has(e)}_shallowClone(e){let t=e;if(y_(e))t={...e};else if(na(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){t=new Map;for(let[i,r]of e.entries())t.set(i,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,r){return e?(na(r)?this._onIsChanged=nI[t]:r instanceof Set?this._onIsChanged=oI[t]:r instanceof Map&&(this._onIsChanged=lI[t]),r):i}update(e,t,i){let r=Xn.after(e,this._path);if(t!=="length"){let n=this.clone;Xn.walk(r,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:i}),n&&n[t]&&(n[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;i!==-1;i--)t=this._changes[i],Xn.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},IT=class extends Tl{static isHandledMethod(e){return rW.has(e)}},oW=class extends Tl{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},zT=class extends Tl{static isHandledMethod(e){return nW.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},BT=class extends Tl{static isHandledMethod(e){return aW.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},lW=class extends Tl{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},uW=class extends Tl{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Cc=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return y_(e)||na(e)||v_(e)}static isHandledMethod(e,t){return y_(e)?Tl.isHandledMethod(t):na(e)?IT.isHandledMethod(t):e instanceof Set?zT.isHandledMethod(t):e instanceof Map?BT.isHandledMethod(t):v_(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=Tl;na(e)?r=IT:e instanceof Date?r=oW:e instanceof Set?r=zT:e instanceof Map?r=BT:e instanceof WeakSet?r=lW:e instanceof WeakMap&&(r=uW),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,n=Cc.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(n,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},cW={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},hA=(e,t,i={})=>{i={...cW,...i};let r=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=i,l=new tW(n),u=typeof i.onValidate=="function",d=new Cc(u),c=(y,x,w,_,b)=>!u||d.isCloning||i.onValidate(Xn.concat(l.getPath(y),x),w,_,b)===!0,h=(y,x,w,_)=>{!RT(l,i,x)&&!(a&&l.isDetached(y,e))&&f(l.getPath(y),x,w,_)},f=(y,x,w,_,b)=>{d.isCloning?d.update(y,x,_):t(Xn.concat(y,x),w,_,b)},m=y=>y&&(y[r]||y),p=(y,x,w,_)=>K8(y)||w==="constructor"||s&&!Cc.isHandledMethod(x,w)||RT(l,i,w)||l.isGetInvariant(x,w)||a&&l.isDetached(x,e)?y:(_===void 0&&(_=l.getPath(x)),l.getProxy(y,Xn.concat(_,w),g,r)),g={get(y,x,w){if(cA(x)){if(x===r||x===uA)return y;if(x===iI&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let _=v_(y)?Reflect.get(y,x):Reflect.get(y,x,w);return p(_,y,x)},set(y,x,w,_){w=m(w);let b=y[r]||y,A=b[x];if(n(A,w)&&x in y)return!0;let S=c(y,x,w,A);return S&&l.setProperty(b,x,w,_,A)?(h(y,x,y[x],A),!0):!S},defineProperty(y,x,w){if(!l.isSameDescriptor(w,y,x)){let _=y[x];c(y,x,w.value,_)&&l.defineProperty(y,x,w,_)&&h(y,x,w.value,_)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let w=Reflect.get(y,x),_=c(y,x,void 0,w);return _&&l.deleteProperty(y,x,w)?(h(y,x,void 0,w),!0):!_},apply(y,x,w){let _=x[r]||x;if(l.isUnsubscribed)return Reflect.apply(y,_,w);if((o===!1||o!==!0&&!o.includes(y.name))&&Cc.isHandledType(_)){let b=Xn.initial(l.getPath(y)),A=Cc.isHandledMethod(_,y.name);d.start(_,b,w);let S=Reflect.apply(y,d.preferredThisArg(y,x,_),A?w.map(C=>m(C)):w),M=d.isChanged(_,n),E=d.stop();if(Cc.isHandledType(S)&&A&&(x instanceof Map&&y.name==="get"&&(b=Xn.concat(b,w[0])),S=l.getProxy(S,b,g)),M){let C={name:y.name,args:w,result:S},L=d.isCloning?Xn.initial(b):b,N=d.isCloning?Xn.last(b):"";c(Xn.get(e,L),N,_,E,C)?f(L,N,_,E,C):d.undo(_)}return(x instanceof Map||x instanceof Set)&&$8(S)?eW(S,y,x,b,p):S}return Reflect.apply(y,x,w)}},v=l.getProxy(e,i.pathAsArray?[]:"",g);return t=t.bind(v),u&&(i.onValidate=i.onValidate.bind(v)),v};hA.target=e=>e&&e[uA]||e;hA.unsubscribe=e=>e[iI]||e;var kT=hA,hW=typeof global=="object"&&global&&global.Object===Object&&global,uI=hW,dW=typeof self=="object"&&self&&self.Object===Object&&self,fW=uI||dW||Function("return this")(),Ns=fW,pW=Ns.Symbol,Ma=pW,cI=Object.prototype,mW=cI.hasOwnProperty,gW=cI.toString,bd=Ma?Ma.toStringTag:void 0;function vW(e){var t=mW.call(e,bd),i=e[bd];try{e[bd]=void 0;var r=!0}catch{}var n=gW.call(e);return r&&(t?e[bd]=i:delete e[bd]),n}var yW=vW,xW=Object.prototype,wW=xW.toString;function _W(e){return wW.call(e)}var bW=_W,SW="[object Null]",AW="[object Undefined]",NT=Ma?Ma.toStringTag:void 0;function MW(e){return e==null?e===void 0?AW:SW:NT&&NT in Object(e)?yW(e):bW(e)}var qu=MW;function EW(e){return e!=null&&typeof e=="object"}var kl=EW,TW="[object Symbol]";function CW(e){return typeof e=="symbol"||kl(e)&&qu(e)==TW}var G0=CW;function DW(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var hI=DW,PW=Array.isArray,Ea=PW,LW=1/0,FT=Ma?Ma.prototype:void 0,UT=FT?FT.toString:void 0;function dI(e){if(typeof e=="string")return e;if(Ea(e))return hI(e,dI)+"";if(G0(e))return UT?UT.call(e):"";var t=e+"";return t=="0"&&1/e==-LW?"-0":t}var OW=dI,RW=/\s/;function IW(e){for(var t=e.length;t--&&RW.test(e.charAt(t)););return t}var zW=IW,BW=/^\s+/;function kW(e){return e&&e.slice(0,zW(e)+1).replace(BW,"")}var NW=kW;function FW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var In=FW,HT=0/0,UW=/^[-+]0x[0-9a-f]+$/i,HW=/^0b[01]+$/i,VW=/^0o[0-7]+$/i,jW=parseInt;function GW(e){if(typeof e=="number")return e;if(G0(e))return HT;if(In(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=In(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=NW(e);var i=HW.test(e);return i||VW.test(e)?jW(e.slice(2),i?2:8):UW.test(e)?HT:+e}var VT=GW;function WW(e){return e}var fI=WW,XW="[object AsyncFunction]",YW="[object Function]",qW="[object GeneratorFunction]",QW="[object Proxy]";function ZW(e){if(!In(e))return!1;var t=qu(e);return t==YW||t==qW||t==XW||t==QW}var dA=ZW,KW=Ns["__core-js_shared__"],H1=KW,jT=function(){var e=/[^.]+$/.exec(H1&&H1.keys&&H1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function JW(e){return!!jT&&jT in e}var $W=JW,e9=Function.prototype,t9=e9.toString;function i9(e){if(e!=null){try{return t9.call(e)}catch{}try{return e+""}catch{}}return""}var Qu=i9,r9=/[\\^$.*+?()[\]{}|]/g,n9=/^\[object .+?Constructor\]$/,s9=Function.prototype,a9=Object.prototype,o9=s9.toString,l9=a9.hasOwnProperty,u9=RegExp("^"+o9.call(l9).replace(r9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c9(e){if(!In(e)||$W(e))return!1;var t=dA(e)?u9:n9;return t.test(Qu(e))}var h9=c9;function d9(e,t){return e==null?void 0:e[t]}var f9=d9;function p9(e,t){var i=f9(e,t);return h9(i)?i:void 0}var Zu=p9,m9=Zu(Ns,"WeakMap"),x_=m9,GT=Object.create,g9=function(){function e(){}return function(t){if(!In(t))return{};if(GT)return GT(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),v9=g9;function y9(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var x9=y9;function w9(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var pI=w9,_9=800,b9=16,S9=Date.now;function A9(e){var t=0,i=0;return function(){var r=S9(),n=b9-(r-i);if(i=r,n>0){if(++t>=_9)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var M9=A9;function E9(e){return function(){return e}}var T9=E9,C9=function(){try{var e=Zu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Gv=C9,D9=Gv?function(e,t){return Gv(e,"toString",{configurable:!0,enumerable:!1,value:T9(t),writable:!0})}:fI,P9=D9,L9=M9(P9),mI=L9;function O9(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var R9=O9,I9=9007199254740991,z9=/^(?:0|[1-9]\d*)$/;function B9(e,t){var i=typeof e;return t=t!=null?t:I9,!!t&&(i=="number"||i!="symbol"&&z9.test(e))&&e>-1&&e%1==0&&e<t}var W0=B9;function k9(e,t,i){t=="__proto__"&&Gv?Gv(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var fA=k9;function N9(e,t){return e===t||e!==e&&t!==t}var X0=N9,F9=Object.prototype,U9=F9.hasOwnProperty;function H9(e,t,i){var r=e[t];(!(U9.call(e,t)&&X0(r,i))||i===void 0&&!(t in e))&&fA(e,t,i)}var pA=H9;function V9(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),n?fA(i,o,l):pA(i,o,l)}return i}var Xh=V9,WT=Math.max;function j9(e,t,i){return t=WT(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=WT(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),x9(e,this,o)}}var gI=j9;function G9(e,t){return mI(gI(e,t,fI),e+"")}var W9=G9,X9=9007199254740991;function Y9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=X9}var mA=Y9;function q9(e){return e!=null&&mA(e.length)&&!dA(e)}var Y0=q9;function Q9(e,t,i){if(!In(i))return!1;var r=typeof t;return(r=="number"?Y0(i)&&W0(t,i.length):r=="string"&&t in i)?X0(i[t],e):!1}var Z9=Q9;function K9(e){return W9(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&Z9(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}var J9=K9,$9=Object.prototype;function e7(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||$9;return e===i}var gA=e7;function t7(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var i7=t7,r7="[object Arguments]";function n7(e){return kl(e)&&qu(e)==r7}var XT=n7,vI=Object.prototype,s7=vI.hasOwnProperty,a7=vI.propertyIsEnumerable,o7=XT(function(){return arguments}())?XT:function(e){return kl(e)&&s7.call(e,"callee")&&!a7.call(e,"callee")},up=o7;function l7(){return!1}var u7=l7,yI=typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,YT=yI&&typeof Cn=="object"&&Cn&&!Cn.nodeType&&Cn,c7=YT&&YT.exports===yI,qT=c7?Ns.Buffer:void 0,h7=qT?qT.isBuffer:void 0,d7=h7||u7,vA=d7,f7="[object Arguments]",p7="[object Array]",m7="[object Boolean]",g7="[object Date]",v7="[object Error]",y7="[object Function]",x7="[object Map]",w7="[object Number]",_7="[object Object]",b7="[object RegExp]",S7="[object Set]",A7="[object String]",M7="[object WeakMap]",E7="[object ArrayBuffer]",T7="[object DataView]",C7="[object Float32Array]",D7="[object Float64Array]",P7="[object Int8Array]",L7="[object Int16Array]",O7="[object Int32Array]",R7="[object Uint8Array]",I7="[object Uint8ClampedArray]",z7="[object Uint16Array]",B7="[object Uint32Array]",ei={};ei[C7]=ei[D7]=ei[P7]=ei[L7]=ei[O7]=ei[R7]=ei[I7]=ei[z7]=ei[B7]=!0;ei[f7]=ei[p7]=ei[E7]=ei[m7]=ei[T7]=ei[g7]=ei[v7]=ei[y7]=ei[x7]=ei[w7]=ei[_7]=ei[b7]=ei[S7]=ei[A7]=ei[M7]=!1;function k7(e){return kl(e)&&mA(e.length)&&!!ei[qu(e)]}var N7=k7;function F7(e){return function(t){return e(t)}}var yA=F7,xI=typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,Ef=xI&&typeof Cn=="object"&&Cn&&!Cn.nodeType&&Cn,U7=Ef&&Ef.exports===xI,V1=U7&&uI.process,H7=function(){try{var e=Ef&&Ef.require&&Ef.require("util").types;return e||V1&&V1.binding&&V1.binding("util")}catch{}}(),Bh=H7,QT=Bh&&Bh.isTypedArray,V7=QT?yA(QT):N7,wI=V7,j7=Object.prototype,G7=j7.hasOwnProperty;function W7(e,t){var i=Ea(e),r=!i&&up(e),n=!i&&!r&&vA(e),s=!i&&!r&&!n&&wI(e),a=i||r||n||s,o=a?i7(e.length,String):[],l=o.length;for(var u in e)(t||G7.call(e,u))&&!(a&&(u=="length"||n&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||W0(u,l)))&&o.push(u);return o}var _I=W7;function X7(e,t){return function(i){return e(t(i))}}var bI=X7,Y7=bI(Object.keys,Object),q7=Y7,Q7=Object.prototype,Z7=Q7.hasOwnProperty;function K7(e){if(!gA(e))return q7(e);var t=[];for(var i in Object(e))Z7.call(e,i)&&i!="constructor"&&t.push(i);return t}var J7=K7;function $7(e){return Y0(e)?_I(e):J7(e)}var xA=$7;function eX(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var tX=eX,iX=Object.prototype,rX=iX.hasOwnProperty;function nX(e){if(!In(e))return tX(e);var t=gA(e),i=[];for(var r in e)r=="constructor"&&(t||!rX.call(e,r))||i.push(r);return i}var sX=nX;function aX(e){return Y0(e)?_I(e,!0):sX(e)}var Op=aX,oX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lX=/^\w*$/;function uX(e,t){if(Ea(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||G0(e)?!0:lX.test(e)||!oX.test(e)||t!=null&&e in Object(t)}var cX=uX,hX=Zu(Object,"create"),cp=hX;function dX(){this.__data__=cp?cp(null):{},this.size=0}var fX=dX;function pX(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mX=pX,gX="__lodash_hash_undefined__",vX=Object.prototype,yX=vX.hasOwnProperty;function xX(e){var t=this.__data__;if(cp){var i=t[e];return i===gX?void 0:i}return yX.call(t,e)?t[e]:void 0}var wX=xX,_X=Object.prototype,bX=_X.hasOwnProperty;function SX(e){var t=this.__data__;return cp?t[e]!==void 0:bX.call(t,e)}var AX=SX,MX="__lodash_hash_undefined__";function EX(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=cp&&t===void 0?MX:t,this}var TX=EX;function Yh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Yh.prototype.clear=fX;Yh.prototype.delete=mX;Yh.prototype.get=wX;Yh.prototype.has=AX;Yh.prototype.set=TX;var ZT=Yh;function CX(){this.__data__=[],this.size=0}var DX=CX;function PX(e,t){for(var i=e.length;i--;)if(X0(e[i][0],t))return i;return-1}var q0=PX,LX=Array.prototype,OX=LX.splice;function RX(e){var t=this.__data__,i=q0(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():OX.call(t,i,1),--this.size,!0}var IX=RX;function zX(e){var t=this.__data__,i=q0(t,e);return i<0?void 0:t[i][1]}var BX=zX;function kX(e){return q0(this.__data__,e)>-1}var NX=kX;function FX(e,t){var i=this.__data__,r=q0(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var UX=FX;function qh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}qh.prototype.clear=DX;qh.prototype.delete=IX;qh.prototype.get=BX;qh.prototype.has=NX;qh.prototype.set=UX;var Q0=qh,HX=Zu(Ns,"Map"),hp=HX;function VX(){this.size=0,this.__data__={hash:new ZT,map:new(hp||Q0),string:new ZT}}var jX=VX;function GX(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var WX=GX;function XX(e,t){var i=e.__data__;return WX(t)?i[typeof t=="string"?"string":"hash"]:i.map}var Z0=XX;function YX(e){var t=Z0(this,e).delete(e);return this.size-=t?1:0,t}var qX=YX;function QX(e){return Z0(this,e).get(e)}var ZX=QX;function KX(e){return Z0(this,e).has(e)}var JX=KX;function $X(e,t){var i=Z0(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var eY=$X;function Qh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Qh.prototype.clear=jX;Qh.prototype.delete=qX;Qh.prototype.get=ZX;Qh.prototype.has=JX;Qh.prototype.set=eY;var wA=Qh,tY="Expected a function";function _A(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(tY);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=e.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(_A.Cache||wA),i}_A.Cache=wA;var iY=_A,rY=500;function nY(e){var t=iY(e,function(r){return i.size===rY&&i.clear(),r}),i=t.cache;return t}var sY=nY,aY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oY=/\\(\\)?/g,lY=sY(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(aY,function(i,r,n,s){t.push(n?s.replace(oY,"$1"):r||i)}),t}),uY=lY;function cY(e){return e==null?"":OW(e)}var hY=cY;function dY(e,t){return Ea(e)?e:cX(e,t)?[e]:uY(hY(e))}var Zh=dY,fY=1/0;function pY(e){if(typeof e=="string"||G0(e))return e;var t=e+"";return t=="0"&&1/e==-fY?"-0":t}var K0=pY;function mY(e,t){t=Zh(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[K0(t[i++])];return i&&i==r?e:void 0}var SI=mY;function gY(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var bA=gY,KT=Ma?Ma.isConcatSpreadable:void 0;function vY(e){return Ea(e)||up(e)||!!(KT&&e&&e[KT])}var yY=vY;function AI(e,t,i,r,n){var s=-1,a=e.length;for(i||(i=yY),n||(n=[]);++s<a;){var o=e[s];t>0&&i(o)?t>1?AI(o,t-1,i,r,n):bA(n,o):r||(n[n.length]=o)}return n}var xY=AI;function wY(e){var t=e==null?0:e.length;return t?xY(e,1):[]}var _Y=wY;function bY(e){return mI(gI(e,void 0,_Y),e+"")}var MI=bY,SY=bI(Object.getPrototypeOf,Object),SA=SY,AY="[object Object]",MY=Function.prototype,EY=Object.prototype,EI=MY.toString,TY=EY.hasOwnProperty,CY=EI.call(Object);function DY(e){if(!kl(e)||qu(e)!=AY)return!1;var t=SA(e);if(t===null)return!0;var i=TY.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&EI.call(i)==CY}var TI=DY;function PY(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(n);++r<n;)s[r]=e[r+t];return s}var LY=PY;function OY(){this.__data__=new Q0,this.size=0}var RY=OY;function IY(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var zY=IY;function BY(e){return this.__data__.get(e)}var kY=BY;function NY(e){return this.__data__.has(e)}var FY=NY,UY=200;function HY(e,t){var i=this.__data__;if(i instanceof Q0){var r=i.__data__;if(!hp||r.length<UY-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new wA(r)}return i.set(e,t),this.size=i.size,this}var VY=HY;function Kh(e){var t=this.__data__=new Q0(e);this.size=t.size}Kh.prototype.clear=RY;Kh.prototype.delete=zY;Kh.prototype.get=kY;Kh.prototype.has=FY;Kh.prototype.set=VY;var CI=Kh;function jY(e,t){return e&&Xh(t,xA(t),e)}var GY=jY;function WY(e,t){return e&&Xh(t,Op(t),e)}var XY=WY,DI=typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,JT=DI&&typeof Cn=="object"&&Cn&&!Cn.nodeType&&Cn,YY=JT&&JT.exports===DI,$T=YY?Ns.Buffer:void 0,eC=$T?$T.allocUnsafe:void 0;function qY(e,t){if(t)return e.slice();var i=e.length,r=eC?eC(i):new e.constructor(i);return e.copy(r),r}var PI=qY;function QY(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[n++]=a)}return s}var ZY=QY;function KY(){return[]}var LI=KY,JY=Object.prototype,$Y=JY.propertyIsEnumerable,tC=Object.getOwnPropertySymbols,eq=tC?function(e){return e==null?[]:(e=Object(e),ZY(tC(e),function(t){return $Y.call(e,t)}))}:LI,AA=eq;function tq(e,t){return Xh(e,AA(e),t)}var iq=tq,rq=Object.getOwnPropertySymbols,nq=rq?function(e){for(var t=[];e;)bA(t,AA(e)),e=SA(e);return t}:LI,OI=nq;function sq(e,t){return Xh(e,OI(e),t)}var aq=sq;function oq(e,t,i){var r=t(e);return Ea(e)?r:bA(r,i(e))}var RI=oq;function lq(e){return RI(e,xA,AA)}var uq=lq;function cq(e){return RI(e,Op,OI)}var II=cq,hq=Zu(Ns,"DataView"),w_=hq,dq=Zu(Ns,"Promise"),__=dq,fq=Zu(Ns,"Set"),b_=fq,iC="[object Map]",pq="[object Object]",rC="[object Promise]",nC="[object Set]",sC="[object WeakMap]",aC="[object DataView]",mq=Qu(w_),gq=Qu(hp),vq=Qu(__),yq=Qu(b_),xq=Qu(x_),$l=qu;(w_&&$l(new w_(new ArrayBuffer(1)))!=aC||hp&&$l(new hp)!=iC||__&&$l(__.resolve())!=rC||b_&&$l(new b_)!=nC||x_&&$l(new x_)!=sC)&&($l=function(e){var t=qu(e),i=t==pq?e.constructor:void 0,r=i?Qu(i):"";if(r)switch(r){case mq:return aC;case gq:return iC;case vq:return rC;case yq:return nC;case xq:return sC}return t});var MA=$l,wq=Object.prototype,_q=wq.hasOwnProperty;function bq(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&_q.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var Sq=bq,Aq=Ns.Uint8Array,oC=Aq;function Mq(e){var t=new e.constructor(e.byteLength);return new oC(t).set(new oC(e)),t}var EA=Mq;function Eq(e,t){var i=t?EA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var Tq=Eq,Cq=/\w*$/;function Dq(e){var t=new e.constructor(e.source,Cq.exec(e));return t.lastIndex=e.lastIndex,t}var Pq=Dq,lC=Ma?Ma.prototype:void 0,uC=lC?lC.valueOf:void 0;function Lq(e){return uC?Object(uC.call(e)):{}}var Oq=Lq;function Rq(e,t){var i=t?EA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var zI=Rq,Iq="[object Boolean]",zq="[object Date]",Bq="[object Map]",kq="[object Number]",Nq="[object RegExp]",Fq="[object Set]",Uq="[object String]",Hq="[object Symbol]",Vq="[object ArrayBuffer]",jq="[object DataView]",Gq="[object Float32Array]",Wq="[object Float64Array]",Xq="[object Int8Array]",Yq="[object Int16Array]",qq="[object Int32Array]",Qq="[object Uint8Array]",Zq="[object Uint8ClampedArray]",Kq="[object Uint16Array]",Jq="[object Uint32Array]";function $q(e,t,i){var r=e.constructor;switch(t){case Vq:return EA(e);case Iq:case zq:return new r(+e);case jq:return Tq(e,i);case Gq:case Wq:case Xq:case Yq:case qq:case Qq:case Zq:case Kq:case Jq:return zI(e,i);case Bq:return new r;case kq:case Uq:return new r(e);case Nq:return Pq(e);case Fq:return new r;case Hq:return Oq(e)}}var eQ=$q;function tQ(e){return typeof e.constructor=="function"&&!gA(e)?v9(SA(e)):{}}var BI=tQ,iQ="[object Map]";function rQ(e){return kl(e)&&MA(e)==iQ}var nQ=rQ,cC=Bh&&Bh.isMap,sQ=cC?yA(cC):nQ,aQ=sQ,oQ="[object Set]";function lQ(e){return kl(e)&&MA(e)==oQ}var uQ=lQ,hC=Bh&&Bh.isSet,cQ=hC?yA(hC):uQ,hQ=cQ,dQ=1,fQ=2,pQ=4,kI="[object Arguments]",mQ="[object Array]",gQ="[object Boolean]",vQ="[object Date]",yQ="[object Error]",NI="[object Function]",xQ="[object GeneratorFunction]",wQ="[object Map]",_Q="[object Number]",FI="[object Object]",bQ="[object RegExp]",SQ="[object Set]",AQ="[object String]",MQ="[object Symbol]",EQ="[object WeakMap]",TQ="[object ArrayBuffer]",CQ="[object DataView]",DQ="[object Float32Array]",PQ="[object Float64Array]",LQ="[object Int8Array]",OQ="[object Int16Array]",RQ="[object Int32Array]",IQ="[object Uint8Array]",zQ="[object Uint8ClampedArray]",BQ="[object Uint16Array]",kQ="[object Uint32Array]",Kt={};Kt[kI]=Kt[mQ]=Kt[TQ]=Kt[CQ]=Kt[gQ]=Kt[vQ]=Kt[DQ]=Kt[PQ]=Kt[LQ]=Kt[OQ]=Kt[RQ]=Kt[wQ]=Kt[_Q]=Kt[FI]=Kt[bQ]=Kt[SQ]=Kt[AQ]=Kt[MQ]=Kt[IQ]=Kt[zQ]=Kt[BQ]=Kt[kQ]=!0;Kt[yQ]=Kt[NI]=Kt[EQ]=!1;function Qg(e,t,i,r,n,s){var a,o=t&dQ,l=t&fQ,u=t&pQ;if(i&&(a=n?i(e,r,n,s):i(e)),a!==void 0)return a;if(!In(e))return e;var d=Ea(e);if(d){if(a=Sq(e),!o)return pI(e,a)}else{var c=MA(e),h=c==NI||c==xQ;if(vA(e))return PI(e,o);if(c==FI||c==kI||h&&!n){if(a=l||h?{}:BI(e),!o)return l?aq(e,XY(a,e)):iq(e,GY(a,e))}else{if(!Kt[c])return n?e:{};a=eQ(e,c,o)}}s||(s=new CI);var f=s.get(e);if(f)return f;s.set(e,a),hQ(e)?e.forEach(function(g){a.add(Qg(g,t,i,g,e,s))}):aQ(e)&&e.forEach(function(g,v){a.set(v,Qg(g,t,i,v,e,s))});var m=u?l?II:uq:l?Op:xA,p=d?void 0:m(e);return R9(p||e,function(g,v){p&&(v=g,g=e[v]),pA(a,v,Qg(g,t,i,v,e,s))}),a}var UI=Qg,NQ=1,FQ=4;function UQ(e){return UI(e,NQ|FQ)}var HI=UQ;function HQ(e,t){return e!=null&&t in Object(e)}var VQ=HQ;function jQ(e,t,i){t=Zh(t,e);for(var r=-1,n=t.length,s=!1;++r<n;){var a=K0(t[r]);if(!(s=e!=null&&i(e,a)))break;e=e[a]}return s||++r!=n?s:(n=e==null?0:e.length,!!n&&mA(n)&&W0(a,n)&&(Ea(e)||up(e)))}var GQ=jQ;function WQ(e,t){return e!=null&&GQ(e,t,VQ)}var XQ=WQ;function YQ(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var l=a[e?o:++n];if(i(s[l],l,s)===!1)break}return t}}var qQ=YQ,QQ=qQ(),ZQ=QQ,KQ=function(){return Ns.Date.now()},j1=KQ,JQ="Expected a function",$Q=Math.max,eZ=Math.min;function tZ(e,t,i){var r,n,s,a,o,l,u=0,d=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(JQ);t=VT(t)||0,In(i)&&(d=!!i.leading,c="maxWait"in i,s=c?$Q(VT(i.maxWait)||0,t):s,h="trailing"in i?!!i.trailing:h);function f(b){var A=r,S=n;return r=n=void 0,u=b,a=e.apply(S,A),a}function m(b){return u=b,o=setTimeout(v,t),d?f(b):a}function p(b){var A=b-l,S=b-u,M=t-A;return c?eZ(M,s-S):M}function g(b){var A=b-l,S=b-u;return l===void 0||A>=t||A<0||c&&S>=s}function v(){var b=j1();if(g(b))return y(b);o=setTimeout(v,p(b))}function y(b){return o=void 0,h&&r?f(b):(r=n=void 0,a)}function x(){o!==void 0&&clearTimeout(o),u=0,r=l=n=o=void 0}function w(){return o===void 0?a:y(j1())}function _(){var b=j1(),A=g(b);if(r=arguments,n=this,l=b,A){if(o===void 0)return m(l);if(c)return clearTimeout(o),o=setTimeout(v,t),f(l)}return o===void 0&&(o=setTimeout(v,t)),a}return _.cancel=x,_.flush=w,_}var VI=tZ;function iZ(e,t,i){(i!==void 0&&!X0(e[t],i)||i===void 0&&!(t in e))&&fA(e,t,i)}var S_=iZ;function rZ(e){return kl(e)&&Y0(e)}var nZ=rZ;function sZ(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var A_=sZ;function aZ(e){return Xh(e,Op(e))}var oZ=aZ;function lZ(e,t,i,r,n,s,a){var o=A_(e,i),l=A_(t,i),u=a.get(l);if(u){S_(e,i,u);return}var d=s?s(o,l,i+"",e,t,a):void 0,c=d===void 0;if(c){var h=Ea(l),f=!h&&vA(l),m=!h&&!f&&wI(l);d=l,h||f||m?Ea(o)?d=o:nZ(o)?d=pI(o):f?(c=!1,d=PI(l,!0)):m?(c=!1,d=zI(l,!0)):d=[]:TI(l)||up(l)?(d=o,up(o)?d=oZ(o):(!In(o)||dA(o))&&(d=BI(l))):c=!1}c&&(a.set(l,d),n(d,l,r,s,a),a.delete(l)),S_(e,i,d)}var uZ=lZ;function jI(e,t,i,r,n){e!==t&&ZQ(t,function(s,a){if(n||(n=new CI),In(s))uZ(e,t,a,i,jI,r,n);else{var o=r?r(A_(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),S_(e,a,o)}},Op)}var cZ=jI;function hZ(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var dZ=hZ;function fZ(e,t){return t.length<2?e:SI(e,LY(t,0,-1))}var pZ=fZ,mZ=J9(function(e,t,i){cZ(e,t,i)}),Wv=mZ;function gZ(e,t){return t=Zh(t,e),e=pZ(e,t),e==null||delete e[K0(dZ(t))]}var vZ=gZ;function yZ(e){return TI(e)?void 0:e}var xZ=yZ,wZ=1,_Z=2,bZ=4,SZ=MI(function(e,t){var i={};if(e==null)return i;var r=!1;t=hI(t,function(s){return s=Zh(s,e),r||(r=s.length>1),s}),Xh(e,II(e),i),r&&(i=UI(i,wZ|_Z|bZ,xZ));for(var n=t.length;n--;)vZ(i,t[n]);return i}),M_=SZ;function AZ(e,t,i,r){if(!In(e))return e;t=Zh(t,e);for(var n=-1,s=t.length,a=s-1,o=e;o!=null&&++n<s;){var l=K0(t[n]),u=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=a){var d=o[l];u=r?r(d,l,o):void 0,u===void 0&&(u=In(d)?d:W0(t[n+1])?[]:{})}pA(o,l,u),o=o[l]}return e}var MZ=AZ;function EZ(e,t,i){for(var r=-1,n=t.length,s={};++r<n;){var a=t[r],o=SI(e,a);i(o,a)&&MZ(s,Zh(a,e),o)}return s}var TZ=EZ;function CZ(e,t){return TZ(e,t,function(i,r){return XQ(e,r)})}var DZ=CZ,PZ=MI(function(e,t){return e==null?{}:DZ(e,t)}),LZ=PZ;function GI(e,t){return Object.setPrototypeOf(e,t),e}var OZ=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),RZ=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),IZ=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||J0&&"ontouchend"in document,zZ=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,BZ=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,kZ=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},NZ=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]};OZ();var J0=RZ(),E_=IZ(),FZ=zZ(),Ki=BZ(),Xv=kZ(),Yv=Number(NZ());function UZ(e){return Array.isArray(e)?e:[e]}function Km(e){return J0?e.metaKey:e.ctrlKey}var Pt=[],qv={},Xd={},Zg={};function WI(e){Pt.includes(e)||Pt.push(e)}function dh(e){delete qv[e.pointerId];for(let t=0;t<Pt.length;t++)if(Pt[t].pointerId===e.pointerId){Pt.splice(t,1);break}}function Qv(e){if(e.pointerType!=="touch")return;let t=qv[e.pointerId];t===void 0&&(t={x:0,y:0},qv[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function G1(e){let t=e.pointerId===Pt[0].pointerId?Pt[1]:Pt[0];return qv[t.pointerId]}function XI(e){Xd[e.key]=!0,Zg[e.key]=Zg[e.key]===void 0?1:Zg[e.key]+1}function YI(e){if(J0&&Xd.Meta)for(let t in Xd)Xd[t]=!1;else Xd[e.key]=!1;Zg={}}function HZ(e){e.addEventListener("pointerdown",WI,!0),e.addEventListener("pointerdown",Qv,!0),e.addEventListener("pointermove",Qv,!0),e.addEventListener("pointerup",dh,!0),e.addEventListener("pointercancel",dh,!0),e.addEventListener("pointerleave",dh,!0),window.addEventListener("keydown",XI,!0),window.addEventListener("keyup",YI,!0)}function VZ(e){e.removeEventListener("pointerdown",WI,!0),e.removeEventListener("pointerdown",Qv,!0),e.removeEventListener("pointermove",Qv,!0),e.removeEventListener("pointerup",dh,!0),e.removeEventListener("pointercancel",dh,!0),e.removeEventListener("pointerleave",dh,!0),window.removeEventListener("keydown",XI,!0),window.removeEventListener("keyup",YI,!0)}var kh;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(kh||(kh={}));var dp;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){return i.type==="PerspectiveCamera"?i.perspective.zoom:i.orthographic.zoom}e.getZoom=t})(dp||(dp={}));var il;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]}e.isEqual=t;function i(r,n,s){return[r[0]+(n[0]-r[0])*s,r[1]+(n[1]-r[1])*s]}e.lerp=i})(il||(il={}));var Er;(e=>{function t(s,a){return s[0]===a[0]&&s[1]===a[1]&&s[2]===a[2]}e.isEqual=t;function i(s,a){return[s[0]+a[0],s[1]+a[1],s[2]+a[2]]}e.add=i;function r(s,a){return[s[0]-a[0],s[1]-a[1],s[2]-a[2]]}e.sub=r;function n(s,a,o){return[s[0]+(a[0]-s[0])*o,s[1]+(a[1]-s[1])*o,s[2]+(a[2]-s[2])*o]}e.lerp=n})(Er||(Er={}));var Zv;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]}e.isEqual=t;function i(r,n,s){return[r[0]+(n[0]-r[0])*s,r[1]+(n[1]-r[1])*s,r[2]+(n[2]-r[2])*s,r[3]+(n[3]-r[3])*s]}e.lerp=i})(Zv||(Zv={}));var Vu;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}e.isEqual=t;function i(n){return n!=null?n:e.identity}e.simplify=i;function r(n,s){let a=s.slice(0);for(var o=0,l=s.length;o<l;o+=3){let u=n[3]*s[o]+n[7]*s[o+1]+n[11]*s[o+2]+n[15];a[o]=(n[0]*s[o]+n[4]*s[o+1]+n[8]*s[o+2]+n[12])/u,a[o+1]=(n[1]*s[o]+n[5]*s[o+1]+n[9]*s[o+2]+n[13])/u,a[o+2]=(n[2]*s[o]+n[6]*s[o+1]+n[10]*s[o+2]+n[14])/u}return a}e.applyMatrix4=r})(Vu||(Vu={}));var Sr;(e=>{e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function t(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}e.toRgb255a1=t;function i(a){return{r:a.r,g:a.g,b:a.b}}e.clone=i;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}e.fromHex=r;function n(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b}e.equals=n;function s(a,o,l){return{r:a.r+(o.r-a.r)*l,g:a.g+(o.g-a.g)*l,b:a.b+(o.b-a.b)*l}}e.lerp=s})(Sr||(Sr={}));var as;(e=>{e.white={...Sr.white,a:1},e.transparent={...Sr.white,a:0};function t(a){return{r:a[0],g:a[1],b:a[2],a:a[3]}}e.from0to1=t;function i(a,o){return{...Sr.fromHex(a),a:o}}e.fromHexAndA=i;function r(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:a.a}}e.toRgb255a1=r;function n(a,o){return Sr.equals(a,o)&&a.a===o.a}e.equals=n;function s(a,o,l){return{r:a.r+(o.r-a.r)*l,g:a.g+(o.g-a.g)*l,b:a.b+(o.b-a.b)*l,a:a.a+(o.a-a.a)*l}}e.lerp=s})(as||(as={}));var T_;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(T_||(T_={}));var C_;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(C_||(C_={}));var D_;(e=>e.defaultData={control1:[.5,.05],control2:[.1,.3]})(D_||(D_={}));var P_;(e=>{function t(i,r=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(n=>n*(1+r)),useCenter:!0}}}e.defaultData=t})(P_||(P_={}));var An=class{modifyById(e,t){let i=this;if(i[e]===void 0)throw new Error("not expected");{let r={...i,[e]:t};return Object.setPrototypeOf(r,An.prototype),r}}add(e,t){var i,r;return(r=(i=this.runOp({type:1,id:e,data:t}))==null?void 0:i.data)!=null?r:this}runOp(e){let t=this;if(e.type===1){let i=t[e.id],r;i===void 0?r={type:2,id:e.id}:r={type:1,id:e.id,data:i};let{id:n,data:s}=e,a={...t,[n]:s};return Object.setPrototypeOf(a,An.prototype),{data:a,actual:e,reverse:r}}else if(e.type===2){let{id:i}=e,r=t[i];if(r===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,An.prototype),delete n[i],{data:n,actual:e,reverse:{type:1,id:i,data:r}}}}throw new Error("illegal arg")}};function TA(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&TA(r)}return Object.freeze(e)}function jZ(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var GZ=class extends Error{};function rl(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let r=[],n=1/(i+1);for(let s=0;s<i;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;r.push(a)}return r}function Kv(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function WZ(){return typeof process<"u"}function qI(e,t){for(let i of e)t(i.id,i.data),qI(i.children,t)}function QI(e,t){t(e.id,e.data);for(let i of e.children)QI(i,t)}var ju=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ju.prototype)}deepFreeze(){let e=0;for(;e<this.length;)TA(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&QI(i,t)}}traverse(e){qI(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),n=r.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=r[n];return r=[...r],r[n]={...s,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let s=r,a=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let o=r.findIndex(l=>l.id===a);if(o<0)throw new Error;r=[...r],r[o]={...r[o],children:s}}Object.setPrototypeOf(r,ju.prototype);let n=r;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,o=this.childrenArray(a),l={fi:i,id:r,data:n,children:s};return o=[...o,l],o.sort((u,d)=>u.fi-d.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),n=r.findIndex(a=>a.id===t);e.localIndex=n,r=[...r];let s=r.splice(n,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...s,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let c=t;for(;c!==null;){if(c===void 0)throw new Error;if(c===r)throw new GZ("cyclic tree");c=this.parent(c)}}let n=this.parent(r);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(c=>c.id===r);a=[...a];let l=a.splice(o,1)[0],u=this.modifyArrayBy(n,a);n=t,a=u.childrenArray(n);let d=l.fi;return l={...l,fi:i},a=[...a,l],a.sort((c,h)=>c.fi-h.fi),e.localIndex=a.indexOf(l),u=u.modifyArrayBy(n,a),{data:u,actual:e,reverse:{type:9,parent:s,fi:d,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>jZ(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),n=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...n,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return rl(0,i,i);{let n=r[0].fi;return rl(n-i,n,i)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=r.find(a=>a.fi>n.fi);if(s===void 0){let a=r[r.length-1].fi;return rl(a,a+i,i)}else return rl(n.fi,s.fi,i)}}},L_;(e=>{function t(i,r){if(Array.isArray(i)){let n=r.props,s={},a=[...i],o=!1;if(n)for(let l of Object.keys(n)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");s[l]=a[u],a[u]=n[l],o=!0}return o?{data:a,actual:r,reverse:{type:0,props:s}}:null}else{let n=r.props,s={},a={...i},o=!1;if(n)for(let l of Object.keys(n)){s[l]=a[l];let u=n[l];u===void 0?delete a[l]:a[l]=u,o=!0}return o?{data:a,actual:r,reverse:{type:0,props:s}}:null}}e.runOp=t})(L_||(L_={}));var jr=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,jr.prototype)}deepFreeze(){let e=0;for(;e<this.length;)TA(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(s=>s.id===e);if(r<0)throw new Error("not expected");let n=i[r];return i=[...i],i[r]={...n,data:t},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,jr.prototype);let t=e;return WZ()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}}addOp(e){let{fi:t,id:i,data:r}=e,n=this,s={fi:t,id:i,data:r};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,r=i.findIndex(s=>s.id===t);if(r===-1)return null;e.localIndex=r,i=[...i];let n=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:i}=e,r=this;r=[...r];let n=r.findIndex(o=>o.id===i);if(n===-1)return null;let s=r[n].fi,a={...r[n],fi:t};return r[n]=a,r.sort((o,l)=>o.fi-l.fi),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:s,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(e===null){if(i.length===0)return rl(0,t,t);{let r=i[0].fi;return rl(r-t,r,t)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let n=i.find(s=>s.fi>r.fi);if(n===void 0){let s=i[i.length-1].fi;return rl(s,s+t,t)}else return rl(r.fi,n.fi,t)}}},Jv=class{unusedFun(e){}runOp(e){let t=[],i=this,r=0,n={};for(;r<e.path.length;)t.push(i),i=i===void 0?void 0:i[e.path[r]],r+=1;i={...i};for(let[o,l]of Object.entries(e.props)){let u=i[o];n[o]=u,l===void 0?delete i[o]:i[o]=l}for(;r>0;)Object.keys(i).length===0?(i={...t[r-1]},delete i[e.path[r-1]]):i={...t[r-1],[e.path[r-1]]:i},r-=1;let s=Object.setPrototypeOf(i,Jv.prototype),a={...e,props:n};return{data:s,actual:e,reverse:a}}},dC;(e=>{function t(r,n){var s;return(s=fp(r,n))!=null?s:r}e.apply=t;function i(r,n){if(n.type===0){let s=pp.zoom(r,n.path);if(s===void 0)return n;if(typeof s=="string"||typeof s=="number"||Kv(s))return;if(s&&typeof s=="object"){let a={...n.props};for(let o of Object.keys(s))delete a[o];return{...n,props:a}}else return}else if(n.type===1||n.type===4||n.type===7){let s=pp.zoom(r,[...n.path,n.id]);if(s===void 0)return n;if(typeof s=="string"||typeof s=="number"||Kv(s))return;if(s&&typeof s=="object"){let a={...n.data,...s};return{...n,data:a}}else return}else return n}e.filterOp=i})(dC||(dC={}));function ZI(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,a=fp(n.data,t[s]);i=i||a!==void 0,a===void 0&&(a=n.data);let o=ZI(n.children,t);return o!==void 0?i=!0:o=n.children,{...n,id:s,data:a,children:o}});if(i)return r}function XZ(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,a=fp(n.data,t[s]);return i=i||a!==void 0,a===void 0&&(a=n.data),{...n,id:s,data:a}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function fp(e,t){if(t!==void 0)if(e instanceof ju){let i=ZI(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof jr)return XZ(e,t);if(Array.isArray(e)){let i=!1,r=e.map((n,s)=>{let a=fp(n,t[s]);return i=i||a!==void 0,a===void 0&&(a=n),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(e&&typeof e=="object"){let i={},r=!1;for(let[n,s]of Object.entries(e)){let a=fp(s,t[n]);r=r||a!==void 0,a===void 0&&(a=s),i[n]=a}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else return t!=null?t:e}}var KI=Symbol(),Rp=Symbol(),Ip=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let n=i;for(;!(r instanceof $I);){let s=r._path,a=r._current;if(s!==""&&n.splice(0,0,s),r=r._parent,r===null)return;r.update(s,a)}r.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[Rp];i&&i(),delete this._children[e]}}}},YZ=class extends Ip{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,L_.runOp(this._current,e),e.path)}},qZ=class extends Ip{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,An.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},JI={get(e,t){if(t===Rp)return()=>{e._parent=null};if(t===KI)return e._current;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let n=r===void 0?void 0:r[t];if(n!==void 0)return n;let s=i[t],a=$0(e,t,s);return a!==s?(r===void 0&&(r={},e._children=r),r[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},QZ={...JI,set(e,t,i){var n;let r={type:0,props:{[t]:(n=Cl(i))!=null?n:i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},ZZ={...JI,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},CA=class extends Ip{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Rp]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(a=t.get(e))==null?void 0:a.data,s=$0(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}add(e,t,i,r,n){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:n})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},KZ=class extends Ip{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i,this[Rp]=()=>{this._parent=null}}feedOp(e){let{path:t,...i}=e;this.reportOp(i,this._current.runOp(e),t)}},DA=class extends Ip{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Rp]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;e(this.data(this._current[i].id),r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(a=t.get(e))==null?void 0:a.data,s=$0(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function W1(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&pp.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var $I=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){W1(this.ts,t,e),W1(this.actual,i,e),W1(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function $0(e,t,i){return i instanceof ju?new CA(e,t,i):i instanceof jr?new DA(e,t,i):i instanceof Jv?new KZ(e,t,i):i instanceof An?new Proxy(new qZ(e,t,i),ZZ):i!==null&&typeof i=="object"?Kv(i)?i:new Proxy(new YZ(e,t,i),QZ):i}function ez(e){let t=new $I(e);return[$0(t,"",e),t]}function fC(e,t){let[i,r]=ez(e);return t(i),r.result()}function Cl(e){return e instanceof CA||e instanceof DA?e._current:e!==null&&typeof e=="object"?e[KI]:e}var pp;(e=>{function t(s,a){if(a.length===s.length)for(var o=0;o<s.length;){if(s[o]!==a[o])return!1;o+=1}else return!1;return!0}e.equal=t;function i(s,a,o){let l=n(o,s);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...a};return Object.keys(l).forEach(d=>{delete u[d]}),u}else return a}e.removeOverridden=i;function r(s,a){if((s instanceof ju||s instanceof CA)&&typeof a=="string"||(s instanceof jr||s instanceof DA)&&typeof a=="string")return s.data(a);if(typeof a=="number"&&Array.isArray(s)||typeof a=="string"&&typeof s=="object")return s[a]}e.zoomOnce=r;function n(s,a,o=0){for(;o<a.length&&s!==void 0;)s=r(s,a[o]),o+=1;return s}e.zoom=n})(pp||(pp={}));var tz=class{},pC=class extends tz{constructor(e){super(),this.id=e}},mC=class extends tz{constructor(e){super(),this.data=e}},O_;try{O_=new TextDecoder}catch{}var Be,yl,ee=0,rn={},Bt,nl,Yn=0,sa=0,wn,ao,Yr=[],Ft,gC={useRecords:!1,mapsAsObjects:!0},iz=class{},rz=new iz;rz.name="MessagePack 0xC1";var Nh=!1,$v=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Be)return uz(()=>(I_(),this?this.unpack(e,t):$v.prototype.unpack.call(gC,e,t)));yl=t>-1?t:e.length,ee=0,sa=0,nl=null,wn=null,Be=e;try{Ft=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw Be=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof $v){if(rn=this,this.structures)return Bt=this.structures,Jm();(!Bt||Bt.length>0)&&(Bt=[])}else rn=gC,(!Bt||Bt.length>0)&&(Bt=[]);return Jm()}unpackMultiple(e,t){let i,r=0;try{Nh=!0;let n=e.length,s=this?this.unpack(e,n):ty.unpack(e,n);if(t){for(t(s);ee<n;)if(r=ee,t(Jm())===!1)return}else{for(i=[s];ee<n;)r=ee,i.push(Jm());return i}}catch(n){throw n.lastPosition=r,n.values=i,n}finally{Nh=!1,I_()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let n=e[i];n&&(n.isShared=!0,i>=32&&(n.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],n=t[i];n&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Jm(){try{if(!rn.trusted&&!Nh){let t=Bt.sharedLength||0;t<Bt.length&&(Bt.length=t)}let e=gi();if(ee==yl)Bt.restoreStructures&&vC(),Bt=null,Be=null,ao&&(ao=null);else if(ee>yl){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Nh)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Bt.restoreStructures&&vC(),I_(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function vC(){for(let e in Bt.restoreStructures)Bt[e]=Bt.restoreStructures[e];Bt.restoreStructures=null}function gi(){let e=Be[ee++];if(e<160)if(e<128){if(e<64)return e;{let t=Bt[e&63]||rn.getStructures&&nz()[e&63];return t?(t.read||(t.read=PA(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,rn.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[az()]=gi();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(gi(),gi());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=gi();return t}else if(e<192){let t=e-160;if(sa>=ee)return nl.slice(ee-Yn,(ee+=t)-Yn);if(sa==0&&yl<140){let i=t<16?LA(t):sz(t);if(i!=null)return i}return R_(t)}else{let t;switch(e){case 192:return null;case 193:return wn?(t=gi(),t>0?wn[1].slice(wn.position1,wn.position1+=t):wn[0].slice(wn.position0,wn.position0-=t)):rz;case 194:return!1;case 195:return!0;case 196:return X1(Be[ee++]);case 197:return t=Ft.getUint16(ee),ee+=2,X1(t);case 198:return t=Ft.getUint32(ee),ee+=4,X1(t);case 199:return Gl(Be[ee++]);case 200:return t=Ft.getUint16(ee),ee+=2,Gl(t);case 201:return t=Ft.getUint32(ee),ee+=4,Gl(t);case 202:if(t=Ft.getFloat32(ee),rn.useFloat32>2){let i=OA[(Be[ee]&127)<<1|Be[ee+1]>>7];return ee+=4,(i*t+(t>0?.5:-.5)>>0)/i}return ee+=4,t;case 203:return t=Ft.getFloat64(ee),ee+=8,t;case 204:return Be[ee++];case 205:return t=Ft.getUint16(ee),ee+=2,t;case 206:return t=Ft.getUint32(ee),ee+=4,t;case 207:return rn.int64AsNumber?(t=Ft.getUint32(ee)*4294967296,t+=Ft.getUint32(ee+4)):t=Ft.getBigUint64(ee),ee+=8,t;case 208:return Ft.getInt8(ee++);case 209:return t=Ft.getInt16(ee),ee+=2,t;case 210:return t=Ft.getInt32(ee),ee+=4,t;case 211:return rn.int64AsNumber?(t=Ft.getInt32(ee)*4294967296,t+=Ft.getUint32(ee+4)):t=Ft.getBigInt64(ee),ee+=8,t;case 212:if(t=Be[ee++],t==114)return bC(Be[ee++]&63);{let i=Yr[t];if(i)return i.read?(ee++,i.read(gi())):i.noBuffer?(ee++,i()):i(Be.subarray(ee,++ee));throw new Error("Unknown extension "+t)}case 213:return t=Be[ee],t==114?(ee++,bC(Be[ee++]&63,Be[ee++])):Gl(2);case 214:return Gl(4);case 215:return Gl(8);case 216:return Gl(16);case 217:return t=Be[ee++],sa>=ee?nl.slice(ee-Yn,(ee+=t)-Yn):$Z(t);case 218:return t=Ft.getUint16(ee),ee+=2,sa>=ee?nl.slice(ee-Yn,(ee+=t)-Yn):eK(t);case 219:return t=Ft.getUint32(ee),ee+=4,sa>=ee?nl.slice(ee-Yn,(ee+=t)-Yn):tK(t);case 220:return t=Ft.getUint16(ee),ee+=2,xC(t);case 221:return t=Ft.getUint32(ee),ee+=4,xC(t);case 222:return t=Ft.getUint16(ee),ee+=2,wC(t);case 223:return t=Ft.getUint32(ee),ee+=4,wC(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var JZ=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function PA(e,t){function i(){if(i.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>JZ.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(gi);return e.highByte===0&&(e.read=yC(t,e.read)),n()}let r={};for(let n=0,s=e.length;n<s;n++){let a=e[n];r[a]=gi()}return r}return i.count=0,e.highByte===0?yC(t,i):i}var yC=(e,t)=>function(){let i=Be[ee++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),n=Bt[r]||nz()[r];if(!n)throw new Error("Record id is not defined for "+r);return n.read||(n.read=PA(n,e)),n.read()};function nz(){let e=uz(()=>(Be=null,rn.getStructures()));return Bt=rn._mergeStructures(e,Bt)}var R_=ey,$Z=ey,eK=ey,tK=ey;function ey(e){let t;if(e<16&&(t=LA(e)))return t;if(e>64&&O_)return O_.decode(Be.subarray(ee,ee+=e));let i=ee+e,r=[];for(t="";ee<i;){let n=Be[ee++];if((n&128)===0)r.push(n);else if((n&224)===192){let s=Be[ee++]&63;r.push((n&31)<<6|s)}else if((n&240)===224){let s=Be[ee++]&63,a=Be[ee++]&63;r.push((n&31)<<12|s<<6|a)}else if((n&248)===240){let s=Be[ee++]&63,a=Be[ee++]&63,o=Be[ee++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(n);r.length>=4096&&(t+=Qi.apply(String,r),r.length=0)}return r.length>0&&(t+=Qi.apply(String,r)),t}function xC(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=gi();return t}function wC(e){if(rn.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[az()]=gi();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(gi(),gi());return t}}var Qi=String.fromCharCode;function sz(e){let t=ee,i=new Array(e);for(let r=0;r<e;r++){let n=Be[ee++];if((n&128)>0){ee=t;return}i[r]=n}return Qi.apply(String,i)}function LA(e){if(e<4)if(e<2){if(e===0)return"";{let t=Be[ee++];if((t&128)>1){ee-=1;return}return Qi(t)}}else{let t=Be[ee++],i=Be[ee++];if((t&128)>0||(i&128)>0){ee-=2;return}if(e<3)return Qi(t,i);let r=Be[ee++];if((r&128)>0){ee-=3;return}return Qi(t,i,r)}else{let t=Be[ee++],i=Be[ee++],r=Be[ee++],n=Be[ee++];if((t&128)>0||(i&128)>0||(r&128)>0||(n&128)>0){ee-=4;return}if(e<6){if(e===4)return Qi(t,i,r,n);{let s=Be[ee++];if((s&128)>0){ee-=5;return}return Qi(t,i,r,n,s)}}else if(e<8){let s=Be[ee++],a=Be[ee++];if((s&128)>0||(a&128)>0){ee-=6;return}if(e<7)return Qi(t,i,r,n,s,a);let o=Be[ee++];if((o&128)>0){ee-=7;return}return Qi(t,i,r,n,s,a,o)}else{let s=Be[ee++],a=Be[ee++],o=Be[ee++],l=Be[ee++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){ee-=8;return}if(e<10){if(e===8)return Qi(t,i,r,n,s,a,o,l);{let u=Be[ee++];if((u&128)>0){ee-=9;return}return Qi(t,i,r,n,s,a,o,l,u)}}else if(e<12){let u=Be[ee++],d=Be[ee++];if((u&128)>0||(d&128)>0){ee-=10;return}if(e<11)return Qi(t,i,r,n,s,a,o,l,u,d);let c=Be[ee++];if((c&128)>0){ee-=11;return}return Qi(t,i,r,n,s,a,o,l,u,d,c)}else{let u=Be[ee++],d=Be[ee++],c=Be[ee++],h=Be[ee++];if((u&128)>0||(d&128)>0||(c&128)>0||(h&128)>0){ee-=12;return}if(e<14){if(e===12)return Qi(t,i,r,n,s,a,o,l,u,d,c,h);{let f=Be[ee++];if((f&128)>0){ee-=13;return}return Qi(t,i,r,n,s,a,o,l,u,d,c,h,f)}}else{let f=Be[ee++],m=Be[ee++];if((f&128)>0||(m&128)>0){ee-=14;return}if(e<15)return Qi(t,i,r,n,s,a,o,l,u,d,c,h,f,m);let p=Be[ee++];if((p&128)>0){ee-=15;return}return Qi(t,i,r,n,s,a,o,l,u,d,c,h,f,m,p)}}}}}function X1(e){return rn.copyBuffers?Uint8Array.prototype.slice.call(Be,ee,ee+=e):Be.subarray(ee,ee+=e)}function Gl(e){let t=Be[ee++];if(Yr[t])return Yr[t](Be.subarray(ee,ee+=e));throw new Error("Unknown extension type "+t)}var _C=new Array(4096);function az(){let e=Be[ee++];if(e>=160&&e<192){if(e=e-160,sa>=ee)return nl.slice(ee-Yn,(ee+=e)-Yn);if(!(sa==0&&yl<180))return R_(e)}else return ee--,gi();let t=(e<<5^(e>1?Ft.getUint16(ee):e>0?Be[ee]:0))&4095,i=_C[t],r=ee,n=ee+e-3,s,a=0;if(i&&i.bytes==e){for(;r<n;){if(s=Ft.getUint32(r),s!=i[a++]){r=1879048192;break}r+=4}for(n+=3;r<n;)if(s=Be[r++],s!=i[a++]){r=1879048192;break}if(r===n)return ee=r,i.string;n-=3,r=ee}for(i=[],_C[t]=i,i.bytes=e;r<n;)s=Ft.getUint32(r),i.push(s),r+=4;for(n+=3;r<n;)s=Be[r++],i.push(s);let o=e<16?LA(e):sz(e);return o!=null?i.string=o:i.string=R_(e)}var bC=(e,t)=>{var i=gi();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let n=Bt[e];return n&&n.isShared&&((Bt.restoreStructures||(Bt.restoreStructures=[]))[e]=n),Bt[e]=i,i.read=PA(i,r),i.read()},oz=typeof self=="object"?self:global;Yr[0]=()=>{};Yr[0].noBuffer=!0;Yr[101]=()=>{let e=gi();return(oz[e[0]]||Error)(e[1])};Yr[105]=e=>{let t=Ft.getUint32(ee-4);ao||(ao=new Map);let i=Be[ee],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let n={target:r};ao.set(t,n);let s=gi();return n.used?Object.assign(r,s):(n.target=s,s)};Yr[112]=e=>{let t=Ft.getUint32(ee-4),i=ao.get(t);return i.used=!0,i.target};Yr[115]=()=>new Set(gi());var lz=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Yr[116]=e=>{let t=e[0],i=lz[t];if(!i)throw new Error("Could not find typed array for code "+t);return new oz[i](Uint8Array.prototype.slice.call(e,1).buffer)};Yr[120]=()=>{let e=gi();return new RegExp(e[0],e[1])};Yr[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=ee;ee+=t-4,wn=[gi(),gi()],wn.position0=0,wn.position1=0;let r=ee;ee=i;try{return gi()}finally{ee=r}};Yr[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function uz(e){let t=yl,i=ee,r=Yn,n=sa,s=nl,a=ao,o=wn,l=new Uint8Array(Be.slice(0,yl)),u=Bt,d=Bt.slice(0,Bt.length),c=rn,h=Nh,f=e();return yl=t,ee=i,Yn=r,sa=n,nl=s,ao=a,wn=o,Be=l,Nh=h,Bt=u,Bt.splice(0,Bt.length,...d),rn=c,Ft=new DataView(Be.buffer,Be.byteOffset,Be.byteLength),f}function I_(){Be=null,ao=null,Bt=null}function iK(e){e.unpack?Yr[e.type]=e.unpack:Yr[e.type]=e}var OA=new Array(147);for(let e=0;e<256;e++)OA[e]=+("1e"+Math.floor(45.15-e*.30103));var ty=new $v({useRecords:!1});ty.unpack;ty.unpackMultiple;ty.unpack;var rK=new Float32Array(1);new Uint8Array(rK.buffer,0,4);var Kg;try{Kg=new TextEncoder}catch{}var e0,RA,iy=typeof Buffer<"u",Y1=iy?Buffer.allocUnsafeSlow:Uint8Array,cz=iy?Buffer:Uint8Array,SC=iy?4294967296:2144337920,de,bi,se=0,js,Gs=null,nK=/[\u0080-\uFFFF]/,Sd=Symbol("record-id"),hz=class extends $v{constructor(e){super(e),this.offset=0;let t,i,r,n,s,a=0,o=cz.prototype.utf8Write?function(b,A,S){return de.utf8Write(b,A,S)}:Kg&&Kg.encodeInto?function(b,A){return Kg.encodeInto(b,de.subarray(A)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,d=e.structures||e.saveStructures,c=e.maxSharedStructures;if(c==null&&(c=d?32:0),c>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=d?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=c>32||h+c>64,m=c+64,p=c+h+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(b,A){if(de||(de=new Y1(8192),bi=new DataView(de.buffer,0,8192),se=0),js=de.length-10,js-se<2048?(de=new Y1(de.length),bi=new DataView(de.buffer,0,de.length),js=de.length-10,se=0):se=se+7&2147483640,t=se,s=l.structuredClone?new Map:null,l.bundleStrings?(Gs=["",""],de[se++]=214,de[se++]=98,Gs.position=se-t,se+=4):Gs=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let S=i.sharedLength||0;if(S>c)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let M=0;M<S;M++){let E=i[M];if(!E)continue;let C,L=i.transitions;for(let N=0,R=E.length;N<R;N++){let V=E[N];C=L[V],C||(C=L[V]=Object.create(null)),L=C}L[Sd]=M+64}a=S}u||(i.nextId=S+64)}r&&(r=!1),n=i||[];try{if(x(b),Gs){bi.setUint32(Gs.position+t,se-Gs.position-t);let S=Gs;Gs=null,x(S[0]),x(S[1])}if(l.offset=se,s&&s.idsToInsert){se+=s.idsToInsert.length*6,se>js&&_(se),l.offset=se;let S=aK(de.subarray(t,se),s.idsToInsert);return s=null,S}return A&oK?(de.start=t,de.end=se,de):de.subarray(t,se)}finally{if(i){if(y<10&&y++,v>1e4)i.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let S=0,M=g.length;S<M;S++)g[S][Sd]=0;g=[]}if(r&&l.saveStructures){let S=i.sharedLength||c;i.length>S&&(i=i.slice(0,S));let M=de.subarray(t,se);return l.saveStructures(i,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(a=S,M)}}A&lK&&(se=t)}};let x=b=>{se>js&&(de=_(se));var A=typeof b,S;if(A==="string"){let M=b.length;if(Gs&&M>=8&&M<4096){let L=nK.test(b);Gs[L?0:1]+=b,de[se++]=193,x(L?-M:M);return}let E;M<32?E=1:M<256?E=2:M<65536?E=3:E=5;let C=M*3;if(se+C>js&&(de=_(se+C)),M<64||!o){let L,N,R,V=se+E;for(L=0;L<M;L++)N=b.charCodeAt(L),N<128?de[V++]=N:N<2048?(de[V++]=N>>6|192,de[V++]=N&63|128):(N&64512)===55296&&((R=b.charCodeAt(L+1))&64512)===56320?(N=65536+((N&1023)<<10)+(R&1023),L++,de[V++]=N>>18|240,de[V++]=N>>12&63|128,de[V++]=N>>6&63|128,de[V++]=N&63|128):(de[V++]=N>>12|224,de[V++]=N>>6&63|128,de[V++]=N&63|128);S=V-se-E}else S=o(b,se+E,C);S<32?de[se++]=160|S:S<256?(E<2&&de.copyWithin(se+2,se+1,se+1+S),de[se++]=217,de[se++]=S):S<65536?(E<3&&de.copyWithin(se+3,se+2,se+2+S),de[se++]=218,de[se++]=S>>8,de[se++]=S&255):(E<5&&de.copyWithin(se+5,se+3,se+3+S),de[se++]=219,bi.setUint32(se,S),se+=4),se+=S}else if(A==="number")if(b>>>0===b)b<64?de[se++]=b:b<256?(de[se++]=204,de[se++]=b):b<65536?(de[se++]=205,de[se++]=b>>8,de[se++]=b&255):(de[se++]=206,bi.setUint32(se,b),se+=4);else if(b>>0===b)b>=-32?de[se++]=256+b:b>=-128?(de[se++]=208,de[se++]=b+256):b>=-32768?(de[se++]=209,bi.setInt16(se,b),se+=2):(de[se++]=210,bi.setInt32(se,b),se+=4);else{let M;if((M=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){de[se++]=202,bi.setFloat32(se,b);let E;if(M<4||(E=b*OA[(de[se]&127)<<1|de[se+1]>>7])>>0===E){se+=4;return}else se--}de[se++]=203,bi.setFloat64(se,b),se+=8}else if(A==="object")if(!b)de[se++]=192;else{if(s){let E=s.get(b);if(E){if(!E.id){let C=s.idsToInsert||(s.idsToInsert=[]);E.id=C.push(E)}de[se++]=214,de[se++]=112,bi.setUint32(se,E.id),se+=4;return}else s.set(b,{offset:se-t})}let M=b.constructor;if(M===Object)w(b,!0);else if(M===Array){S=b.length,S<16?de[se++]=144|S:S<65536?(de[se++]=220,de[se++]=S>>8,de[se++]=S&255):(de[se++]=221,bi.setUint32(se,S),se+=4);for(let E=0;E<S;E++)x(b[E])}else if(M===Map){S=b.size,S<16?de[se++]=128|S:S<65536?(de[se++]=222,de[se++]=S>>8,de[se++]=S&255):(de[se++]=223,bi.setUint32(se,S),se+=4);for(let[E,C]of b)x(E),x(C)}else{for(let E=0,C=e0.length;E<C;E++){let L=RA[E];if(b instanceof L){let N=e0[E];if(N.write){N.type&&(de[se++]=212,de[se++]=N.type,de[se++]=0),x(N.write.call(this,b));return}let R=de,V=bi,F=se;de=null;let H;try{H=N.pack.call(this,b,P=>(de=R,R=null,se+=P,se>js&&_(se),{target:de,targetView:bi,position:se-P}),x)}finally{R&&(de=R,bi=V,se=F,js=de.length-10)}H&&(H.length+se>js&&_(H.length+se),se=sK(H,de,se,N.type));return}}w(b,!b.hasOwnProperty)}}else if(A==="boolean")de[se++]=b?195:194;else if(A==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))de[se++]=211,bi.setBigInt64(se,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)de[se++]=207,bi.setBigUint64(se,b);else if(this.largeBigIntToFloat)de[se++]=203,bi.setFloat64(se,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");se+=8}else if(A==="undefined")this.encodeUndefinedAsNil?de[se++]=192:(de[se++]=212,de[se++]=0,de[se++]=0);else if(A==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+A)},w=this.useRecords===!1?this.variableMapSize?b=>{let A=Object.keys(b),S=A.length;S<16?de[se++]=128|S:S<65536?(de[se++]=222,de[se++]=S>>8,de[se++]=S&255):(de[se++]=223,bi.setUint32(se,S),se+=4);let M;for(let E=0;E<S;E++)x(M=A[E]),x(b[M])}:(b,A)=>{de[se++]=222;let S=se-t;se+=2;let M=0;for(let E in b)(A||b.hasOwnProperty(E))&&(x(E),x(b[E]),M++);de[S+++t]=M>>8,de[S+t]=M&255}:b=>{let A=Object.keys(b),S,M=n.transitions||(n.transitions=Object.create(null)),E=0;for(let L=0,N=A.length;L<N;L++){let R=A[L];S=M[R],S||(S=M[R]=Object.create(null),E++),M=S}let C=M[Sd];if(C)C>=96&&f?(de[se++]=((C-=96)&31)+96,de[se++]=C>>5):de[se++]=C;else{C=n.nextId,C||(C=64),C<m&&this.shouldShareStructure&&!this.shouldShareStructure(A)?(C=n.nextOwnId,C<p||(C=m),n.nextOwnId=C+1):(C>=p&&(C=m),n.nextId=C+1);let L=A.highByte=C>=96&&f?C-96>>5:-1;M[Sd]=C,n[C-64]=A,C<m?(A.isShared=!0,n.sharedLength=C-63,r=!0,L>=0?(de[se++]=(C&31)+96,de[se++]=L):de[se++]=C):(L>=0?(de[se++]=213,de[se++]=114,de[se++]=(C&31)+96,de[se++]=L):(de[se++]=212,de[se++]=114,de[se++]=C),E&&(v+=y*E),g.length>=h&&(g.shift()[Sd]=0),g.push(M),x(A))}for(let L=0,N=A.length;L<N;L++)x(b[A[L]])},_=b=>{let A;if(b>16777216){if(b-t>SC)throw new Error("Packed buffer would be larger than maximum buffer size");A=Math.min(SC,Math.round(Math.max((b-t)*(b>67108864?1.25:2),4194304)/4096)*4096)}else A=(Math.max(b-t<<2,de.length-1)>>12)+1<<12;let S=new Y1(A);return bi=new DataView(S.buffer,0,A),de.copy?de.copy(S,0,t,b):S.set(de.slice(t,b)),se-=t,t=0,js=S.length-10,de=S}}useBuffer(e){de=e,bi=new DataView(de.buffer,de.byteOffset,de.byteLength),se=0}};RA=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,iz];e0=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,r)}else if(r>0&&r<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),s.setUint32(a+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),i(r)}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=101,r[n++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=120,r[n++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?AC(e,16,t):MC(iy?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==cz&&this.structuredClone?AC(e,lz.indexOf(i.name),t):MC(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function AC(e,t,i,r){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=i(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=i(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=i(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function MC(e,t){let i=e.byteLength;var r,n;if(i<256){var{target:r,position:n}=t(i+2);r[n++]=196,r[n++]=i}else if(i<65536){var{target:r,position:n}=t(i+3);r[n++]=197,r[n++]=i>>8,r[n++]=i&255}else{var{target:r,position:n,targetView:s}=t(i+5);r[n++]=198,s.setUint32(n,i),n+=4}r.set(e,n)}function sK(e,t,i,r){let n=e.length;switch(n){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:n<256?(t[i++]=199,t[i++]=n):n<65536?(t[i++]=200,t[i++]=n>>8,t[i++]=n&255):(t[i++]=201,t[i++]=n>>24,t[i++]=n>>16&255,t[i++]=n>>8&255,t[i++]=n&255)}return t[i++]=r,t.set(e,i),i+=n,i}function aK(e,t){let i,r=t.length*6,n=e.length-r;for(t.sort((s,a)=>s.offset>a.offset?1:-1);i=t.pop();){let s=i.offset,a=i.id;e.copyWithin(s+r,s,n),r-=6;let o=s+r;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function Jh(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");RA.unshift(e.Class),e0.unshift(e)}iK(e)}var dz=new hz({useRecords:!1});dz.pack;dz.pack;var oK=512,lK=1024,EC=new hz({structuredClone:!0});Jh({Class:An.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,An.prototype),e}});Jh({Class:jr.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,jr.prototype),e}});Jh({Class:ju.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ju.prototype),e}});Jh({Class:pC.prototype.constructor,type:4,write(e){return e.id},read(e){return new pC(e)}});Jh({Class:mC.prototype.constructor,type:5,write(e){return e.data},read(e){return new mC(e)}});Jh({Class:Jv.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Jv.prototype),e}});function uK(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function z_(e){if(Kv(e))return e;if(Array.isArray(e))return e.map(z_);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=z_(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var B_;(e=>{function t(n){return EC.pack(n)}e.serialize=t;function i(n){return EC.unpack(n)}e.deserialize=i;function r(n){return uK(t(z_(n))).toString()}e.checksum=r})(B_||(B_={}));var k_;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(k_||(k_={}));var N_;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(N_||(N_={}));var F_;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:as.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(r==="SpotLight")return{type:r,color:as.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:as.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(F_||(F_={}));var U_;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(U_||(U_={}));var H_;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(H_||(H_={}));var V_;(e=>e.defaultData={...H_.defaultData,...U_.defaultData,cloner:null,booleanExclude:null})(V_||(V_={}));var fz=(e=>(e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center",e[e.Justify=4]="Justify",e))(fz||{}),pz=(e=>(e[e.Top=1]="Top",e[e.Center=2]="Center",e[e.Bottom=3]="Bottom",e))(pz||{}),mz=(e=>(e[e.None=1]="None",e[e.Upper=2]="Upper",e[e.Lower=3]="Lower",e))(mz||{}),j_;(e=>e.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:as.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"})(j_||(j_={}));var gz=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],cK=["wrapping","image"],fu;(e=>{function t(n,s){return n==="light"&&s?i(s):r(n)}e.defaultData=t;function i(n){switch(n){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(n){switch(n){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Sr.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Sr.fromHex(6710886),a:1},colorB:{...Sr.fromHex(6710886),a:1},colorC:{...Sr.fromHex(16777215),a:1},colorD:{...Sr.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:as.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:as.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:as.fromHexAndA(0,1),contourColor:as.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(fu||(fu={}));var _a;(e=>{function t(l){return!l.layers.some(u=>{if(u.data.type==="texture"&&u.data.projection!==0||u.data.type==="depth"&&!u.data.isWorldSpace||u.data.type==="noise"||u.data.type==="displace")return!0})&&!r(l)}e.isMergable=t;function i(l){let u="";return l.layers.forEach(d=>{Object.entries(d.data).forEach(([c,h])=>{u+=`${c}${h}`,Array.isArray(h)?h.forEach(f=>u+=`${f}`):typeof h=="object"?Object.values(h).forEach(f=>{typeof f=="number"?u+=`${f.toFixed(4)}`:u+=`${f}`}):u+=`${h}`})}),u}e.getHash=i;function r(l){let u=0;for(let d of l.layers)"alpha"in d.data&&d.data.type!=="light"&&d.data.type!=="fresnel"&&(u+=(1-u)*d.data.alpha);return u<1}e.isTransparent=r;function n(){return{layers:new jr}}e.defaultEmptyData=n;function s(l="layer1",u="layer2"){return a("phong",l,u)}e.defaultData=s;function a(l,u="layer1",d="layer2"){let c=new jr;return c.push({fi:0,data:fu.defaultData("light",l),id:u}),c.push({fi:1,data:fu.defaultData("color"),id:d}),{layers:c}}e.defaultTwoLayerData=a;function o(l,u="basic",d="layer1",c="layer2"){let h=fu.defaultData("texture");Object.assign(h.texture,{image:l});let f=new jr;return f.push({fi:0,data:h,id:d}),f.push({fi:1,data:fu.defaultData("light",u),id:c}),{layers:f}}e.defaultTwoLayerTextureData=o})(_a||(_a={}));var t0;(e=>{function t(){return{points:new jr,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(t0||(t0={}));var G_;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t})(G_||(G_={}));var i0;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:t0.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};throw new Error("not implemented")}e.defaultData=t})(i0||(i0={}));var mp;(e=>{e.identity={...T_.identity,hiddenMatrix:Vu.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function i(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=i;function r(n,s){return{position:Er.isEqual(n.position,s.position)?null:s.position,rotation:Er.isEqual(n.rotation,s.rotation)?null:s.rotation,scale:Er.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Vu.isEqual(n.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}e.diff=r})(mp||(mp={}));var vo;(e=>e.defaultData={states:new jr,events:new jr,visible:!0,raycastLock:!1,...mp.identity})(vo||(vo={}));var TC;(e=>e.defaultData={type:"Empty",...vo.defaultData})(TC||(TC={}));var r0;(e=>e.defaultData={type:"Mesh",...vo.defaultData,...V_.defaultData})(r0||(r0={}));var CC;(e=>e.defaultData={type:"TextFrame",...vo.defaultData,...j_.defaultData})(CC||(CC={}));var W_;(e=>e.defaultData={...vo.defaultData,...mp.identity,...dp.defaultData})(W_||(W_={}));var DC;(e=>{function t(i){return{...vo.defaultData,...F_.defaultData(i)}}e.defaultData=t})(DC||(DC={}));var PC;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Vu.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new jr,events:new jr,...dp.defaultData},e.defaultMeshObject={name:"Rectangle",...vo.defaultData,...r0.defaultData,geometry:i0.defaultData("RectangleGeometry"),material:_a.defaultTwoLayerData("basic","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...vo.defaultData,...r0.defaultData,geometry:i0.defaultData("BooleanGeometry"),material:_a.defaultTwoLayerData("phong","layer1","layer2")}))(PC||(PC={}));var n0;(e=>{function t(r,n){if(n===void 0)return r;let s={...r};return"material"in s&&"material"in n&&n.material&&(s.material=fC(s.material,a=>{if(typeof a!="string")for(let[o,l]of Object.entries(n.material.layers)){let u=a.layers.data(o);u&&Wv(u,l)}}).data),s.materials&&n.materials&&(s.materials=fC(s.materials,a=>{var o,l;for(let u=0;u<s.materials.length;u++){let d=n.materials[u];if(typeof d!="string")for(let[c,h]of Object.entries(d.layers)){let f=(l=(o=a[u])==null?void 0:o.layers)==null?void 0:l.data(c);f&&Wv(f,h)}}}).data),s}e.patchMaterialState=t;function i(r,n){var a,o;if(n===void 0)return r;let s={...r};if(Object.assign(s,mp.merge(s,n)),kh.is(r.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let l=n;((a=l.orthographic)==null?void 0:a.zoom)!==void 0&&(s.orthographic.zoom=l.orthographic.zoom),((o=l.perspective)==null?void 0:o.zoom)!==void 0&&(s.perspective.zoom=l.perspective.zoom),l.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=l.isUpVectorFlipped),l.targetOffset!==void 0&&(s.targetOffset=l.targetOffset)}else if(r.type==="Mesh")s.geometry={...s.geometry},Object.assign(s.geometry,n.geometry),s=t(s,n);else if(N_.is(r.type)){let l=n;l.intensity!==void 0&&(s.intensity=l.intensity),l.color!==void 0&&(typeof l.color=="string"?s.color=l.color:s.color=Sr.clone(l.color))}return s}e.patch=i})(n0||(n0={}));var s0;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3})(s0||(s0={}));var X_;(e=>e.defaultData={orbitControls:s0.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,stopMode:"manual",duration:5e3,transparent:!1},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,n=0;return i<5?n=-30:i<10&&(n=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,n],"show"]}),gameControlObject:null})(X_||(X_={}));var Y_;(e=>{function t(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},GI(r,An.prototype)}e.defaultColors=t;function i(){return{materials:new An,images:new An,colors:new An,audios:new An,penumbraSize:[.5,.5,.5]}}e.emptyData=i})(Y_||(Y_={}));function LC(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,n=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],s=[0,1];for(let o=2;o<10;o++)n.push(n[1]),s.push(1);let a={...LZ(Cl(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...Cl(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function q1(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function Q1(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach(n=>{typeof n!="string"&&t(n)}):"material"in r&&typeof r.material!="string"&&t(r.material)})}function hK(e){Object.assign(e.scene.publish,{orbitControls:{...s0.defaultData,...Cl(e.scene.publish.orbitControls)}})}function dK(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[n,s]of Object.entries(r))if((gz.includes(n)||typeof s=="boolean")&&delete r[n],n==="texture")for(let[a,o]of Object.entries(s))(cK.includes(a)||typeof o=="boolean")&&delete s[a]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(a=>{t(a)})})})}function fK(e){e.scene.publish.withBackground=!0}function pK(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1}}function mK(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(n=>n+1),r.linear.scale=r.linear.scale.map(n=>n+1))})}function gK(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function vK(e){e.scene.objects.traverse((t,i)=>{var n;let r=e.scene.objects.parent(t);i.type==="Mesh"&&(!r||((n=e.scene.objects.data(r).geometry)==null?void 0:n.type)!=="BooleanGeometry")&&(i.booleanExclude=null)})}function OC(e){e.layers===void 0&&Object.assign(e,_a.defaultTwoLayerData("lambert"))}function Z1(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let n={...Cl(t),colors:i,steps:r};Object.assign(t,n)}})}function yK(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function RC(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&Z1(r)}):"material"in i&&typeof i.material!="string"&&Z1(i.material)}),Object.values(e.shared.materials).forEach(t=>Z1(t))}function xK(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function wK(e){e.shared.audios=GI({},An.prototype)}function _K(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"basic",alpha:1,visible:!0,mode:0},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:n})}})}function bK(e){Object.entries(Cl(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Cl(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function SK(e){e.scene.publish.settings.web.preload=!1}function IC(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}var zC=18;function AK(e){var i;let t=(i=e.schema)!=null?i:0;t!==zC&&(console.warn("updating from ",t,"to ",zC),t<1&&(Q1(e,LC),q1(e,LC),e.schema=1),t<2&&(hK(e),e.schema=2),t<3&&(dK(e),e.schema=3),t<4&&(fK(e),e.schema=4),t<5&&(pK(e),e.schema=5),t<6&&(mK(e),e.schema=6),t<7&&(gK(e),e.schema=7),t<8&&(vK(e),e.schema=8),t<9&&(RC(e),e.schema=9),t<10&&(yK(e),e.schema=10),t<11&&(xK(e),e.schema=11),t<12&&(RC(e),e.schema=12),t<13&&(wK(e),e.schema=13),t<14&&(_K(e),e.schema=14),t<15&&(bK(e),e.schema=15),t<16&&(SK(e),e.schema=16),t<17&&(Q1(e,IC),q1(e,IC),e.schema=17),t<18&&(Q1(e,OC),q1(e,OC),e.schema=18))}var q_;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(q_||(q_={}));var BC;(e=>e.defaultData={object:null,state:null,repeat:!1,cycle:!1,rewind:!1,easing:4,delay:0,delayDirection:"start-once",duration:1e3})(BC||(BC={}));var kC;(e=>(e.defaultData={type:12,trigger:"mouseDown",interaction:"play",volume:.5,delay:0,loop:0},e.isPlayable=t=>t.type===12&&t.interaction==="play",e.isPausable=t=>t.type===12&&t.interaction!=="play"))(kC||(kC={}));var Q_;(e=>{function t(i){return i.type===0||i.type===1||i.type===5||i.type===6}e.is=t})(Q_||(Q_={}));function Z_(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new ft,u=0;for(let d=0;d<e.length;++d){let c=e[d],h=0;if(i!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in c.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(c.attributes[f]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(o!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in c.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[f]===void 0&&(a[f]=[]),a[f].push(c.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(c.userData),t){let f;if(i)f=c.index.count;else if(c.attributes.position!==void 0)f=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,d),u+=f}}if(i){let d=0,c=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let m=0;m<f.count;++m)c.push(f.getX(m)+d);d+=e[h].attributes.position.count}l.setIndex(c)}for(let d in s){let c=NC(s[d]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,c)}for(let d in a){let c=a[d][0].length;if(c===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<c;++h){let f=[];for(let p=0;p<a[d].length;++p)f.push(a[d][p][h]);let m=NC(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(m)}}return l}function NC(e){let t,i,r,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new xt(s,i,r)}var K1={type:"change"},FC={type:"changeZoom"},MK={type:"changePan"},xc={type:"start"},Ad={type:"end"},J1=new ii,EK=new q,TK=2*Math.PI,CK=1e-8,DK=.01,UC=2,$1=.125,HC=2,ex=1,tx=1,ix=.1,vz=class extends Kr{constructor(e,t,i=!1){super(),this.object=e,this.domElement=t,this.isExport=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Nn.DOLLY_ROTATE,Nn.PAN],this.offset=new T,this.eye=new T,this.lastPosition=new T,this.lastQuaternion=new ii,this.current=new q,this.overShoot=new q,this.overRatio=new q,this.spherical=new CT,this.sphericalDelta=new CT,this.panOffset=new T,this.panLeftV=new T,this.panUpV=new T,this.panV=new T,this.rotateStart=new q,this.rotateEnd=new q,this.rotateDelta=new q,this.panStart=new q,this.panEnd=new q,this.panDelta=new q,this.dollyStart=new q,this.dollyEnd=new q,this.dollyDelta=new q,this.rotationRangeFactor=new q,this.panRangeFactor=new q,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=r=>{let n=this.object.position;this.offset.copy(n).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(J1.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(J1),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-$1),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),n.copy(this.target).add(this.offset);let s=this.spherical.phi%TK;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Yt.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),s>0&&s>Math.PI||s<0&&s>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-$1,this.sphericalDelta.phi*=1-$1):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>DK||8*(1-this.lastQuaternion.dot(this.object.quaternion))>CK?(this.dispatchEvent(K1),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(this.isPointerDown=!0,Pt.length===1&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),r.pointerType==="touch"||r.pointerType==="pen"?this.onPointerDownTouch(r):this.onPointerDownMouse(r))},this.onPointerMove=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r))},this.onPointerUp=r=>{this.isPointerDown=!1,Pt.length===0&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(Ad),this.state=-1},this.onPointerDownMouse=r=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[r.button]:n=this.mouseButtonsPlay[r.button],n){case 0:if(r.altKey===!0&&!r.shiftKey&&!Km(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(Km(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(Km(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(xc)},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}},this.onPointerDownTouch=r=>{switch(this.touches[Pt.length-1]){case Nn.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Nn.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Nn.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Nn.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(xc)},this.onPointerMoveTouch=r=>{switch(this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=VI(()=>this.dispatchEvent(Ad),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent(xc),this.handleMouseWheel(r),this.dispatchEndDebounced())},this.onGesture=r=>{if(this.enabled!==!1)if(r.preventDefault(),r.type==="gesturechange"){if(this.enableZoom===!1)return;this.dispatchEvent(xc),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update()}else this.dispatchEvent(Ad)},this.onContextMenu=r=>{this.enabled!==!1&&r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key)},this.onKeyUp=()=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(Pt[0]))},this.onPointerHover=r=>{if(!(r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let n={clientX:window.innerWidth/2,clientY:window.innerHeight/2};this.hoverRotatePanMode===2?this.handleMouseDownPan(n):this.hoverRotatePanMode===1&&this.handleMouseDownRotate(n),this.isFirstHover=!1}this.hoverRotatePanMode===2?this.handleMouseMovePan(r,ix):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,ix),this.timerHover=window.setTimeout(()=>{this.isPointerDown=!1},30)}},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(K1),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,i,r=!1){this.target.copy(e),this.object.position.copy(t),this.object.zoom=i,this.object.isUpVectorFlipped=r,this.object.updateProjectionMatrix(),this.dispatchEvent(K1),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,this.hoverRotatePanMode!==0&&this.domElement.addEventListener("pointermove",this.onPointerHover),ix=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,UC=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(J1.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Lo(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Lo(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Lo(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=Lo(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=Nn.ROTATE),e.panTouches===1&&(this.touches[0]=Nn.PAN),e.orbitTouches===2&&(this.touches[1]=Nn.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=Nn.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=Nn.ROTATE),e.panTouches===3&&(this.touches[2]=Nn.PAN)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),E_||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),E_||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,n,s,a,o){this.overShoot.set(0,0);let l,u,d;e instanceof T?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,u=e.phi,this.current.set(Lo(this.spherical.theta),Lo(this.spherical.phi)),d=!1),i===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!d&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x),r===n&&(l=0)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y),s===a&&(u=0)),d||(this.overShoot.x=Lo(this.overShoot.x),this.overShoot.y=Lo(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=VC(Math.abs(this.overRatio.x)),this.overRatio.y=VC(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&(u*=1-this.overRatio.y)):i===2&&(!d&&(this.overRatio.x>.002||this.overRatio.y>.002)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=this.overShoot.x*.05,u=this.overShoot.y*.05,d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof T?(e.x=l,e.y=u):(e.theta=l,e.phi=u)}setEnableDampingSpeed(e){this.enableDamping=e,ex=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*UC}getZoomScale(){return Math.pow(.95,HC)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/i.clientHeight,this.object.matrix),this.panUp(2*t*n/i.clientHeight,this.object.matrix)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix));this.dispatchEvent(MK)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(FC)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(FC)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(xc),this.dollyOut(e),this.dispatchEvent(Ad)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(xc),this.dollyIn(e),this.dispatchEvent(Ad)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){Xv&&Yv<15.5&&!Ki?(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)):this.rotateDelta.set(e.movementX,e.movementY),this.rotateDelta.multiplyScalar(ex*t).rotateAround(EK,-this.object.angleOffsetFromUp);let i=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/i.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/i.clientHeight),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){Xv&&Yv<15.5&&!Ki?(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)):this.panDelta.set(e.movementX,e.movementY),this.panDelta.multiplyScalar(tx*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(FZ===!1&&Km(e)===!1&&PK(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(tx),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Pt.length===2){let e=.5*(Pt[0].pageX+Pt[1].pageX),t=.5*(Pt[0].pageY+Pt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Pt[0].pageX,Pt[0].pageY)}handleTouchStartPan(){if(Pt.length===2){let e=.5*(Pt[0].pageX+Pt[1].pageX),t=.5*(Pt[0].pageY+Pt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Pt[0].pageX,Pt[0].pageY)}handleTouchStartDolly(){let e=Pt[0].pageX-Pt[1].pageX,t=Pt[0].pageY-Pt[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Pt.length===2){let i=G1(e),r=.5*(e.pageX+i.x),n=.5*(e.pageY+i.y);this.rotateEnd.set(r,n)}else{if(e.pointerId!==Pt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(ex);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Pt.length===2){let t=G1(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==Pt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(tx),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=G1(e),i=e.pageX-t.x,r=e.pageY-t.y,n=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,HC)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function Lo(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function VC(e){return 1-Math.pow(1-e,4)}function PK(e){return e.wheelDeltaY===0||e.deltaY===0?J0&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var rx={type:"change"},LK={type:"lock"},OK={type:"unlock"},RK=new T,IK=new T,ws=new T,Wl=new T,jC=new T,nx=new Ke,GC=new Ke,zK=new Ke,BK=new Ke,Md=new ii,kK=new ii,WC=new T(0,1,0),sx=new T(1,1,1),NK=1,FK=.025,UK=16e-6,HK=12,VK=20,gr=new cs,Un=new Xi,K_=class extends Kr{constructor(e,t,i,r,n,s){var l,u,d,c,h,f,m,p,g,v,y,x,w,_,b;if(super(),this.object=t,this.domElement=i,this.bvh=r,this.cameraFollow=n,this.camera=s,this.enableDamping=!0,this.position0=new T,this.rotation0=new $n(0,0,0,"XYZ"),this.scale0=new T,this.hiddenMatrix0=new Ke,this.target0=new T,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new $n(0,0,0,"YXZ"),this.position0Cam=new T,this.quat0Cam=new ii,this.scale0Cam=new T,this.hiddenMatrix0Cam=new Ke,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.collider={radius:40,segment:new cs(new T(0,-40,0),new T(0,40,0)),matrix:new Ke},this.euler=new $n(0,0,0,"YXZ"),this.eulerDelta=new T,this.lastQuaternion=new ii,this.lastPosition=new T,this.lastCameraQuaternion=new ii,this.lastCameraPosition=new T,this.PI_2=Math.PI/2,this.prevMouse=new q,this.velocityTarget=new T,this.velocity=new T,this.directionXZ=new T,this.rotVelocityStick=new T,this.rotVelocityTarget=new T,this.rotVelocity=new T,this.rotDirection=new T,this.parentY=new T,this.objectRot={x:0,y:0},this.firstPointerId=-1,this.actionStates={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.onObject=!1,this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Ke,this.objectToTarget=new T,this.objectToTarget0=new T,this.deltaPos=new T,this.deltaPosXZ=new T,this.objectToCamXZ=new T,this.objectToCamXZ0=new T,this.targetToCamera=new T,this.targetToCamera0=new T,this.cameraPolarAxis0=new T,this.targetPos=new T,this.targetQuat=new ii,this.lerpFactorPos=new T().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.dummyTarget=new Yt,this.parentMatrixWorld=new Ke,this.parentWorldQuat=new ii,this.parentWorldQuatInv=new ii,this.parentWorldScale=new T,this.objXZQuat=new ii,this.objXZQuatInv=new ii,this.objXZRotMat=new Ke,this.physLoopPerFrame=1,this.isFirstPerson=!1,this.onPointerDown=A=>{A.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=A.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Ki&&(!Xv||Yv>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(A.clientX,A.clientY))},this.onPointerUp=A=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),A.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=A=>{if(A.pointerId!==this.firstPointerId)return;let S=A.clientX-this.prevMouse.x,M=A.clientY-this.prevMouse.y;this.prevMouse.set(A.clientX,A.clientY),A.pointerType==="mouse"&&this.rotBy!=="keys"&&(Xv&&Yv<15.5&&!Ki?(this.eulerDelta.y=-S*this.mouseOrbitSensitivity,this.eulerDelta.x=-M*this.mouseOrbitSensitivity):(this.eulerDelta.y=-A.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-A.movementY*this.mouseOrbitSensitivity)),A.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-S*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-M*this.mouseOrbitSensitivity*5),this.dispatchEvent(rx)},this.onPointerlockChange=A=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(LK),K_.isLocked=!0):(this.dispatchEvent(OK),K_.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=A=>{A.preventDefault();for(let S of this.keyAssignments)if(A.key.toUpperCase()===S[1]||A.key===S[1]){this.actionStates[S[0]]=1;break}this.dispatchEvent(rx)},this.onKeyUp=A=>{for(let S of this.keyAssignments)if(A.key.toUpperCase()===S[1]||A.key===S[1]||A.code.slice(3,A.code.length).toUpperCase()===S[1]){this.actionStates[S[0]]=0;break}},t.objectType==="CombinedCamera"&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.matrix.premultiply(this.object.hiddenMatrix),this.object.hiddenMatrix.identity(),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation),this.objectRot.y=this.object.rotation.y,this.isFirstPerson===!1){let A=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,A,0)}if(this.dummyTarget.matrixAutoUpdate=!1,this.dummyTarget.position.copy(this.object.position),this.dummyTarget.rotation.copy(this.object.rotation),this.dummyTarget.updateMatrix(),this.parentMatrixWorld.multiplyMatrices(this.object.matrixWorld,this.object.matrix.clone().invert()),this.parentMatrixWorld.decompose(ws,this.parentWorldQuat,this.parentWorldScale),this.parentWorldQuatInv.copy(this.parentWorldQuat).invert(),this.parentY.set(0,1,0).applyQuaternion(this.parentWorldQuat),this.isFirstPerson){let A=this.object;this.target0.copy(A.getTarget()),this.zoom0=A.zoom}else this.cameraFollow===!0&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom);if(this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),(l=this.camera.parent)!=null&&l.parent?this.camera.hiddenMatrix.copy(this.camera.parent.matrixWorld).invert():this.camera.hiddenMatrix.identity(),(u=this.object.parent)!=null&&u.parent&&(this.camera.hiddenMatrix.multiply(this.parentMatrixWorld),this.camera.matrixWorld.premultiply(this.parentMatrixWorld.clone().invert())),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let A=new T(0,0,-1).applyQuaternion(this.camera.quaternion),S=new T().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(S),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let M;if(Math.abs(A.y)<1e-6){S.y=0,A.y=0;let C=S.projectOnVector(A);this.targetToCamera0.copy(C).negate(),M=this.camera.position.clone().add(C)}else{let C=A.multiplyScalar(S.y/A.y);this.targetToCamera0.copy(C).negate(),M=C.clone().add(this.camera.position)}this.objectToTarget0.subVectors(M,this.object.position);let E=new $n().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-E.x,E.x=0,E.z=0,E.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(E)}if(this.isObjectCamera=this.object.objectType==="CombinedCamera",this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=(d=e.rotByTouch)!=null?d:"joystick",this.rotBy=(c=e.rotBy)!=null?c:"keys",this.rotationMode=(h=e.rotationMode)!=null?h:"normal",this.moveMode=(f=e.moveMode)!=null?f:"walk",this.collisionEnabled=e.collisionEnabled,this.speedTranslate=((m=e.speedTranslate)!=null?m:250)*NK,this.speedOrbit=((p=e.speedRotate)!=null?p:100)*FK,this.mouseOrbitSensitivity=((g=e.speedRotate)!=null?g:100)*UK,this.keyAssignments=e.keyAssignments.map(A=>{let S=[A[0],A[1]];return S[1]==="\u25B2"?S[1]="ArrowUp":S[1]==="\u25C0"?S[1]="ArrowLeft":S[1]==="\u25BC"?S[1]="ArrowDown":S[1]==="\u25B6"?S[1]="ArrowRight":S[1]==="\u21E7"?S[1]="Shift":S[1]==="\u21B5"?S[1]="Enter":S[1]==="Space"?S[1]=" ":S[1]==="\u2318"?S[1]="Meta":S[1]==="Ctrl"?S[1]="Control":S[1]==="Esc"&&(S[1]="Escape"),S}),e.rotBy==="mouse"){let A;A=this.keyAssignments.findIndex(S=>S[0]==="rotNegX"),A!==-1&&(this.keyAssignments[A][1]=""),A=this.keyAssignments.findIndex(S=>S[0]==="rotPosX"),A!==-1&&(this.keyAssignments[A][1]=""),A=this.keyAssignments.findIndex(S=>S[0]==="rotPosY"),A!==-1&&(this.keyAssignments[A][1]=""),A=this.keyAssignments.findIndex(S=>S[0]==="rotNegY"),A!==-1&&(this.keyAssignments[A][1]="")}this.lerpFactorPosStart=1-.02**(1/(((v=e.delayPos[0])!=null?v:.3)*60)),this.lerpFactorPosEnd=1-.02**(1/(((y=e.delayPos[1])!=null?y:.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(((x=e.delayRot[0])!=null?x:.3)*60)),this.lerpFactorRotEnd=1-.02**(1/(((w=e.delayRot[1])!=null?w:.3)*60)),this.lerpFactorPosCamera=1-.02**(1/(((_=e.delayPosCamera)!=null?_:.3)*60)),this.lerpFactorRotCamera=1-.02**(1/(((b=e.delayRotCamera)!=null?b:.3)*60)),this.gravity=e.gravity*HK,this.jumpPower=e.jumpPower*VK,this.resetYPosition=e.resetYPosition,this.orientMode=e.autoOrientMove?e.orientMode:"none",e.collider.type==="capsule"?(this.collider.radius=e.collider.radius,this.collider.segment.start.y=e.collider.height/2-e.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y):e.collider.type==="sphere"&&(this.collider.radius=e.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0);let a=new T().fromArray(e.collider.position),o=new ii().setFromEuler(new $n().fromArray([...e.collider.rotation,"XYZ"]));this.collider.matrix.compose(a,o,sx),e.cameraXAxis!==void 0&&(this.cameraXAxis=e.cameraXAxis,this.cameraYAxis=e.cameraYAxis,this.minPolarAngle=e.cameraRotXLimits[0],this.maxPolarAngle=e.cameraRotXLimits[1],this.minAzimuthAngleRel=e.cameraRotYLimits[0],this.maxAzimuthAngleRel=e.cameraRotYLimits[1])}reset(e=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),e===!0){if(this.object.rotation.reorder("YXZ"),this.isFirstPerson===!1){let t=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,t,0)}this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.dummyTarget.position.copy(this.object.position),this.dummyTarget.rotation.copy(this.object.rotation),this.dummyTarget.updateMatrix(),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}this.isObjectCamera||this.object.updateMatrix(),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(rx)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect()}resetTo(e,t,i){}update(e){if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;let t=e/1e3,i=t*60;if(this.moveMode==="walk"&&this.collisionEnabled&&(this.actionStates.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.actionStates.jump=0,this.onObject=!1),this.velocityTarget.y+=this.onObject?0:this.gravity*i),this.moveMode==="fly"&&(this.velocityTarget.y=(this.actionStates.movePosY-this.actionStates.moveNegY)*this.speedTranslate),this.directionXZ.z=this.actionStates.movePosZ-this.actionStates.moveNegZ,this.directionXZ.x=this.actionStates.movePosX-this.actionStates.moveNegX,this.directionXZ.normalize(),this.actionStates.moveNegZ||this.actionStates.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.actionStates.moveNegX||this.actionStates.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**i),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**i),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**i),this.orientMode!=="none"&&this.isFirstPerson===!1){let r=Wl.copy(this.velocity);r.y=0,this.deltaPos.set(0,this.velocity.y*t,r.length()*t*-1)}else this.deltaPos.copy(this.velocity).multiplyScalar(t);if(this.deltaPos.applyQuaternion(this.object.quaternion),this.deltaPosXZ.copy(this.deltaPos),this.deltaPosXZ.y=0,this.rotDirection.y=Number(this.actionStates.rotPosY)-Number(this.actionStates.rotNegY),this.rotDirection.x=Number(this.actionStates.rotPosX)-Number(this.actionStates.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.actionStates.rotPosX||this.actionStates.rotNegX)||this.rotationMode==="steer"&&(this.actionStates.rotPosX||this.actionStates.rotNegX)&&(this.actionStates.movePosZ||this.actionStates.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.actionStates.rotPosY||this.actionStates.rotNegY)||this.rotationMode==="steer"&&(this.actionStates.rotPosY||this.actionStates.rotNegY)&&(this.actionStates.movePosZ||this.actionStates.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(t),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**i):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**i),this.euler.x+=this.rotVelocity.x*t,this.euler.y+=this.rotVelocity.y*t,this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let r=ws,n=Wl.copy(this.directionXZ).applyQuaternion(this.parentWorldQuat);n.x*=-1,this.camera.getWorldDirection(r);let s=jC.copy(this.parentY).multiplyScalar(r.dot(this.parentY));if(r.sub(s),this.dummyTarget.rotation.y=r.angleTo(n)*(r.cross(n).y>0?-1:1),this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(WC,this.euler.y-this.euler0.y);let a=Wl.copy(this.objectToCamXZ).normalize(),o=this.deltaPosXZ.sub(ws.copy(a).multiplyScalar(this.deltaPosXZ.dot(a))).cross(a).y;this.euler.y-=Math.atan2(o,this.objectToCamXZ.length())}}this.cameraFollow===!0&&this.moveMode==="walk"&&this.isFirstPerson===!1?this.cameraXAxis==="Limit"?this.euler.x=Mt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Mt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):(this.cameraXAxis==="Limit"||this.isFirstPerson||this.cameraFollow===!0)&&(this.euler.x=Mt.clamp(this.euler.x,-this.PI_2,this.PI_2)),(this.isFirstPerson||this.moveMode!=="walk")&&(this.dummyTarget.rotation.x=this.euler.x),(this.isFirstPerson||this.orientMode==="none")&&(this.dummyTarget.rotation.y=this.euler.y),this.dummyTarget.rotation.x=Mt.clamp(this.dummyTarget.rotation.x,-this.PI_2,this.PI_2),this.objectRot.x=this.euler.x,this.objectRot.y=this.euler.y,this.object.quaternion.copy(this.dummyTarget.quaternion),this.physLoopPerFrame=this.onObject?1:5,this.deltaPos.divideScalar(this.physLoopPerFrame);for(let r=0;r<this.physLoopPerFrame;r++)this.dummyTarget.position.add(this.deltaPos),this.collisionEnabled&&this.collisionAdjustment(t/this.physLoopPerFrame);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.position.lerp(this.dummyTarget.position,1-(1-.5)**i),this.isFirstPerson===!1&&this.object.quaternion.multiply(this.objXZQuat),this.isObjectCamera||this.object.updateMatrix(),this.isFirstPerson===!1&&this.object.quaternion.multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let r=this.objectToTarget.add(this.object.position),n=this.targetToCamera.add(r);nx.lookAt(n,r,WC).setPosition(n),nx.decompose(this.targetPos,this.targetQuat,ws),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**i),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**i),this.camera.updateMatrix(),this.camera.matrixWorldNeedsUpdate=!0,this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Mt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Mt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&8*(1-this.lastQuaternion.dot(this.object.quaternion))<this.threshEndRotate&&(!this.camera||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode!=="walk"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Md.setFromAxisAngle(this.parentY,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Mt.clamp(this.objectRot.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.objectRot.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Mt.clamp(this.objectRot.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Mt.clamp(this.objectRot.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=ws.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=kK.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}collisionAdjustment(e){var n;let t=RK.set(0,0,0);this.dummyTarget.updateMatrix();let i=nx.multiplyMatrices(this.parentMatrixWorld,this.dummyTarget.matrix).multiply(this.objXZRotMat).multiply(this.collider.matrix).decompose(ws,Md,Wl).compose(ws,Md,sx);this.bvh.dynamic.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;Un.makeEmpty();let a=BK.copy(s.matrixWorld).decompose(ws,Md,Wl).compose(ws,Md,sx),o=GC.copy(a).invert(),l=zK.copy(GC).multiply(i);gr.copy(this.collider.segment),gr.start.applyMatrix4(l),gr.end.applyMatrix4(l);let u=IK.copy(this.dummyTarget.position).applyMatrix4(o);Un.expandByPoint(gr.start),Un.expandByPoint(gr.end),Un.min.addScalar(-this.collider.radius),Un.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:d=>d.intersectsBox(Un),intersectsTriangle:d=>{let c=ws,h=Wl,f=d.closestPointToSegment(gr,c,h);if(f<this.collider.radius){let m=this.collider.radius-f,p=h.sub(c).normalize(),g=jC.copy(u);g.addScaledVector(p,m);let v=g.applyMatrix4(a).sub(this.dummyTarget.position);t.add(v),gr.start.addScaledVector(p,m),gr.end.addScaledVector(p,m)}}})}),Un.makeEmpty(),gr.copy(this.collider.segment),gr.start.applyMatrix4(i),gr.end.applyMatrix4(i),Un.expandByPoint(gr.start),Un.expandByPoint(gr.end),Un.min.addScalar(-this.collider.radius),Un.max.addScalar(this.collider.radius),(n=this.bvh.static)==null||n.shapecast({intersectsBounds:s=>s.intersectsBox(Un),intersectsTriangle:s=>{let a=ws,o=Wl,l=s.closestPointToSegment(gr,a,o);if(l<this.collider.radius){let u=this.collider.radius-l,d=o.sub(a).normalize();t.addScaledVector(d,u),gr.start.addScaledVector(d,u),gr.end.addScaledVector(d,u)}}}),t.applyQuaternion(this.parentWorldQuatInv),t.divide(this.parentWorldScale),this.onObject=t.y>Math.abs(e*this.velocity.y*.25);let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.dummyTarget.position.add(t)}},yz=K_;yz.isLocked=!1;var jK=class extends tI{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new Bl({color:65280,linewidth:10}),t=new T(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new T(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,n=new T().addVectors(t,i.multiplyScalar(r)),s=new ft;return s.setFromPoints([t,n]),new Vv(s,e)}},zs=class extends dt{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},GK=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var a,o,l,u,d;let i=Object.assign({},(a=t==null?void 0:t.parameters)!=null?a:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),r=i.width/2,n=(o=i.radiusTop)!=null?o:r,s=(l=i.radiusBottom)!=null?l:r;return n===s?(n=r,s=r):n>s?(n=r,s=s*r/n):(n=n*r/s,s=r),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((u=i.height)!=null?u:i.width),depth:Math.abs((d=i.depth)!=null?d:i.width),radiusTop:n,radiusBottom:s})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:u,radiusBottom:d,cornerRadius:c,cornerSegments:h,hollow:f}=e.parameters,m;return c||f?m=new xz(u,d,r,n,s,a,o,l*Math.PI/180,c,c,h,f):m=new nA(u,d,r,n,s,a,o,l*Math.PI/180),m.scale(1,1,i/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function Oo(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function XC(e){return new q(e.y,-e.x)}var xz=class extends ft{constructor(e,t,i,r,n,s,a,o,l,u,d,c,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,u=0);let f=[],m=[],p=[],g=[],v=0,y=i/2,x=new T,w=new T;h&&e==0&&(e=l),h&&t==0&&(t=u);let _=new q(e,y),b=new q(t,-y),A=null,S=null,M=null,E=null,C=_.clone().sub(b),L=0,N=0,R=0;c>0&&(L=Math.min(e,t)*(1-c),N=e-L,R=t-L);let V=_.clone();V.x-=L;let F=Math.PI-C.angle(),H=C.angle(),P=Math.tan(H/2),z=Math.tan(F/2),D=P+z,j=c?D:z,B=c?D:P;if(l=Math.min(l,(e-N)/j,C.length()/D),u=Math.min(u,(t-R)/B,C.length()/D),l>0){let ie=l/P;A=_.clone().sub(new q(ie,l)),c&&(M=A.clone(),M.x-=L-D*l),_.sub(C.clone().setLength(ie))}if(u>0){let ie=u/z;S=b.clone().sub(new q(ie,-u)),b.add(C.clone().setLength(ie)),c&&(E=S.clone(),E.x-=L-D*u,V.sub(C.clone().setLength(ie)))}C=_.clone().sub(b);let W=C.length()<.5,X=[];for(let ie=0;ie<=r;ie++){let re=[],K=ie/r,fe=K*o+a,te=new q(Math.sin(fe),Math.cos(fe));E&&S?($(re,K,te,F,u,E,-1,!0),$(re,K,te,H,u,S,-1,!1)):S?(U(re,te,S.x,0,-1),$(re,K,te,H,u,S,-1,!1)):s||U(re,te,t,R,-1);let ae=XC(C).normalize();if(Oo(ae,te,x),!W)for(let pe=0;pe<=n;pe++){let me=pe/n,Ie=C.clone().multiplyScalar(me).add(b);Oo(Ie,te,w),m.push(w.x,w.y,w.z),p.push(x.x,x.y,x.z),g.push(K,.5+w.y/i),re.push(v++)}if(M&&A?($(re,K,te,F,l,A,1,!1),$(re,K,te,H,l,M,1,!0)):A?($(re,K,te,F,l,A,1,!1),U(re,te,A.x,0,1)):s||U(re,te,e,N,1),c&&!W){let pe=XC(C).multiplyScalar(-1).normalize();Oo(pe,te,x);for(let me=0;me<=n;me++){let Ie=me/n,Y=C.clone().multiplyScalar(-Ie).add(V);Oo(Y,te,w),m.push(w.x,w.y,w.z),p.push(x.x,x.y,x.z),g.push(K,.5+w.y/i),re.push(v++)}}c&&!s&&re.push(re[0]),X.push(re)}for(let ie=0;ie<X.length-1;ie++)for(let re=0;re<X[0].length-1;re++){if(s&&c&&re==n)continue;let K=X[ie][re],fe=X[ie+1][re],te=X[ie+1][re+1],ae=X[ie][re+1],pe=m[te*3+0],me=m[te*3+2];f.push(K,fe,ae),(pe!=0||me!=0)&&f.push(fe,te,ae)}o<Math.PI*2&&(ne(-1,X[0],a),ne(1,X[X.length-1],a+o)),this.setIndex(f),this.setAttribute("position",new ke(m,3)),this.setAttribute("normal",new ke(p,3)),this.setAttribute("uv",new ke(g,2));function $(ie,re,K,fe,te,ae,pe,me){for(let Ie=0;Ie<d+1;Ie++){let Y=Ie/d,Se=pe<0?Y:1-Y;me&&(Se-=1),Se*=fe;let Te=new q(Math.sin(Se),Math.cos(Se)*pe),at=Te.clone().multiplyScalar(te).add(ae);Oo(at,K,w),m.push(w.x,w.y,w.z),Oo(Te,K,x),p.push(x.x,x.y,x.z),g.push(re,.5+w.y/i),ie.push(v++)}}function U(ie,re,K,fe,te){let ae=new T,pe=new q,me=[K,fe];te<0&&me.reverse();for(let Ie of me)pe.set(Ie,y*te),Oo(pe,re,ae),m.push(ae.x,ae.y,ae.z),p.push(0,te,0),g.push(.5,.5),ie.push(v++)}function ne(ie,re,K){let fe=new q(Math.sin(K),Math.cos(K)),te=new q(-Math.cos(K),Math.sin(K)),ae=new T,pe=ie<0?(Y,Se,Te)=>f.push(Y,Se,Te):(Y,Se,Te)=>f.push(Y,Te,Se),me=new q((e+t+N+R)/4,0);Oo(me,fe,ae),m.push(ae.x,ae.y,ae.z),p.push(te.x,0,te.y),g.push(.5,.5);let Ie=v++;for(let Y of re){let Se=m.slice(Y*3,Y*3+3);m.push(...Se),p.push(te.x,0,te.y);let Te=g.slice(Y*2,Y*2+2);g.push(...Te),v++}for(let Y=Ie+1;Y<v-1;Y++)pe(Ie,Y,Y+1);pe(Ie,v-1,Ie+1)}}},WK=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:d,cornerSegments:c}=e.parameters,h;return u>0||d>0||l<360?h=new xz(0,t/2,r,n,s,a,o,l*Math.PI/180,u,d,c,0,!0):h=new GR(t/2,r,n,s,a),h.scale(1,1,i/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},XK=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,u;return o==0?u=new Ml(t,i,r,n,s,a):u=new YK(t,i,r,n,s,a,o,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},ax=Math.PI/2,YK=class extends ft{constructor(e=1,t=1,i=1,r=1,n=1,s=1,a=0,o=4){super(),this.type="BoxBufferGeometry";let l=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,i/2);let u=[],d=[],c=[],h=[],f=0,m=0;p("z","y","x",-1,-1,i,t,e,s,n,0),p("z","y","x",1,-1,i,t,-e,s,n,1),p("x","z","y",1,1,e,i,t,r,s,2),p("x","z","y",1,-1,e,i,-t,r,s,3),p("x","y","z",1,-1,e,t,i,r,n,4),p("x","y","z",-1,-1,e,t,-i,r,n,5),a>0&&(g("z","y","x",-1,-1,1,i,t,e,s,0),g("z","y","x",1,-1,-1,i,t,e,s,1),g("z","y","x",-1,1,-1,i,t,e,s,1),g("z","y","x",1,1,1,i,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,i,r,0),g("x","y","z",1,-1,1,e,t,i,r,1),g("x","y","z",-1,1,1,e,t,i,r,0),g("x","y","z",1,1,-1,e,t,i,r,1),g("y","x","z",-1,-1,1,t,e,i,n,0),g("y","x","z",1,-1,-1,t,e,i,n,1),g("y","x","z",1,1,1,t,e,i,n,1),g("y","x","z",-1,1,-1,t,e,i,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new ke(d,3)),this.setAttribute("normal",new ke(c,3)),this.setAttribute("uv",new ke(h,2));function p(y,x,w,_,b,A,S,M,E,C,L){let N=(A-2*a)/E,R=(S-2*a)/C,V=A/2-a,F=S/2-a,H=M/2,P=E+1,z=C+1,D=0,j=0,B=new T;for(let W=0;W<z;W++){let X=W*R-F;for(let $=0;$<P;$++){let U=$*N-V;B[y]=U*_,B[x]=X*b,B[w]=H,d.push(B.x,B.y,B.z),B[y]=0,B[x]=0,B[w]=M>0?1:-1,c.push(B.x,B.y,B.z),h.push($/E),h.push(1-W/C),D+=1}}for(let W=0;W<C;W++)for(let X=0;X<E;X++){let $=f+X+P*W,U=f+X+P*(W+1),ne=f+(X+1)+P*(W+1),ie=f+(X+1)+P*W;u.push($,U,ie),u.push(U,ne,ie),j+=6}l.addGroup(m,j,L),m+=j,f+=D}function g(y,x,w,_,b,A,S,M,E,C,L){let N=(S-2*a)/C,R=S/2-a,V=M/2-a,F=E/2,H=C+1,P=0,z=0,D=new T,j=new T;for(let B=0;B<o+1;B++){let W=B/o*ax,X=Math.sin(W)*a,$=(1-Math.cos(W))*a,U=Math.sin(W),ne=Math.cos(W);D[x]=(V+X)*b,D[w]=(F-$)*A,j[y]=0,j[x]=U*Math.sign(D[x]),j[w]=ne*Math.sign(D[w]);for(let ie=0;ie<H;ie++){let re=ie*N-R;D[y]=re*_,d.push(D.x,D.y,D.z),c.push(j.x,j.y,j.z),h.push(ie/C),h.push(0),P+=1}}for(let B=0;B<o;B++)for(let W=0;W<C;W++){let X=f+W+H*B,$=f+W+H*(B+1),U=f+(W+1)+H*(B+1),ne=f+(W+1)+H*B;u.push(X,$,ne),u.push($,U,ne),z+=6}l.addGroup(m,z,L),m+=z,f+=P}function v(y,x,w){let _=new T,b=new T(e/2,t/2,i/2);b.subScalar(a);let A=[],S=y*x*w>0?(E,C,L)=>u.push(E,C,L):(E,C,L)=>u.push(E,L,C);for(let E=0;E<=o;E++){let C=[],L=ax*(1-E/o),N=Math.cos(L),R=Math.sin(L),V=0;for(let F=0;F<=E;F++){let H=Math.cos(V),P=Math.sin(V);_.x=N*H,_.y=R,_.z=N*P;let z=b.clone().addScaledVector(_,a);d.push(y*z.x,x*z.y,w*z.z),c.push(y*_.x,x*_.y,w*_.z),h.push(0,0),C.push(f++),V+=ax/E}A.push(C)}let M=A.length-1;for(let E=0;E<M;E++){let C=A[E],L=A[E+1],N=C.length-1;S(C[0],L[1],L[0]);for(let R=1;R<=N;R++)S(C[R-1],C[R],L[R]),S(C[R],L[R+1],L[R])}}}},IA=class extends ft{constructor(e=[],t=[],i="",r=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];u(),d(),this.setAttribute("position",new ke(a,3)),this.setAttribute("normal",new ke(l,3)),this.setAttribute("uv",new ke(o,2));return;function u(){var H;n=Math.min(1-1e-5,n),n==0&&(s=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],h=new T,f=h.clone(),m=new es,p=n*r,g=r-p,v=s+1,y=new T,x=(P,z)=>y.subVectors(P,z).normalize(),w=(P,z)=>Array(P).fill(void 0).map(z),_=w(e.length/3,(P,z)=>new T().fromArray(e,z*3).setLength(r)),b=[],A=1e6;for(let P=0;P<_.length;P++){let z=_[P],D=[],j,B,W,X=1e10,$=-1;for(;($=t.indexOf(P,$+1))!=-1;){let re=$-$%3;j=t[re+($+1)%3],B=t[re+($+2)%3],W=z.distanceToSquared(_[j]),X=Math.min(X,W),D.push([j,B,W])}X+=1e-6;let U=[],ne=0,ie=D.length;for(let re=0;re<ie;re++){[j,B,W]=D[ne];let K=((H=b[j])==null?void 0:H.includes(P))==!0;W<=X&&U.push(j+ +K*A),ne=D.findIndex(fe=>fe[0]==B)}b.push(U)}let S=[];{let P=0,z=0,D,j,B=c==3;for(let W=0;W<=s;W++){D=W*(W+1)/2,j=(W+1)*(W+2)/2;for(let X=0;X<s-W;X++)[P,z]=[D+X+W+2,j+X+W+3],S.push(D,j,...B?[z,D]:[P,j],z,P),[D,j]=[P,z];S.push(D,j,D+s+2)}}let M=h.clone(),E=h.clone(),C=h.clone(),L=h.clone(),N=h.clone(),R=[],V=w(_.length,()=>w(c,()=>h.clone()));for(let P=0;P<_.length;P++){h.copy(_[P]).normalize(),M.copy(h).multiplyScalar(g);let z=b[P];for(let U=0;U<z.length;U++){let ne=z[U],ie=z[(U+1)%c];m.setFromPointsAndIndices(_,P,ne%A,ie%A),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(M,V[P][U])}let D=[],j=[],B=[],W=new T;s==0&&[...V[P]].reduce((U,ne)=>U.add(ne),W).multiplyScalar(1/c);for(let U=0;U<c;U++){let ne=[],ie=(U-1+c)%c,re=V[P][ie],K=V[P][U];h.copy(re).sub(M),f.copy(K).sub(M);let fe=M.angleTo(h),te=h.angleTo(f),ae=Math.cos(fe)*p;s==0?E.copy(W):E.copy(M).setLength(g+ae),j.push(ae);let pe=[E,re,K];for(let me=0;me<2;me++){let Ie=pe[me],Y=pe[me+1];L.subVectors(Ie,M),N.subVectors(Y,M),C.crossVectors(L,N).normalize();for(let Se=0;Se<v;Se++){let Te=[fe,te][me]*Se/v;h.copy(L).applyAxisAngle(C,Te).add(M),D.push(h.clone()),me&&(x(h,M),ne.push([Se==0?Ie:h.clone(),y.clone()]))}me&&(x(Y,M),ne.push([Y,y.clone()]))}B.push(ne)}R.push(B);let X=2*v,$=2;for(let U=0;U<c;U++){let ne=X*U,ie=X*((U+1)%c),re=[D[ne]];for(let fe=1;fe<v;fe++){L=D[ne+fe],N=D[ie+fe],re.push(L);for(let te=1,ae=fe-$+1;te<=ae;te++)h.lerpVectors(L,N,te/(ae+1)),h.sub(M).setLength(j[U]).add(M),re.push(h.clone());re.push(N)}for(let fe=0;fe<v;fe++)re.push(D[fe+v+ne]);re.push(D[ie+v]);let K=S.map(fe=>re[fe]);a.push(...K.map(fe=>[fe.x,fe.y,fe.z]).flat()),l.push(...K.map(fe=>(x(fe,M),[y.x,y.y,y.z])).flat())}}let F=[];for(let P=0;P<b.length;P++)for(let z=0;z<c;z++){let D=b[P][z];if(D<A){let j=b[D].findIndex(X=>X%A==P),B=R[P][z],W=R[D][j];for(let X=0;X<v;X++){let $=B[X],U=W[v-X],ne=B[X+1],ie=W[v-(X+1)];[$,U,ne,ne,U,ie].forEach(re=>{a.push(re[0].x,re[0].y,re[0].z),l.push(re[1].x,re[1].y,re[1].z)})}F.push(B[0][0],W[v][0],B[v][0],W[0][0])}}for(;F.length;){let P,z,D,j;[P,z]=F.splice(0,2);let B=[P];for(;P!=z;)B.push(z),D=F.indexOf(z),j=D%2,z=F.splice(D-j,2)[1-j];y.subVectors(B[0],B[1]).cross(h.subVectors(B[0],B[2])).normalize();let W=y.dot(B[0])<0;W&&y.negate();for(let X=1;X<=B.length-2;X++)[B[X+ +W],B[X+1-+W],B[0]].forEach($=>{a.push($.x,$.y,$.z),l.push(y.x,y.y,y.z)})}}function d(){let c=new T;for(let b=0;b<a.length;b+=3){c.x=a[b+0],c.y=a[b+1],c.z=a[b+2];let A=w(c)/2/Math.PI+.5,S=_(c)/Math.PI+.5;o.push(A,1-S)}let h=new T,f=new T,m=new T,p=new T,g=new q,v=new q,y=new q,x=(b,A,S,M)=>{M<0&&b.x===1&&(o[A]=b.x-1),S.x===0&&S.z===0&&(o[A]=M/2/Math.PI+.5)};for(let b=0,A=0;b<a.length;b+=9,A+=6){h.set(a[b+0],a[b+1],a[b+2]),f.set(a[b+3],a[b+4],a[b+5]),m.set(a[b+6],a[b+7],a[b+8]),g.set(o[A+0],o[A+1]),v.set(o[A+2],o[A+3]),y.set(o[A+4],o[A+5]),p.copy(h).add(f).add(m).divideScalar(3);let S=w(p);x(g,A+0,h,S),x(v,A+2,f,S),x(y,A+4,m,S)}for(let b=0;b<o.length;b+=6){let A=o[b+0],S=o[b+2],M=o[b+4],E=Math.max(A,S,M),C=Math.min(A,S,M);E>.9&&C<.1&&(A<.2&&(o[b+0]+=1),S<.2&&(o[b+2]+=1),M<.2&&(o[b+4]+=1))}function w(b){return Math.atan2(b.z,-b.x)}function _(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(e){return new IA(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},qK=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new wz(t*.5,s,a):new WR(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},wz=class extends IA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,i),this.type=o}static fromJSON(e){return new wz(e.radius,e.corner,e.cornerSides)}},Ed=1e-12,zA=class{constructor(e){this.position=new q,this.startPosition=new q,this.uuid=Mt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new zA(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},J_=class extends zA{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new J_(this.parent).copy(this)}},fh=class extends zA{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new J_(this),new J_(this))}static create(e,t){let i=new fh(e,new q(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let n=this.controls[i];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new fh(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,r;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),t=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,t]}computeNormals(e=new q,t=new q){let[i,r]=this.computeTangents();return i&&r&&(YC(i,e),YC(r,t)),[e,t]}computeTangent(e=new q){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new q){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function YC(e,t=new q){let i=e.length();return t.set(-e.y/i,e.x/i)}var BA=e=>e,$h=new q,ry=new q,QK=new q,ZK=new q,KK=new q,JK=new q,_z=new T,bz=new T;function $K(e){let t=new q;t.addVectors(e.v0,$h.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new q;return i.addVectors(e.v2,ry.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new la(e.v0,t,i,e.v2)}function Yd(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function eJ(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function tJ(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function Sz(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((n*n+r*r-s*s)/(2*n*r))}function iJ(e,t,i){return QC(e,t)&&QC(t,i)&&$_(e.position,t.position,i.position)}function $_(e,t,i){return $h.copy(t).sub(e).cross(ry.copy(i).sub(e))===0}function rJ(e,t,i,r,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(e.y-t.y)/s,u=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return r.set(o+l,a+u),n.set(o-l,a-u),[r,n]}function nJ(e,t,i){let r=e.distanceTo(i),n=t.distanceTo(i);return r<n?t:e}function sJ(e,t,i,r,n,s){let a=t.x-e.x,o=t.y-e.y,l=i.x-e.x,u=i.y-e.y,d=Math.sqrt((a+l)*(a+l)+(o+u)*(o+u)),c;return Sz(t,e,i)>Math.PI&&(d*=-1),Yd(u,o)?c=(o+u)*(r/d-.5)*8/3/(a-l):c=(a+l)*(r/d-.5)*8/3/(u-o),n.set(t.x-c*o,t.y+c*a),s.set(i.x+c*u,i.y-c*l),[n,s]}function qC(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function QC(e,t){return $_(e.position,e.controls[1].position,t.position)&&$_(e.position,t.controls[0].position,t.position)}function aJ(e,t,i,r,n=.5){let s=$h.subVectors(t,e).multiplyScalar(n).add(e),a=ry.subVectors(i,t).multiplyScalar(n).add(t),o=QK.subVectors(r,i).multiplyScalar(n).add(i),l=s,u=ZK.subVectors(a,s).multiplyScalar(n).add(s),d=KK.subVectors(o,a).multiplyScalar(n).add(a),c=o,h=JK.subVectors(d,u).multiplyScalar(n).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,d.x,d.y,c.x,c.y,r.x,r.y]}function oJ(e,t,i=12,r=!0){let n=bz.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=BA(t[o]),u=$h,d=Tu(l,i);for(let c=0;c<=d;c++)if(l instanceof la||l instanceof Hu||l instanceof wa){if(l.getPoint(c/d,u),n.set(u.x,u.y,0),s!==void 0&&tJ(s,n))continue;s===void 0&&(s=_z),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return r&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function lJ(e,t,i,r=12,n=!0){let s=bz.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let u,d=BA(t[l]),c=$h,h=Tu(d,r);o.push(h);for(let f=0;f<=h;f++)if(d instanceof la||d instanceof Hu||d instanceof wa){if(d.getPoint(f/h,c),s.set(c.x,c.y,0),u==null?void 0:u.equals(s))continue;u===void 0?u=_z:(e.setXYZ(a,u.x,u.y,u.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),u.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function ZC(e,t=12,i=!1){let r=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(i&&a.roundedCurveCorner!==void 0){let l=Tu(a.roundedCurveCorner,t)*.5;n>0&&(r[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=Tu(a.curveAfter,t)),r.push(o)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=Tu(e[0].roundedCurveCorner,t)*.5),r}function Tu(e,t=12){return e&&e instanceof U0?t*2:e&&(e instanceof wa||e instanceof VR)?1:e&&e instanceof rA?t*e.points.length:t}function uJ(e,t,i=12,r=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=BA(t[a]),l=Tu(o,i),u=$h;for(let d=0;d<=l;d++)if(o instanceof la||o instanceof Hu||o instanceof wa){if(o.getPoint(d/l,u),n!==void 0&&eJ(n,u,Ed))continue;n===void 0&&(n=ry),n.copy(u),e.push(u.x,u.y),s++}}return Yd(e[0],e[e.length-2],Ed)&&Yd(e[1],e[e.length-1],Ed)&&(e.pop(),e.pop()),r&&s>1&&!(Yd(e[s-1],e[1],Ed)&&Yd(e[s-2],e[0],Ed))&&(e.push(e[0],e[1]),s++),e}var ox=new q,cJ=new q,hJ=new q,dJ=new q,fJ=new q,pJ=new q,Mi=class extends Eu{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.eventDispatcher=new Kr,this.plane=new Jn(new T(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Mt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let r=new Mi;return r.isClosed=e.isClosed,r.points=e.points.map(n=>fh.create(n.id,n.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(n=>Mi.createFromState(n)),t!==void 0&&i!==void 0&&r.applySize(t,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let a=this.shapeHoles[n],o=a.points.length-1,l=a.getPointIndexById(e);if(l<0)r+=o;else return l+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0)for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t],n=e-this.points.length;if(n<=r.points.length-1)return r.points[n]}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=ox.set(e,t);for(let r=0,n=this.points.length;r<n;r++){let s=this.points[r];s.position.multiply(i),s.controls[0].position.multiply(i),s.controls[1].position.multiply(i)}for(let r=0,n=this.shapeHoles.length;r<n;r++)this.shapeHoles[r].applyScale(e,t);this._update(!1)}createPoint(e,t=0,i=Mt.generateUUID()){let r;e instanceof q?r=e:r=new q(e,t);let n=new fh(i,r);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(i=>i.uuid===e);t&&this.removePoint(t)}update(e=!0){for(let t=0,i=this.shapeHoles.length;t<i;t++)this.shapeHoles[t].update(!1);this._update(e)}extractShapePointsToBuffer(e,t=12,i=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=i?this.roundedCurveDivisions:this.curveDivisions;return oJ(e,i?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=ZC(this.points,e,!1),this.roundedCurveDivisions=ZC(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,i=12){return lJ(e,this.curves,t,i,this.autoClose).reduce((r,n)=>r+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),uJ(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=Tu(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=r.reduce((a,o)=>a+o,0));for(let a=0,o=r.length;a<o;a++){let l=r[a];if(s<i+l)return[a,(s-i+1)/l];i+=l}return[0,1]}getCurveT(e,t,i){let r=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(qC(r,n)){let l=r.position.distanceTo(n.position);return r.position.distanceTo(ox.set(i.x,i.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){qC(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(e=!0){var i,r,n;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let s=0,a=this.points.length;s<a;s++){let o=this.points[s];if(s===0)this.moveTo(o.position.x,o.position.y);else{let l=this.points[s-1];this._applyCurveForPoint(o,l)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let s=this.points[0],a=this.points[this.points.length-1];this._applyCurveForPoint(s,a)}if(this.points.length>2){let s=0;for(let a=0,o=this.points.length;a<o;a++){let l=this.points[a],u=(i=this.points[a-1])!=null?i:this.points[this.points.length-1],d=(r=this.points[a+1])!=null?r:this.points[0],c=l.roundness,h=u&&d&&iJ(u,l,d);if(!l.controlsMoved()&&c>0&&!h){let f=l.curveBefore,m=l.curveAfter;if(f===void 0||m===void 0)continue;let p=l.roundedCurveBefore,g=l.roundedCurveAfter,v=f.getLength(),y=m.getLength(),x=Math.min(c,v*.499),w=Math.min(c,y*.499),_=Math.min(x,w),b=1-_/v,A=_/y,S=f.getPointAt(b,ox),M=m.getPointAt(A,cJ);this._subSplitCurve(f,p,b,S,void 0),this._subSplitCurve(m,g,A,void 0,M);let E;if(this.useCubicForRoundedCorners){let C=Sz(S,l.position,M)/2,L=Math.tan(C)*S.distanceTo(l.position),[N,R]=rJ(S,M,L,hJ,dJ),V=nJ(N,R,l.position),[F,H]=sJ(V,S,M,L,fJ,pJ);E=new la(S.clone(),F.clone(),H.clone(),M.clone())}else E=new Hu(S.clone(),l.position.clone(),M.clone());l.roundedCurveCorner=E,this.roundedCurves.splice(a+s,0,E),s++}}}e&&((n=this.eventDispatcher)==null||n.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,i,r,n){if(e instanceof wa)r!==void 0&&t.v2.copy(r),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(i,0),l=aJ(s.v0,s.v1,s.v2,s.v3,o);return r!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new Mi(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var i;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let r=0;r<t;r++){let n=r*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],u=e.points[n+4],d=e.points[n+5],c=e.points[n+6],h=new fh(Mt.generateUUID(),new q(s,a));h.controls[0].position.set(o,l),h.controls[1].position.set(u,d),h.roundness=c,this.points.push(h)}return this.shapeHoles=(i=e.shapeHoles)!=null&&i.length?e.shapeHoles.map(r=>{let n=new Mi;return n.fromJSON(r),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(r,n)=>{n instanceof la&&n.v3.equals(r.position)&&r.controls[0].position.copy(n.v2)},i=r=>{let n=[],s,a;for(s=0,a=r.length;s<a;s++)r[s]instanceof Hu&&(r[s]=$K(r[s]));for(s=0,a=r.length;s<a;s++){let u=r[s],d=s>0?r[s-1]:null,c;u instanceof la?(c=this.createPoint(u.v0),c.controls[1].position.copy(u.v1)):u instanceof wa&&(c=this.createPoint(u.v1)),c!==void 0&&(d!==null&&t(c,d),n.push(c))}let o=r[r.length-1],l=!1;return o instanceof la?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof wa&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=i(e.curves),e instanceof Eu&&(this.shapeHoles=e.holes.map(r=>{let n=new Mi;return n.fromShape(r),n})),this.update(),this}},eb=Math.PI*2;function lx({x:e,y:t},i,r,n,s){return{x:e*i+n,y:t*r+s}}function mJ(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:s+a*i,y:a-s*i},{x:s,y:a}]}function KC(e,t,i,r){let n=e*r-t*i<0?-1:1,s=Math.min(1,Math.max(-1,e*i+t*r));return n*Math.acos(s)}function gJ(e,t,i,r,n,s,a,o,l,u){let d=Math.pow(n,2),c=Math.pow(s,2),h=Math.pow(a,2),f=Math.pow(o,2),m=d*c-d*f-c*h;m<0&&(m=0),m/=d*f+c*h,m=Math.sqrt(m)*(l===u?-1:1);let p=m*n/s*o,g=m*-s/n*a,v=p+(e+i)/2,y=g+(t+r)/2,x=(a-p)/n,w=(o-g)/s,_=(-a-p)/n,b=(-o-g)/s,A=KC(1,0,x,w),S=KC(x,w,_,b);return!u&&S>0&&(S-=eb),u&&S<0&&(S+=eb),{centerx:v,centery:y,ang1:A,ang2:S}}function vJ({px:e,py:t,cx:i,cy:r,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let u=(e-i)/2,d=(t-r)/2;if(u===0&&d===0)return[];n=Math.abs(n),s=Math.abs(s);let c=Math.pow(u,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(s,2);c>1&&(n*=Math.sqrt(c),s*=Math.sqrt(c));let h=gJ(e,t,i,r,n,s,u,d,a,o),{ang1:f,ang2:m}=h,{centerx:p,centery:g}=h,v=Math.abs(m)/(eb/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);m/=y;for(let x=0;x<y;x++)l.push(mJ(f,m)),f+=m;return l.map(x=>{let{x:w,y:_}=lx(x[0],n,s,p,g),{x:b,y:A}=lx(x[1],n,s,p,g),{x:S,y:M}=lx(x[2],n,s,p,g);return{x1:w,y1:_,x2:b,y2:A,x:S,y:M}})}var yi;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(yi||(yi={}));var ar;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(ar||(ar={}));function ot(e,t){if(!e)throw t||"Assertion Failed!"}var it=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){ot(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?n<s?i.t-t.t+(t.t-r.t)*(n/(n+s)):i.t-r.t+(r.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,i,r){ot(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?(i.t-r.t)*n+(i.t-t.t)*s:0},e.transEval=function(t,i,r){ot(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?n<s?i.s-t.s+(t.s-r.s)*(n/(n+s)):i.s-r.s+(r.s-t.s)*(s/(n+s)):0},e.transSign=function(t,i,r){ot(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?(i.s-r.s)*n+(i.s-t.s)*s:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,n){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+n)/2:i+(n-i)*(t/(t+r)):n+(i-n)*(r/(t+r))},e.intersect=function(t,i,r,n,s){var a,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,n)||(l=r,r=n,n=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.vertLeq(r,i)?e.vertLeq(i,n)?(a=e.edgeEval(t,r,i),o=e.edgeEval(r,i,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,r.s,o,i.s)):(a=e.edgeSign(t,r,i),o=-e.edgeSign(t,n,i),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,r.s,o,n.s)):s.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,n)||(l=r,r=n,n=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.transLeq(r,i)?e.transLeq(i,n)?(a=e.transEval(t,r,i),o=e.transEval(r,i,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,r.t,o,i.t)):(a=e.transSign(t,r,i),o=-e.transSign(t,n,i),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,r.t,o,n.t)):s.t=(r.t+i.t)/2},e}(),Td=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),$m=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),Dc=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),JC=function(){function e(){var t=new Dc,i=new Td,r=new $m(0),n=new $m(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=n,n.next=n,n.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var i=new $m(0),r=new $m(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return r.next=n,n.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,n=i.Onext;r.Sym.Lnext=i,n.Sym.Lnext=t,t.Onext=n,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var n=t;ot(n,"Vertex can't be null!");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i;var a=i;do a.Org=n,a=a.Onext;while(a!==i)},e.prototype.makeFace_=function(t,i,r){var n=t;ot(n,"Face can't be null");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i,n.trail=null,n.marked=!1,n.inside=r.inside;var a=i;do a.Lface=n,a=a.Lnext;while(a!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,n=r;do n.Org=i,n=n.Onext;while(n!==r);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,i){var r=t.anEdge,n=r;do n.Lface=i,n=n.Lnext;while(n!==r);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new Dc,i=new Dc,r=new Td,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(i,n.Sym,this.vHead),this.makeFace_(r,n,this.fHead),n},e.prototype.splice=function(t,i){var r=!1,n=!1;if(t!==i){if(i.Org!==t.Org&&(n=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!n){var s=new Dc;this.makeVertex_(s,i,t.Org),t.Org.anEdge=t}if(!r){var a=new Td;this.makeFace_(a,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var n=new Td;this.makeFace_(n,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var n=new Dc;return this.makeVertex_(n,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,n=this.makeEdge_(t),s=n.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,i),n.Org=t.Dst,s.Org=i.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!r){var a=new Td;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var i=t.anEdge,r,n,s,a,o;n=i.Lnext;do r=n,n=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),s=r.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(r));while(r!=i);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,n,s,a,o,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,a=r.Org;n=r.Lnext,s=r.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(i),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&it.vertCCW(r.Lprev.Org,r.Org,s.Lnext.Lnext.Org)&&it.vertCCW(s.Lprev.Org,s.Org,r.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),r=null,s=null)),!(r&&r.Lnext.Org===a);)r=n;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,n,s,a,o,l,u;for(s=t,s=t;(n=s.next)!==t;s=n){ot(n.prev===s),l=n.anEdge;do ot(l.Sym!==l),ot(l.Sym.Sym===l),ot(l.Lnext.Onext.Sym===l),ot(l.Onext.Sym.Lnext===l),ot(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(ot(n.prev===s&&n.anEdge===null),o=i,o=i;(a=o.next)!==i;o=a){ot(a.prev===o),l=a.anEdge;do ot(l.Sym!==l),ot(l.Sym.Sym===l),ot(l.Lnext.Onext.Sym===l),ot(l.Onext.Sym.Lnext===l),ot(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(ot(a.prev===o&&a.anEdge===null),u=r,u=r;(l=u.next)!==r;u=l)ot(l.Sym.next===u.Sym),ot(l.Sym!==l),ot(l.Sym.Sym===l),ot(l.Org!==null),ot(l.Dst!==null),ot(l.Lnext.Onext.Sym===l),ot(l.Onext.Sym.Lnext===l);ot(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),$C=function(){function e(){this.handle=null}return e}(),eD=function(){function e(){this.key=null,this.node=0}return e}(),yJ=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new $C,this.handles[r]=new eD;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,n,s,a;for(n=i[t].handle;;){if(a=t<<1,a<this.size&&this.leq(r[i[a+1].handle].key,r[i[a].handle].key)&&++a,ot(a<=this.max),s=i[a].handle,a>this.size||this.leq(r[n].key,r[s].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=a}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,n,s,a;for(n=i[t].handle;;){if(a=t>>1,s=i[a].handle,a===0||this.leq(r[s].key,r[n].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new $C;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new eD}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,n=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,n;ot(t>=1&&t<=this.max&&r[t].key!==null),n=r[t].node,i[n].handle=i[this.size].handle,r[i[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(r[i[n>>1].handle].key,r[i[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),ux=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),tD=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),xJ=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new tD,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new tD;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),wJ=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var n=t.event,s=i.eUp,a=r.eUp;if(s.Dst===n)return a.Dst===n?it.vertLeq(s.Org,a.Org)?it.edgeSign(a.Dst,s.Org,a.Org)<=0:it.edgeSign(s.Dst,a.Org,s.Org)>=0:it.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return it.edgeSign(s.Dst,n,s.Org)>=0;var o=it.edgeEval(s.Dst,n,s.Org),l=it.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&ot(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){ot(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,n;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,i,n),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var n=new ux;return n.eUp=r,n.nodeUp=t.dict.insertBefore(i.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,r.activeRegion=n,n},e.isWindingInside=function(t,i){switch(t.windingRule){case yi.ODD:return(i&1)!==0;case yi.NONZERO:return i!==0;case yi.POSITIVE:return i>0;case yi.NEGATIVE:return i<0;case yi.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,n=r.Lface;n.inside=i.inside,n.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var n,s=null,a=i,o=i.eUp;a!==r;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,i,r,n,s,a){var o,l,u,d,c=!0;u=r;do ot(it.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,i,u.Sym),u=u.Onext;while(u!==n);for(s===null&&(s=e.regionBelow(i).eUp.Rprev),l=i,d=s;o=e.regionBelow(l),u=o.eUp.Sym,u.Org===d.Org;)u.Onext!==d&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(d.Oprev,u)),o.windingNumber=l.windingNumber-u.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!c&&e.checkForRightSplice(t,l)&&(e.addWinding(u,d),e.deleteRegion(t,l),t.mesh.delete(d)),c=!1,l=o,d=u;l.dirty=!0,ot(l.windingNumber-u.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var n=it.vertL1dist(i,t),s=it.vertL1dist(r,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*i.coords[0]+o*r.coords[0],t.coords[1]+=a*i.coords[1]+o*r.coords[1],t.coords[2]+=a*i.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,i,r,n,s,a){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,n),e.vertexWeights(i,s,a)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp;if(it.vertLeq(n.Org,s.Org)){if(it.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;it.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),i.dirty=r.dirty=!0)}else{if(it.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,a;if(ot(!it.vertEq(n.Dst,s.Dst)),it.vertLeq(n.Dst,s.Dst)){if(it.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=i.inside}else{if(it.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;i.dirty=r.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,a=n.Org,o=s.Org,l=n.Dst,u=s.Dst,d,c,h=new Dc,f,m;if(ot(!it.vertEq(u,l)),ot(it.edgeSign(l,t.event,a)<=0),ot(it.edgeSign(u,t.event,o)>=0),ot(a!==t.event&&o!==t.event),ot(!i.fixUpperEdge&&!r.fixUpperEdge),a===o||(d=Math.min(a.t,l.t),c=Math.max(o.t,u.t),d>c))return!1;if(it.vertLeq(a,o)){if(it.edgeSign(u,a,o)>0)return!1}else if(it.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),it.intersect(l,a,u,o,h),ot(Math.min(a.t,l.t)<=h.t),ot(h.t<=Math.max(o.t,u.t)),ot(Math.min(u.s,l.s)<=h.s),ot(h.s<=Math.max(o.s,a.s)),it.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=it.vertLeq(a,o)?a:o,it.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),it.vertEq(h,a)||it.vertEq(h,o)?(e.checkForRightSplice(t,i),!1):!it.vertEq(l,t.event)&&it.edgeSign(l,t.event,h)>=0||!it.vertEq(u,t.event)&&it.edgeSign(u,t.event,h)<=0?u===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),i=e.topLeftRegion(t,i),n=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),r=i,i=e.topRightRegion(i),m=e.regionBelow(i).eUp.Rprev,r.eUp=s.Oprev,s=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,s.Onext,n.Rprev,m,!0),!0):(it.edgeSign(l,t.event,h)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),it.edgeSign(u,t.event,h)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=h.s,n.Org.t=h.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,u),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),n,s;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,n=i.eUp,s=r.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(s),r=e.regionBelow(i),s=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r),n=i.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var n,s=r.Onext,a=e.regionBelow(i),o=i.eUp,l=a.eUp,u=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,i),it.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),i=e.topLeftRegion(t,i),s=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),a),u=!0),it.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,a,null),u=!0),u){e.addRightEdges(t,i,r.Onext,s,s,!0);return}it.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(r.Lprev,n),e.addRightEdges(t,i,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var n,s,a,o,l;if(n=i.eUp,it.vertEq(n.Org,r)){ot(!1),e.spliceMergeVertices(t,n,r.anEdge);return}if(!it.vertEq(n.Dst,r)){t.mesh.splitEdge(n.Sym),i.fixUpperEdge&&(t.mesh.delete(n.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,n),e.sweepEvent(t,r);return}ot(!1),i=e.topRightRegion(i),l=e.regionBelow(i),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&(ot(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(r.anEdge,a),it.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,i,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,i){var r,n,s,a,o,l,u=new ux;if(u.eUp=i.anEdge.Sym,r=t.dict.search(u).key,n=e.regionBelow(r),!!n){if(a=r.eUp,o=n.eUp,it.edgeSign(a.Dst,i,a.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(s=it.vertLeq(o.Dst,a.Dst)?r:n,r.inside||s.fixUpperEdge){if(s===r)l=t.mesh.connect(i.anEdge.Sym,a.Lnext);else{var d=t.mesh.connect(o.Dnext,i.anEdge);l=d.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var n=e.topLeftRegion(t,r.activeRegion);ot(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,i,r,n){var s=new ux,a=t.mesh.makeEdge();a.Org.s=r,a.Org.t=n,a.Dst.s=i,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new xJ(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],n=t.bmin[0]-i,s=t.bmax[0]+i,a=t.bmin[1]-r,o=t.bmax[1]+r;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||(ot(i.fixUpperEdge),ot(++r===1)),ot(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,n,s=t.mesh.eHead;for(i=s.next;i!==s;i=r)r=i.next,n=i.Lnext,it.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,n,i),t.mesh.delete(i),i=n,n=i.Lnext),n.Lnext===i&&(n!==i&&((n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,n,s=0;for(n=t.mesh.vHead,r=n.next;r!==n;r=r.next)s++;for(s+=8,i=t.pq=new yJ(s,it.vertLeq),n=t.mesh.vHead,r=n.next;r!==n;r=r.next)r.pqHandle=i.insert(r);return r!==n?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,n,s;for(r=i.fHead.next;r!==i.fHead;r=n)n=r.next,s=r.anEdge,ot(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!it.vertEq(n,r));)n=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,n.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),_J=function(){function e(){this.mesh=new JC,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=yi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,n,s,a,o,l=[0,0,0],u=[0,0,0],d=[0,0,0],c=[0,0,0],h=[0,0,0],f=[null,null,null],m=[null,null,null],p=this.mesh.vHead;i=p.next;for(var g=0;g<3;++g)s=i.coords[g],u[g]=s,m[g]=i,l[g]=s,f[g]=i;for(i=p.next;i!==p;i=i.next)for(var v=0;v<3;++v)s=i.coords[v],s<u[v]&&(u[v]=s,m[v]=i),s>l[v]&&(l[v]=s,f[v]=i);var y=0;if(l[1]-u[1]>l[0]-u[0]&&(y=1),l[2]-u[2]>l[y]-u[y]&&(y=2),u[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,r=m[y],n=f[y],d[0]=r.coords[0]-n.coords[0],d[1]=r.coords[1]-n.coords[1],d[2]=r.coords[2]-n.coords[2],i=p.next;i!==p;i=i.next)c[0]=i.coords[0]-n.coords[0],c[1]=i.coords[1]-n.coords[1],c[2]=i.coords[2]-n.coords[2],h[0]=d[1]*c[2]-d[2]*c[1],h[1]=d[2]*c[0]-d[0]*c[2],h[2]=d[0]*c[1]-d[1]*c[0],a=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],a>o&&(o=a,t[0]=h[0],t[1]=h[1],t[2]=h[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,n,s=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),s=!0),r=this.sUnit,n=this.tUnit;var a=this.longAxis_(i);r[a]=0,r[(a+1)%3]=1,r[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=i[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,r),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,n;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;it.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;it.vertLeq(r.Org,r.Dst);r=r.Lnext);n=r.Lprev;for(var s=void 0;r.Lnext!==n;)if(it.vertLeq(r.Dst,n.Org)){for(;n.Lnext!==r&&(it.edgeGoesLeft(n.Lnext)||it.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==r&&(it.edgeGoesRight(r.Lprev)||it.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)s=t.connect(r,r.Lprev),r=s.Sym;r=r.Lnext}if(n.Lnext===r)throw"Mono region invalid";for(;n.Lnext.Lnext!==r;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?i:-i:r?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,n){var s,a=0,o=0,l;r>3&&t.mergeConvexFaces(r);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var u=s.Org;u.n===-1&&(u.n=o,o++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>r)throw"Face vertex greater that support polygon";d.n=a,++a}this.elementCount=a,i===ar.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*r,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var c=u.n*n;this.vertices[c+0]=u.coords[0],this.vertices[c+1]=u.coords[1],n>2&&(this.vertices[c+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var h=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var u=s.Org;this.elements[h++]=u.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var f=l;f<r;++f)this.elements[h++]=-1;if(i===ar.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var m=l;m<r;++m)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,i){var r,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=r=o.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,d=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=r=o.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,a++,r=r.Lnext;while(r!==n);this.elements[d++]=s,this.elements[d++]=a,s+=a}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new JC),t<2&&(t=2),t>3&&(t=3);for(var r=null,n=0;n<i.length;n+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[n+0],r.Org.coords[1]=i[n+1],t>2?r.Org.coords[2]=i[n+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,n,s,a){if(t===void 0&&(t=yi.ODD),i===void 0&&(i=ar.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),wJ.computeInterior(this,a);var o=this.mesh;return i===ar.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),i===ar.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,i,r,n),!0},e}();function qd(e){var t=e.windingRule,i=t===void 0?yi.ODD:t,r=e.elementType,n=r===void 0?ar.POLYGONS:r,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,u=e.normal,d=u===void 0?[0,0,1]:u,c=e.contours,h=c===void 0?[]:c,f=e.strict,m=f===void 0?!0:f,p=e.debug,g=p===void 0?!1:p;if(!h&&m)throw new Error("Contours can't be empty");if(h){var v=new _J;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<h.length;y++)v.addContour(l||2,h[y]);return v.tesselate(i,n,a,l,d,m),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}yi.ODD;yi.NONZERO;yi.POSITIVE;yi.NEGATIVE;yi.ABS_GEQ_TWO;ar.POLYGONS;ar.CONNECTED_POLYGONS;ar.BOUNDARY_CONTOURS;var Az=class extends ft{constructor(e,t=12,i={}){var h,f,m;super(),this.type="ShapeGeometry",this.windingRule=yi.ODD,this.elementType=ar.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:yi.ODD,elementType:ar.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(p=>p.extractShapePointsToFlatArray([],this._curveSegments)),s,a=!0,o=!0,l,u;for(let p=0,g=r.length/2;p<g;p++){let v=p*2,y=r[v+0],x=r[v+1];if(l!==void 0&&y!==l&&(a=!1),u!==void 0&&x!==u&&(o=!1),l=y,u=x,!a&&!o)break}!a&&!o&&(s=qd({contours:[r,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let d=(h=s==null?void 0:s.vertexCount)!=null?h:1,c=(f=s==null?void 0:s.elementCount)!=null?f:1;if(this._positionAttribute=new xt(new Float32Array(d*3),3),this._normalAttribute=new xt(new Float32Array(d*3),3),this._uvAttribute=new xt(new Float32Array(d*2),2),this._indexAttribute=new xt(new Uint32Array(c*3),1),s){let p=1/0,g=-1/0,v=1/0,y=-1/0;for(let _=0,b=d;_<b;_++){let A=_*2,S=s.vertices[A+0],M=s.vertices[A+1];S<p&&(p=S),S>g&&(g=S),M<v&&(v=M),M>y&&(y=M)}let x=g-p,w=y-v;for(let _=0,b=d;_<b;_++){let A=_*2,S=s.vertices[A+0],M=s.vertices[A+1],E=(S-p)/x,C=(M-v)/w;this._positionAttribute.setXYZ(_,S,M,0),this._normalAttribute.setXYZ(_,0,0,1),this._uvAttribute.setXY(_,E,C)}for(let _=0,b=c;_<b;_++){let A=_*3,S=s.elements[A+0],M=s.elements[A+1],E=s.elements[A+2];this._indexAttribute.setX(A+0,S),this._indexAttribute.setX(A+1,M),this._indexAttribute.setX(A+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((m=s==null?void 0:s.elementCount)!=null?m:1)*3)}clone(){let e=new Az(this._shape,this._curveSegments);return e.userData=HI(this.userData),e}},tb=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*tb.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let i=e*tb.eSize,r=new ArrayBuffer(i),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(r,s*n,3*e);s+=3*e;let o=new Float32Array(r,s*n,3*e);s+=3*e;let l=new Float32Array(r,s*n,2*e);a.set(this.positions.slice(0,this.size*3)),o.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=r,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},Mz=tb;Mz.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var cx=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),Ez=class extends ft{constructor(e,t,i=0,r=12,n=3){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=i,this._curveSegments=r,this._bevelSegmentsInput=n,i<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(i,t/2-1e-12),this._bevelSegments=Math.floor(n));let s=this._shape.extractShapePointsToFlatArray([],r),a=this._shape.shapeHoles.map(_=>{let b=_.extractShapePointsToFlatArray([],r),A=[];for(let S=b.length-1;S>=1;S-=2){let M=b[S-1],E=b[S-0];A.push(M,E)}return A}),o=qd({windingRule:yi.ODD,elementType:ar.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]}),l=qd({windingRule:yi.ODD,elementType:ar.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!o)throw new Error("error generating geometry");let u=o.elementCount;if(l){o.elementCount+=l.elementCount;for(let _=0;_<l.elements.length;_++){let b=l.elements[_],A=_%2===0?o.vertexCount:0;o.elements.push(b+A)}for(let _=0;_<l.vertexIndices.length;_++){let b=l.vertexIndices[_],A=o.vertexCount;o.vertexIndices.push(b+A)}for(let _=0;_<l.vertices.length;_++){let b=l.vertices[_];o.vertices.push(b)}}let d=1/0,c=-1/0,h=1/0,f=-1/0;for(let _=0,b=o.vertexCount;_<b;_++){let A=_*2,S=o.vertices[A+0],M=o.vertices[A+1];S<d&&(d=S),S>c&&(c=S),M<h&&(h=M),M>f&&(f=M)}this._minX=d,this._minY=h,this._width=c-d,this._height=f-h;let m=o.vertexCount*2*(2+this._bevelSegments);this._buffer=new Mz(m);let p=[],g=[];for(let _=o.elementCount-1;_>=0;_--){let b=_>=u,A=_*2,S=o.elements[A+0],M=o.elements[A+1],E=S+M,C={start:S,count:M,normals:[],continuous:[],concave:[]},L=S,N=E-1,R=S+1,V=this._shape.roundedCurves.length;do{let z=L-S,D=o.vertices[N*2+0],j=o.vertices[N*2+1],B=o.vertices[L*2+0],W=o.vertices[L*2+1],X=o.vertices[R*2+0],$=o.vertices[R*2+1],U=B-D,ne=W-j,ie=Math.sqrt(U*U+ne*ne);U/=ie,ne/=ie;let re=B-X,K=W-$,fe=Math.sqrt(re*re+K*K);re/=fe,K/=fe,C.normals[z*2+0]=-K,C.normals[z*2+1]=re,C.concave[z]=U*K-ne*re>0;let te=o.vertexIndices[L];if(Array.isArray(te))C.continuous[z]=!1;else{let[ae,pe]=this._shape.getCurveIndexFromVertexId(te-1,!0);if(pe>0&&pe<1)C.continuous[z]=!0;else{let me=pe===1?ae+1:ae-1;me=(me+V)%V;let Ie=pe===1?0:1,Y=this._shape.roundedCurves[ae].getTangent(pe),Se=this._shape.roundedCurves[me].getTangent(Ie);C.continuous[z]=Y.dot(Se)>.95}}b&&(C.normals[z*2+0]*=-1,C.normals[z*2+1]*=-1),[N,L,R]=[L,R,R+1],R>=E&&(R-=M)}while(R!==S+1);let F=[];F.push({bevelI:0,angle:0,size:0,boundary:{vertices:o.vertices.slice(S*2,E*2),vertexCount:M,vertexIndices:new Array(M).fill(!0).map((z,D)=>[D,D]),elements:[0,M],elementCount:1,mesh:null},reverseMap:[],insetPoints:o.vertices.slice(S*2,E*2)});for(let z=1;z<=this._bevelSegments;z++){let D=z/this._bevelSegments*Math.PI/2,j=(1-Math.cos(D))*this._bevelSize,B=[],W=[],X=0;for(let U=0;U<M;U++){let ne=U*2,ie=(U-1+M)%M*2,re=o.vertices[C.start*2+ne+0],K=o.vertices[C.start*2+ne+1],fe=-C.normals[ie+0]*j,te=-C.normals[ie+1]*j,ae=-C.normals[ne+0]*j,pe=-C.normals[ne+1]*j;if(C.concave[U]||!C.concave[U]&&b){let me=Math.atan2(te,fe),Ie=Math.atan2(pe,ae);Ie>me&&(Ie-=Math.PI*2);let Y=Ie-me;if(C.continuous[U]||b){let Se=me+Y/2,Te=Math.cos(Se)*j,at=Math.sin(Se)*j;B[2*X+0]=re+Te*(b?-1:1),B[2*X+1]=K+at*(b?-1:1),W[X]=U,X++}else{let Se=Math.max(1,Math.floor(r/4*Math.abs(Y)/Math.PI));for(let Te=0;Te<=Se;Te++){let at=me+Y*(Te/Se),ct=Math.cos(at)*j,k=Math.sin(at)*j;B[2*X+0]=re+ct,B[2*X+1]=K+k,W[X]=U,X++}}}else B[2*X+0]=re+fe,B[2*X+1]=K+te,W[X]=U,X++,B[2*X+0]=re,B[2*X+1]=K,W[X]=U,X++,B[2*X+0]=re+ae,B[2*X+1]=K+pe,W[X]=U,X++}let $=qd({windingRule:yi.POSITIVE,elementType:ar.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[B],edgeCreateCallback:U=>{let ne=U.Org.idx,ie=W[ne],re=W[(ne+1)%W.length];U.idx=[ie,re],U.Sym.idx=[re,ie]},vertexIdCallback:U=>{let ne=U.Lprev.idx;return[ne?ne[1]:0,U.idx[0]]}});if(!$)throw console.log("Error"),new Error(`error generating bevel geometry for ${z}'th loop`);if(!$.vertexCount)break;for(let U=0;U<$.vertexIndices.length;U++){let[ne,ie]=$.vertexIndices[U];if(ne===ie)continue;let re=ie;ie<ne&&(re+=M);for(let K=ne;K<re;K++){let fe=K%M,te=(K+1)%M;if(!C.continuous[fe]||!C.continuous[te]){$.vertexIndices[U]=[ne,fe],$.vertexIndices.splice(U+1,0,[te,ie]),$.vertices.splice((U+1)*2,0,$.vertices[U*2],$.vertices[U*2+1]);break}}}F.push({bevelI:z,angle:D,size:j,boundary:$,reverseMap:W,insetPoints:B})}let H=(z,D,j)=>{let B=0,W=z.boundary.vertexIndices.length;for(;B<W&&j(z.boundary.vertexIndices[D]);)D=(D+1)%W,B++;return B},P=p.length;for(let z=1;z<F.length;z++){let D=F[z-1],j=F[z],B=D.boundary.vertexIndices.length,W=j.boundary.vertexIndices.length;if(!B||!W)break;let X=C.concave.length,$=0,U=cx($,M);for(;!D.boundary.vertexIndices.filter(U).length||!j.boundary.vertexIndices.filter(U).length;)$++,U=cx($,M);let ne=D.boundary.vertexIndices.findIndex(U),ie=j.boundary.vertexIndices.findIndex(U);do ne=(ne+1)%B;while(U(D.boundary.vertexIndices[ne]));do ie=(ie+1)%W;while(U(j.boundary.vertexIndices[ie]));$=($+1)%M;let re=$,K=this.buildBevelVert(C,D,(ne-1+B)%B),fe=this.buildBevelVert(C,j,(ie-1+W)%W),te=K,ae=fe,pe,me,Ie=!1;do{U=cx($,M);let Y=H(D,ne,U),Se=H(j,ie,U),Te=Ie;if(Ie=!1,Y&&!Se){for(let at=0;at<Y;at++)pe=this.buildBevelVert(C,D,(ne+at)%B,at/(Y-1)),p.push(te.topN,pe.topP,ae.topN),p.push(pe.bottomP,te.bottomN,ae.bottomN),te=pe;Ie=!0}else if(!Y&&Se)for(let at=0;at<Se;at++)me=this.buildBevelVert(C,j,(ie+at)%W,at/(Se-1)),p.push(ae.topN,te.topP,me.topP),p.push(te.bottomP,ae.bottomN,me.bottomP),ae=me;else if(Y&&Se)if(pe=this.buildBevelVert(C,D,ne,0),me=this.buildBevelVert(C,j,ie,0),Te?(p.push(te.topN,me.topP,ae.topN),p.push(te.topN,pe.topP,me.topP),p.push(me.bottomP,te.bottomN,ae.bottomN),p.push(me.bottomP,pe.bottomP,te.bottomN)):(p.push(ae.topN,te.topN,pe.topP),p.push(ae.topN,pe.topP,me.topP),p.push(pe.bottomP,te.bottomN,ae.bottomN),p.push(pe.bottomP,ae.bottomN,me.bottomP)),te=pe,ae=me,Y===Se)for(let at=1;at<Y;at++)pe=this.buildBevelVert(C,D,(ne+at)%B,at/(Y-1)),me=this.buildBevelVert(C,j,(ie+at)%W,at/(Se-1)),p.push(te.topN,pe.topP,ae.topN),p.push(ae.topN,pe.topP,me.topP),p.push(pe.bottomP,te.bottomN,ae.bottomN),p.push(pe.bottomP,ae.bottomN,me.bottomP),te=pe,ae=me;else if(Y>Se){let at=Y/Se,ct=0;for(let k=1;k<Y;k++)pe=this.buildBevelVert(C,D,(ne+k)%B,k/(Y-1)),p.push(te.topN,pe.topP,ae.topN),p.push(pe.bottomP,te.bottomN,ae.bottomN),te=pe,k>(ct+1)*at&&(ct++,me=this.buildBevelVert(C,j,(ie+ct)%W,ct/(Se-1)),p.push(ae.topN,pe.topP,me.topP),p.push(pe.bottomP,ae.bottomN,me.bottomP),ae=me)}else{let at=Se/Y,ct=0;for(let k=1;k<Se;k++)me=this.buildBevelVert(C,j,(ie+k)%W,k/(Se-1)),p.push(ae.topN,pe.topP,me.topP),p.push(pe.bottomP,ae.bottomN,me.bottomP),ae=me,k>(ct+1)*at&&(ct++,pe=this.buildBevelVert(C,D,(ne+ct)%B,ct/(Y-1)),p.push(te.topN,pe.topP,ae.topN),p.push(pe.bottomP,te.bottomN,ae.bottomN),te=pe)}ne=(ne+Y)%B,ie=(ie+Se)%W,$=($+1)%X}while($!==re)}{let z=F[0];for(let D=0,j=z.boundary.vertexCount;D<j;D++){let B=this.buildBevelVert(C,z,D),W=this.buildBevelVert(C,z,(D+1)%j);p.push(W.topP,B.topN,B.bottomN),p.push(W.topP,B.bottomN,W.bottomP)}}if(b){let z=[];for(let D=p.length-1;D>=P+2;D-=3){let j=p[D-2],B=p[D-1],W=p[D-0];z.push(W,B,j)}p.splice(P,p.length-P,...z)}if(b){let z=[];for(let D=F[F.length-1].boundary.vertices.length-1;D>=1;D-=2){let j=F[F.length-1].boundary.vertices[D-1],B=F[F.length-1].boundary.vertices[D-0];z.push(j,B)}g.push(z)}if(!b){let z=F[F.length-1],D=qd({windingRule:F.length>1?yi.POSITIVE:yi.ODD,elementType:ar.POLYGONS,vertexSize:2,strict:!0,contours:[z.insetPoints,...g]});if(!D)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:p.length});for(let j=0;j<D.elementCount*3;j+=3){let B=this.buildSurfaceVert(D,D.elements[j+0]),W=this.buildSurfaceVert(D,D.elements[j+1]),X=this.buildSurfaceVert(D,D.elements[j+2]);p.push(B.top,W.top,X.top),p.push(X.bottom,W.bottom,B.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new xt(Uint32Array.from(p),1),y=new xt(this._buffer.positions,3),x=new xt(this._buffer.normals,3),w=new xt(this._buffer.uvs,2);y.needsUpdate=!0,x.needsUpdate=!0,w.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",x),this.setAttribute("uv",w),this.setIndex(v)}buildSurfaceVert(e,t){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let r=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(r-this._minX)/this._width,a=(n-this._minY)/this._height,o=this._buffer.get(2),l=o*3,u=o*2,d={top:o+0,bottom:o+1};return this._buffer.positions[l+0]=r,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[u+0]=s,this._buffer.uvs[u+1]=a,this._buffer.positions[l+3]=r,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[u+2]=s,this._buffer.uvs[u+3]=a,this.vertexCache[i]=d,d}buildBevelVert(e,t,i,r=1){let n=`${t.bevelI}:${i}`;if(n in this.vertexCache)return this.vertexCache[n];let[s,a]=t.boundary.vertexIndices[i],o,l,u,d;s!==a?(l=s,o=a,d=!1,u=e.continuous[l]&&e.continuous[o]):(o=s,l=(o-1+e.count)%e.count,d=e.concave[o]&&t.bevelI>0,u=e.continuous[o]||d);let c=Math.cos(t.angle),h=Math.sin(t.angle),f=i*2,m=o*2,p=l*2,g=t.boundary.vertices[f+0],v=t.boundary.vertices[f+1],y=(1-h)*this._bevelSize,x=(g-this._minX)/this._width,w=(v-this._minY)/this._height,_=e.normals[m+0],b=e.normals[m+1],A=e.normals[p+0],S=e.normals[p+1];if(d){let N=A-_,R=S-b;_=_+N*(1-r),b=b+R*(1-r);let V=Math.sqrt(_*_+b*b);_/=V,b/=V}let M=this._buffer.get(u?2:4),E=M*3,C=M*2,L={i,fi:o,topP:M+0,topN:M+0,bottomP:M+1,bottomN:M+1};return this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=this._depth-y,this._buffer.normals[E+0]=_*c,this._buffer.normals[E+1]=b*c,this._buffer.normals[E+2]=h,this._buffer.uvs[C+0]=x,this._buffer.uvs[C+1]=w,this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=_*c,this._buffer.normals[E+4]=b*c,this._buffer.normals[E+5]=-h,this._buffer.uvs[C+2]=w,this._buffer.uvs[C+3]=x,u||(M+=2,E+=6,C+=4,L.topP=M+0,L.bottomP=M+1,this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=this._depth-y,this._buffer.normals[E+0]=A*c,this._buffer.normals[E+1]=S*c,this._buffer.normals[E+2]=h,this._buffer.uvs[C+0]=x,this._buffer.uvs[C+1]=w,this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=A*c,this._buffer.normals[E+4]=S*c,this._buffer.normals[E+5]=-h,this._buffer.uvs[C+2]=w,this._buffer.uvs[C+3]=x),this.vertexCache[n]=L,L}clone(){let e=new Ez(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=HI(this.userData),e}},Dl=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,d,c,h,f,m,p;let i=Object.assign({},(u=t==null?void 0:t.parameters)!=null?u:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),n=Math.abs((d=i.height)!=null?d:i.width),s=Math.abs((c=i.depth)!=null?c:0),a=(h=e.shape)!=null?h:t==null?void 0:t.shape,o=(f=a==null?void 0:a.roundness)!=null?f:i.roundness;a!==void 0&&(a instanceof Mi?(a.width!==r||a.height!==n)&&a.applySize(r,n):a=new Mi(r,n).fromJSON(a),((m=e.parameters)==null?void 0:m.roundness)!==void 0&&((p=e.parameters)==null?void 0:p.roundness)>0&&a.update(!1));let l=a!=null?a:new Mi(r,n);return{parameters:Object.assign(i,{width:r,height:n,depth:s,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:n,roundness:s}=e.parameters;e.shape.roundness=s;let a;return t<=0?a=new Az(e.shape,n):a=new Ez(e.shape,t,i,n,r),Object.assign(a,{userData:{...e,type:"VectorGeometry"}})}},Tz=Math.PI*2,bJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Mi?e.shape:new Mi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:0)})}}static build(e){let{width:t,height:i,spikes:r,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,u=e.shape,d=t*.5,c=i*.5,h=SJ(u,d,c,n*Math.PI/180,r,s);u.isClosed=!0,u.update();let f=Dl.create({shape:u,parameters:{subdivisions:h,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function SJ(e,t,i,r,n,s){if(r>=Tz)return n>30||n%4===0?(MJ(e,t,i,s),Math.round(n/4)):iD(e,r,n,t,i,s);let a={x:0,y:i},o=r+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*i},u=vJ({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return n>30||n%u.length===0?AJ(e,a.x,a.y,u,n,t,i,s):iD(e,r,n,t,i,s)}function AJ(e,t,i,r,n,s,a,o){let l=Math.round(n/r.length);e.addPoint(ph(t,i));for(let u=0,d=r.length;u<d;u++){let c=r[u],h=e.points[u],f=ph(c.x,c.y);h.controls[1].position.set(c.x1,c.y1),f.controls[0].position.set(c.x2,c.y2),e.addPoint(f)}return o>0?Cz(e,s,a,o):e.addPoint(ph(0,0)),l}function iD(e,t,i,r,n,s){let a=-t/i;for(let o=0;o<=i;o++){let l=a*o,u=Math.sin(l)*r,d=Math.cos(l)*n;e.addPoint(ph(u,d))}return t<Tz?s>0?Cz(e,r,n,s):e.addPoint(ph(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&Dz(e,r,n,s)),1}function MJ(e,t,i,r=0,n=0,s=0){let a=.5522847498,o=t*a,l=i*a;e.addPoint(eg(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(eg(n,s+i,n-o,s+i,n+o,s+i)),e.addPoint(eg(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(eg(n,s-i,n+o,s-i,n-o,s-i)),r>0&&Dz(e,t,i,r)}function ph(e,t){return new fh(Mt.generateUUID(),new q(e,t))}function eg(e,t,i,r,n,s){let a=ph(e,t);return a.controls[0].position.set(i,r),a.controls[1].position.set(n,s),a}function Cz(e,t,i,r){Pz(e,t,i,r).forEach(n=>e.addPoint(n))}function Dz(e,t,i,r){let n=Pz(e,t,i,r),s=new Mi;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function Pz(e,t,i,r){let n=r*t/100,s=n*(Math.abs(i)/Math.abs(t)),a=new q(n/t,s/i),o=e.points.map(l=>{let u=l.clone();return u.uuid=Mt.generateUUID(),u}).reverse();return o.forEach(l=>{l.position.multiply(a);let u=l.controls[0].position.clone().multiply(a),d=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(d),l.controls[1].position.copy(u)}),o}var EJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var o,l,u;let i=Object.assign({},(o=t==null?void 0:t.parameters)!=null?o:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),n=Math.abs((l=i.height)!=null?l:r),s=Math.abs((u=i.depth)!=null?u:r),a=Math.abs(Math.min(r,s))/2;return{parameters:Object.assign(i,{width:r,height:n,depth:s,radius:a,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:u,cornerRadius:d,cornerSegments:c}=e.parameters,h=new Lz(!1,t,i,r,n,s,a,o,l,u,d,c);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},Lz=class extends ft{constructor(e=!0,t=1,i=1,r=1,n=1,s=1,a=1,o=1,l=1,u=1,d=1,c=1){super();let h=e&&s===1;h&&(c=0),d>100&&(d=100);let f=()=>new T,m=new T,p=f(),g=f(),v=f(),y,x,w,_,b,A,S,M,E=f(),C=f(),L=f(),N=f(),R=f(),V=f(),F=f(),H=f(),P=i-2*o+.001,z=P/s,D=Math.ceil(a*s),j=D+1,B=P/D,W=-P/2,X=u+1,$=2*Math.PI/u,U=Math.PI/2/c,ne=.01,ie=Math.min((1-d/100)*o,o-ne),re=o-ie,K=0,fe=2,te=c*fe+fe,ae=X*te/fe,pe=ae+X*j,me=X*(j+te),[Ie,Y,Se]=[3,3,2].map(xe=>Array(me*xe).fill(0)),Te=[],at=n-o;function ct(xe,Me){let G=Math.PI/2;A=Me*B,M=2*Math.PI*(A%z)/z+G,A+=W,S=Math.sin(M)*at,b=Math.cos(M)*at,e?xe.set(b,S,A):xe.set(b,A,S)}ct(m,-1e-10),ct(p,0),E.copy(m),ct(m,1);let k=m.distanceTo(p),O=re+ie,le=k*D+2*O,ge=ie,ve=le-O;for(let xe=0;xe<=D;xe++){ct(g,xe),H.subVectors(g,E).normalize(),E.copy(g),V.copy(g).setComponent(+e+1,0).normalize(),F.crossVectors(H,V).normalize();let Me=xe===0,G=xe===D,Ae=Me?3*Math.PI/2:U,be=Me?ge:ve,Re=Me?X:pe,ze=Me?0:me-X,Qe=H.clone().multiplyScalar(Me?-re:re).add(g),ye=H.clone().multiplyScalar(Me?-1:1).normalize();for(let Ne=0;Ne<X;Ne++){let Oe=Ne*$;if(C.addVectors(m.copy(V).multiplyScalar(o*Math.cos(Oe)),p.copy(F).multiplyScalar(o*Math.sin(Oe))),L.copy(C).normalize(),Me||G){h||(K=ze+Ne,[0,1,2].forEach(Ce=>{Ie[K*3+Ce]=Qe.getComponent(Ce),Y[K*3+Ce]=ye.getComponent(Ce)}),Se[K*2]=+G,Se[K*2+1]=Ne/u),p.copy(L).multiplyScalar(ie),v.addVectors(g,p);for(let Ce=0;Ce<c;Ce++){let je=Ce*U+Ae;N.addVectors(m.copy(H).multiplyScalar(re*Math.sin(je)),p.copy(L).multiplyScalar(re*Math.cos(je))),R.copy(N).normalize(),p.addVectors(v,N),N.normalize(),K=Re+Ce*X+Ne,[0,1,2].forEach(wt=>{Ie[K*3+wt]=p.getComponent(wt),Y[K*3+wt]=R.getComponent(wt)});let tt=+Me+Math.sin(je);Se[K*2]=(be+re*tt)/le,Se[K*2+1]=Ne/u}}p.addVectors(g,C),K=ae+xe*X+Ne,[0,1,2].forEach(Ce=>{Ie[K*3+Ce]=p.getComponent(Ce),Y[K*3+Ce]=L.getComponent(Ce)}),Se[K*2]=(O+xe*k)/le,Se[K*2+1]=Ne/u}}let _e=j+2*c+fe,Fe=1,[ue,He]=h?[Fe,Fe+j-1]:[0,_e-1];for(let xe=ue;xe<=He-1;xe++){let Me=h&&xe===He-1;for(let G=0;G<X-1;G++)y=xe*X+G,x=y+1,w=(Me?G:y)+X,_=(Me?G+1:x)+X,xe===0?Te.push(x,_,w):xe===_e-2?Te.push(y,x,w):Te.push(y,x,w,x,_,w)}this.setIndex(Te),this.setAttribute("position",new ke(Ie,3)),this.setAttribute("normal",new ke(Y,3)),this.setAttribute("uv",new ke(Se,2))}},TJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new Oz(t*.5,s,a):new QR(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},Oz=class extends IA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,i),this.type=a}static fromJSON(e){return new Oz(e.radius,e.corner,e.cornerSides)}},CJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s,a,o;((n=(r=e.parameters)==null?void 0:r.points)!=null?n:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let i=Object.assign({},(s=t==null?void 0:t.parameters)!=null?s:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((a=i.height)!=null?a:i.width),depth:Math.abs((o=i.depth)!=null?o:i.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,n=new Eu;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new jR(n.extractPoints(r).shape,i);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},Ws=new Ke,hx=new Yt,tg=new T,a0=class extends Kr{constructor(){super(),this.uuid=Mt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Ar().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Ws.makeRotationX(e),this.applyMatrix4(Ws),this}rotateY(e){return Ws.makeRotationY(e),this.applyMatrix4(Ws),this}rotateZ(e){return Ws.makeRotationZ(e),this.applyMatrix4(Ws),this}translate(e,t,i){return Ws.makeTranslation(e,t,i),this.applyMatrix4(Ws),this}scale(e,t,i){return Ws.makeScale(e,t,i),this.applyMatrix4(Ws),this}lookAt(e){return hx.lookAt(e),hx.updateMatrix(),this.applyMatrix4(hx.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=r.position,s=r.normal,a=r.color,o=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let c=0;c<n.count;c++)t.vertices.push(new T().fromBufferAttribute(n,c)),a!==void 0&&t.colors.push(new dt().fromBufferAttribute(a,c));function u(c,h,f,m){let p=a===void 0?[]:[t.colors[c].clone(),t.colors[h].clone(),t.colors[f].clone()],g=s===void 0?[]:[new T().fromBufferAttribute(s,c),new T().fromBufferAttribute(s,h),new T().fromBufferAttribute(s,f)],v=new ib(c,h,f,g,p,m);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new q().fromBufferAttribute(o,c),new q().fromBufferAttribute(o,h),new q().fromBufferAttribute(o,f)]),l!==void 0&&t.faceVertexUvs[1].push([new q().fromBufferAttribute(l,c),new q().fromBufferAttribute(l,h),new q().fromBufferAttribute(l,f)])}let d=e.groups;if(d.length>0)for(let c=0;c<d.length;c++){let h=d[c],f=h.start,m=h.count;for(let p=f,g=f+m;p<g;p+=3)i!==void 0?u(i.getX(p),i.getX(p+1),i.getX(p+2),h.materialIndex):u(p,p+1,p+2,h.materialIndex)}else if(i!==void 0)for(let c=0;c<i.count;c+=3)u(i.getX(c),i.getX(c+1),i.getX(c+2));else for(let c=0;c<n.count;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tg).negate(),this.translate(tg.x,tg.y,tg.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new Ke;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new T,t=new T;for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new T;if(e){let i=new T,r=new T;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c];i.subVectors(u,l),r.subVectors(o,l),i.cross(r),t[a.a].add(i),t[a.b].add(i),t[a.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let n=0,s=r.vertexNormals.length;n<s;n++)r.__originalVertexNormals[n]?r.__originalVertexNormals[n].copy(r.vertexNormals[n]):r.__originalVertexNormals[n]=r.vertexNormals[n].clone()}let e=new a0;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new T,u={a:new T,b:new T,c:new T};n.push(l),s.push(u)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=r.faceNormals[n],l=r.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xi),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ks),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,u=this.colors,d=e.colors;t!==void 0&&(r=new Ar().getNormalMatrix(t));for(let c=0,h=a.length;c<h;c++){let f=a[c].clone();t!==void 0&&f.applyMatrix4(t),s.push(f)}for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone());for(let c=0,h=l.length;c<h;c++){let f=l[c],m,p,g=f.vertexNormals,v=f.vertexColors,y=new ib(f.a+n,f.b+n,f.c+n);y.normal.copy(f.normal),r!==void 0&&y.normal.applyMatrix3(r).normalize();for(let x=0,w=g.length;x<w;x++)m=g[x].clone(),r!==void 0&&m.applyMatrix3(r).normalize(),y.vertexNormals.push(m);y.color.copy(f.color);for(let x=0,w=v.length;x<w;x++)p=v[x],y.vertexColors.push(p.clone());y.materialIndex=f.materialIndex+i,o.push(y)}for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[c].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let u=this.vertices[o],d=Math.round(u.x*n)+"_"+Math.round(u.y*n)+"_"+Math.round(u.z*n);t[d]===void 0?(t[d]=o,i.push(this.vertices[o]),r[o]=i.length-1):r[o]=r[t[d]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let u=this.faces[o];u.a=r[u.a],u.b=r[u.b],u.c=r[u.c];let d=[u.a,u.b,u.c];for(let c=0;c<3;c++)if(d[c]===d[(c+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let u=0,d=this.faceVertexUvs.length;u<d;u++)this.faceVertexUvs[u].splice(l,1)}let a=this.vertices.length-i.length;return this.vertices=i,a}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new T(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function i(o,l){return o.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;r&&r.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(r[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let m in f)f[m]!==void 0&&(e[m]=f[m]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let m=this.vertices[f];t.push(m.x,m.y,m.z)}let i=[],r=[],n={},s=[],a={},o=[],l={};for(let f=0;f<this.faces.length;f++){let m=this.faces[f],p=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=m.normal.length()>0,x=m.vertexNormals.length>0,w=m.color.r!==1||m.color.g!==1||m.color.b!==1,_=m.vertexColors.length>0,b=0;if(b=u(b,0,0),b=u(b,1,p),b=u(b,2,g),b=u(b,3,v),b=u(b,4,y),b=u(b,5,x),b=u(b,6,w),b=u(b,7,_),i.push(b),i.push(m.a,m.b,m.c),i.push(m.materialIndex),v){let A=this.faceVertexUvs[0][f];i.push(h(A[0]),h(A[1]),h(A[2]))}if(y&&i.push(d(m.normal)),x){let A=m.vertexNormals;i.push(d(A[0]),d(A[1]),d(A[2]))}if(w&&i.push(c(m.color)),_){let A=m.vertexColors;i.push(c(A[0]),c(A[1]),c(A[2]))}}function u(f,m,p){return p?f|1<<m:f&~(1<<m)}function d(f){let m=f.x.toString()+f.y.toString()+f.z.toString();return n[m]!==void 0||(n[m]=r.length/3,r.push(f.x,f.y,f.z)),n[m]}function c(f){let m=f.r.toString()+f.g.toString()+f.b.toString();return a[m]!==void 0||(a[m]=s.length,s.push(f.getHex())),a[m]}function h(f){let m=f.x.toString()+f.y.toString();return l[m]!==void 0||(l[m]=o.length/2,o.push(f.x,f.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=r,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return new a0().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let c=0,h=t.length;c<h;c++)this.vertices.push(t[c].clone());let i=e.colors;for(let c=0,h=i.length;c<h;c++)this.colors.push(i[c].clone());let r=e.faces;for(let c=0,h=r.length;c<h;c++)this.faces.push(r[c].clone());for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,x=g.length;y<x;y++){let w=g[y];v.push(w.clone())}this.faceVertexUvs[c].push(v)}}let n=e.morphTargets;for(let c=0,h=n.length;c<h;c++){let f={};if(f.name=n[c].name,n[c].vertices!==void 0){f.vertices=[];for(let m=0,p=n[c].vertices.length;m<p;m++)f.vertices.push(n[c].vertices[m].clone())}if(n[c].normals!==void 0){f.normals=[];for(let m=0,p=n[c].normals.length;m<p;m++)f.normals.push(n[c].normals[m].clone())}this.morphTargets.push(f)}let s=e.morphNormals;for(let c=0,h=s.length;c<h;c++){let f={};if(s[c].vertexNormals!==void 0){f.vertexNormals=[];for(let m=0,p=s[c].vertexNormals.length;m<p;m++){let g=s[c].vertexNormals[m],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(s[c].faceNormals!==void 0){f.faceNormals=[];for(let m=0,p=s[c].faceNormals.length;m<p;m++)f.faceNormals.push(s[c].faceNormals[m].clone())}this.morphNormals.push(f)}let a=e.skinWeights;for(let c=0,h=a.length;c<h;c++)this.skinWeights.push(a[c].clone());let o=e.skinIndices;for(let c=0,h=o.length;c<h;c++)this.skinIndices.push(o[c].clone());let l=e.lineDistances;for(let c=0,h=l.length;c<h;c++)this.lineDistances.push(l[c]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new DJ().fromGeometry(this),t=new ft,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new xt(i,3).copyVector3sArray(e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",new xt(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",new xt(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new xt(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new xt(r,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],s=e.morphTargets[r];for(let a=0,o=s.length;a<o;a++){let l=s[a],u=new ke(l.data.length*3,3);u.name=l.name,n.push(u.copyVector3sArray(l.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let r=new ke(e.skinIndices.length*4,4);t.setAttribute("skinIndex",r.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let r=new ke(e.skinWeights.length*4,4);t.setAttribute("skinWeight",r.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new ft,i=e.geometry;if(e.isPoints||e.isLine){let r=new ke(i.vertices.length*3,3),n=new ke(i.colors.length*3,3);if(t.setAttribute("position",r.copyVector3sArray(i.vertices)),t.setAttribute("color",n.copyColorsArray(i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let s=new ke(i.lineDistances.length,1);t.setAttribute("lineDistance",s.copyArray(i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};a0.prototype.isGeometry=!0;var DJ=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,n,s=e.faces;for(r=0;r<s.length;r++){let a=s[r];a.materialIndex!==n&&(n=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:n})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,n=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let g=0;g<o;g++)l[g]={name:a[g].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,d=u.length,c;if(d>0){c=[];for(let g=0;g<d;g++)c[g]={name:u[g].name,data:[]};this.morphTargets.normal=c}let h=e.skinIndices,f=e.skinWeights,m=h.length===i.length,p=f.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(i[v.a],i[v.b],i[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let w=v.normal;this.normals.push(w,w,w)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let w=v.color;this.colors.push(w,w,w)}if(n===!0){let w=r[0][g];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new q,new q,new q))}if(s===!0){let w=r[1][g];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new q,new q,new q))}for(let w=0;w<o;w++){let _=a[w].vertices;l[w].data.push(_[v.a],_[v.b],_[v.c])}for(let w=0;w<d;w++){let _=u[w].vertexNormals[g];c[w].data.push(_.a,_.b,_.c)}m&&this.skinIndices.push(h[v.a],h[v.b],h[v.c]),p&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},ib=class{constructor(e,t,i,r,n,s=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new T,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new dt,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},PJ=["a","b","c"];function LJ(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function dx(e,t,i){let r=Math.min(e,t),n=Math.max(e,t),s=r+"_"+n;return i.get(s)}function fx(e,t,i,r,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,u;if(r.has(l))u=r.get(l);else{let d=i[a],c=i[o];u={a:d,b:c,newEdge:null,faces:[]},r.set(l,u)}u.faces.push(n),s[e].edges.push(u),s[t].edges.push(u)}function OJ(e,t,i,r){let n,s,a;for(n=0,s=e.length;n<s;n++)i[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],fx(a.a,a.b,e,r,a,i),fx(a.b,a.c,e,r,a,i),fx(a.c,a.a,e,r,a,i)}function ig(e,t,i,r,n){e.push(new ib(t,i,r,void 0,void 0,n))}function wc(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function rg(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var RJ=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof ft?e=new a0().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new T,i,r,n,s,a,o=e.vertices,l=e.faces,u=e.faceVertexUvs[0],d=u!==void 0&&u.length>0,c=[],h=new Map;OJ(o,l,c,h);let f=[],m,p,g,v,y,x,w;for(let ne of Array.from(h.keys())){for(p=h.get(ne),g=new T,y=3/8,x=1/8,w=p.faces.length,w!=2&&(y=.5,x=0,w!=1),g.addVectors(p.a,p.b).multiplyScalar(y),t.set(0,0,0),s=0;s<w;s++){for(v=p.faces[s],a=0;a<3&&(m=o[LJ(v,PJ[a])],!(m!==p.a&&m!==p.b));a++);m&&t.add(m)}t.multiplyScalar(x),g.add(t),p.newEdge=f.length,f.push(g)}let _,b,A,S,M,E,C,L=[];for(r=0,n=o.length;r<n;r++){for(E=o[r],M=c[r].edges,i=M.length,i==3?_=3/16:i>3&&(_=3/(8*i)),b=1-i*Number(_),A=_,i<=2&&(i==2?(b=3/4,A=1/8):i==1||i==0),C=E.clone().multiplyScalar(b),t.set(0,0,0),s=0;s<i;s++)S=M[s],m=S.a!==E?S.a:S.b,t.add(m);t.multiplyScalar(Number(A)),C.add(t),L.push(C)}let N=L.concat(f),R=L.length,V,F,H,P=[],z=[],D,j,B,W,X=new q,$=new q,U=new q;for(r=0,n=l.length;r<n;r++)v=l[r],V=Number(dx(v.a,v.b,h).newEdge)+R,F=Number(dx(v.b,v.c,h).newEdge)+R,H=Number(dx(v.c,v.a,h).newEdge)+R,ig(P,V,F,H,v.materialIndex),ig(P,v.a,V,H,v.materialIndex),ig(P,v.b,F,V,v.materialIndex),ig(P,v.c,H,F,v.materialIndex),d&&(D=u[r],j=D[0],B=D[1],W=D[2],X.set(wc(j.x,B.x),wc(j.y,B.y)),$.set(wc(B.x,W.x),wc(B.y,W.y)),U.set(wc(j.x,W.x),wc(j.y,W.y)),rg(z,X,$,U),rg(z,j,X,U),rg(z,B,$,X),rg(z,W,U,$));e.vertices=N,e.faces=P,d&&(e.faceVertexUvs[0]=z)}},ki=new T,IJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var s,a;let i=(a=(s=e.geometry)!=null?s:t==null?void 0:t.geometry)!=null?a:new ft().copy(new Ml(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(ki),r={width:ki.x,height:ki.y,depth:ki.z,subdivisions:0}):r=t.parameters;let n={...r,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:i}}static build(e){var l;let{width:t,height:i,depth:r,subdivisions:n}=e.parameters,s=(l=e.geometry)!=null?l:new ft().copy(new Ml(100,100,100)),a=s.userData.parameters;a===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(ki)):ki.set(a.width,a.height,a.depth),(t!==ki.x||i!==ki.y||r!==ki.z)&&s.scale(ki.x===0?1:t/ki.x,ki.y===0?1:i/ki.y,ki.z===0?1:r/ki.z);let o=s.originalGeometry;return n>0?(o===void 0||(a==null?void 0:a.subdivisions)!==n)&&(o===void 0&&(o=s),s=new RJ(n).modify(o).toBufferGeometry()):(o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),o!==void 0&&Object.assign(s,{originalGeometry:o}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new $R(i).load(e,r=>{let n=this.normalizeInputs({geometry:r});r.boundingBox.getSize(ki);let s=100/ki.x;Object.assign(n.parameters,{width:100,height:ki.y*s,depth:ki.z*s}),t(this.build(n))})}},zJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Mi?e.shape:new Mi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}=e.parameters,l=e.shape,u=t*.5,d=i*.5,c=0,h=0,f=2*Math.PI/r;for(let p=0;p<r;p++){let g=f*p,v=c+Math.sin(g)*u,y=h+Math.cos(g)*d;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let p=0,g=l.points.length;p<g;p++)l.points[p].roundness=n;l.roundness=n,l.update();let m=Dl.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},BJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,u=new NJ(t*.5,i,n,s,a,o,l);return u.scale(1,1,r/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function Cd(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function px(e,t,i,r,n,s){let a=t.clone().sub(e),o=i.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),r===n){let u=a.add(o).normalize();s.copy(e).addScaledVector(u,r/Math.sin(l/2))}else{let u=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(u)),s.addScaledVector(o,r/Math.sin(u))}}function kJ(e,t,i){let r=e.clone().sub(t),n=i.clone().sub(t);return r.projectOnVector(n),r.add(t)}var NJ=class extends ft{constructor(e=.5,t=1,i=4,r=1,n=!1,s=0,a=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),a=Math.floor(a);let o=[],l=[],u=[],d=[],c=0,h=t/2,f=Math.PI/i,m=e*Math.cos(Math.PI/i),p=2*Math.PI/i,g=(i-2)*Math.PI/i,v=Math.PI-g,y=new T(0,-h,0),x=new T(0,h,0),w=new q(e,-h),_=new q(m,-h),b=new q(0,x.y).sub(_),A=new q(0,x.y).sub(w),S=new q(b.y,-b.x).normalize(),M=new q(A.y,-A.x).normalize(),E=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-b.angle())/2)-1e-8;s=Math.min(s,E);let C;{let H=new T(S.x,S.y,0),P=new T(Math.cos(p)*H.x,H.y,Math.sin(p)*H.x);C=H.angleTo(P)}let L=s/Math.tan((Math.PI-b.angle())/2),N=s/Math.tan((Math.PI-C)/2),R=new T;if(!n){l.push(y.x,y.y,y.z),u.push(0,-1,0),d.push(0,0);let H=c++,P=[],z=w.clone(),D=L/Math.cos(Math.PI/i);z.x-=D;for(let j=0;j<i;j++){let B=j/i*Math.PI*2+f,W=new q(Math.sin(B),Math.cos(B));Cd(z,W,R),l.push(R.x,R.y,R.z),u.push(0,-1,0),d.push(0,0),P.push(c++)}for(let j=0;j<P.length;j++)o.push(P[j],H,P[(j+1)%P.length])}{let H=new T,P=new T,z=new T,D=new T,j=new T,B=new T;for(let W=0;W<i;W++){let X=W/i*Math.PI*2+f,$=(W+.5)/i*Math.PI*2+f,U=(W+1)/i*Math.PI*2+f,ne=new q(Math.sin(X),Math.cos(X)),ie=new q(Math.sin($),Math.cos($)),re=new q(Math.sin(U),Math.cos(U));Cd(w,ne,P),Cd(w,re,z),Cd(S,ie,H),px(x,P,z,N,N,D),l.push(D.x,D.y,D.z),px(P,x,z,N,L,j),l.push(j.x,j.y,j.z),px(z,P,x,L,N,B),l.push(B.x,B.y,B.z),u.push(H.x,H.y,H.z),u.push(H.x,H.y,H.z),u.push(H.x,H.y,H.z),d.push(0,0),d.push(0,0),d.push(0,0);let K=c++,fe=c++,te=c++;if(o.push(K,fe,te),s>0){{let me=P.clone().add(z).multiplyScalar(.5),Ie=x.clone().sub(me).normalize(),Y=y.clone().sub(me).normalize().add(Ie).normalize().multiplyScalar(-1),Se=B.clone().sub(j);V(me,Se,Y,b.angle())}let ae,pe;{let me=new T;Cd(M,re,me);let Ie=B.clone().add(D).multiplyScalar(.5);Ie=kJ(Ie,z,x);let Y=B.clone().sub(D);[ae,pe]=V(Ie,Y,me,C,D.y)}{let me=ae,Ie=me.clone().setY(0).normalize(),Y=new T(0,-1,0),Se=Ie.clone().cross(Y);F(me,Ie,Y,Se)}{let me=b.angle(),Ie=Math.PI-me,Y=x.clone();Y.y-=s/Math.sin(me-Math.PI/2);let Se=new T,Te=[];for(let ct=0;ct<a;ct++){let k=[],O=Math.PI/2-Ie*ct/a,le=Math.cos(O),ge=Math.sin(O),ve=$;for(let _e=0;_e<=ct;_e++){let Fe=Math.cos(ve),ue=Math.sin(ve);H.x=le*ue,H.y=ge,H.z=le*Fe,Se.copy(Y).addScaledVector(H,s),l.push(Se.x,Se.y,Se.z),u.push(H.x,H.y,H.z),d.push(0,0),k.push(c++),ve+=Math.PI*2/ct/i}Te.push(k)}pe.reverse(),Te.push(pe);let at=Te.length-1;for(let ct=0;ct<at;ct++){let k=Te[ct],O=Te[ct+1],le=k.length-1;o.push(O[1],k[0],O[0]);for(let ge=1;ge<=le;ge++)o.push(k[ge],k[ge-1],O[ge]),o.push(O[ge+1],k[ge],O[ge])}}}}}this.setIndex(o),this.setAttribute("position",new ke(l,3)),this.setAttribute("normal",new ke(u,3)),this.setAttribute("uv",new ke(d,2));function V(H,P,z,D,j){let B=-D/2,W=(Math.PI-D)/2,X=P.clone().normalize().cross(z);H.addScaledVector(z,-s/Math.sin(W));let $=new T,U=new T,ne=1,ie=c,re=[];for(let K=0;K<=a;K++){let fe=B+K/a*D;U.set(0,0,0),U.addScaledVector(X,Math.sin(fe)),U.addScaledVector(z,Math.cos(fe));for(let te=0;te<=ne;te++){let ae=te/ne-.5;if($.copy(H),$.addScaledVector(P,ae),$.addScaledVector(U,s),j!=null){let pe=Math.max(0,$.y-j);$.addScaledVector(P,-pe/P.y)}l.push($.x,$.y,$.z),u.push(U.x,U.y,U.z),d.push(0,0),te===0&&re.push(c),c++}}for(let K=0;K<a;K++)for(let fe=0;fe<ne;fe++){let te=ie+fe+(ne+1)*K,ae=te+(ne+1),pe=ae+1,me=te+1;o.push(te,ae,me),o.push(ae,pe,me)}return[H.clone().addScaledVector(P,.5),re]}function F(H,P,z,D){let j=Math.PI/2,B=A.angle()-j,W=[],X=new T,$=new T;for(let ne=0;ne<=a;ne++){let ie=[],re=ne/a;for(let K=0;K<=ne;K++){let fe=((ne?K/ne:0)-.5)*v,te=Math.cos(fe),ae=Math.sin(fe),pe=Math.atan(Math.tan(B)*te),me=(j+pe)*re,Ie=Math.cos(me),Y=Math.sin(me);X.set(0,0,0),X.addScaledVector(P,Y*te),X.addScaledVector(z,Ie),X.addScaledVector(D,Y*ae),$.copy(H).addScaledVector(X,s),l.push($.x,$.y,$.z),u.push(X.x,X.y,X.z),d.push(0,0),ie.push(c++)}W.push(ie)}let U=W.length-1;for(let ne=0;ne<U;ne++){let ie=W[ne],re=W[ne+1],K=ie.length-1;o.push(ie[0],re[1],re[0]);for(let fe=1;fe<=K;fe++)o.push(ie[fe-1],ie[fe],re[fe]),o.push(ie[fe],re[fe+1],re[fe])}}}},FJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,s,a,o;let i=Object.assign({},(n=t==null?void 0:t.parameters)!=null?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((s=t==null?void 0:t.ui)!=null?s:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Mi?e.shape:new Mi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((a=i.height)!=null?a:i.width),depth:Math.abs((o=i.depth)!=null?o:0)}),ui:r}}static build(e){let t=e.shape,{width:i,height:r,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,u={x:i*.5,y:r*.5},d={x:-u.x,y:-u.y},c={x:u.x,y:u.y};function h(w,_,b){return _>i&&b>r?Math.min(w*i/_,w*r/b):_>i?w*i/_:b>r?w*r/b:w}let f=[];f[0]=n[0]===0?0:h(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:h(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:h(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:h(n[3],n[3]+n[0],n[3]+n[2]);let m=d.x,p=c.x,g=c.y,v=d.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(p,v)),t.addPoint(t.createPoint(m,v)),t.isClosed=!0;let y=!0;for(let w=0,_=t.points.length;w<_;w++)t.points[w].roundness=f[w],w>0&&f[w]!==f[w-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=s!==1,t.update();let x=Dl.create({shape:t,parameters:{depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},UJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:u}=e.parameters,d=new aA(.5*t,n,s,a,o,l,u);return d.scale(1,i/t,r/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},HJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:n=8}=e.parameters,s=new N0(t,i,r,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},VJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:n,cornerRadius:s,cornerSegments:a}=e.parameters,o=new jJ(t,i,r,n,s,a);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},jJ=class extends ft{constructor(e=1,t=1,i=1,r=90,n=10,s=24){super(),this.type="BackdropGeometry";let a=[],o=[],l=[],u=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),r=Math.min(180-u,r),r*=Math.PI/180;let d=[],c=Math.PI/2,h=(ne=0,ie=0,re=0)=>new T(ne,ie,re),f=h(),m=h(),[p,g,v]=[t/2,e/2,i/2],y=-g,x=+g,[w,_,b]=[h(y,-p,+v),h(y,-p,-v),h(y,+p,-v)],A=(ne,ie=!1)=>Math.sin(ne-Math.PI/(1+ +ie)),S=(ne,ie=!1)=>Math.cos(ne-Math.PI/(1+ +ie));b.y=Math.sin(r)*t-p;let M=Math.cos(r)*t-v,E=w.z-u;r<=c?(b.z=Math.min(M,E),b.z==E&&(b.y-=(M-E)/Math.tan(c-r))):_.z=Math.min(_.z-M-v,w.z-u),f.subVectors(w,_),m.subVectors(b,_);let C=Math.min(f.length(),m.length())*n/100,L=C*Math.tan(r/2),N=C/Math.cos(r/2),R=f.clone().normalize().add(m.normalize()).setLength(N).add(_);f.set(0,A(r,!0),S(r,!0)),d.push([b,f.clone()]);let V=(Math.PI-r)/s;for(let ne=0;ne<=s;ne++){let ie=c+r+ne*V;f.set(0,Math.sin(ie)*L,Math.cos(ie)*L),f.add(R),m.set(0,A(ie),S(ie)),d.push([f.clone(),m.clone()])}d.push([w,h(0,1,0)]);let F=Math.sin(V/2)*L*2,H=d.length-1,P=d[0][0].distanceTo(d[1][0]),z=d[H-1][0].distanceTo(d[H][0]),D=P+F*s+z;d[0].push(1);for(let ne=0;ne<=s;ne++)d[ne+1].push(1-(P+ne*F)/D);d[H].push(0);let[j,B,W]=d[0],X,$,U;for(let ne=1;ne<d.length;ne++)[X,$,U]=d[ne],a.push(y,j.y,j.z,y,X.y,X.z,x,j.y,j.z,x,j.y,j.z,y,X.y,X.z,x,X.y,X.z),o.push(0,B.y,B.z,0,$.y,$.z,0,B.y,B.z,0,B.y,B.z,0,$.y,$.z,0,$.y,$.z),l.push(0,W,0,U,1,W,1,W,0,U,1,U),[j,B,W]=[X,$,U];this.setAttribute("position",new ke(a,3)),this.setAttribute("normal",new ke(o,3)),this.setAttribute("uv",new ke(l,2))}},GJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Mi?e.shape:new Mi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,d=e.shape,c=t*.5,h=i*.5,f=0,m=0,p=a*Math.PI/360/n,g=Math.PI/2*3*-1,v=c*r/100,y=h*r/100;if(n===3&&r===50){p=2*Math.PI/n;for(let w=0;w<n;w++){let _=p*w,b=f+Math.sin(_)*c,A=m+Math.cos(_)*h;d.addPoint(d.createPoint(b,A))}}else for(let w=0;w<n;w++){let _=f+Math.cos(g)*c,b=m+Math.sin(g)*h;d.addPoint(d.createPoint(_,b)),g+=p,_=f+Math.cos(g)*v,b=m+Math.sin(g)*y,d.addPoint(d.createPoint(_,b)),g+=p}d.isClosed=!0;for(let w=0,_=d.points.length;w<_;w++)d.points[w].roundness=s;d.roundness=s,d.update();let x=Dl.create({shape:d,parameters:{roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},Rz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new N0(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},WJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var a,o,l;let i=Object.assign({},(a=t==null?void 0:t.parameters)!=null?a:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),n=Math.abs((o=i.height)!=null?o:i.width),s=Math.abs((l=i.depth)!=null?l:i.width*.25);return{parameters:Object.assign(i,{width:r,height:n,depth:s})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,u=XJ(t,i,r,t*.5,a,s,0,0,n,o,l);return u.scale(1,i/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function XJ(e,t,i,r,n,s,a,o,l,u,d){return[t,i]=[i,t],a=t/2,n/=2*Math.PI,n==1&&(u=0),new Lz(!0,e,t,i,r,n,s,a,o,l,u,d)}var YJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s,a;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width),depth:Math.abs((s=i.depth)!=null?s:i.width),tube:(a=i.tube)!=null?a:i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==i&&(o-=i);let l=new KR(o,i,r,n,s,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},qJ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,s;let i=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Mi?e.shape:new Mi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs((n=i.height)!=null?n:i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs((s=i.depth)!=null?s:0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o}=e.parameters,l=e.shape,u=t*.5,d=i*.5;o?(l.addPoint(l.createPoint(-u,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=r;l.roundness=r,l.update();let c=Dl.create({shape:l,parameters:{roundness:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(c,{userData:{...e,type:"TriangleGeometry"}})}},Iz,zz=new Promise(e=>{Iz=e}),rD=!1;async function QJ(){if(rD)return;let e="https://unpkg.com/@splinetool/modelling-wasm@0.9.106/build",[t,i]=await Promise.all([vR(()=>import("./process.4ee59d79.js"),[]),fetch(`${e}/process.wasm`).then(n=>n.arrayBuffer())]),r=await t.default({wasmBinary:i});Iz(r),rD=!0}function Hr(e,t){return t.color(e)}var Pl=e=>"isEntity"in e,ji=e=>"isAbstractMesh"in e,Ii=e=>e!==null&&e.objectType==="BooleanObject",ZJ=e=>e.objectType==="CombinedCamera",KJ=e=>Pl(e)&&(e.objectType==="LightDirectional"||e.objectType==="LightSpot"||e.objectType==="LightPoint"),Bz=e=>e.objectType==="EmptyObject",kz=e=>"objectHelper"in e;function Nz(e,t){var r;let i=!1;t.position&&(e.position.fromArray(t.position),i=!0),t.rotation&&(e.rotation.fromArray(t.rotation),i=!0),t.scale&&(i=!0,e.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&"hiddenMatrix"in e&&(i=!0,e.hiddenMatrix.fromArray((r=t.hiddenMatrix)!=null?r:Vu.identity)),i&&(e.updateMatrix(),Ii(e.parent)&&ji(e)&&e.invalidateDownstreamBooleanData(!0).recomputeBoolean()),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&e.updateWorldMatrix(!1,!0),e.objectType==="CombinedCamera"&&(t.isUpVectorFlipped!==void 0&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}function JJ(e,t){Nz(e,t),t.name!==void 0&&(e.name=t.name),t.visible!==void 0&&(e.visible=t.visible)}function $J(e,t,i){JJ(e,t),t.color!==void 0&&(e.color=Hr(t.color,i)),t.intensity!==void 0&&(e.intensity=t.intensity),t.shadows!==void 0&&!(e instanceof m_)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof m_)&&t.depth!==void 0&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0)}function e$(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var Fz=e=>class extends e{hasEntityChild(){return this.children.some(t=>Pl(t))}isDescendantOf(t){t instanceof Yt&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new Ke().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),Pl(t)?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let n=t.children[r];this.add(n.clone())}return this}},_c=new Xi,Zs=new T,Ks=new T,mh=new Ke,Uz=[new T(-1,1,1),new T(-1,-1,1),new T(1,-1,1),new T(1,1,1),new T(-1,1,-1),new T(-1,-1,-1),new T(1,-1,-1),new T(1,1,-1)],t$=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],i$=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]];function r$(e,t,i=0,r=t.count){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=i;d<r;d++){let c=t.getX(d),h=t.getY(d),f=t.getZ(d);c<n&&(n=c),h<s&&(s=h),f<a&&(a=f),c>o&&(o=c),h>l&&(l=h),f>u&&(u=f)}return e.min.set(n,s,a),e.max.set(o,l,u),e}var nD=(e,t,i)=>{var r;if(ji(e)){let n=e.geometry.userData.parameters,s=e.geometry.getAttribute("position");e.geometry.userData.type==="SubdivGeometry"?Zs.copy(e.originalGeometry.boundingSphere.center):s!==void 0&&(r$(_c,s,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:s.count),_c.getCenter(Zs)),e.forceComputeSize?_c.getSize(Ks).multiplyScalar(.5):Ks.set(n.width,n.height,(r=n.depth)!=null?r:0).multiplyScalar(.5)}else if(kz(e)&&e.objectHelper.visible){let n=e.geometryHelper.getAttribute("position");_c.setFromArray(n.array),_c.getCenter(Zs),_c.getSize(Ks).multiplyScalar(.5)}else Zs.setScalar(0),Ks.setScalar(0);mh.copy(t).multiply(e.matrixWorld),Ks.x===0&&Ks.y===0&&Ks.z===0?i.push(new T(Zs.x,Zs.y,Zs.z).applyMatrix4(mh)):Uz.forEach(n=>{i.push(n.clone().multiply(Ks).add(Zs).applyMatrix4(mh))})},sD=class extends Xi{constructor(){super(...arguments),this.matrix=new Ke,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new Ke().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(n=>{n.visible&&nD(n,t,r)}):nD(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(mh.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Ks).multiplyScalar(.5),this.getCenter(Zs),mh.copy(this.matrix).setPosition(Zs),this.vertices=Uz.map(e=>e.clone().multiply(Ks).applyMatrix4(mh))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=t$.map(([e,t])=>new cs(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new T))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=i$.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Za=e=>"isEntity"in e,n$=e=>"isAbstractMesh"in e,ed=e=>class extends Fz(e){constructor(){super(...arguments),this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new Ke,this._singleBBox=new sD,this._recursiveBBox=new sD,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors(t=>{Za(t)&&(t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0)}),this.traverseEntity(t=>{t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0})}traverseEntity(t){t(this);for(let i of this.children)Za(i)&&i.traverseEntity(t)}traverseVisibleEntity(t){t(this);for(let i of this.children)Za(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let n of this.children)n.updateWorldMatrix(!1,!0)}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),i===!0)for(let r of t.children)Za(r)&&this.add(r.clone());return this}keepChildrenMatrixWorld(){let t=new Ke,i=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),t.copy(this.matrixWorld).invert(),t.multiply(i);for(let r of this.children)Za(r)&&r.hiddenMatrix.premultiply(t)}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return M_(i,t)}fromObjectTransformState(t){return t.position&&this.position.fromArray(t.position),t.rotation&&this.rotation.fromArray(t.rotation),t.scale&&this.scale.fromArray(t.scale),t.hiddenMatrix&&this.hiddenMatrix.fromArray(t.hiddenMatrix),this.updateMatrix(),this}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return M_(i,t)}fromState(t,i){return t.name&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.type!=="OrthographicCamera"&&t.type!=="PerspectiveCamera"&&(this.matrixAutoUpdate=!1),t.visible!==void 0&&(this.visible=t.visible),this.fromObjectTransformState(t),this}},s$=class extends Yt{},a$=class extends s${constructor(e){super(),this.object=e,this.matrixAutoUpdate=!0}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return!0}get isLight(){return!1}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){return this.object.geometry}get material(){return this.object.material}},aD=class extends Yt{constructor(e,t={}){super(),this.object=e;let i=e.recursiveBBox.getSize(new T),r=.1;this.parameters=P_.defaultData(i.toArray(),r),Wv(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}setHideBase(e){this.parameters.hideBase=e}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach(e=>e.updateMatrix())}_updateCount(){let e=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,i=e-this.children.length;t<i;++t){let r=new a$(this.object);r.visible=!0,this.add(r),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,i=this.children.length-e;t<i;++t)this.remove(this.children[0])}_updateRadial(e){let t=e.radial,i=t.start*Mt.DEG2RAD,r=t.end*Mt.DEG2RAD,n=i-r,s=new $n(t.rotation[0]*Mt.DEG2RAD,t.rotation[1]*Mt.DEG2RAD,t.rotation[2]*Mt.DEG2RAD),a;switch(t.axis){case"z":a=new T(0,0,1);break;case"y":a=new T(0,1,0);break;default:case"x":a=new T(1,0,0);break}for(let[o,l]of this.children.entries()){l.scale.x=t.scale[0],l.scale.y=t.scale[1],l.scale.z=t.scale[2],l.position.setScalar(0);let u=n/e.count*o-i;switch(t.axis){case"x":l.rotation.set(0,u,0);break;case"y":l.rotation.set(0,0,u);break;case"z":l.rotation.set(u,0,0);break}l.translateOnAxis(a,t.radius),l.position.x+=t.position[0],l.position.y+=t.position[1],l.position.z+=t.position[2],t.alignment===!0?(l.rotation.x+=s.x,l.rotation.y+=s.y,l.rotation.z+=s.z):l.rotation.copy(s)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new $n(t.rotation[0]*Mt.DEG2RAD,t.rotation[1]*Mt.DEG2RAD,t.rotation[2]*Mt.DEG2RAD);for(let[r,n]of this.children.entries())n.scale.x=1+(t.scale[0]-1)*r,n.scale.y=1+(t.scale[1]-1)*r,n.scale.z=1+(t.scale[2]-1)*r,n.rotation.x=i.x*r,n.rotation.y=i.y*r,n.rotation.z=i.z*r,n.position.x=t.position[0]*r,n.position.y=t.position[1]*r,n.position.z=t.position[2]*r}_updateGrid(e){let t=0,i=e.grid;if(i.useCenter===!0){let r={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},n=new T(i.size[0]*(i.count[0]-r.x)*.5,i.size[1]*(i.count[1]-r.y)*.5,i.size[2]*(i.count[2]-r.z)*.5);for(let s=0;s<i.count[0];s++)for(let a=0;a<i.count[1];a++)for(let o=0;o<i.count[2];o++){let l=this.children[t++];l.scale.setScalar(1),l.rotation.set(0,0,0),l.position.x=i.size[0]*s-n.x,l.position.y=i.size[1]*a-n.y,l.position.z=i.size[2]*o-n.z}}else for(let r=0;r<i.count[0];r++)for(let n=0;n<i.count[1];n++)for(let s=0;s<i.count[2];s++){let a=this.children[t++];a.scale.setScalar(1),a.rotation.set(0,0,0),a.position.x=i.size[0]*r,a.position.y=-i.size[1]*n,a.position.z=-i.size[2]*s}}fromClonerState(e){return e.hideBase!==void 0&&this.setHideBase(e.hideBase),Wv(this.parameters,e),this.update(),this}},oD=class{constructor(e){e=e!=null?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Nl=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Mt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t!=null?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i!=null?i:{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i!=null?i:{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t!=null?t:this.getType(e,t);let r=e.getNodeData(i!=null?i:this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,n,s){return""}generate(e,t,i,r,n){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,i;for(t in this)i=this[t],i instanceof Nl&&(e+='"'+t+'":'+i.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)t=this.hashProperties[r],i=this[t],e+='"'+t+'":"'+String(i)+'",';return e+='"id":"'+this.uuid+'"}',e}},o$=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},nn=new o$,Zt=class extends Nl{constructor(e,t){super(e),this.scope="",t=t!=null?t:{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,i,r){if(t=t!=null?t:this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=Mt.generateUUID()),i=e.getUUID(i!=null?i:this.getUUID(),!n);let s=e.getNodeData(i),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,i)):super.build(e,t,i);if(n)return s.name=s.name||super.build(e,t,i),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,i);i=this.getUUID(!1);let o=this.getTemp(e,i);if(o)return e.format(o,a,t);{o=super.generate(e,t,i,s.output,r);let l=this.generate(e,a,i);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,i)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,r,n){return this.getShared(e,t)||console.error("TempNode is not shared"),i=i!=null?i:this.uuid,e.getTempVar(i,r!=null?r:this.getType(e),n,this.getLabel()).name}},kn=class extends Zt{constructor(e,t){t=t!=null?t:{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,n,s){i=e.getUUID(i!=null?i:this.getUUID()),r=r!=null?r:this.getType(e);let a=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(a.fragment.name,r,t))}},qn=class extends kn{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof q?e:new q(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},Wn=class extends kn{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof T?e:new T(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},nu=class extends kn{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof zs?e:new zs(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},l$=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,lD=/[a-z_0-9]+/gi,$e=class extends Zt{constructor(e,t,i,r,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,i,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,r,n){let s,a=0,o=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;s=lD.exec(this.src);)l.push(s);for(let u=0;u<l.length;u++){let d=l[u],c=d[0],h=this.isMethod?!this.getInputByName(c):!0,f=c;if(this.keywords[c]||this.useKeywords&&h&&nn.containsKeyword(c)){let m=this.keywords[c];if(!m){let p=nn.getKeywordData(c);p.cache&&(m=e.keywords[c]),m=m||nn.getKeyword(c,e),p.cache&&(e.keywords[c]=m)}f=m.build(e)}c!==f&&o[d.index+a-1]!=="."&&(o=o.substring(0,d.index+a)+f+o.substring(d.index+c.length+a),a+=f.length-c.length),this.getIncludeByName(f)===void 0&&nn.contains(f)&&e.include(nn.get(f))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,i,r){if(this.src=e||"",this.includes=t!=null?t:[],this.extensions=i!=null?i:{},this.keywords=r!=null?r:{},this.isMethod){let n=l$.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(lD);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let u=s[a++];this.inputs.push({name:u,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},u$=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,Hz=class extends Zt{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||Hz.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,n){this.src=e||"";let s,a,o="",l=u$.exec(e);this.useDefine=n!=null?n:this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,n){return e.format(this.name,this.getType(e),t)}},jt=Hz;jt.PI="PI",jt.PI2="PI2",jt.RECIPROCAL_PI="RECIPROCAL_PI",jt.RECIPROCAL_PI2="RECIPROCAL_PI2",jt.LOG2="LOG2",jt.EPSILON="EPSILON";var c$=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),h$=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Vz=class extends Zt{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=c$.exec(e);if(t){let i=t[2],r;for(;r=h$.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},kA=class extends Zt{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e!=null?e:0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};nn.addKeyword("uv",function(){return new kA});nn.addKeyword("uv2",function(){return new kA(1)});var Pc=class extends Zt{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t!=null?t:Pc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Aa:return["Linear"];case yt:return["sRGB"];default:return[]}}generate(e,t){var a;let i=this.input.build(e,"v4"),r=this.getType(e),n=Pc.Nodes[this.method],s=e.include(n);if(s===Pc.LINEAR_TO_LINEAR)return e.format(i,r,t);if(((a=n.inputs)==null?void 0:a.length)===2){let o=this.factor.build(e,"f");return e.format(s+"( "+i+", "+o+" )",r,t)}else return e.format(s+"( "+i+" )",r,t)}fromEncoding(e){let t=Pc.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Pc.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},ua=Pc;ua.Nodes={LinearToLinear:new $e(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new $e(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new $e(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},ua.LINEAR_TO_LINEAR="LinearToLinear",ua.SRGB_TO_LINEAR="sRGBToLinear",ua.LINEAR_TO_SRGB="LinearTosRGB";var ti=class extends $e{constructor(e="",t,i,r,n){super(e,n,r,i,t),this.nodeType="Expression"}},sl=class extends kn{constructor(e=new Gr,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t!=null?t:new kA,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var u;if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,a;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?a=s+"( "+i+", "+r+", "+n+" )":a=s+"( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=(u=this.colorSpace)!=null?u:new ua(new ti("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},Ge=class extends kn{constructor(e){super("f"),this.nodeType="Float",this.value=e!=null?e:0}generateReadonly(e,t,i,r,n,s){return e.format(this.value+(this.value%1?"":".0"),r,t)}},uD=class extends Zt{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t!=null?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,n){r=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let u=s.inputs[l],d=this.inputs[l]||this.inputs[u.name];o.push(d.build(e,e.getTypeByFormat(u.type)))}a+=o.join(", ")+" )"}return e.format(a,r,t)}},jz=class extends Zt{constructor(e,t,i=jz.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),n=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+n+" )",i,t)}},ca=jz;ca.ADD="+",ca.SUB="-",ca.MUL="*",ca.DIV="/";var Ht=class extends Zt{constructor(e,t=Ht.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Ht.MIX:case Ht.CLAMP:case Ht.REFRACT:case Ht.SMOOTHSTEP:case Ht.FACEFORWARD:return 3;case Ht.MIN:case Ht.MAX:case Ht.MOD:case Ht.STEP:case Ht.REFLECT:case Ht.DISTANCE:case Ht.DOT:case Ht.CROSS:case Ht.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Ht.LENGTH:case Ht.DISTANCE:case Ht.DOT:return"f";case Ht.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case Ht.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Ht.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Ht.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case Ht.STEP:i=this.a.build(e,s===1?"f":l),r=this.b.build(e,l);break;case Ht.MIN:case Ht.MAX:case Ht.MOD:i=this.a.build(e,l),r=this.b.build(e,a===1?"f":l);break;case Ht.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,"f");break;case Ht.MIX:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let d=[];d.push(i),r&&d.push(r),n&&d.push(n);let c=this.getNumInputs(e);if(d.length!==c)throw Error(`Arguments not match used in "${this.method}". Require ${c}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",u,t)}},ht=Ht;ht.RAD="radians",ht.DEG="degrees",ht.EXP="exp",ht.EXP2="exp2",ht.LOG="log",ht.LOG2="log2",ht.SQRT="sqrt",ht.INV_SQRT="inversesqrt",ht.FLOOR="floor",ht.CEIL="ceil",ht.NORMALIZE="normalize",ht.FRACT="fract",ht.SATURATE="saturate",ht.SIN="sin",ht.COS="cos",ht.TAN="tan",ht.ASIN="asin",ht.ACOS="acos",ht.ARCTAN="atan",ht.ABS="abs",ht.SIGN="sign",ht.LENGTH="length",ht.NEGATE="negate",ht.INVERT="invert",ht.MIN="min",ht.MAX="max",ht.MOD="mod",ht.STEP="step",ht.REFLECT="reflect",ht.DISTANCE="distance",ht.DOT="dot",ht.CROSS="cross",ht.POW="pow",ht.MIX="mix",ht.CLAMP="clamp",ht.REFRACT="refract",ht.SMOOTHSTEP="smoothstep",ht.FACEFORWARD="faceforward";var Qd=class extends Zt{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){var o,l,u,d;let n=new uD(Qd.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=(o=this.colorSpaceTL)!=null?o:new ua(new ti("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=(l=this.colorSpaceTR)!=null?l:new ua(new ti("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=(u=this.colorSpaceBL)!=null?u:new ua(new ti("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=(d=this.colorSpaceBR)!=null?d:new ua(new ti("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new ti(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new ti(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new ti(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new ti(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new ti("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=n,a}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,n=new uD(Qd.Nodes.roughnessToMip,[r]),s=new ht(n,Qd.Nodes.m0,Qd.Nodes.cubeUV_maxMipLevel,ht.CLAMP),a=new ht(s,ht.FLOOR),o=new ht(s,ht.FRACT),l=this.bilinearCubeUV(e,this.value,i,a),u=this.bilinearCubeUV(e,this.value,i,new ca(a,new Ge(1).setReadonly(!0),ca.ADD)),d=new ht(l,u,o,ht.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},rb=Qd;rb.Nodes=function(){let e=new Vz(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new jt("float cubeUV_maxMipLevel 8.0",!0),i=new jt("float cubeUV_minMipLevel 4.0",!0),r=new jt("float cubeUV_maxTileSize 256.0",!0),n=new jt("float cubeUV_minTileSize 16.0",!0),s=new $e(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new $e(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new $e(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,i,r,n]);o.useKeywords=!1;let l=new jt("float r0 1.0",!0),u=new jt("float v0 0.339",!0),d=new jt("float m0 -2.0",!0),c=new jt("float r1 0.8",!0),h=new jt("float v1 0.276",!0),f=new jt("float m1 -1.0",!0),m=new jt("float r4 0.4",!0),p=new jt("float v4 0.046",!0),g=new jt("float m4 2.0",!0),v=new jt("float r5 0.305",!0),y=new jt("float v5 0.016",!0),x=new jt("float m5 3.0",!0),w=new jt("float r6 0.21",!0),_=new jt("float v6 0.0038",!0),b=new jt("float m6 4.0",!0),A=[l,u,d,c,h,f,m,p,g,v,y,x,w,_,b],S=new $e(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,A);return{bilinearCubeUV:o,roughnessToMip:S,m0:d,cubeUV_maxMipLevel:t}}();var Lc=class extends Zt{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e!=null?e:Lc.VIEW}getShared(){return this.scope===Lc.WORLD}build(e,t,i,r){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,n){let s;switch(this.scope){case Lc.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Lc.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case Lc.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},on=Lc;on.LOCAL="local",on.WORLD="world",on.VIEW="view",on.NORMAL="normal";nn.addKeyword("viewNormal",function(){return new on(on.VIEW)});nn.addKeyword("localNormal",function(){return new on(on.NORMAL)});nn.addKeyword("worldNormal",function(){return new on(on.WORLD)});var Fa=class extends Zt{constructor(e){super("v3"),this.nodeType="Position",this.scope=e!=null?e:Fa.LOCAL}getType(){switch(this.scope){case Fa.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Fa.LOCAL:case Fa.WORLD:return!1}return!0}generate(e,t,i,r,n){let s;switch(this.scope){case Fa.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case Fa.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case Fa.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Fa.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},Ls=Fa;Ls.LOCAL="local",Ls.WORLD="world",Ls.VIEW="view",Ls.PROJECTION="projection";nn.addKeyword("position",function(){return new Ls});nn.addKeyword("worldPosition",function(){return new Ls(Ls.WORLD)});nn.addKeyword("viewPosition",function(){return new Ls(Ls.VIEW)});var Ys=class extends Zt{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e!=null?e:Ys.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Ys.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case Ys.VECTOR:{let n=new on(on.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new Ls(Ls.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,u=`reflect( -normalize( ${o} ), ${a} )`;l&&(u=`normalize( mix( ${u}, ${a}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${u}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${d};`),r="reflectVec"):r=d;break}case Ys.CUBE:{let n=new Ys(Ys.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),r="reflectCubeVec"):r=s;break}case Ys.SPHERE:{let n=new Ys(Ys.VECTOR).build(e,"v3"),s="normalize( ( viewMatrix * vec4( "+n+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),r="reflectSphereVec"):r=s;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},gh=Ys;gh.CUBE="cube",gh.SPHERE="sphere",gh.VECTOR="vector";var d$=class extends Zt{constructor(e=new sl,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new rb(this.value,t!=null?t:new gh(gh.VECTOR),i),this.irradianceNode=new rb(this.value,new on(on.WORLD),new Ge(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},f$=class extends kn{constructor(e=new KS,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t!=null?t:new gh,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l,u;if(t==="samplerCube")return this.getTexture(e,t);let i=this.getTexture(e,t),r=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+i+", "+r+", "+n+" )":s="texCube( "+i+", "+r+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(a),this.colorSpace=(u=this.colorSpace)!=null?u:new ua(new ti("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,o),e.removeContext(),e.format(s,o,t)}},cD=["x","y","z","w"],p$=["float","vec2","vec3","vec4"],m$={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},g$={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},v$=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let n="";r=r.sort(e);for(let s=0;s<r.length;s++)r[s].src&&(n+=r[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e!=null?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t!=null?t:this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t!=null?t:this.shader]+=e+`
`}clearNodeCode(e){e=e!=null?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t!=null?t:this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t!=null?t:this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",n="V",s=""){let a=this.getVars(r),o=a[e];if(!o){let l=a.length;o={name:i||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t!=null?t:"";let i="";for(let r=0,n=e.length;r<n;++r){let s=e[r],a=s.type,o=s.name,l=s.size,u=this.getFormatByType(a);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?i+=t+" "+u.substring(0,u.length-2)+" "+o+`[${l}];
`:i+=t+" "+u+" "+o+`;
`}return i}getVars(e){return this.inputs.vars[e!=null?e:this.shader]}getNodeData(e){let t=e instanceof Nl?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new oD({type:t,size:i.size,name:r||"nodeUA"+o+(s?"_"+s:""),node:i,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new oD({type:t,name:r||"nodeU"+o+(s?"_"+s:""),node:i,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,n){return this.createUniform("vertex",e,t,i,r,n)}createFragmentUniform(e,t,i,r,n){return this.createUniform("fragment",e,t,i,r,n)}include(e,t,i){var s;let r;if(e=typeof e=="string"?nn.get(e):e,this.context.include===!1)return e.name;e instanceof $e?r=this.includes.functions:e instanceof jt?r=this.includes.consts:e instanceof Vz&&(r=this.includes.structs);let n=r[this.shader]=r[this.shader]||[];if(e){let a=n[e.name];if(a||(a=n[e.name]={node:e,deps:[]},n.push(a),a.src=e.build(this,"source")),e instanceof $e&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return i&&(a.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return p$[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!=null&&i.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case Nu:case Fu:return new f$(i);case Tp:return new d$(new sl(i));default:return new sl(i)}else{if(i.isVector2)return new qn(i);if(i.isVector3)return new Wn(i);if(i.isVector4)return new nu(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return m$[e]||e}getFormatByType(e){return g$[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return cD[e]}getIndexByElement(e){return cD.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Aa,t===Aa&&this.context.gamma&&(t=yt),t}},xi=class extends kn{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof zs?e:new zs(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,n,s){i=e.getUUID(i!=null?i:this.getUUID()),r=r!=null?r:this.getType(e);let a=e.getNodeData(i),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(a.fragment.name,r,t))}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},Wt=class extends kn{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e!=null?e:0)}generateReadonly(e,t,i,r,n,s){return e.format(this.value.toString(),r,t)}},Gz=class extends Nl{constructor(){super("basic"),this.nodeType="Basic",this.color=new xi(5855577),this.shadingAlpha=new Ge(1),this.shadingBlend=new Wt(0)}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(jh.merge([Le.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new xi(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",i.code];r&&s.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${i.result};`),r?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} );`):s.push("gl_FragColor = vec4("+i.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},Dd=class extends kn{constructor(e){super("b"),this.nodeType="Bool",this.value=e!=null?e:!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},Wz=class extends kn{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e!=null?e:new Ar}generateReadonly(e,t,i,r,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},eu=class extends kn{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},tu=class extends kn{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof vt?new Array(e).fill(t):new Array(e).fill(new vt(0))}},NA=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e))(NA||{}),ts=function(){let e=new $e(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new $e(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new jt("float F3 0.3333333"),t.keywords.G3=new jt("float G3 0.1666667");let i=new $e(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),r=new $e("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new $e("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new $e(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[r,n]),a=new $e("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new $e("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new $e(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),u=new $e(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new jt(`int NUM_OCTAVES ${5}`);let d=new $e("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),c=new $e(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[r,n,d]);return{simplex:t,simplexFractal:i,simplexAshima:s,fbm:u,perlin:c}}(),Xz=class extends Zt{constructor(e,t,i,r,n,s,a,o,l,u,d,c){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=u,this.alpha=d,this.noiseType=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(NA)[this.noiseType.value],a=new $e(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[ts.simplex,ts.simplexFractal,ts.simplexAshima,ts.fbm,ts.perlin]),o=e.include(a),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(o+"("+l.join(",")+")",this.getType(e),t)}};Xz.numOctaves=5;var y$=class extends Nl{constructor(){super("phong"),this.nodeType="Phong",this.color=new xi(5855577),this.specular=new xi(1118481),this.shininess=new Ge(30),this.shadingAlpha=new Ge(1),this.shadingBlend=new Wt(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(jh.merge([Le.fog,Le.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),this.color===void 0&&(this.color=new xi(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&u.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},Yz=class extends Zt{constructor(e,t,i,r,n,s,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=n,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(Yz.Nodes.fresnel),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qz=Yz;qz.Nodes=function(){return{fresnel:new $e(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var Qz=class extends Zt{constructor(e,t,i,r,n,s,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=n,this.offset=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Qz.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Zz=Qz;Zz.Nodes=function(){let e=new $e(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[ts.simplex]);return{rainbow:new $e(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[e])}}();var Kz=class extends Zt{constructor(e,t,i,r,n,s,a,o,l,u,d,c,h,f,m,p){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=a,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=u,this.compensation=d,this.resolution=c,this.normalMap=h,this.depthMap=f,this.pixelRatio=m,this.alpha=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let i=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),n=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(n,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let a=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexFinalCode(`
                vID = randomColor.r;
                if (${n}) {
                    vec4 ${a}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${a}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${a}_offset = normalize(${a}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${a}_clipPosition.w * 2.0 * ${s};
                    ${a}_clipPosition.xy += ${a}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${a}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Kz.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},Jz=Kz;Jz.Nodes=function(){let e=new $e(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new $e(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[e])}}();var $z=class extends Zt{constructor(e,t,i,r,n,s,a,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include($z.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eB=$z;eB.Nodes=function(){let e=new $e(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),t=new $e(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[e]),i=new $e(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new $e(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),n=new $e(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[r,t]),s=new $e(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[n,i]);return{transmission:new $e(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var Zd=class extends Zt{constructor(e,t,i,r,n,s,a,o,l,u,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=u,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new $e(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[Zd.Nodes.vectorLinearWorldSpaceDepth,Zd.Nodes.vectorLinearObjectSpaceDepth,Zd.Nodes.vectorSphericalObjectSpaceDepth,Zd.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(r),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tB=Zd;tB.Nodes=function(){let e=new $e(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new $e(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new $e(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new $e(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var hD=class extends Zt{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nb=(e=>(e.NOISE="noise",e.MAP="map",e))(nb||{}),iB=class extends Zt{constructor(e,t,i,r,n){super("v3"),this.displacementTypeIndex=new Wt(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(nb)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Wz(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=r,this.noiseFunctionIndex=n}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(nb)[this.displacementTypeIndex.value]){case"map":{i=e.include(iB.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(NA)[this.noiseFunctionIndex.value],s=new $e(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=new $e(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[ts.simplex,ts.simplexFractal,ts.simplexAshima,ts.fbm,ts.perlin]),o=new $e(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,s]);i=e.include(o),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rB=iB;rB.Nodes=function(){let e=new $e(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new $e(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new $e(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var nB=class extends Zt{constructor(e,t,i,r,n,s,a,o){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=n,this.morph=s,this.angle=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(nB.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},sB=nB;sB.Nodes=function(){return{gradient:new $e(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var Jg=class extends Zt{constructor(e,t,i,r,n,s,a,o,l,u){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=n,this.side=s,this.size=a,this.mat=o,this.alpha=l,this.mode=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(Jg.Nodes.cylindrical);break;case 2:r=e.include(Jg.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=new $e(`
		vec3 ${i}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${i}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(a);break;default:r=e.include(Jg.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${i}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${i}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${i}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+n.join(",")+")",this.getType(e),t)}},aB=Jg;aB.Nodes=function(){let e=new $e(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new $e(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),i=new $e(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:e,spherical:t,uv:i}}();var oB=class extends Zt{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let i=e.include(oB.Nodes.customNormal),r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.alpha.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},lB=oB;lB.Nodes=function(){return{customNormal:new $e(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();var ni={normalRenderTarget:new sl,normalRenderTargetDepth:new sl,transmissionRenderTarget:new sl,transmissionSize:new qn(2048,2048),transmissionRenderTargetDepth:new sl,pixelRatioNode:new Ge(1),resolution:new qn,penumbraSize:new eu(5,.5)};for(let e of Object.values(ni))e.isRenderGlobal=!0;var x$=class extends Nl{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new xi(5855577),this.emissive=new xi(0),this.emissiveIntensity=new Ge(1),this.shadingAlpha=new Ge(1),this.shadingBlend=new Wt(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(jh.merge([Le.fog,Le.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),this.color===void 0&&(this.color=new xi(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];u.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&u.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+n.result+";"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&u.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},w$=class extends Nl{constructor(){super("standard"),this.nodeType="Standard",this.color=new xi(5855577),this.roughness=new Ge(.3),this.metalness=new Ge(0),this.reflectivity=new Ge(.5),this.shadingAlpha=new Ge(1),this.shadingBlend=new Wt(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(jh.merge([Le.fog,Le.lights])),Le.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize});let i={gamma:!0};this.color===void 0&&(this.color=new xi(5855577)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:i}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let c=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float roughnessFactor = "+n.result+";",s.code,"	float metalnessFactor = "+s.result+";"),u&&c.push(u.code,"#ifdef ALPHATEST","	if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),c.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?c.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):c.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),c.push("#include <lights_fragment_begin>"),c.push("#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},_$=class extends Nl{constructor(){super("toon"),this.nodeType="Toon",this.color=new xi(5855577),this.specular=new xi(1118481),this.shininess=new Ge(30),this.shadingAlpha=new Ge(1),this.shadingBlend=new Wt(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(jh.merge([Le.fog,Le.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),this.color===void 0&&(this.color=new xi(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&u.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}};function b$(e,t){switch(e.type){case"fresnel":return M$(e,t);case"gradient":return E$(e);case"depth":return T$(e);case"normal":return C$(e);case"noise":return D$(e,t);case"rainbow":return P$(e);case"toon":return L$(e,t);case"outline":return O$(e,t);case"transmission":return R$(e);case"color":return A$(e,t)}}function S$(e){return{type:e.type}}function Pa(e){let{alpha:t,mode:i}=e;return{...S$(e),alpha:t,mode:i}}function A$(e,t){return{...Pa(e),color:Hr(e.color,t)}}function M$(e,t){let{bias:i,scale:r,intensity:n,factor:s,color:a}=e;return{...Pa(e),color:Hr(a,t),bias:i,scale:r,intensity:n,factor:s}}function E$(e){let{gradientType:t,smooth:i,colors:r,steps:n,angle:s,offset:a,morph:o}=e;return{...Pa(e),gradientType:t,smooth:i,colors:r.map(l=>new vt(l[0],l[1],l[2],l[3])),num:r.length,steps:n,offset:new q(...a),morph:new q(...o),angle:s}}function T$(e){let{gradientType:t,near:i,far:r,isVector:n,isWorldSpace:s,origin:a,direction:o,colors:l,steps:u,smooth:d}=e;return{...Pa(e),gradientType:t,near:i,far:r,isVector:n,isWorldSpace:s,origin:new T(...a),direction:o?new T(...o):new T(1,0,0),colors:l.map(c=>c!==void 0?new vt(c[0],c[1],c[2],c[3]):new vt(0,0,0,0)),steps:u.slice(0,l.length),smooth:d}}function C$(e){let{cnormal:t}=e;return{...Pa(e),cnormal:new T(t[0],t[1],t[2])}}function D$(e,t){return{...Pa(e),scale:e.scale,move:e.move,fA:new q(...e.fA),fB:new q(...e.fB),size:new T(...e.size),distortion:new q(...e.distortion),colorA:Hr(e.colorA,t),colorB:Hr(e.colorB,t),colorC:Hr(e.colorC,t),colorD:Hr(e.colorD,t),noiseType:e.noiseType}}function P$(e){return{...Pa(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new T(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new T(...e.offset)}}function L$(e,t){return{...Pa(e),positioning:e.positioning,colors:e.colors.map(i=>new vt(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new T(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Hr(e.shadowColor,t),offset:new T(...e.offset)}}function O$(e,t){return{...Pa(e),outlineColor:Hr(e.outlineColor,t),contourColor:Hr(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:e.contourDirection,positionalLines:e.positionalLines,compensation:e.compensation}}function R$(e,t){return{...Pa(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}var o0=class extends zs{},mx=new Map,Tf={url:"head",time:0,data:null,next:null,prev:null},Jc={url:"tail",time:1/0,data:null,next:null,prev:null};Tf.next=Jc;Jc.prev=Tf;var dD=0;function I$(e){if(typeof e=="string")return e;let t=Date.now(),i=mx.get(e);return i===void 0?(i={url:URL.createObjectURL(new Blob([e])),data:e,time:t,next:null,prev:null},mx.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=Jc.prev,i.next=Jc,Jc.prev.next=i,Jc.prev=i,t-dD>1e3*10&&(dD=t+1e3,setTimeout(()=>{let r=Date.now(),n=Tf.next;for(;n.time<r-1e3*10;)URL.revokeObjectURL(n.url),mx.delete(n.data),n=n.next,n.prev=Tf,Tf.next=n},900)),i.url}var uB=class{constructor(e,t){this.data=e,this.onImageLoad=t,this.loaded=!1,this.updateSrc(e.data)}updateSrc(e){typeof document>"u"||(this.dispose(),this.loaded=!1,this.img=new Image,this.img.src=I$(e),this.img.onload=()=>{this.loaded=!0;let t=[1e3,1001,1002];for(let i of t){let r=this[i];r&&(r.image=this.img,r.needsUpdate=!0)}this.onImageLoad&&this.onImageLoad()})}getTexture(e){let t=this[e];if(t)return t;{let i=new Gr(this.img,void 0,e,e);return this.loaded&&(i.needsUpdate=!0),this[e]=i,i}}dispose(){var e,t,i;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(i=this[1002])==null||i.dispose(),this[1002]=void 0}},sb=class extends uB{},FA=class extends kn{},cB={noise:["noiseType"],texture:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},hB={depth:["colors"]};function z$(e,t,i){var s,a;let r=cB[e.type],n=hB[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(a=(s=o[t])==null?void 0:s.value)==null?void 0:a.length;if(l!==void 0&&l!==i.length)return!0}}return r!==void 0?r.includes(t):!1}function dB(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let n=!1,s=e;if("image"in s){let a=s.image,o=t.image(a),l=r;l instanceof sb||l.image.dispose(),l.image=o}if("wrapping"in s){let a=r;a.wrap=s.wrapping}if("repeat"in s||"offset"in s){let a="mat",o=i.uniforms[`f${i.id}_${a}`];"repeat"in s&&(o.repeat=s.repeat),"offset"in s&&(o.offset=s.offset),o.updateMatrix()}return n}function B$(e,t,i,r){let n=!1;for(let[s,a]of Object.entries(e)){if(!s||a===void 0||yB(s,i,r))continue;i.visible=r.visible;let o=i.uniforms[`f${i.id}_${s}`];if(!!o&&!(o instanceof FA))switch(n=n||z$(i,s,a),o.constructor){case xi:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof o0?o.value=new zs(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case nu:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof o0?o.value=new zs(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case qn:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]);break}case Wn:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case sl:{dB(a,t,i);break}case tu:{o.value=a.map(l=>new vt(...l));break}default:{o.value=a;break}}}return n}var fB=class extends Zt{constructor(e,t,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(fB.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},pB=fB;pB.Nodes=function(){return{matcap:new $e(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var fD=class extends FA{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},k$=class extends FA{constructor(e){super("v3"),this.image=e,this._value=new T}get value(){return this._value.x=this.image.img.width,this._value.y=this.image.img.height,this._value}},mB=class extends Zt{constructor(e,t,i,r,n,s,a,o,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=a,this.shadowColor=o,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(mB.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},gB=mB;gB.Nodes=function(){let e=new $e(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new $e(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new $e(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new $e(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new $e(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new $e(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ts.simplex,e,i,n])}}();function pD(e,t,i){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0)}var N$=class extends Wz{constructor(e,t){super(new Ar),this.repeat=e,this.offset=t,pD(this.value,e,t)}updateMatrix(){pD(this.value,this.repeat,this.offset)}},Cu=class{constructor(e,t,i,r){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let n in r)this.uniforms[`f${this.id}_${n}`]=r[n];for(let n in i)yB(n,this,i)}get type(){return this.data.type}static create(e,t,i,r){var n,s,a,o,l,u,d,c,h,f,m;if(i.type==="light")return $c.createLigherLayer(e,t,i,r);if(i.type==="texture"){let p=r.image(i.texture.image),g=new fD(p,i.texture.wrapping),v=new k$(p),y=new N$(i.texture.repeat,i.texture.offset),x=new Ge(i.crop?1:0),w=new Wt((n=i.projection)!=null?n:0),_=new Wt((s=["x","y","z"].indexOf(i.axis))!=null?s:0),b=new Wt((a=i.side)!=null?a:0),A=new qn(i.size?new q(i.size[0],i.size[1]):new q(100,100)),S=new Ge((o=i.alpha)!=null?o:1),M=new Wt((l=i.mode)!=null?l:0),E=new aB(g,v,x,w,_,b,A,y,S,M),C=new ti(E.calpha,"f");return new xr(e,t,i,{texture:g,textureSize:v,crop:x,projection:w,axis:_,side:b,size:A,mat:y,alpha:S,mode:M},E,M,C)}else if(i.type==="matcap"){let p=r.image(i.texture.image),g=new fD(p,i.texture.wrapping),v=new Ge((u=i.alpha)!=null?u:1),y=new Wt((d=i.mode)!=null?d:0),x=new pB(g,v,y),w=new ti(x.calpha,"f");return new xr(e,t,i,{texture:g,alpha:v,mode:y},x,y,w)}else if(i.type==="displace")if(i.displacementType==="noise"){let p=new Wn(new T(...i.offset)),g=new Ge((c=i.scale)!=null?c:10),v=new Ge((h=i.intensity)!=null?h:8),y=new Ge((f=i.movement)!=null?f:1),x=new Wt((m=i.noiseType)!=null?m:0),w=new rB(v,y,p,g,x);return new vB(e,t,i,{offset:p,scale:g,intensity:v,movement:y,noiseType:x},w)}else throw new Error;else return H$(e,t,i,r)}updateByOp(e,t,i){let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props?!0:B$(r.props,i,this,t)}else if(r.path[0]==="texture")return"texture"in t?dB(r.props,i,this):!0;return!1}dispose(){}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},xr=class extends Cu{constructor(e,t,i,r,n,s,a){super(e,t,i,r),this.color=n,this.mode=s,this.alpha=a}},vB=class extends Cu{constructor(e,t,i,r,n){super(e,t,i,r),this.position=n}},$c=class extends Cu{constructor(e,t,i,r,n){super(e,t,i,n),this.data=i,this.node=r}static createLigherLayer(e,t,i,r){var l,u,d,c,h,f,m,p;let n,s=new Ge(i.alpha),a=new Wt(i.mode),o;if(i.category==="lambert"){n=new x$;let g=new xi((l=r.color(i.emissive))!=null?l:0);o={emissive:g},n.emissive=g}else if(i.category==="phong"){n=new y$;let g=new Ge((u=i.shininess)!=null?u:30),v=new xi((d=r.color(i.specular))!=null?d:1118481);o={shininess:g,specular:v},n.shininess=g,n.specular=v}else if(i.category==="toon"){n=new _$;let g=new Ge((c=i.shininess)!=null?c:30),v=new xi((h=r.color(i.specular))!=null?h:1118481);o={shininess:g,specular:v},n.shininess=g,n.specular=v}else if(i.category==="physical"){n=new w$;let g=new Ge((f=i.roughness)!=null?f:.3),v=new Ge((m=i.metalness)!=null?m:0),y=new Ge((p=i.reflectivity)!=null?p:.5);o={roughness:g,metalness:v,reflectivity:y},n.roughness=g,n.metalness=v,n.reflectivity=y}else n=new Gz,o={};return n.alpha=new Ge(1),n.shadingAlpha=s,n.shadingBlend=a,o.alpha=n.shadingAlpha,o.mode=n.shadingBlend,new $c(e,t,i,n,o)}};function F$(e){let t=e instanceof Cu?e.type:e;return t==="texture"||t==="displace_map"||t==="matcap"}function U$(e,t,i,r){var n,s,a,o,l,u,d,c,h,f,m,p,g,v,y,x,w,_,b,A,S,M,E,C,L,N,R,V,F,H,P,z,D,j,B,W,X,$,U,ne,ie,re,K,fe,te,ae,pe,me,Ie,Y,Se,Te,at,ct,k,O,le,ge,ve,_e,Fe,ue,He,xe,Me,G,Ae,be,Re,ze,Qe,ye,Ne;switch(e.type){case"color":{let Oe=new xi((n=r.color)!=null?n:5855577),Ce=new Ge((s=r.alpha)!=null?s:1),je=new ti("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");je.keywords.alpha=Ce;let tt=new Wt((a=r.mode)!=null?a:0);return Oe.alpha=Ce,new xr(t,i,e,{color:Oe,alpha:Ce,mode:tt},Oe,tt,je)}case"fresnel":{let Oe=new xi((o=r.color)!=null?o:16777215),Ce=new Ge((l=r.bias)!=null?l:.1),je=new Ge((u=r.scale)!=null?u:1),tt=new Ge((d=r.intensity)!=null?d:2),wt=new Ge((c=r.factor)!=null?c:1),Nt=new Ge((h=r.alpha)!=null?h:1),We=new Wt((f=r.mode)!=null?f:0),he=new qz(Oe,Ce,je,tt,wt,Nt,We),Ee=new ti(he.calpha,"f");return new xr(t,i,e,{color:Oe,bias:Ce,scale:je,intensity:tt,factor:wt,alpha:Nt,mode:We},he,We,Ee)}case"rainbow":{let Oe=new Ge((m=r.filmThickness)!=null?m:30),Ce=new Ge((p=r.movement)!=null?p:0),je=new Wn((g=r.wavelengths)!=null?g:new T(0,0,0)),tt=new Ge((v=r.noiseStrength)!=null?v:0),wt=new Ge((y=r.noiseScale)!=null?y:1),Nt=new Wn((x=r.offset)!=null?x:new T(0,0,0)),We=new Ge((w=r.alpha)!=null?w:1),he=new Zz(Oe,Ce,je,tt,wt,Nt,We),Ee=new ti(he.calpha,"f"),Pe=new Wt((_=r.mode)!=null?_:0);return new xr(t,i,e,{filmThickness:Oe,movement:Ce,wavelengths:je,noiseStrength:tt,noiseScale:wt,offset:Nt,alpha:We,mode:Pe},he,Pe,Ee)}case"transmission":{let Oe=new Ge((b=r.thickness)!=null?b:10),Ce=new Ge((A=r.ior)!=null?A:1.5),je=new Ge((S=r.roughness)!=null?S:.5),tt=ni.transmissionSize,wt=ni.transmissionRenderTarget,Nt=ni.transmissionRenderTargetDepth,We=window.innerWidth,he=window.innerHeight,Ee=We>=he?new qn(he/We,1):new qn(1,We/he),Pe=new Ge((M=r.alpha)!=null?M:1),Xe=new eB(Oe,Ce,je,tt,wt,Nt,Ee,Pe),Lt=new ti(Xe.calpha,"f"),et=new Wt((E=r.mode)!=null?E:0);return new xr(t,i,e,{thickness:Oe,ior:Ce,roughness:je,aspectRatio:Ee,alpha:Pe,mode:et},Xe,et,Lt)}case"toon":{let Oe=new Wt((C=r.positioning)!=null?C:0),Ce;r.colors?Ce=new tu(r.colors.length,r.colors):(Ce=new tu(10,new vt(0,0,0,1)),Ce.value[1]=new vt(1,1,1,1));let je;r.steps?je=new eu(r.steps.length,r.steps):(je=new eu(10,1),je.value[0]=0);let tt=new Wn((L=r.source)!=null?L:new T(0,0,0)),wt=new Dd((N=r.isWorldSpace)!=null?N:!0),Nt=new Ge((R=r.noiseStrength)!=null?R:0),We=new Ge((V=r.noiseScale)!=null?V:1),he=new nu(r.shadowColor),Ee=new Wn((F=r.offset)!=null?F:new T(0,0,0)),Pe=new Ge((H=r.alpha)!=null?H:1),Xe=new gB(Oe,Ce,je,tt,wt,Nt,We,he,Ee,Pe),Lt=new ti(Xe.calpha,"f"),et=new Wt((P=r.mode)!=null?P:0);return new xr(t,i,e,{positioning:Oe,colors:Ce,steps:je,source:tt,isWorldSpace:wt,noiseStrength:Nt,noiseScale:We,shadowColor:he,offset:Ee,alpha:Pe,mode:et},Xe,et,Lt)}case"outline":{let Oe=new xi((z=r.outlineColor)!=null?z:16777215),Ce=new xi((D=r.contourColor)!=null?D:16777215),je=new Ge((j=r.outlineWidth)!=null?j:.1),tt=new Ge((B=r.contourWidth)!=null?B:.1),wt=new Ge((W=r.outlineThreshold)!=null?W:.1),Nt=new Ge((X=r.contourThreshold)!=null?X:.1),We=new Ge(($=r.outlineSmoothing)!=null?$:.1),he=new Ge((U=r.contourFrequency)!=null?U:.1),Ee=new Wn((ne=r.contourDirections)!=null?ne:new T(0,1,0)),Pe=new Dd((ie=r.positionalLines)!=null?ie:!1),Xe=new Dd((re=r.compensation)!=null?re:!0),Lt=ni.normalRenderTarget,et=ni.normalRenderTargetDepth,I=ni.pixelRatioNode,Z=ni.resolution,oe=new Ge((K=r.alpha)!=null?K:1),J=new Jz(Oe,Ce,je,tt,wt,Nt,We,he,Ee,Pe,Xe,Z,Lt,et,I,oe),ce=new ti(J.calpha,"f"),Ue=new Wt((fe=r.mode)!=null?fe:0);return new xr(t,i,e,{outlineColor:Oe,contourColor:Ce,outlineWidth:je,contourWidth:tt,outlineThreshold:wt,contourThreshold:Nt,outlineSmoothing:We,contourFrequency:he,contourDirection:Ee,positionalLines:Pe,compensation:Xe,alpha:oe,mode:Ue},J,Ue,ce)}case"depth":{let Oe=new Wt((te=r.gradientType)!=null?te:0),Ce=new Dd((ae=r.smooth)!=null?ae:!1),je=new Ge((pe=r.near)!=null?pe:50),tt=new Ge((me=r.far)!=null?me:200),wt=new Ge((Ie=r.isVector)!=null?Ie:1),Nt=new Ge((Y=r.isWorldSpace)!=null?Y:0),We=new Wn((Se=r.origin)!=null?Se:new T),he=new Wn((Te=r.direction)!=null?Te:new T),Ee;r.colors?Ee=new tu(r.colors.length,r.colors):(Ee=new tu(2,new vt(0,0,0,1)),Ee.value[1]=new vt(1,1,1,1));let Pe;r.steps?Pe=new eu(r.steps.length,r.steps):(Pe=new eu(2,1),Pe.value[0]=0);let Xe=new Ge((at=r.alpha)!=null?at:1),Lt=new Wt((ct=r.mode)!=null?ct:0),et=new tB(Oe,Ce,je,tt,wt,Nt,We,he,Ee,Pe,Xe),I=new ti(et.calpha,"f");return new xr(t,i,e,{gradientType:Oe,smooth:Ce,near:je,far:tt,isVector:wt,isWorldSpace:Nt,origin:We,direction:he,colors:Ee,steps:Pe,alpha:Xe,mode:Lt},et,Lt,I)}case"noise":{let Oe=new Ge((k=r.scale)!=null?k:1),Ce=new Wn((O=r.size)!=null?O:new T(100,100,100)),je=new Ge((le=r.move)!=null?le:1),tt=new qn((ge=r.fA)!=null?ge:new q(1.7,9.2)),wt=new qn((ve=r.fB)!=null?ve:new q(8.3,2.8)),Nt=new qn((_e=r.distortion)!=null?_e:new q(1,1)),We=new nu(r.colorA),he=new nu(r.colorB),Ee=new nu(r.colorC),Pe=new nu(r.colorD),Xe=new Ge((Fe=r.alpha)!=null?Fe:1),Lt=new Wt((ue=r.mode)!=null?ue:0),et=new Wt((He=r.noiseType)!=null?He:0),I=new Xz(Oe,Ce,je,tt,wt,Nt,We,he,Ee,Pe,Xe,et),Z=new ti(I.calpha,"f");return new xr(t,i,e,{scale:Oe,size:Ce,move:je,fA:tt,fB:wt,distortion:Nt,colorA:We,colorB:he,colorC:Ee,colorD:Pe,alpha:Xe,mode:Lt,noiseType:et},I,Lt,Z)}case"normal":{let Oe=new Wn((xe=r.cnormal)!=null?xe:new T(1,1,1)),Ce=new Ge((Me=r.alpha)!=null?Me:1),je=new Wt((G=r.mode)!=null?G:0),tt=new lB(Oe,Ce),wt=new ti("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return wt.keywords.alpha=Ce,new xr(t,i,e,{cnormal:Oe,alpha:Ce,mode:je},tt,je,wt)}case"gradient":{let Oe=new Wt((Ae=r.gradientType)!=null?Ae:0),Ce=new Dd((be=r.smooth)!=null?be:!1),je;r.colors?je=new tu(r.colors.length,r.colors):(je=new tu(10,new vt(0,0,0,1)),je.value[1]=new vt(1,1,1,1));let tt;r.steps?tt=new eu(r.steps.length,r.steps):(tt=new eu(10,1),tt.value[0]=0);let wt=new qn((Re=r.offset)!=null?Re:new q(0,0)),Nt=new qn((ze=r.morph)!=null?ze:new q(0,0)),We=new Ge((Qe=r.angle)!=null?Qe:0),he=new Ge((ye=r.alpha)!=null?ye:1),Ee=new Wt((Ne=r.mode)!=null?Ne:0),Pe=new sB(Oe,Ce,je,tt,wt,Nt,We,he),Xe=new ti(Pe.calpha,"f");return new xr(t,i,e,{gradientType:Oe,smooth:Ce,colors:je,steps:tt,offset:wt,morph:Nt,angle:We,alpha:he,mode:Ee},Pe,Ee,Xe)}default:{let Oe=new xi(1,0,0,1),Ce=new Ge(1),je=new ti("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");je.keywords.alpha=Ce;let tt=new Wt(0);return Oe.alpha=Ce,new xr(t,i,e,{color:Oe,alpha:Ce,mode:tt},Oe,tt,je)}}}function H$(e,t,i,r){let n=b$(i,r);return U$(i,e,t,n)}function yB(e,t,i){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let r=t.uniforms[`f${t.id}_intensity`];return r?(r.value=i.intensity*(i.visible?1:0),r):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let r=t.uniforms[`f${t.id}_alpha`];if(!r)return;if(r.value=i.alpha*(i.visible?1:0),i.type==="outline"&&e=="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=i.compensation&&i.visible)}return r}}var Fh=class extends Gi{constructor(e,t){super(void 0),this.data=e,this.layerIdGen=0,this.type="NodeMaterial",this.uniformsBackup={},this.fog=!0,this.updaters=[],this.dithering=!0,this.vertexColors=!0,this.onBeforeCompile=this._onBeforeCompile,this.transparent=!0,this.reset(e,t)}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.data.category}reset(e,t){var r,n;let i=(r=e.layers)!=null?r:_a.defaultTwoLayerData("phong").layers;this.layers=i.map(s=>Cu.create(this.layerIdGen++,s.id,s.data,t)),this.layers.reverse(),this.name=(n=e.name)!=null?n:"Untitled Material",this.onUpdate(t)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof $c),this.lightLayer===void 0&&(this.lightLayer=new $c(0,"",fu.defaultData("light","basic"),new Gz,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,i){if(this.data=t,e.path[0]==="layers"){let r=e.path[1];if(r===void 0){if(this.layers.reverse(),e.type===4){let n=Cu.create(this.layerIdGen++,e.id,e.data,i);this.layers.splice(e.localIndex,0,n)}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose();else if(e.type===6){let n=this.layers.findIndex(a=>a.uuid===e.id),s=this.layers[n];this.layers.splice(n,1),this.layers.splice(e.localIndex,0,s)}this.layers.reverse(),this.onUpdate(i)}else{let n=this.layers.find(s=>s.uuid===r);if(n){let s=t.layers.data(r);if(n.updateByOp({...e,path:e.path.slice(2)},s,i)){let a=Cu.create(this.layerIdGen++,r,s,i);this.layers.splice(this.layers.findIndex(o=>o.uuid===r),1,a),this.onUpdate(i)}}}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof xr),t=this.layers.findIndex(i=>i instanceof $c);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let n=this.layers[r];n instanceof xr&&(i=new hD(i,n.color,n.alpha,n.mode))}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new ti("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof $c);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];r instanceof xr&&(e=new hD(e,r.color,r.alpha,r.mode))}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof vB);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new ca(t,e[i].position,ca.ADD),t=new ca(t,new Ge(.5).setReadonly(!0),ca.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,n,s)=>Math.min(Math.max(r,n),s);for(let r of this.layers)if(r.type==="displace"){this.uniformsBackup[`f${r.id}_intensity`]=r.uniforms[`f${r.id}_intensity`].value;let n=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=n}}restoreClampedUniforms(){for(let e of this.layers)e.type==="displace"&&(e.uniforms[`f${e.id}_intensity`].value=this.uniformsBackup[`f${e.id}_intensity`])}customProgramCacheKey(){var t,i;let e="[";for(let{data:r}of this.data.layers)if(r.type==="light")e+=`"${r.category.toUpperCase()}",`;else{let n=((t=cB[r.type])!=null?t:[]).map(o=>r[o]),s=((i=hB[r.type])!=null?i:[]).map(o=>{var l,u;return(u=(l=r[o])==null?void 0:l.length)!=null?u:0}),a=[...n,...s];a.length?e+=`["${r.type}", "${a.join('","')}"],`:e+=`"${r.type}",`}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var i;e=e!=null?e:{};let t=(i=e.builder)!=null?i:new v$;return this.lights=this.lightLayer.data.category!=="basic",t.setMaterial(this,e.renderer),t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.transparent=t.requires.transparent||this.blending>_u,this}dispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Fh.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){e===!0&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var V$=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

vec2 vogelDiskSample(int sample_index, int sample_count, float angle)
{
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));
  float theta = float(sample_index) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// NOTE: For now we aren't using this screen-space noise. But we should enable
// it again once we do some sort of temporal AA. Then we could potentially lower
// the number of samples needed and still get a pretty smooth result.
// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos)
{
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, ${5} - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

vec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}
float shadowNoise(vec3 p){
            vec3 a = floor(p);
            vec3 d = p - a;
            d = d * d * (3.0 - 2.0 * d);
            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
            vec4 k1 = shadowperm(b.xyxy);
            vec4 k2 = shadowperm(k1.xyxy + b.zzww);
            vec4 c = k2 + a.zzzz;
            vec4 k3 = shadowperm(c);
            vec4 k4 = shadowperm(c + 1.0);
            vec4 o1 = fract(k3 * (1.0 / 41.0));
            vec4 o2 = fract(k4 * (1.0 / 41.0));
            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
            return o4.y * d.y + o4.x * (1.0 - d.y);
        }

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;
    float temporalOffset = shadowNoise(floor(vWPosition * 10.));

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        float temporalOffset = shadowNoise(floor(vWPosition * 10.));
        float temporalAngle  = temporalOffset * PI2;


        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,j$=mt.lights_fragment_begin,G$=mt.shadowmask_pars_fragment,mD=!1,W$=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},X$=(e="medium")=>{if(mD)return;mD=!0;let t=W$(e);mt.shadowmap_pars_fragment=V$(t);let i=j$.slice();i=i.replace("getShadow( spotShadowMap[ i ]",`getShadow( UNROLLED_LOOP_INDEX + ${3}, spotShadowMap[ i ]`),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),mt.lights_fragment_begin=i;let r=G$.slice();r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),mt.shadowmask_pars_fragment=r},Y$=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,q$=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,gx=new Gi({vertexShader:Y$,fragmentShader:q$,uniforms:{depthContrast:{value:1}}});function Q$(e){var s,a;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position)return;let t=new Map,i=e.geometry.attributes.position.array,r=e.geometry.attributes.normal.array,n=new Float32Array(i.length);for(let o=0;o<i.length;o+=3){let l=`${i[o]}_${i[o+1]}_${i[o+2]}`,u=new T(r[o],r[o+1],r[o+2]);t.has(l)?(s=t.get(l))==null||s.normals.push(u):t.set(l,{normals:[u],result:new T})}t.forEach((o,l)=>{for(let u of o.normals)o.result.add(u);o.result.divideScalar(o.normals.length)});for(let o=0;o<i.length;o+=3){let l=`${i[o]}_${i[o+1]}_${i[o+2]}`,u=(a=t.get(l))==null?void 0:a.result;u&&(n[o]=u.x,n[o+1]=u.y,n[o+2]=u.z)}e.geometry.setAttribute("extrudeNormal",new ke(n,3))}function Z$(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new T;for(let n=0;n<t.length;n+=3)r.set(t[n],t[n+1],t[n+2]).normalize(),i[n]=r.x,i[n+1]=r.y,i[n+2]=r.z;e.geometry.setAttribute("extrudeNormal",new ke(i,3))}function ny(e){if(e.objectType!=="TextFrame"){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Fh)||e.material.getLayersOfType("outline").length===0)return;e.objectType==="Mesh2D"?Z$(e):Q$(e)}}function sy(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),n=[Mt.seededRandom(r),Mt.seededRandom(r+1e4),Mt.seededRandom(r+2e4)];for(let s=0;s<t.length;s++)i[s]=n[s%3];e.geometry.setAttribute("randomColor",new xt(i,3))}var qr=class extends ed(Mr){constructor(e,t){super(e,t),this.isAbstractMesh=!0,this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ke,this.booleanExclude=null,Array.isArray(t)&&e.groups.length===0&&e.addGroup(0,e.getAttribute("position").count,0)}get isGroup(){var e;return((e=this._cloner)==null?void 0:e.parameters.hideBase)===!0}get isMesh(){return!this.isGroup}set isMesh(e){}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}updateGeometry(e){let t=this.geometry,i=MB[t.userData.type],r=this.objectType==="NonParametric"?Object.assign({},t.userData,{geometry:t}):t.userData,n=i.build(i.normalizeInputs(e,r)),s=t.uuid;this.geometry.dispose(),this.geometry=n,this.geometry.uuid=s,this.geometry.computeBoundingSphere(),ny(this),t.getAttribute("randomColor")&&sy(this)}clone(e){let t=this.objectType==="NonParametric"?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,i=ab(t),r=this.material;return new this.constructor(i,r).copy(this,e)}copy(e,t=!0){return super.copy(e,t),e.cloner&&(this.cloner=new aD(e,e.cloner.parameters),this.add(this.cloner)),this}setFromClonerState(e){e===null?this.cloner=void 0:(this.cloner===void 0&&(this.cloner=new aD(this)),this.cloner.fromClonerState(e))}fromState(e,t){var i,r,n;return super.fromState(e),e.type==="Mesh"&&(this.setFromClonerState(e.cloner),this.castShadow=(i=e.castShadow)!=null?i:!0,this.receiveShadow=(r=e.receiveShadow)!=null?r:!0,this.booleanExclude=(n=e.booleanExclude)!=null?n:null),this}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ho.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Ii(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)ji(e)&&(e.freeBooleanPointer(),Ii(e)&&e.invalidateUpstreamBooleanData())}},K$=new T(0,0,1),gD=new T,vD=new T,yD=new Ar,xB=class extends qr{constructor(e=Dl.create({}),t){var i;super(e,t),this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new Kr,this._onShapeUpdate=()=>{this.updateGeometry({}),this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()},this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=e.userData.shape,(i=this.shape.eventDispatcher)==null||i.addEventListener("update",this._onShapeUpdate)}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e){if(super.updateGeometry(e),"userData"in this.geometry){let t=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:t})}}setShape(e){var t,i;this.shape&&((t=this.shape.eventDispatcher)==null||t.removeEventListener("update",this._onShapeUpdate)),this.shape=e,(i=this.shape.eventDispatcher)==null||i.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),yD.getNormalMatrix(this.matrixWorld),gD.copy(K$).applyMatrix3(yD).normalize(),vD.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(gD,vD)}clone(e){let t=this.shape.clone(),i=this.material,r=this.geometry.userData,n=Dl.create(Object.assign({},r,{shape:t})),s=new xB(n,i).copy(this,e);return s.shape=t,t.update(),s}raycast(e,t){qr.prototype.raycast.call(this,e,t)}};function wB(e,t){return J$(e)}function J$(e){let t={parameters:e,type:e.type};if(e.type==="VectorGeometry"){let r=Mi.createFromState(e.shape,e.width,e.height);t.shape=r}else e.type==="NonParametricGeometry"&&(e.data.groups&&e.data.groups.forEach(r=>{var n;return r.materialIndex=Math.max((n=r.materialIndex)!=null?n:0,0)}),t.geometry=new $R().parse(e));let i;try{i=ab(t)}catch(r){console.error(r)}if(!i){let r=Mi.createFromState(t0.defaultData(),100,100);t.shape=r,i=ab(t)}return i}var ut;zz.then(e=>{ut=e});var xD=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),wD=new Uint32Array([0,1,2,3]),_D=new Uint8Array([4]),Ps=class{static build(e,t,i,r,n){var u,d;let s,a,o,l=(d=(u=e==null?void 0:e.phongAngle)!=null?u:t==null?void 0:t.phongAngle)!=null?d:35;if(r===!1&&(l=-1),e.positionWASM!==void 0){i&&i!==0&&(ut.free_bvh(i),ut.free_subdivision_surface(i));try{s=Ps.allocate(e,n)}catch(c){console.error(c,e),s=Ps.allocate({positionWASM:xD,indexWASM:wD,verticesPerFaceWASM:_D},n)}ut.set_destination_refinement_level(s,0),a=Ps.buildLevel(s,!0,l)}else s=i,e.phongAngle!==void 0&&(a=Ps.buildLevel(s,!0,l));return e.subdivisions!==void 0&&(ut.set_destination_refinement_level(s,e.subdivisions),e.subdivisions>0?o=Ps.buildLevel(s,!1,l):o=null),{subdivPointer:s,originalGeometry:a,subdividedGeometry:o}}static primitiveToQuads(e,t){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0?t.geometry:wB(e),r,n,s,a;({positions:r,triIndices:a}=UA(i.getAttribute("position"),i.getIndex()));let o;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let l=e.radialSegments*e.heightSegments*3*2,u=l+e.radialSegments*3;o=[l,u]}return{indices:n,verticesPerFace:s}=_B(r,a,i,o),{positions:r,indices:n,verticesPerFace:s}}static allocate(e,t){var x;let i,r,n,s=[],a=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,r=e.indexWASM,n=e.verticesPerFaceWASM):(i=xD,r=wD,n=_D);let o=i.length,l=r.length,u=n.length,d=i.length+s.length+a.length,c=r.length+n.length,h=d*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,f=d*Float32Array.BYTES_PER_ELEMENT,m=ut._malloc(h),p=new Float32Array(ut.HEAPF32.buffer,m,d),g=new Uint32Array(ut.HEAPU32.buffer,m+f,c);p.set(i,0),p.set(s,i.length),p.set(a,i.length+s.length),g.set(r,0),g.set(n,r.length);let v;(x=e==null?void 0:e.scaleBaked)!=null&&x.some(w=>w!==1)&&(v=new Ke().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?ut.alloc_subdivision_surface2(m,o,m+f,l,m+f+r.length*Uint32Array.BYTES_PER_ELEMENT,u,v.elements):ut.alloc_subdivision_surface(m,o,m+f,l,m+f+r.length*Uint32Array.BYTES_PER_ELEMENT,u);return ut._free(m),y}static buildLevel(e,t,i,r,n){let s=n?ut.get_mesh_data2(e,t?ut.Level.CONTROL:ut.Level.REFINED,i,n.elements):ut.get_mesh_data(e,t?ut.Level.CONTROL:ut.Level.REFINED,i),a=8,o=ut.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,4+4),u=0,d=ut.HEAPU32[o[u]>>2],c=ut.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let h=ut.HEAPU32[o[u]>>2],f=ut.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let m=ut.HEAPU32[o[u]>>2],p=ut.HEAPU32.subarray(m>>2,(m>>2)+l[u]);u++;let g=ut.HEAPU32[o[u]>>2],v=ut.HEAPU32.subarray(g>>2,(g>>2)+l[u]);if(u++,r===void 0){let y=new ft;if(y.setIndex(new bf(v,1)),y.setAttribute("position",new ke(c,3)),y.setAttribute("normal",new ke(f,3)),t){y.setAttribute("faceMap",new bf(p,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new xt(x,4))}return ut.free_mesh_data(s),y.userData.type="SubdivGeometry",y}r.getAttribute("position").copyArray(c),r.getAttribute("normal").copyArray(f),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,ut.free_mesh_data(s)}static buildControlCageWireframe(e,t,i){let r=ut.get_wireframe_data_for_base_level(e),n=4,s=ut.HEAPU32.subarray(r>>2,(r>>2)+n),a=s.subarray(2,2+2),o=0,l=ut.HEAPU32[s[o]>>2],u=ut.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let d=ut.HEAPU32[s[o]>>2],c=ut.HEAPU32.subarray(d>>2,(d>>2)+a[o]);if(t===void 0){let h=new ft;h.setAttribute("position",new ke(u,3));let f=new Float32Array(u.length);for(let m=0,p=u.length;m<p;)f[m++]=i.r,f[m++]=i.g,f[m++]=i.b;return h.setAttribute("color",new xt(f,3)),h.setIndex(new bf(c,1)),ut.free_wireframe_data_for_base_level(r),h}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,ut.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||ut.set_destination_refinement_level(e,t);let n=i?ut.get_topological_data2(e,r?ut.Level.CONTROL:ut.Level.REFINED,i.elements):ut.get_topological_data(e,r?ut.Level.CONTROL:ut.Level.REFINED),s=6,a=ut.HEAPU32.subarray(n>>2,(n>>2)+s),o=a.subarray(3,3+3),l=0,u=ut.HEAPU32[a[l]>>2],d=new Float32Array(ut.HEAPF32.subarray(u>>2,(u>>2)+o[l]));l++;let c=ut.HEAPU32[a[l]>>2],h=new Uint32Array(ut.HEAPU32.subarray(c>>2,(c>>2)+o[l]));l++;let f=ut.HEAPU32[a[l]>>2],m=new Uint8Array(ut.HEAPU32.subarray(f>>2,(f>>2)+o[l]));return ut.free_topological_data(n),{positions:d,indices:h,verticesPerFace:m}}},bD=["getX","getY","getZ"];function UA(e,t){let i={},r=t?t.count:e.count,n=0,s=[],a=[],o=1e4;for(let u=0;u<r;u++){let d=t?t.getX(u):u,c="";for(let h=0;h<3;h++)c+=`${~~(e[bD[h]](d)*o)},`;if(c in i)s.push(i[c]);else{for(let h=0;h<3;h++)a.push(e[bD[h]](d));i[c]=n,s.push(n),n++}}let l=[];for(let u=0;u<s.length;u+=3)s[u]===s[u+1]||s[u]===s[u+2]||s[u+1]===s[u+2]||l.push(s[u],s[u+1],s[u+2]);return{positions:a,triIndices:l}}var ng=new T,vx=new T,yx=new T,xx=new T;function _B(e,t,i,r){var a;let n=[],s=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let o=i.userData.shape.extractShapePointsToFlatArray([]),l=0;for(let d=0;d<o.length;d+=2)l+=(o[d]-o[(d===0?o.length:d)-2])*(o[d+1]+o[(d===0?o.length:d)-1]);e.length=0;let u=0;if(l<0)for(let d=0;d<o.length;d+=2)e.push(o[d],o[d+1],0),n.push(u++);else for(let d=o.length-2;d>=0;d-=2)e.push(o[d],o[d+1],0),n.push(u++);return s.push(u),{indices:n,verticesPerFace:s}}for(let o=0,l=(a=i.capStartIndex)!=null?a:t.length;o<l;)if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){ng.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),vx.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),yx.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),xx.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),vx.sub(ng).normalize(),yx.sub(ng).normalize(),xx.sub(ng).normalize();let u=vx.cross(yx).dot(xx);Math.abs(u)>.005||r&&r.some((d,c)=>c%2===1?!1:o>=r[c]&&o<r[c+1])?(n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),s.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3;if(i.capStartIndex!==void 0){let o=[],l=[],u=0,d=new Float32Array([i.userData.parameters.depth])[0];for(let c=0,h=0;c<e.length;c+=3,h++)e[c+2]===0&&(o.push(h),u++),e[c+2]===d&&l.push(h);if(i.userData.parameters.extrudeBevelSize===0){let c=l[0];l[0]=l[1],l[1]=c}o.reverse(),n.push(...o,...l),s.push(u,u)}return{indices:n,verticesPerFace:s}}var Ho={};qU(Ho,{calcBoolean:()=>ree,calcBooleanTopological:()=>iee,freeMeshSet:()=>aee,getMeshSet:()=>nee,transformMeshSet:()=>see});var bB,$$=new Promise(e=>{bB=e}),SD=!1;async function eee(){if(SD)return;let e="https://unpkg.com/@splinetool/boolean-wasm@0.9.106/build",[t,i]=await Promise.all([vR(()=>import("./boolean.572c10c8.js"),[]),fetch(`${e}/boolean.wasm`).then(n=>n.arrayBuffer())]),r=await t.default({wasmBinary:i});bB(r),SD=!0}var At,vh;$$.then(e=>At=e);function tee(e,t,i){let r,{positions:n,triIndices:s}=UA(e.getAttribute("position"),e.getIndex()),a;if(t&&i){let{indices:o,verticesPerFace:l}=_B(n,s,e);a=l.length,r=[];for(let u=0,d=0;u<a;u++){r.push(l[u]);for(let c=0;c<l[u];c++)r.push(o[d++])}}else{let o=s.length;r=Array(o+o/3),a=0;for(let l=0,u=0;u<r.length;)r[u++]=3,a++,r[u++]=s[l++],r[u++]=s[l++],r[u++]=s[l++]}return{positions:n,faceIndices:r,nFaces:a}}function SB(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?i:r,s=At._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(At.HEAPU32.buffer,s,t):new Float32Array(At.HEAPF32.buffer,s,t)).set(e,0),s}function AB(e){switch(e){case 0:return At.OP.UNION;case 1:return At.OP.INTERSECTION;case 2:return At.OP.A_MINUS_B;case 3:return At.OP.B_MINUS_A;case 4:return At.OP.SYMMETRIC_DIFFERENCE;case 5:return At.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function iee(e,t){vh===void 0&&(vh=At.init_csg());let i=SB(e),r=At.csg_calc_topological(vh,i,e.length,AB(t));At._free(i);let n=6,s=At.HEAPU32.subarray(r>>2,(r>>2)+n),a=s.subarray(3,3+3),o=0,l=At.HEAPU32[s[o]>>2],u=new Float32Array(At.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let d=At.HEAPU32[s[o]>>2],c=new Uint32Array(At.HEAPU32.subarray(d>>2,(d>>2)+a[o]));o++;let h=At.HEAPU32[s[o]>>2],f=new Uint8Array(At.HEAPU32.subarray(h>>2,(h>>2)+a[o]));return At.free_mesh_data(r),{positions:u,indices:c,verticesPerFace:f}}function ree(e,t,i,r){vh===void 0&&(vh=At.init_csg());let n=SB(e),s=At.csg_calc(vh,n,e.length,r,AB(t));At._free(n);let a=5,o=At.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(2,2+3),u=0,d=At.HEAPU32[o[u]>>2],c=At.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let h=At.HEAPU32[o[u]>>2],f=At.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let m=l[u];i.setAttribute("position",new ke(c,3)),i.setAttribute("normal",new ke(f,3));let p=At.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new ks),i.boundingSphere.center.set(p[0],p[1],p[2]),i.boundingSphere.radius=(p[3]**2+p[4]**2+p[5]**2)**.5,i.userData.parameters={width:p[3]*2,height:p[4]*2,depth:p[5]*2},At.free_mesh_data(s),m}function nee(e,t,i){if(At===void 0)return-1;let r,n,s;if(t&&e.userData.positions!==void 0){let p=e.userData;s=p.verticesPerFace.length,r=p.positions,n=Array(p.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<p.verticesPerFace.length;g++){n[y++]=p.verticesPerFace[g];for(let x=0;x<p.verticesPerFace[g];x++)n[y++]=p.indices[v++]}}else({positions:r,faceIndices:n,nFaces:s}=tee(e,t,i));let a=r.length,o=n.length,l=r.length,u=n.length,d=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,c=l*Float32Array.BYTES_PER_ELEMENT,h=At._malloc(d),f=new Float32Array(At.HEAPF32.buffer,h,l),m=new Uint32Array(At.HEAPU32.buffer,h+c,u);return f.set(r,0),m.set(n,0),At.get_csg_mesh(h,a,h+c,o,s)}function see(e,t){At.transform_csg_mesh(e,t.elements)}function aee(e){At.free_csg_mesh(e)}var MB={ConeGeometry:WK,CubeGeometry:XK,CylinderGeometry:GK,DodecahedronGeometry:qK,EllipseGeometry:bJ,HelixGeometry:EJ,IcosahedronGeometry:TJ,LatheGeometry:CJ,NonParametricGeometry:IJ,PolygonGeometry:zJ,PyramidGeometry:BJ,RectangleGeometry:FJ,SphereGeometry:UJ,PlaneGeometry:HJ,BackdropGeometry:VJ,StarGeometry:GJ,TextFrameGeometry:Rz,TorusGeometry:WJ,TorusKnotGeometry:YJ,TriangleGeometry:qJ,VectorGeometry:Dl},ab=e=>MB[e.type].create(e),AD=new Ke;function MD(e){let t=!1;return e.scene.objects.traverse((i,r)=>{var n;((n=r.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var oee=class extends qr{constructor(e=new ft,t){super(e,t),this.booleanOp=2,this.phongAngle=35,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.objectType="BooleanObject",this.castShadow=!0,this.receiveShadow=!0,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}reInit(){this.objectType="BooleanObject",this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}recomputeBoolean(e,t=!0){var r;if(this.booleanMeshSetAddress!==-1)return;for(let n=0;n<this.children.length;n++){let s=this.children[n];Ii(s)&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let s=this.children[n];if(n$(s)&&s.booleanExclude===!1&&((r=s.geometry.attributes.position)==null?void 0:r.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if(s.geometry.index&&s.geometry.index.count/3<15e5&&(s.booleanMeshSetAddress=Ho.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;Ho.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else Ii(s)&&s.needsTransformForDownstream===!0?(Ho.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(AD.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Ho.transformMeshSet(s.booleanMeshSetAddress,AD),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setDrawRange(0,0);return}if(e===!0)return Ho.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new ft,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=Ho.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,ny(this),sy(this)}updateGeometry(e){let t=e.parameters;t.operation!==void 0&&(this.booleanOp=t.operation),t.phongAngle!==void 0&&(this.phongAngle=t.phongAngle),this.invalidateDownstreamBooleanData().recomputeBoolean()}},zp=e=>{var t;return t=class extends e{constructor(){super(...arguments),this.isObjectHelper=!0}},t.geometryHelper=new Ml(30,30,30),t},sg=new Dp,wx=new ks,ED=new Ke,Bp=(e,t,i,r,n=!1)=>{let s=t,a=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),wx.copy(s.boundingSphere),wx.applyMatrix4(a),i.ray.intersectsSphere(wx)===!1||(ED.copy(a).invert(),sg.copy(i.ray).applyMatrix4(ED),s.boundingBox!==null&&sg.intersectsBox(s.boundingBox)===!1))return;let o,l,u,d,c=s.index,h=s.attributes.position,f=s.drawRange,m,p;if(n===!1){let v=Math.max(0,f.start),y=Math.min(c.count,f.start+f.count);for(m=v,p=y;m<p;m+=3)if(l=c.getX(m),u=c.getX(m+1),d=c.getX(m+2),o=g(e,i,sg,h,l,u,d),o){o.faceIndex=Math.floor(m/3),r.push(o);return}}else{let v=s.attributes.position,y=new T,x=new T,w=new T,_=new T,b=2,A=1/((e.scale.x+e.scale.y+e.scale.z)/3),S=A*A,M=Math.max(0,f.start),E=Math.min(v.count,f.start+f.count);for(let C=M,L=E-1;C<L;C+=b){if(y.fromBufferAttribute(v,C),x.fromBufferAttribute(v,C+1),sg.distanceSqToSegment(y,x,_,w)>S)continue;_.applyMatrix4(e.matrixWorld);let N=i.ray.origin.distanceTo(_);N<i.near||N>i.far||r.push({distance:N,point:w.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,y,x,w,_,b,A){let S=new T,M=new T,E=new T,C=new T,L=new T;if(S.fromBufferAttribute(w,_),M.fromBufferAttribute(w,b),E.fromBufferAttribute(w,A),x.intersectTriangle(S,M,E,!1,C)===null)return null;L.copy(C),L.applyMatrix4(v.matrixWorld);let N=y.ray.origin.distanceTo(L);return N<y.near||N>y.far?null:{faceIndex:1,distance:N,point:L.clone(),object:v}}},ag=new T,Hn=new Gh,lee=class extends Lp{constructor(e){let t=new ft,i=new Bl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={},a=new dt(15711266),o=new dt(15711266),l=new dt(2857471);u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",o),u("p","n2",o),u("p","n3",o),u("p","n4",o),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(c,h,f){d(c,f),d(h,f)}function d(c,h){r.push(0,0,0),n.push(h.r,h.g,h.b),s[c]===void 0&&(s[c]=[]),s[c].push(r.length/3-1)}t.setAttribute("position",new ke(r,3)),t.setAttribute("color",new ke(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;Hn.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,n=.8;_s("n1",t,e,Hn,-i,-r,n),_s("n2",t,e,Hn,i,-r,n),_s("n3",t,e,Hn,-i,r,n),_s("n4",t,e,Hn,i,r,n);let s=n;_s("f1",t,e,Hn,-i,-r,s),_s("f2",t,e,Hn,i,-r,s),_s("f3",t,e,Hn,-i,r,s),_s("f4",t,e,Hn,i,r,s);let a=s,o=.5;_s("u1",t,e,Hn,i*.7*o,r*1.1,a),_s("u2",t,e,Hn,-i*.7*o,r*1.1,a),_s("u3",t,e,Hn,0,r*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function _s(e,t,i,r,n,s,a){ag.set(n,s,a).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let u=0,d=o.length;u<d;u++)l.setXYZ(o[u],ag.x,ag.y,ag.z)}}var uee=class extends zp(lee){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Bp(this.object,this.geometry,e,t,!0)}},EB=class extends zp(X8){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Bp(this.object,EB.geometryHelper,e,t)}},TB=class extends zp(Y8){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){Bp(this.object,TB.geometryHelper,e,t)}update(){}},CB=class extends zp(W8){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Bp(this.object,CB.geometryHelper,e,t)}},ob=class extends zp(G8){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Bp(this.object,ob.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=ob._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(r);else this.cone.material.color.set(r)}}},DB=ob;DB._vector=new T;var kp=(e,t)=>class extends e{constructor(){super(...arguments),this.objectHelper=new t(this)}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}fromLightState(i,r){if(this.objectType==="LightDirectional"||this.objectType==="LightPoint"||this.objectType==="LightSpot"){let n=this;i.color!==void 0&&(n.color=Hr(i.color,r)),i.intensity!==void 0&&(n.intensity=i.intensity),i.depth!==void 0&&(n.shadow.camera.far=i.depth,n.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}return this}},bc=new T,_x=new T,Gu=class extends kp(ed(Gh),uee){constructor(e=window.innerWidth,t=window.innerHeight,i=45,r,n=1e5){super(),this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=dp.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new $S(e*-.5,e*.5,t*.5,t*-.5,r!=null?r:-5e4,n),this.perspCamera=new _r(i,e/t,r!=null?r:50,n),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic()}static createFromState(e,t){let i=new Gu().fromState(t);return i.objectHelper.update(),i.uuid=e,i}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(bc),this.targetOffset=bc.distanceTo(e)}getTarget(e=new T){return this.getWorldDirection(_x),this.getWorldPosition(bc),_x.multiplyScalar(this.targetOffset),e.copy(bc).add(_x),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(bc),bc.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new ii),t=new T(0,0,1).applyQuaternion(e),i=new T().copy(Yt.DefaultUp);this.isUpVectorFlipped&&i.negate(),i.applyQuaternion(e);let r=new T().copy(Yt.DefaultUp).projectOnPlane(t),n=new T().crossVectors(r,i).dot(t)>=0?1:-1;this.angleOffsetFromUp=r.angleTo(i)*n}getViewFrontToObject(e){let t=e.getWorldPosition(new T),i=e.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToObject(e){let t=e.getWorldPosition(new T),i=this.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:t.clone().sub(i),target:t}}setViewplaneSize(e,t){this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,n,s):this.orthoCamera.setViewOffset(e,t,i,r,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return M_(t,e)}fromCameraState(e){let{orthographic:t,perspective:i}=e;return e.type!==void 0&&(this.cameraType=e.type),e.far!==void 0&&(this.far=e.far),t!==void 0&&(t.near!==void 0&&(this.orthoCamera.near=t.near),t.zoom!==void 0&&(this.orthoCamera.zoom=t.zoom)),i!==void 0&&(i.near!==void 0&&(this.perspCamera.near=i.near),i.fov!==void 0&&(this.perspCamera.fov=i.fov),i.zoom!==void 0&&(this.perspCamera.zoom=i.zoom)),e.type==="PerspectiveCamera"?(this.zoom=this.perspCamera.zoom,this.fov=this.perspCamera.fov,this.near=this.perspCamera.near):(this.near=this.orthoCamera.near,this.zoom=this.orthoCamera.zoom),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},lb=class extends kp(ed(Wd),TB){constructor(){super(...arguments),this.objectType="EmptyObject"}static createFromState(e,t){let i=new lb().fromState(t);return i.uuid=e,i.objectHelper.update(),i}},PB=class extends kp(ed(U8),EB){constructor(...e){super(...e),this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.top=1250,t.bottom=-1250,t.right=1250,t.left=-1250,t.near=-1e4,t.far=2500;let i=new tl(this.shadow.camera);i.visible=!1,this._gizmos.shadowmap=i,this.update()}static createFromState(e,t,i){let r=new PB().fromState(t,i);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromDirectionalLightState(e,t){let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),e.size!==void 0&&e$(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),i&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},LB=class extends kp(ed(N8),CB){constructor(...e){super(...e),this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.fov=90,t.aspect=1,t.near=100,t.far=2500;let i=new T(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),r=new T(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z),n=new Xi(i,r),s=new Ym(n,new dt(16755200));s.visible=!1,this._gizmos.shadowmap=s,this.update()}static createFromState(e,t,i){let r=new LB().fromState(t,i);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ym&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ym&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof Ym){let i=this.shadow.camera,r=new T(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),n=new T(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromPointLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},TD=new T,CD=new T,DD=new ii,OB=class extends kp(ed(B8),DB){constructor(...e){super(...e),this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.fov=Mt.RAD2DEG*2*this.angle,t.aspect=1,t.near=100,t.far=2500;let i=new tl(this.shadow.camera);i.visible=!1,this._gizmos.shadowmap=i,this.update()}static createFromState(e,t,i){let r=new OB().fromState(t,i);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof tl&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),CD.setFromMatrixPosition(this.matrixWorld),DD.setFromRotationMatrix(this.matrixWorld),TD.copy(this.up).applyQuaternion(DD).negate().multiplyScalar(this.distance),this.target.position.copy(CD).add(TD),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}fromSpotLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},PD=e=>e.tagName==="VIDEO",RB=class{static resize(e,t,i){let r=e/t,n;if(!i.image)return;let s=i.image;PD(s)?n=s.videoWidth/s.videoHeight:n=s.width/s.height,r>n&&(i.imageType=="WEBCAM"?i.repeat.set(-1,1*n/r):i.repeat.set(1,1*n/r)),r<n&&(i.imageType=="WEBCAM"?i.repeat.set(1*r/n*-1,1):i.repeat.set(1*r/n,1)),r==n&&(i.imageType=="WEBCAM"?i.repeat.set(-1,1):i.repeat.set(1,1))}static resizeTextureLayer(e,t,i){let r=e/t,n=i.image!==void 0?i.image.width/i.image.height:1,s;r>n?s={x:1,y:n/r}:r<n?s={x:r/n,y:1}:s={x:1,y:1},i.repeat.set(s.x,s.y),i.updateMatrix()}static resizeTextureLayers(e,t,i){let r=i.layers;for(let n=0;n<r.length;n++){let s=r[n];F$(s)&&RB.resizeTextureLayer(e,t,s.uniforms[`f${s.id}_texture`].value)}}static resizeComplex(e,t,i,r){let n=e/t,s,a=i.image;PD(a)?s=a.videoWidth/a.videoHeight:s=a.width/a.height,r.geometry.type.includes("Shape")?(n>s&&(i.imageType=="WEBCAM"?i.repeat.set(1/e*-1,1/t*s/n):i.repeat.set(1/e,1/t*s/n)),n<s&&(i.imageType=="WEBCAM"?i.repeat.set(1/e*n/s*-1,1/t):i.repeat.set(1/e*n/s,1/t)),n==s&&(i.imageType=="WEBCAM"?i.repeat.set(1/e*-1,1/t):i.repeat.set(1/e,1/t))):(n>s&&(i.imageType=="WEBCAM"?i.repeat.set(-1,1*s/n):i.repeat.set(1,1*s/n)),n<s&&(i.imageType=="WEBCAM"?i.repeat.set(1*n/s*-1,1):i.repeat.set(1*n/s,1)),n==s&&(i.imageType=="WEBCAM"?i.repeat.set(-1,1):i.repeat.set(1,1)))}},cee=class extends qr{constructor(e,t){super(e,t),this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e){super.updateGeometry(e),this.material.layers&&RB.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},IB=class extends qr{constructor(e,t){super(e,t),this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}},hee=class extends IB{constructor(e,t){super(e,t),this.objectType="NonParametric"}},dee=class extends V0{constructor(e){super(e)}load(e,t,i,r){let n=this,s=new jv(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){let o;try{o=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(a.substring(65,a.length-2))}let l=n.parse(o);t&&t(l)},i,r)}parse(e){return new fee(e)}},fee=class{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){let i=[],r=pee(e,t,this.data);for(let n=0,s=r.length;n<s;n++)i.push(...r[n].toShapes());return i}};function pee(e,t,i){let r=Array.from(e),n=t/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,a=[],o=0,l=0;for(let u=0;u<r.length;u++){let d=r[u];if(d===`
`)o=0,l-=s;else{let c=mee(d,n,o,l,i);o+=c.offsetX,a.push(c.path)}}return a}function mee(e,t,i,r,n){let s=n.glyphs[e]||n.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");return}let a=new q8,o,l,u,d,c,h,f,m;if(s.o){let p=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,v=p.length;g<v;)switch(p[g++]){case"m":o=p[g++]*t+i,l=p[g++]*t+r,a.moveTo(o,l);break;case"l":o=p[g++]*t+i,l=p[g++]*t+r,a.lineTo(o,l);break;case"q":u=p[g++]*t+i,d=p[g++]*t+r,c=p[g++]*t+i,h=p[g++]*t+r,a.quadraticCurveTo(c,h,u,d);break;case"b":u=p[g++]*t+i,d=p[g++]*t+r,c=p[g++]*t+i,h=p[g++]*t+r,f=p[g++]*t+i,m=p[g++]*t+r,a.bezierCurveTo(c,h,f,m,u,d);break}}return{offsetX:s.ha*t,path:a}}var Di=class extends Mr{constructor({char:e,originalChar:t,fontFamily:i,letterSpacing:r,fontSize:n,LOD:s=16},a=new Ih({color:0,opacity:1,visible:!0,transparent:!0,side:Ur})){let o=Di.loadChar(e,i,s);super(o.geometry,a),this.char=e,this.originalChar=t!=null?t:e,this.fontFamily=i,this.letterSpacing=r,this.fontSize=n,this.LOD=s,this.resolution=o.resolution,this.glyphsHa=o.glyphsHa,this.localPosition=new q,this.charSize=0,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}static get FONTS_PATH(){return Di._fontPath}static set FONTS_PATH(e){Di._fontPath=e}updatePosition(e,t){this.localPosition.copy(e);let i=new T(this.localPosition.x,-this.localPosition.y,0);this.position.copy(i).add(t)}updateFontSize(e){let t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing}updateFontFamily(e){if(this.fontFamily===e)return;this.fontFamily=e;let t=Di.loadChar(this.char,e,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateChar(e){if(this.char===e)return;this.char=e;let t=Di.loadChar(e,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))}updateLOD(e){if(this.LOD===e)return;this.LOD=e;let t=Di.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}clone(){let e={char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD};return new Di(e).copy(this)}static loadFont(e){return new Promise(function(t,i){Di.fontCache[e]?t(Di.fontCache[e]):new dee().load(Di.FONTS_PATH+e+".json",r=>{Di.fontCache[e]=r,t(r)},void 0,i)})}static loadChar(e,t,i){if(Di.charCache[e]){if(Di.charCache[e][i]&&Di.charCache[e][i].fontFamily===t)return Di.charCache[e][i]}else Di.charCache[e]={};let r=Di.fontCache[t],n=r.generateShapes(e,1);return Di.charCache[e][i]={geometry:new ZR(n,i),fontFamily:t,resolution:r.data.resolution,glyphsHa:r.data.glyphs[e].ha},Di.charCache[e][i]}},Wo=Di;Wo.charCache={},Wo.fontCache={},Wo._fontPath="/_assets/_fonts/";var og=new q,ub=class{constructor(e,t,i){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=i,this.nextChar3DPos=new q(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=1}addChar3D(e,t,i=this.message.length){this.message.splice(i,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)}deleteChar3D(e=this.message.length-1){let t=this.message[e];if(t)return this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t}isEndLine(e){this.endLine=e}fullUpdate(e,t=0){this.nextChar3DPos.x=0;for(let i=t,r=this.message.length;i<r;i+=1)this.message[i].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[i].charSize}checkOverFlow(e){let t,i=this.message.length-1;if(i<=0)return!1;for(;i>=0;){if(this.message[i].char!==" "){t=this.message[i];break}i-=1}return!!(i>=0&&t&&t.localPosition.x+t.charSize>e)}containSpaceOverFlow(e=this.message.length-1){for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}containSpace(e=this.message.length-1){if(this.endLine)return!0;for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}popWord(e=this.message.length-1){let t=[],i=!0,r;for(r=e;r>=0;r-=1)if(this.message[r].char===" "){i=!1,t.length===0&&(r-=1,t.splice(0,0,this.message[r]));break}else t.splice(0,0,this.message[r]);return i?t=[]:this.message.splice(r+1,t.length),t}getWord(e=0,t=1){let i=[],r=e;for(r=e;;r+=t){if(!this.message[r]||this.message[r].char===" "){i.length===0&&this.message[r]&&(i.push(this.message[r]),this.message.splice(r,1));break}t>0?(i.push(this.message[r]),this.message.splice(r,1),r-=t):(i.splice(0,0,this.message[r]),this.message.splice(r,1))}return i}getWordAtIndex(e){let t=[];for(let i=e;i<this.message.length&&this.message[i].char!==" ";i++)t.push(this.message[i]);for(let i=e-1;i>=0&&this.message[i].char!==" ";i--)t.splice(0,0,this.message[i]);return t}wordSize(e=0,t=-1){let i=0,r=e;for(;r>=0&&r<this.message.length;){if(this.message[r].char===" "){i===0&&(i=this.message[r].charSize);break}i+=this.message[r].charSize,r+=t}return(r<0||r>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:i===0?999999999:i}spaceLeft(e){return e-this.nextChar3DPos.x}popChar(e=this.message.length-1){return this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)}isEmpty(){return!this.message.length}updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}updateYLinePos(e){this.yLinePos=e,this.updateNextCharPosY()}updatelineHeight(e){this.lineHeight=e,this.updateNextCharPosY()}updateFontSize(e,t=0,i=this.message.length-1){for(let r=t;r<=i;r+=1)this.message[r].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}countSpaces(){let e=0;for(let t=0;t<this.message.length;t++)this.message[t].char===" "&&(e+=1);return e}alignText(e,t,i,r,n){switch(i){case 1:this.leftAlign(e,n);break;case 3:this.centerAlign(this.spaceLeft(t),e,n);break;case 2:this.rightAlign(this.spaceLeft(t),e,n);break;case 4:this.justifyAlign(this.spaceLeft(t),e,n);break}}offsetCharacters(e,t,i){og.set(t,i);let r=this.message.length;for(let n=0;n<r;n++)this.message[n].updatePosition(this.message[n].localPosition.add(og),e)}leftAlign(e,t){this.align=1,this.offsetCharacters(e,0,t)}centerAlign(e,t,i){this.align=3,this.offsetCharacters(t,e/2,i)}rightAlign(e,t,i){this.align=2,this.offsetCharacters(t,e,i)}justifyAlign(e,t,i){if(this.align=4,this.endLine){this.offsetCharacters(t,0,i);return}let r=this.countSpaces();if(r===0){this.offsetCharacters(t,0,i);return}let n=e/r,s=0;for(let a=0;a<this.message.length;a++)this.message[a].char===" "&&(s+=n),og.set(s,i),this.message[a].updatePosition(this.message[a].localPosition.add(og),t)}clone(){let e=new ub(this.yLinePos,this.lineHeight,this.maxCharSize);e.nextChar3DPos=this.nextChar3DPos.clone(),e.align=this.align,e.endLine=this.endLine;for(let t=0;t<this.message.length;t++)e.message.push(this.message[t].clone());return e}},zB=class extends qr{constructor(e){super(e,new Ih({transparent:!0,opacity:1,visible:!1,side:Ur})),this.objectType="TextFrame",this.charContainer=new Yt,this.add(this.charContainer),this.material.visible=!1,this._geometryUserData=e.userData,this.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:1,horizontalAlignment:1,verticalAlignment:1,LOD:16,maxLineSize:this._geometryUserData.parameters.width,textOrigin:new T(this._geometryUserData.parameters.width*-.5,this._geometryUserData.parameters.height*.5,0),textLines:[]},this.createTextLine()}static createFromState(e,t,i){let r=Rz.create({parameters:{width:t.width,height:t.height}}),n=new zB(r).fromState(t,i);return n.uuid=e,n}async updateText(e){this.clearText();let t=this.userData.textFrame,i=t.fontFamily;await Wo.loadFont(i),t.text=e;let r=t.textOrigin,n=new Ih({visible:t.visible,transparent:!0,side:Ur}),s=e.split(`
`),a=0;this.userData.textFrame.textLines=s.map((o,l)=>{let u=new ub(a,t.lineHeight,t.fontSize);return u.message=o.split("").map(d=>{let c={char:d,fontFamily:i,letterSpacing:t.letterSpacing,fontSize:t.fontSize,LOD:16},h=n.clone();h.color=t.hexColor,h.opacity=t.opacity;let f=new Wo(c,h);return u.addChar3D(f,r),this.charContainer.add(f),f}),a+=u.maxCharSize*u.lineHeight,u}),this.textFullUpdate(),this.checkOverFlow()}clearText(){let e=this.userData.textFrame.textLines;for(;this.charContainer.children.length;){let t=this.charContainer.children[0];this.charContainer.remove(t)}for(;e.length;)e.pop()}raycast(e,t){let i=[];if(super.raycast(e,i),i.length>0){t.push(i[0]);return}let r=[];for(let n=0,s=this.charContainer.children.length;n<s;++n)if(this.charContainer.children[n]instanceof Wo&&(e.intersectObject(this.charContainer.children[n],!1,r),r.length>0)){r[0].object=this,t.push(r[0]);return}}updateGeometry(e){var l,u,d,c;let t=this.userData,i=this.geometry.userData,r=i.parameters.width,n=i.parameters.height,s=(u=(l=e.parameters)==null?void 0:l.width)!=null?u:r,a=(c=(d=e.parameters)==null?void 0:d.height)!=null?c:n,o=t.textFrame;super.updateGeometry(e),o.maxLineSize=s,o.textOrigin.set(-.5*s,.5*a,0),a!==n?(this.checkOverFlow(),this.checkCapacity()):s!==r&&(r<s?this.checkCapacity():r>s&&this.checkOverFlow())}checkOverFlow(e=0){let t=this.userData,i=t.textFrame.textOrigin,r=t.textFrame.textLines;for(let n=e;n<r.length;n++){r[n].updateYLinePos(this.getNewLinePosition(n)),r[n].fullUpdate(i);let s=[];for(;r[n].checkOverFlow(t.textFrame.maxLineSize);)r[n].containSpaceOverFlow()?s.unshift(r[n].getWord(r[n].message.length-1,-1)):s.unshift(r[n].popChar());if(s.length>0){r[n+1]===void 0?(r[n].isEndLine(!1),this.createTextLine()):r[n].endLine&&(this.createTextLine(n+1),r[n].isEndLine(!1),r[n+1].isEndLine(!0));let a=0;for(let o=0;o<s.length;o+=1)for(let l=0;l<s[o].length;l+=1)r[n+1].addChar3D(s[o][l],i,a),a+=1;r[n+1].fullUpdate(i)}r[n].fullUpdate(i)}this.textFullUpdate(e)}checkCapacity(e=0){let t=this.userData,i=t.textFrame.textOrigin,r=t.textFrame.maxLineSize,n=t.textFrame.textLines;for(let s=e;s<n.length;s+=1)if(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(i),!!n[s-1])for(;!n[s-1].endLine;){let a,o=n[s-1].spaceLeft(r);if(n[s].wordSize(0,1)<=o){n[s].containSpace()?a=n[s].getWord(0,1):a=n[s].popChar(0);for(let l=0;l<a.length;l+=1)a[l]&&n[s-1].addChar3D(a[l],i)}else{n[s].isEmpty()?(n[s].endLine&&n[s-1].isEndLine(!0),n.splice(s,1),s-=1):(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(i));break}}this.textFullUpdate(e)}createTextLine(e=this.userData.textFrame.textLines.length){let t=this.userData.textFrame;t.textLines.splice(e,0,new ub(this.getNewLinePosition(e),t.lineHeight,t.fontSize))}textFullUpdate(e=0){let t=this.userData.textFrame,i=t.textLines,r=this.getVerticalAlignmentOffSet();for(let n=e;n<i.length;n++)i[n].updateYLinePos(this.getNewLinePosition(n)),i[n].fullUpdate(t.textOrigin),i[n].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,r)}getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case 1:return 0;case 2:return this.getRemainingVerticalSpace()/2;case 3:return this.getRemainingVerticalSpace();default:return 0}}getRemainingVerticalSpace(){let e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)}getNewLinePosition(e){let t=this.userData.textFrame.textLines,i=0;for(let r=0;r<e;r+=1)i+=t[r].maxCharSize*t[r].lineHeight;return i}updateColor(e){var r;let t=this.userData;t.textFrame.hexColor=e;let i=t.textFrame.textLines;for(let n=0;n<i.length;n++){let s=i[n].message;for(let a=0;a<s.length;a++){let o=s[a].material;(r=o.color)!=null&&r.isColor&&(o.color=e)}}}updateOpacity(e){let t=this.userData;t.textFrame.opacity=e;let i=t.textFrame.textLines;for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.opacity=e}}}updateVisible(e){let t=this.userData;t.textFrame.visible=e;let i=t.textFrame.textLines;for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.visible=e}}}async updateFontFamily(e){await Wo.loadFont(e);let t=this.userData.textFrame,i=t.textLines;t.fontFamily=e;for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++)n[s].updateFontFamily(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateFontSize(e){let t=this.userData.textFrame,i=t.textLines,r=t.fontSize;t.fontSize=e;for(let n=0;n<i.length;n++)i[n].updateFontSize(e);this.textFullUpdate(),e>r?this.checkOverFlow():e<r&&this.checkCapacity()}async updateTextTransform(e){let t=this.userData.textFrame;await Wo.loadFont(t.fontFamily);let i=t.textLines;switch(t.textTransform=e,e){case 2:for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++)i[r].message[s].updateChar(n[s].char.toUpperCase())}break;case 3:for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++)i[r].message[s].updateChar(n[s].char.toLowerCase())}break;default:for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++)i[r].message[s].updateChar(n[s].originalChar)}}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLetterSpacing(e){let t=this.userData,i=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(let r=0;r<i.length;r++){let n=i[r].message;for(let s=0;s<n.length;s++)n[s].updateLetterSpacing(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLOD(e){let t=this.userData;t.textFrame.LOD=e;let i=t.textFrame.textLines;for(let r=0;r<i.length;r++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLineHeight(e){let t=this.userData,i=t.textFrame.textLines;t.textFrame.lineHeight=e;for(let r=0;r<i.length;r++)i[r].updatelineHeight(e);this.textFullUpdate()}updateVerticalAlignment(e){let t=this.userData;t.textFrame.verticalAlignment=e,this.textFullUpdate()}updateHorizontalAlignment(e){let t=this.userData;t.textFrame.horizontalAlignment=e,this.textFullUpdate()}fromTextFrameData(e,t){if(e.color!==void 0){let i=Hr(e.color,t);this.updateColor(i),this.updateOpacity(i.a)}e.alpha!==void 0&&this.updateOpacity(e.alpha),e.font!==void 0&&this.updateFontFamily(e.font),e.horizontalAlign!==void 0&&this.updateHorizontalAlignment(e.horizontalAlign),e.verticalAlign!==void 0&&this.updateVerticalAlignment(e.verticalAlign),e.textTransform!==void 0&&this.updateTextTransform(e.textTransform),e.fontSize!==void 0&&this.updateFontSize(e.fontSize),e.lineHeight!==void 0&&this.updateLineHeight(e.lineHeight),e.letterSpacing!==void 0&&this.updateLetterSpacing(e.letterSpacing),e.text!==void 0&&e.text!==""&&this.updateText(e.text),(e.width!==void 0||e.height!==void 0)&&this.updateGeometry({parameters:{width:e.width,height:e.height}})}fromState(e,t){return super.fromState(e),this.fromTextFrameData(e,t),this}},$g=zB;$g.VerticalAlign=pz,$g.HorizontalAlign=fz,$g.TextTransform=mz;var cb=class extends Fh{},gee=xR(ZU()),LD=new Map;function vee(e){if(typeof e=="string")return e;let t=LD.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},LD.set(e,t)),t.url}var ev=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._isStarted=!1,this.onEnd=()=>{this._loop>1?this.loopsRemaining===1/0?this.play():this.loopsRemaining>1?(this.play(),this.loopsRemaining--):this._isStarted=!1:this._isStarted=!1};let n;typeof e=="string"?n={src:e}:n={src:vee(e),format:"wav"},this.sound=new gee.Howl(n),this.sound.on("end",this.onEnd),this._src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get src(){return this._src}get isStarted(){return this._isStarted}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._isStarted=!0,this.delay?(this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)):this.sound.play()}pause(){this._isStarted=!1,this.sound.pause(),this.clearFade(),this.clearDelay()}stop(){this._isStarted=!1,this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay()}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},BB=class{constructor(e,t={}){if(this.deletedMaterial=new cb(_a.defaultTwoLayerData("basic"),this),this.deletedImage=new sb(q_.emptyImage),this.materials={},this.images={},this.colors={},this.audios={},this.penumbraSize=[],this.onImageLoad=()=>{this._onImageLoad&&this._onImageLoad()},t.images)for(let[i,r]of Object.entries(t.images))this.addImage(i,r);if(t.audios)for(let[i,r]of Object.entries(t.audios))this.addAudio(i,r.data);this.reset(e)}setOnImageLoad(e){this._onImageLoad=e}reset(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,new cb(i,this));for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.data);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return(t=this.materials[e])!=null?t:this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new Fh(e,this)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.images[e].updateSrc(t.data),!0):(this.images[e]=new sb(t,this.onImageLoad),!1)}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){var t;return(t=this.images[e])!=null?t:this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):new uB(e,this.onImageLoad)}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new o0(t.r,t.g,t.b,t.a):this.colors[e]=new o0(t.r,t.g,t.b,1),!1)}updateColor(e,t){var i,r,n,s;if(this.colors[e]){let a=this.colors[e];return this.colors[e].r=(i=t.r)!=null?i:a.r,this.colors[e].g=(r=t.g)!=null?r:a.g,this.colors[e].b=(n=t.b)!=null?n:a.b,this.colors[e].a=(s=t.a)!=null?s:a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new zs(0,0,0,0))}else return"a"in e?new zs(e.r,e.g,e.b,e.a):new zs(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof ev)return t;{let i=new ev({src:t});return this.audios[e]=i,i}}deleteAudio(e){this.audios[e]&&delete this.audios[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._onImageLoad=void 0,Object.values(this.audios).forEach(e=>{e instanceof ev&&e.dispose()}),this.audios={}}};new BB(Y_.emptyData());var bx=new WeakMap,yee=class extends V0{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let n=new jv(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{let a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){for(let o in t.attributeTypes){let l=t.attributeTypes[o];l.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[o]=l.name)}let i=JSON.stringify(t);if(bx.has(e)){let o=bx.get(e);if(o.key===i)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,n=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(n,s).then(o=>(r=o,new Promise((l,u)=>{r._callbacks[n]={resolve:l,reject:u},r.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return a.catch(()=>!0).then(()=>{r&&n&&this._releaseTask(r,n)}),bx.set(e,{key:i,promise:a}),a}_createGeometry(e){let t=new ft;e.index&&t.setIndex(new xt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],n=r.name,s=r.array,a=r.itemSize;t.setAttribute(n,new xt(s,a))}return t}_loadLibrary(e,t){let i=new jv(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,n)=>{i.load(e,r,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let n=xee.toString(),s=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(n){let s=n.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,n){return r._taskLoad>n._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function xee(){let e,t;onmessage=function(a){let o=a.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(c){d({draco:c})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,u=o.taskConfig;t.then(d=>{let c=d.draco,h=new c.Decoder,f=new c.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let m=i(c,h,f,u),p=m.attributes.map(g=>g.array.buffer);m.index&&p.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},p)}catch(m){console.error(m),self.postMessage({type:"error",id:o.id,error:m.message})}finally{c.destroy(f),c.destroy(h)}});break}};function i(a,o,l,u){let d=u.attributeIDs,c=u.attributeTypes,h,f,m=o.GetEncodedGeometryType(l);if(m===a.TRIANGULAR_MESH)h=new a.Mesh,f=o.DecodeBufferToMesh(l,h);else if(m===a.POINT_CLOUD)h=new a.PointCloud,f=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let p={index:null,attributes:[]};for(let g in d){let v=self[c[g]],y,x;if(u.useUniqueIDs)x=d[g],y=o.GetAttributeByUniqueId(h,x);else{if(x=o.GetAttributeId(h,a[d[g]]),x===-1)continue;y=o.GetAttribute(h,x)}p.attributes.push(n(a,o,h,g,v,y))}return m===a.TRIANGULAR_MESH&&(p.index=r(a,o,h)),a.destroy(h),p}function r(a,o,l){let u=l.num_faces()*3,d=u*4,c=a._malloc(d);o.GetTrianglesUInt32Array(l,d,c);let h=new Uint32Array(a.HEAPF32.buffer,c,u).slice();return a._free(c),{array:h,itemSize:1}}function n(a,o,l,u,d,c){let h=c.num_components(),f=l.num_points()*h,m=f*d.BYTES_PER_ELEMENT,p=s(a,d),g=a._malloc(m);o.GetAttributeDataArrayForAllPoints(l,c,p,m,g);let v=new d(a.HEAPF32.buffer,g,f).slice();return a._free(g),{name:u,array:v,itemSize:h}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var al;function wee(){return al||(al=new yee,al.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),al.decoderPending}async function _ee(e){if(al){let t={attributeIDs:al.defaultAttributeIDs,attributeTypes:al.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await al.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,n])=>({name:r,itemSize:n.itemSize,array:n.array}))}}return null}async function bee(e,t){let[i,r]=ez(B_.deserialize(new Uint8Array(e)));AK(i);let n=[];i.scene.objects.traverse((s,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&a.geometry.data.draco!==void 0&&n.push(a)}),n.length&&await wee();for(let s of n){let a=await _ee(Cl(s.geometry.data.draco));if(a){a.index&&(s.geometry.data.index={array:a.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let o={};a.attributes.forEach(({name:l,array:u,itemSize:d})=>{o[l]={array:u,itemSize:d,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=o,s.geometry.data.draco=void 0}}return t&&t(i),r.result().data}var kB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},HA={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},See=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],l0={CSS:{},springs:{}};function ha(e,t,i){return Math.min(Math.max(e,t),i)}function Cf(e,t){return e.indexOf(t)>-1}function Sx(e,t){return e.apply(null,t)}var lt={arr:function(e){return Array.isArray(e)},obj:function(e){return Cf(Object.prototype.toString.call(e),"Object")},pth:function(e){return lt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||lt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return lt.hex(e)||lt.rgb(e)||lt.hsl(e)},key:function(e){return!kB.hasOwnProperty(e)&&!HA.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function NB(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function FB(e,t){var i=NB(e),r=ha(lt.und(i[0])?1:i[0],.1,100),n=ha(lt.und(i[1])?100:i[1],.1,100),s=ha(lt.und(i[2])?10:i[2],.1,100),a=ha(lt.und(i[3])?0:i[3],.1,100),o=Math.sqrt(n/r),l=s/(2*Math.sqrt(n*r)),u=l<1?o*Math.sqrt(1-l*l):0,d=1,c=l<1?(l*o+-a)/u:-a+o;function h(m){var p=t?t*m/1e3:m;return l<1?p=Math.exp(-p*l*o)*(d*Math.cos(u*p)+c*Math.sin(u*p)):p=(d+c*p)*Math.exp(-p*o),m===0||m===1?m:1-p}function f(){var m=l0.springs[e];if(m)return m;for(var p=1/6,g=0,v=0;;)if(g+=p,h(g)===1){if(v++,v>=16)break}else v=0;var y=g*p*1e3;return l0.springs[e]=y,y}return t?h:f}function Aee(e){return e===void 0&&(e=10),function(t){return Math.ceil(ha(t,1e-6,1)*e)*(1/e)}}var Mee=function(){var e=11,t=1/(e-1);function i(d,c){return 1-3*c+3*d}function r(d,c){return 3*c-6*d}function n(d){return 3*d}function s(d,c,h){return((i(c,h)*d+r(c,h))*d+n(c))*d}function a(d,c,h){return 3*i(c,h)*d*d+2*r(c,h)*d+n(c)}function o(d,c,h,f,m){var p,g,v=0;do g=c+(h-c)/2,p=s(g,f,m)-d,p>0?h=g:c=g;while(Math.abs(p)>1e-7&&++v<10);return g}function l(d,c,h,f){for(var m=0;m<4;++m){var p=a(c,h,f);if(p===0)return c;var g=s(c,h,f)-d;c-=g/p}return c}function u(d,c,h,f){if(!(0<=d&&d<=1&&0<=h&&h<=1))return;var m=new Float32Array(e);if(d!==c||h!==f)for(var p=0;p<e;++p)m[p]=s(p*t,d,h);function g(v){for(var y=0,x=1,w=e-1;x!==w&&m[x]<=v;++x)y+=t;--x;var _=(v-m[x])/(m[x+1]-m[x]),b=y+_*t,A=a(b,d,h);return A>=.001?l(v,b,d,h):A===0?b:o(v,y,y+t,d,h)}return function(v){return d===c&&h===f||v===0||v===1?v:s(g(v),c,f)}}return u}(),UB=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var n,s=4;r<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-r,2)}},Elastic:function(r,n){r===void 0&&(r=1),n===void 0&&(n=.5);var s=ha(r,1,10),a=ha(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,n){t[r]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+r]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function VA(e,t){if(lt.fnc(e))return e;var i=e.split("(")[0],r=UB[i],n=NB(e);switch(i){case"spring":return FB(e,t);case"cubicBezier":return Sx(Mee,n);case"steps":return Sx(Aee,n);default:return Sx(r,n)}}function HB(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function ay(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<i;s++)if(s in e){var a=e[s];t.call(r,a,s,e)&&n.push(a)}return n}function oy(e){return e.reduce(function(t,i){return t.concat(lt.arr(i)?oy(i):i)},[])}function OD(e){return lt.arr(e)?e:(lt.str(e)&&(e=HB(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function jA(e,t){return e.some(function(i){return i===t})}function GA(e){var t={};for(var i in e)t[i]=e[i];return t}function hb(e,t){var i=GA(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function ly(e,t){var i=GA(e);for(var r in t)i[r]=lt.und(e[r])?t[r]:e[r];return i}function Eee(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Tee(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,u,d){return l+l+u+u+d+d}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),n=parseInt(r[1],16),s=parseInt(r[2],16),a=parseInt(r[3],16);return"rgba("+n+","+s+","+a+",1)"}function Cee(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(h,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+(f-h)*6*m:m<1/2?f:m<2/3?h+(f-h)*(2/3-m)*6:h}var o,l,u;if(r==0)o=l=u=n;else{var d=n<.5?n*(1+r):n+r-n*r,c=2*n-d;o=a(c,d,i+1/3),l=a(c,d,i),u=a(c,d,i-1/3)}return"rgba("+o*255+","+l*255+","+u*255+","+s+")"}function Dee(e){if(lt.rgb(e))return Eee(e);if(lt.hex(e))return Tee(e);if(lt.hsl(e))return Cee(e)}function oo(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Pee(e){if(Cf(e,"translate")||e==="perspective")return"px";if(Cf(e,"rotate")||Cf(e,"skew"))return"deg"}function db(e,t){return lt.fnc(e)?e(t.target,t.id,t.total):e}function da(e,t){return e.getAttribute(t)}function WA(e,t,i){var r=oo(t);if(jA([i,"deg","rad","turn"],r))return t;var n=l0.CSS[t+i];if(!lt.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+i;var l=s/a.offsetWidth;o.removeChild(a);var u=l*parseFloat(t);return l0.CSS[t+i]=u,u}function VB(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?WA(e,n,i):n}}function XA(e,t){if(lt.dom(e)&&!lt.inp(e)&&(da(e,t)||lt.svg(e)&&e[t]))return"attribute";if(lt.dom(e)&&jA(See,t))return"transform";if(lt.dom(e)&&t!=="transform"&&VB(e,t))return"css";if(e[t]!=null)return"object"}function jB(e){if(lt.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,n;n=i.exec(t);)r.set(n[1],n[2]);return r}}function Lee(e,t,i,r){var n=Cf(t,"scale")?1:0+Pee(t),s=jB(e).get(t)||n;return i&&(i.transforms.list.set(t,s),i.transforms.last=t),r?WA(e,s,r):s}function YA(e,t,i,r){switch(XA(e,t)){case"transform":return Lee(e,t,r,i);case"css":return VB(e,t,i);case"attribute":return da(e,t);default:return e[t]||0}}function qA(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=oo(e)||0,n=parseFloat(t),s=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return n+s+r;case"-":return n-s+r;case"*":return n*s+r}}function GB(e,t){if(lt.col(e))return Dee(e);if(/\s/g.test(e))return e;var i=oo(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function QA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Oee(e){return Math.PI*2*da(e,"r")}function Ree(e){return da(e,"width")*2+da(e,"height")*2}function Iee(e){return QA({x:da(e,"x1"),y:da(e,"y1")},{x:da(e,"x2"),y:da(e,"y2")})}function WB(e){for(var t=e.points,i=0,r,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(i+=QA(r,s)),r=s}return i}function zee(e){var t=e.points;return WB(e)+QA(t.getItem(t.numberOfItems-1),t.getItem(0))}function XB(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Oee(e);case"rect":return Ree(e);case"line":return Iee(e);case"polyline":return WB(e);case"polygon":return zee(e)}}function Bee(e){var t=XB(e);return e.setAttribute("stroke-dasharray",t),t}function kee(e){for(var t=e.parentNode;lt.svg(t)&&lt.svg(t.parentNode);)t=t.parentNode;return t}function YB(e,t){var i=t||{},r=i.el||kee(e),n=r.getBoundingClientRect(),s=da(r,"viewBox"),a=n.width,o=n.height,l=i.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function Nee(e,t){var i=lt.str(e)?HB(e)[0]:e,r=t||100;return function(n){return{property:n,el:i,svg:YB(i),totalLength:XB(i)*(r/100)}}}function Fee(e,t){function i(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var r=YB(e.el,e.svg),n=i(),s=i(-1),a=i(1);switch(e.property){case"x":return(n.x-r.x)*r.w;case"y":return(n.y-r.y)*r.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function RD(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=GB(lt.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:lt.str(e)||t?r.split(i):[]}}function qB(e){var t=e?oy(lt.arr(e)?e.map(OD):OD(e)):[];return ay(t,function(i,r,n){return n.indexOf(i)===r})}function QB(e){var t=qB(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:jB(i)}}})}function Uee(e,t){var i=GA(t);if(/^spring/.test(i.easing)&&(i.duration=FB(i.easing)),lt.arr(e)){var r=e.length,n=r===2&&!lt.obj(e[0]);n?e={value:e}:lt.fnc(t.duration)||(i.duration=t.duration/r)}var s=lt.arr(e)?e:[e];return s.map(function(a,o){var l=lt.obj(a)&&!lt.pth(a)?a:{value:a};return lt.und(l.delay)&&(l.delay=o?0:t.delay),lt.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return ly(a,i)})}function Hee(e){for(var t=ay(oy(e.map(function(s){return Object.keys(s)})),function(s){return lt.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),i={},r=function(s){var a=t[s];i[a]=e.map(function(o){var l={};for(var u in o)lt.key(u)?u==a&&(l.value=o[u]):l[u]=o[u];return l})},n=0;n<t.length;n++)r(n);return i}function Vee(e,t){var i=[],r=t.keyframes;r&&(t=ly(Hee(r),t));for(var n in t)lt.key(n)&&i.push({name:n,tweens:Uee(t[n],e)});return i}function jee(e,t){var i={};for(var r in e){var n=db(e[r],t);lt.arr(n)&&(n=n.map(function(s){return db(s,t)}),n.length===1&&(n=n[0])),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function Gee(e,t){var i;return e.tweens.map(function(r){var n=jee(r,t),s=n.value,a=lt.arr(s)?s[1]:s,o=oo(a),l=YA(t.target,e.name,o,t),u=i?i.to.original:l,d=lt.arr(s)?s[0]:u,c=oo(d)||oo(l),h=o||c;return lt.und(a)&&(a=u),n.from=RD(d,h),n.to=RD(qA(a,d),h),n.start=i?i.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=VA(n.easing,n.duration),n.isPath=lt.pth(s),n.isColor=lt.col(n.from.original),n.isColor&&(n.round=1),i=n,n})}var ZB={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,n){if(r.list.set(t,i),t===r.last||n){var s="";r.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function KB(e,t){var i=QB(e);i.forEach(function(r){for(var n in t){var s=db(t[n],r),a=r.target,o=oo(s),l=YA(a,n,o,r),u=o||oo(l),d=qA(GB(s,u),l),c=XA(a,n);ZB[c](a,n,d,r.transforms,!0)}})}function Wee(e,t){var i=XA(e.target,t.name);if(i){var r=Gee(t,e),n=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}function Xee(e,t){return ay(oy(e.map(function(i){return t.map(function(r){return Wee(i,r)})})),function(i){return!lt.und(i)})}function JB(e,t){var i=e.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=i?Math.max.apply(Math,e.map(function(s){return r(s)+s.duration})):t.duration,n.delay=i?Math.min.apply(Math,e.map(function(s){return r(s)+s.delay})):t.delay,n.endDelay=i?n.duration-Math.max.apply(Math,e.map(function(s){return r(s)+s.duration-s.endDelay})):t.endDelay,n}var ID=0;function Yee(e){var t=hb(kB,e),i=hb(HA,e),r=Vee(i,e),n=QB(e.targets),s=Xee(n,r),a=JB(s,i),o=ID;return ID++,ly(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var sn=[],zD=[],tv,qee=function(){function e(){tv=requestAnimationFrame(t)}function t(i){var r=sn.length;if(r){for(var n=0;n<r;){var s=sn[n];if(!s.paused)s.tick(i);else{var a=sn.indexOf(s);a>-1&&(sn.splice(a,1),r=sn.length)}n++}e()}else tv=cancelAnimationFrame(tv)}return e}();function Qee(){document.hidden?(sn.forEach(function(e){return e.pause()}),zD=sn.slice(0),zi.running=sn=[]):zD.forEach(function(e){return e.play()})}typeof document<"u"&&document.addEventListener("visibilitychange",Qee);function zi(e){e===void 0&&(e={});var t=0,i=0,r=0,n,s=0,a=null;function o(y){var x=window.Promise&&new Promise(function(w){return a=w});return y.finished=x,x}var l=Yee(e);o(l);function u(){var y=l.direction;y!=="alternate"&&(l.direction=y!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(x){return x.reversed=l.reversed})}function d(y){return l.reversed?l.duration-y:y}function c(){t=0,i=d(l.currentTime)*(1/zi.speed)}function h(y,x){x&&x.seek(y-x.timelineOffset)}function f(y){if(l.reversePlayback)for(var x=s;x--;)h(y,n[x]);else for(var w=0;w<s;w++)h(y,n[w])}function m(y){var x=0,w=l.animations,_=w.length;for(l.reversePlayback===!0&&l.rewind===!1&&(y=l.duration+l.delay-l.endDelay-y);x<_;){var b=w[x],A=b.animatable,S=b.tweens,M=S.length-1,E=S[M];M&&(E=ay(S,function(U){return y<U.end})[0]||E);for(var C=ha(y-E.start-E.delay,0,E.duration)/E.duration,L=isNaN(C)?1:E.easing(C),N=E.to.strings,R=E.round,V=[],F=E.to.numbers.length,H=void 0,P=0;P<F;P++){var z=void 0;if(l.reversePlayback===!0&&l.rewind===!1)var j=E.to.numbers[P],D=E.from.numbers[P]||0;else var D=E.to.numbers[P],j=E.from.numbers[P]||0;E.isPath?z=Fee(E.value,L*D):z=j+L*(D-j),R&&(E.isColor&&P>2||(z=Math.round(z*R)/R)),V.push(z)}var B=N.length;if(!B)H=V[0];else{H=N[0];for(var W=0;W<B;W++){N[W];var X=N[W+1],$=V[W];isNaN($)||(X?H+=$+X:H+=$+" ")}}ZB[b.type](A.target,b.property,H,A.transforms),b.currentValue=H,x++}}function p(y){l[y]&&!l.passThrough&&l[y](l)}function g(){l.remaining&&l.remaining!==!0&&l.remaining--}function v(y){var x=l.duration,w=l.delay,_=x-l.endDelay,b=d(y);l.progress=ha(b/x*100,0,100),l.reversePlayback=b<l.currentTime,n&&f(b),!l.began&&l.currentTime>=0&&(l.began=!0,p("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,p("loopBegin")),b<=w&&l.currentTime!==0&&(m(0),p("change")),(b>=_&&l.currentTime!==x||!x)&&(m(x),p("change")),b>w&&b<_?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,p("changeBegin")),p("change"),m(b)):l.changeBegan?(l.changeCompleted=!0,l.changeBegan=!1,p("change"),p("changeComplete")):l.began&&b>_&&(p("change"),p("changeComplete")),l.currentTime=ha(b,0,x),l.began&&p("update"),y>=x&&(i=0,g(),l.remaining?(t=r,p("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,p("loopComplete"),p("complete"),!l.passThrough&&"Promise"in window&&(a(),o(l)))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var x=s;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,m(l.reversed?l.duration:0)},l.set=function(y,x){return KB(y,x),l},l.tick=function(y){r=y,t||(t=r),v((r+(i-t))*zi.speed)},l.seek=function(y){v(d(y))},l.pause=function(){l.paused=!0,c()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,sn.push(l),c(),tv||qee())},l.reverse=function(){u(),l.completed=!l.reversed,c()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function BD(e,t){for(var i=t.length;i--;)jA(e,t[i].animatable.target)&&t.splice(i,1)}function Zee(e){for(var t=qB(e),i=sn.length;i--;){var r=sn[i],n=r.animations,s=r.children;BD(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;BD(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&r.pause()}}function Kee(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?VA(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",u=a==="last",d=lt.arr(e),c=parseFloat(d?e[0]:e),h=d?parseFloat(e[1]):0,f=oo(d?e[1]:e)||0,m=t.start||0+(d?c:0),p=[],g=0;return function(v,y,x){if(o&&(a=0),l&&(a=(x-1)/2),u&&(a=x-1),!p.length){for(var w=0;w<x;w++){if(!n)p.push(Math.abs(a-w));else{var _=l?(n[0]-1)/2:a%n[0],b=l?(n[1]-1)/2:Math.floor(a/n[0]),A=w%n[0],S=Math.floor(w/n[0]),M=_-A,E=b-S,C=Math.sqrt(M*M+E*E);s==="x"&&(C=-M),s==="y"&&(C=-E),p.push(C)}g=Math.max.apply(Math,p)}r&&(p=p.map(function(N){return r(N/g)*g})),i==="reverse"&&(p=p.map(function(N){return s?N<0?N*-1:-N:Math.abs(g-N)}))}var L=d?(h-c)/g:c;return m+L*(Math.round(p[y]*100)/100)+f}}function Jee(e){e===void 0&&(e={});var t=zi(e);return t.duration=0,t.add=function(i,r){var n=sn.indexOf(t),s=t.children;n>-1&&sn.splice(n,1);function a(h){h.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=ly(i,hb(HA,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=lt.und(r)?u:qA(r,u),a(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var d=zi(l);a(d),s.push(d);var c=JB(s,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}zi.version="3.2.0";zi.speed=1;zi.running=sn;zi.remove=Zee;zi.get=YA;zi.set=KB;zi.convertPx=WA;zi.path=Nee;zi.setDashoffset=Bee;zi.stagger=Kee;zi.timeline=Jee;zi.easing=VA;zi.penner=UB;zi.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var $ee=zi;function ete(e,t,i){var n,s;let r=e.cameraType==="OrthographicCamera"?(n=t.orthographic)==null?void 0:n.zoom:(s=t.perspective)==null?void 0:s.zoom;if(r!==void 0){let a=e.zoom;a!==r&&i.push({change:o=>{e.zoom=Mt.lerp(a,r,o),e.updateProjectionMatrix()}})}if(t.targetOffset!==void 0){let a=e.targetOffset,o=t.targetOffset;a!==o&&i.push({change:l=>{e.targetOffset=Mt.lerp(a,o,l)}})}}function tte(e,t,i){if(t.width!==void 0&&t.height!==void 0&&t.depth!==void 0){let{width:r,height:n,depth:s}=e.geometry.userData.parameters,a=[r,n,s],o=[t.width,t.height,t.depth];!Er.isEqual(a,o)&&!Ii(e)&&i.push({change:l=>{let[u,d,c]=Er.lerp(a,o,l);e.updateGeometry({parameters:{width:u,height:d,depth:c}}),e.invalidateDownstreamBooleanData()}})}}function ite(e,t,i,r){if(t.intensity!==void 0){let n=e.intensity,s=t.intensity;n!==s&&i.push({change:a=>{e.intensity=Mt.lerp(n,s,a)}})}if(t.color!==void 0){let n=e.color.clone(),s=typeof t.color=="string"?r.getColor(t.color):t.color;if(!Sr.equals(n,s)){let a=n.clone();e.color=a,i.push({change:o=>{let{r:l,g:u,b:d}=Sr.lerp(n,s,o);a.setRGB(l,u,d)}})}}}function rte(e,t,i,r){var a,o;let n=0,s=e.layers[n];for(;s;){let l=t.layers.data(s.uuid);if(l&&((a=s.visible)!=null?a:!0)&&((o=l.visible)!=null?o:!0)){let u=s.getNames().filter(d=>!gz.some(c=>d.includes(c)));for(let d of u)try{let c=s.getValue(d);if(d==="steps")ute(s,l,d,i);else if(d==="colors")cte(s,l,d,i);else if(typeof c=="number")nte(s,l,d,i);else{if(typeof c=="boolean")continue;"isVector2"in c?ste(s,l,d,i):"isVector3"in c?ate(s,l,d,i):"isColorA"in c?lte(s,l,d,i,r):"isColor"in c?ote(s,l,d,i,r):"isTexture"in c&&hte(s,l,d,i)}}catch(c){console.error(`animateMaterial: unexpected material layer for ${d}`,c)}}n+=1,s=e.layers[n]}}function nte(e,t,i,r){if(!e.hasValue(i)||!(i in t))return;let n=e.getValue(i),s=t[i];n!==s&&r.push({change:a=>{e.setValue(i,Mt.lerp(n,s,a))}})}function ste(e,t,i,r){if(!e.hasValue(i)||!(i in t))return;let n=e.getValue(i),s=n.toArray(),a=t[i];il.isEqual(s,a)||r.push({change:o=>{n.fromArray(il.lerp(s,a,o))}})}function ate(e,t,i,r){if(!e.hasValue(i)||!(i in t))return;let n=e.getValue(i),s=n.toArray(),a=t[i];Er.isEqual(s,a)||r.push({change:o=>{n.fromArray(Er.lerp(s,a,o))}})}function ote(e,t,i,r,n){if(!e.hasValue(i)||!(i in t))return;let s=e.getValue(i).clone(),a=t[i],o=typeof a=="string"?n.getColor(a):a;if(Sr.equals(s,o))return;let l=s.clone();e.setValue(i,l),r.push({change:u=>{let{r:d,g:c,b:h}=Sr.lerp(s,o,u);l.setRGB(d,c,h)}})}function lte(e,t,i,r,n){if(!e.hasValue(i)||!(i in t))return;let s=e.getValue(i).clone(),a=t[i],o=typeof a=="string"?n.getColor(a):a;if(as.equals(s,o))return;let l=s.clone();e.setValue(i,l),r.push({change:u=>{let{r:d,g:c,b:h,a:f}=as.lerp(s,o,u);l.setRGBA(d,c,h,f)}})}function ute(e,t,i="steps",r){if(!e.hasValue(i)||!(i in t))return;let n=[...e.getValue(i)],s=t[i];for(let a=0;a<n.length;++a){let o=n[a],l=s[a];o!==l&&r.push({change:u=>{n[a]=Mt.lerp(o,l,u),e.setValue("steps",n)}})}}function cte(e,t,i="colors",r){if(!e.hasValue(i)||!(i in t))return;let n=e.getValue(i),s=t[i];for(let a=0;a<n.length;++a){let o=n[a].toArray(),l=s[a];Zv.isEqual(o,l)||r.push({change:u=>{n[a].fromArray(Zv.lerp(o,l,u))}})}}function hte(e,t,i="texture",r){if(!e.hasValue(i)||!(i in t))return;let n=e.getNode("mat"),s=t[i],a=n.repeat,o=n.offset,l=s.repeat,u=s.offset;(!il.isEqual(a,l)||!il.isEqual(o,u))&&r.push({change:d=>{n.repeat=il.lerp(a,l,d),n.offset=il.lerp(o,u,d),n.updateMatrix()}})}function dte(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return i.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let d=1-r;return i.w=d*e.w+r*t.w,i.x=d*e.x+r*t.x,i.y=d*e.y+r*t.y,i.z=d*e.z+r*t.z,i.normalize(),i}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-r)*o)/a,u=Math.sin(r*o)/a;return i.w=e.w*l+t.w*u,i.x=e.x*l+t.x*u,i.y=e.y*l+t.y*u,i.z=e.z*l+t.z*u,i}function fte(e,t,i=0){let r=Array.isArray(e.material)?e.material[i]:e.material,n;return"materials"in t?n=t.materials[i]:"material"in t&&(n=t.material),[r,n]}var fb=new T,pb=new T,kD=new ii,pte=new $n,mte=new Ke;function gte(e,t,i,r){if(i.position!==void 0){let n=e.position.toArray(),s=i.position;Er.isEqual(n,s)||r.push({change:a=>{e.position.fromArray(Er.lerp(n,s,a)),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}if(i.scale!==void 0){let n=e.scale.toArray(),s=i.scale;Er.isEqual(n,s)||r.push({change:a=>{e.scale.fromArray(Er.lerp(n,s,a)),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}vte(e,t,i,r),yte(e,i,r)}function vte(e,t,i,r){if(i.rotation===void 0)return;let n=fb.setFromEuler(e.rotation).toArray(),s=i.rotation;if(!Er.isEqual(n,s))if(Er.sub(i.rotation,t?t.rotation:e.rotation).every(a=>Math.abs(a)<2*Math.PI)){let a=e.quaternion.clone(),o=new ii().setFromEuler(pte.set(i.rotation[0],i.rotation[1],i.rotation[2]));r.push({change:l=>{dte(a,o,e.quaternion,l),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}else r.push({change:a=>{e.rotation.setFromVector3(pb.fromArray(Er.lerp(n,s,a))),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}function yte(e,t,i){if(t.hiddenMatrix!==void 0&&!Vu.isEqual(e.hiddenMatrix.toArray(),t.hiddenMatrix)){let r=new T,n=new ii,s=new T;e.hiddenMatrix.decompose(r,n,s);let a=new T,o=new ii,l=new T;mte.fromArray(t.hiddenMatrix).decompose(a,o,l),i.push({change:u=>{kD.slerpQuaternions(n,o,u),fb.lerpVectors(r,a,u),pb.lerpVectors(s,l,u),e.hiddenMatrix.compose(fb,kD,pb),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}}function xte(e,t,i,r){let n=[];if((e.visible||Ii(e.parent))&&gte(e,t==null?void 0:t.objectState,i.objectState,n),ji(e)){if((e.visible||Ii(e.parent))&&"geometry"in i.objectState&&tte(e,i.objectState.geometry,n),e.visible&&("material"in i.objectState||"materials"in i.objectState)){let[s,a]=fte(e,i.objectState,0);s&&a&&typeof a!="string"&&rte(s,a,n,r)}}else e.visible&&KJ(e)?ite(e,i.objectState,n,r):ZJ(e)&&ete(e,i.objectState,n);return n.length?{change:s=>{n.forEach(a=>{a.change&&a.change(s)})}}:void 0}function wte(e,t,i){switch(e){case 0:return"cubicBezier( 0, 0, 1, 1 )";case 1:return"cubicBezier( .25, .1, .25, 1 )";case 2:return"cubicBezier( .42, 0, 1, 1 )";case 3:return"cubicBezier( 0, 0, .58, 1 )";case 4:return"cubicBezier( .42, 0, .58, 1 )";case 5:let{control1:r,control2:n}=t!=null?t:{...D_.defaultData};return`cubicBezier( ${r[0]}, ${r[1]}, ${n[0]}, ${n[1]} )`;case 6:let{mass:s,stiffness:a,damping:o,velocity:l}=i!=null?i:{...C_.defaultData};return`spring( ${s}, ${a}, ${o}, ${l} )`}}var _te=class{constructor(e,t){this.object=e,this.sharedAssets=t,this.uuid=Mt.generateUUID(),this.states=[],this.events={},this.animatingState=0,this._scrollCounter=null}get fromState(){return this._fromState}get animation(){return this._animation}start(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null),this.states.length>1&&(this.states[0].execute(this.object,this.sharedAssets),this._toState=this.states[0],this._fromState=void 0)}end(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0),this.states.length>1&&this.states[0].execute(this.object,this.sharedAssets),this._toState=void 0,this._fromState=void 0}seek(e,t,i,r){var n;this._scrollCounter===null&&(this.animate(e,r),this._scrollCounter=0),this._scrollCounter+=t,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),i),(n=this._animation)==null||n.seek(this._scrollCounter/i*(r.duration?r.duration:1))}animate(e,t){var i,r,n,s,a,o,l;if(this._fromState===e&&((i=this._animation)==null?void 0:i.reversed)){let u=(n=(r=this._animation)==null?void 0:r.currentTime)!=null?n:0;(s=this._animation)==null||s.reset(),(a=this._animation)==null||a.seek(u),(o=this._animation)==null||o.play()}else if(this._toState!==e){this._animation!==void 0&&this._animation.pause(),this.animatingState=0,this._fromState=this._toState,this._toState=e;let u=xte(this.object,this._fromState,e,this.sharedAssets);if(!u)return;let d={t:0};this._animation=$ee({autoplay:!1,loop:t.repeat?!0:t.cycle?1:!1,direction:t.cycle?"alternate":"normal",rewind:t.rewind,delay:t.startDelay,endDelay:t.endDelay,duration:t.duration,easing:wte(t.easing,t.cubicControls,t.springParameters),targets:d,t:1,change:()=>{u.change&&u.change(d.t),this.object.dispatchEvent({type:"stateChanged"})},loopBegin:c=>{if(this.animatingState===0){this.animatingState=1;return}c.reversed?(this._toState=this._fromState,this._fromState=e):(this._fromState=this._toState,this._toState=e)}}),t.autoplay?t.startOnceDelay>0?setTimeout(()=>{var c;return(c=this._animation)==null?void 0:c.play()},t.startOnceDelay):(l=this._animation)==null||l.play():this._animation.finished.then(()=>{this.animatingState=0})}}emitEvent(e){var t;if(e==="keyDown"||e==="keyUp"||e==="mouseDown"||e==="mouseUp"||e==="mouseHover"||e==="scroll"||e==="start"){let i=this.events[e];if(i){for(let r of i)if("targets"in r)for(let{object:n,state:s,params:a}of r.targets)(t=n.interaction)==null||t.animate(s,a)}}}emitEventReverse(e){if(e==="keyDown"||e==="keyUp"||e==="mouseDown"||e==="mouseUp"||e==="mouseHover"||e==="scroll"||e==="start"){let t=this.events[e];if(t){for(let i of t)if("targets"in i)for(let{object:r,params:n}of i.targets){let s=r.interaction;(s==null?void 0:s._fromState)!==void 0&&s.animate(s._fromState,n)}}}}},$B=class{static create(e,t){var i,r,n,s,a,o;if(e.object){let l=t.find(e.object);if(l!=null&&l.interaction){let u=e.state?l.interaction.states.find(d=>d.uuid===e.state):l.interaction.states[0];if(u){let d=(i=e.delay)!=null?i:0,c={cycle:(r=e.cycle)!=null?r:!1,rewind:(n=e.rewind)!=null?n:!1,repeat:(s=e.repeat)!=null?s:!1,duration:(a=e.duration)!=null?a:1e3,startOnceDelay:e.delayDirection==="start-once"?d:0,startDelay:e.delayDirection==="start"||!e.delayDirection?d:0,endDelay:e.delayDirection==="end"||!e.delayDirection?d:0,easing:(o=e.easing)!=null?o:4,autoplay:!0};if(e.easing===5){let h=e;c.cubicControls={control1:[...h.control1],control2:[...h.control2]}}if(e.easing===6){let h=e;c.springParameters={mass:h.mass,stiffness:h.stiffness,damping:h.damping,velocity:h.velocity}}return new $B(l,u,c)}}}}constructor(e,t,i){this.object=e,this.state=t,this.params=i}},Ku=class{constructor(e){this.raycastState=e,this.domEventsNeeded=[]}init(){}dispose(){}},Ax=new T,ND=new Jn,FD=new Ke,ek=class{constructor(){this.type="follow"}static dispatch(e,t,i){ND.setFromNormalAndCoplanarPoint(t,e.getWorldPosition(Ax)),i.ray.intersectPlane(ND,Ax),e.position.copy(Ax),e.parent!==null&&e.position.applyMatrix4(FD.copy(e.parent.matrixWorld).invert()),e.position.applyMatrix4(FD.copy(e.hiddenMatrix).invert()),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.dispatchEvent({type:"stateChanged"})}},bte=class extends Ku{constructor(){super(...arguments),this.objects=[],this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleFollowEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this.handleFollowEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(i=>{var r,n;!((n=(r=i.interaction)==null?void 0:r.events.follow)!=null&&n.length)||this.objects.push(i)}),this.domEventsNeeded=[],this.objects.length&&(Ki?(this.domEventsNeeded.push("touchstart","touchmove"),t.addEventListener("touchstart",this.onTouchMove),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Ki?(e.removeEventListener("touchstart",this.onTouchMove),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}handleFollowEvent(){let{normal:e,raycaster:t}=this.raycastState;this.objects.forEach(i=>ek.dispatch(i,e,t))}},Mx=new T,UD=new Jn,tk=class{constructor(e){this.data=e,this.type="lookAt"}static dispatch(e,t,i){var n,s,a;if(!((s=(n=e==null?void 0:e.interaction)==null?void 0:n.events.lookAt)!=null&&s.length)||!t||!i)return;let r=e.interaction.events.lookAt[0].data.distance;UD.set(t,-r),i.ray.intersectPlane(UD,Mx),e.lookAt(Mx),e.updateMatrix(),(a=e.interaction.animation)==null||a.finished.then(()=>{e.lookAt(Mx),e.updateMatrix(),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0)}),ji(e)&&Ii(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.dispatchEvent({type:"stateChanged"})}},Ste=class extends Ku{constructor(){super(...arguments),this.objects=[],this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this._handleLookAtEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this._handleLookAtEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(i=>{var r,n;!((n=(r=i.interaction)==null?void 0:r.events.lookAt)!=null&&n.length)||this.objects.push(i)}),this.domEventsNeeded=[],this.objects.length&&(Ki?(this.domEventsNeeded.push("touchstart","touchmove"),t.addEventListener("touchstart",this.onTouchMove),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Ki?(e.removeEventListener("touchstart",this.onTouchMove),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}_handleLookAtEvent(){let{normal:e,raycaster:t}=this.raycastState;this.objects.forEach(i=>{tk.dispatch(i,e,t)})}},ik=class{constructor(){this.type="start",this.targets=[]}static dispatch(e){var t,i;!((i=(t=e.interaction)==null?void 0:t.events.start)!=null&&i.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"start"}),e.interaction.events.start.forEach(r=>{r.targets.forEach(({object:n,state:s,params:a})=>{var o;return(o=n.interaction)==null?void 0:o.animate(s,a)})}))}},Ate=class extends Ku{constructor(){super(...arguments),this.objects=[]}init(){let{scene:e}=this.raycastState;this.objects=[],e.traverseEntity(t=>{var i,r;!((r=(i=t.interaction)==null?void 0:i.events.start)!=null&&r.length)||this.objects.push(t)}),this.objects.forEach(t=>{ik.dispatch(t)})}dispose(){this.objects=[]}},rk=class{constructor(e){this.data=e,this.type="scroll",this.targets=[]}static dispatch(e,t){var r,n;if(!((n=(r=e.interaction)==null?void 0:r.events.scroll)!=null&&n.length))return;e.dispatchEvent({type:"beginEvent",typeEvent:"scroll"});let i=t>0?1:-1;e.interaction.events.scroll.forEach(s=>{s.targets.forEach(({object:a,state:o,params:l})=>{var d;let u={...l,autoplay:!1};(d=a.interaction)==null||d.seek(o,i,s.data.steps,u)})})}},Mte=class extends Ku{constructor(){super(...arguments),this.objects=[],this.onWheel=e=>{this.objects.forEach(t=>{rk.dispatch(t,e.deltaY)})}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(i=>{var r,n;!((n=(r=i.interaction)==null?void 0:r.events.scroll)!=null&&n.length)||this.objects.push(i)}),this.domEventsNeeded=[],this.objects.length&&(this.domEventsNeeded.push("wheel"),t.addEventListener("wheel",this.onWheel))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],e.removeEventListener("wheel",this.onWheel),this.domEventsNeeded=[]}};function Ete(e,t){return e.distance-t.distance}function nk(e,t,i){if(Pl(t)&&t.visible&&!t.raycastLock)t.raycast(e,i);else return;for(let r of t.children)nk(e,r,i)}function ZA(e,t,i){if(!i.some(n=>uy(e,n)!==void 0))return[];let r=[];return t.children.forEach(n=>nk(e,n,r)),r.sort(Ete),r}function KA(e,t){var r,n,s,a;let i=[];if(e.length){let o=e[0].object;Pl(o)&&((n=(r=o.interaction)==null?void 0:r.events[t])==null?void 0:n.length)&&i.push(o);let l=o.parent;for(;l;)Bz(l)&&((a=(s=l.interaction)==null?void 0:s.events[t])==null?void 0:a.length)&&i.push(l),l=l.parent}return i}function uy(e,t){if(ji(t)){if(!t.raycastLock&&t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(Bz(t))return sk(e,t)}function sk(e,t){if(ji(t)&&!t.raycastLock&&t.visible){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children)if(Pl(i)){let r=sk(e,i);if(r)return r}}function Tte(e){if(e.style.transform!==""){let t=getComputedStyle(e).getPropertyValue("transform");if(t!=="none"){let i=t.replace("matrix(","").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[3])}}}return{x:1,y:1}}function ak(e){let t=e.getViewport(new vt),i=Tte(e.domElement);return{left:t.x*i.x,top:t.y*i.y,width:t.z*i.x,height:t.w*i.y}}var Cte=class{constructor(e,t,i,r){this.renderer=e,this.scene=t,this.camera=i,this.stopRaycast=r,this.raycaster=new jK,this.normal=new T,this.raycasterNeedsUpdate=!0,this.domElement=e.domElement,this.domRect=this.domElement.getBoundingClientRect(),this.viewRect=ak(e)}getPointer(e,t){let i=this.domRect,r=this.viewRect,n=i.height-r.height,s=(e-r.left-i.left)*(i.width/r.width),a=(t-n+r.top-i.top)*(i.height/r.height);return{x:s/i.width*2-1,y:-(a/i.height)*2+1}}updateRaycaster(e){if(this.raycasterNeedsUpdate){let{clientX:t,clientY:i}=Ki?e.touches[0]:e;this.raycaster.setFromCamera(this.getPointer(t,i),this.camera),this.camera.getWorldDirection(this.normal),this.normal.negate(),this.raycasterNeedsUpdate=!1}}},mb=class{constructor(){this.type="mouseHover",this.targets=[]}static dispatchEnter(e){var t,i;!((i=(t=e.interaction)==null?void 0:t.events.mouseHover)!=null&&i.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"mouseHover"}),e.interaction.events.mouseHover.forEach(r=>{r.targets.forEach(({object:n,state:s,params:a})=>{var o;(o=n.interaction)==null||o.animate(s,a)})}))}static dispatchLeave(e){var t,i;!((i=(t=e.interaction)==null?void 0:t.events.mouseHover)!=null&&i.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"mouseHover"}),e.interaction.events.mouseHover.forEach(r=>{r.targets.forEach(({object:n,params:s})=>{let a=n.interaction;(a==null?void 0:a.fromState)!==void 0&&a.animate(a.fromState,s)})}))}},Dte=class extends Ku{constructor(){super(...arguments),this.objects=[],this._prevObjects=[],this.onTouchStart=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent())},this.onTouchEnd=e=>{this.handleMouseHoverEvent(!0)},this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(i=>{var r,n;!i.visible||!((n=(r=i.interaction)==null?void 0:r.events.mouseHover)!=null&&n.length)||this.objects.push(i)}),this.domEventsNeeded=[],this.objects.length&&(Ki?(this.domEventsNeeded.push("touchstart","touchend","touchmove"),t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Ki?(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,scene:n}=this.raycastState;if(i){let s=ZA(r,n,this.objects);t=KA(s,"mouseHover")}else this.objects.forEach(s=>{uy(r,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(i=>{t.includes(i)||mb.dispatchLeave(i)}),t.length&&t.forEach(i=>{mb.dispatchEnter(i)}),this._prevObjects=t}},Pte="text/plain",Lte="us-ascii",HD=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),Ote=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:n,hash:s}=i.groups,a=r.split(";");s=t?"":s;let o=!1;a[a.length-1]==="base64"&&(a.pop(),o=!0);let l=(a.shift()||"").toLowerCase(),u=[...a.map(d=>{let[c,h=""]=d.split("=").map(f=>f.trim());return c==="charset"&&(h=h.toLowerCase(),h===Lte)?"":`${c}${h?`=${h}`:""}`}).filter(Boolean)];return o&&u.push("base64"),(u.length>0||l&&l!==Pte)&&u.unshift(l),`data:${u.join(";")},${o?n.trim():n}${s?`#${s}`:""}`};function Rte(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Ote(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,o="";for(;;){let l=s.exec(r.pathname);if(!l)break;let u=l[0],d=l.index;o+=r.pathname.slice(a,d).replace(/\/{2,}/g,"/"),o+=u,a=d+u.length}o+=r.pathname.slice(a,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=o}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=r.pathname.split("/"),a=s[s.length-1];HD(a,t.removeDirectoryIndex)&&(s=s.slice(0,-1),r.pathname=s.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...r.searchParams.keys()])HD(s,t.removeQueryParameters)&&r.searchParams.delete(s);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let n=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!n.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Kd=class{constructor(e,t){this.type=e,this.data=t,this.targets=[],this.enable=!1}static create(e){if(e.type===0)return new Kd("mouseDown",e);if(e.type===1)return new Kd("mouseUp",e);if(e.type===5)return e.key?new Kd("keyDown",e):void 0;if(e.type===6)return e.key?new Kd("keyUp",e):void 0}dispatch(){if(this.data.toggle){this.enable=!this.enable;for(let{object:e,state:t,params:i}of this.targets){let r=e.interaction;if(r!==void 0){let n={...i,cycle:!1,rewind:!1,repeat:!1};this.enable?r.animate(t,n):r.fromState!==void 0&&r.animate(r.fromState,n)}}}else this.targets.forEach(({object:e,state:t,params:i})=>{var r;(r=e.interaction)==null||r.animate(t,i)});if(this.data.url){let e=this.data.url.startsWith("mailto:")?this.data.url:Rte(this.data.url);E_?window.location.assign(e):window.open(e,"_blank")}}},Ite=class extends Ku{constructor(){super(...arguments),this.map={},this.onTouchStart=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseDown"))},this.onTouchEnd=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseUp")},this.onMouseDown=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseDown")},this.onMouseUp=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseUp")},this.onKeyDown=e=>{this.handleKeyEvent(e,"keyDown")},this.onKeyUp=e=>{this.handleKeyEvent(e,"keyUp")}}init(){var i,r,n,s,a,o;let{scene:e,domElement:t}=this.raycastState;this.map={},e.traverseEntity(l=>{!l.interaction||l.visible&&["mouseDown","mouseUp","keyDown","keyUp"].forEach(u=>{var d,c;(c=(d=l.interaction)==null?void 0:d.events[u])!=null&&c.length&&(this.map[u]?this.map[u].push(l):this.map[u]=[l])})}),this.domEventsNeeded=[],Ki?((i=this.map.mouseDown)!=null&&i.length&&(this.domEventsNeeded.push("touchstart"),t.addEventListener("touchstart",this.onTouchStart)),(r=this.map.mouseUp)!=null&&r.length&&(this.domEventsNeeded.push("touchend"),t.addEventListener("touchend",this.onTouchEnd))):((n=this.map.mouseDown)!=null&&n.length&&(this.domEventsNeeded.push("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(s=this.map.mouseUp)!=null&&s.length&&(this.domEventsNeeded.push("pointerup"),t.addEventListener("pointerup",this.onMouseUp))),(a=this.map.keyDown)!=null&&a.length&&(this.domEventsNeeded.push("keydown"),document.addEventListener("keydown",this.onKeyDown)),(o=this.map.keyUp)!=null&&o.length&&(this.domEventsNeeded.push("keyup"),document.addEventListener("keyup",this.onKeyUp))}dispose(){let{domElement:e}=this.raycastState;this.map={},Ki?(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd)):(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.domEventsNeeded=[]}handleMouseEvent(e){var n;let{stopRaycast:t,raycaster:i,scene:r}=this.raycastState;if(t){let s=this.map[e];if(s!=null&&s.length){let a=ZA(i,r,s);KA(a,e).forEach(o=>{var l,u;o.dispatchEvent({type:"beginEvent",typeEvent:e}),(u=(l=o.interaction)==null?void 0:l.events[e])==null||u.forEach(d=>{d.dispatch()})})}}else(n=this.map[e])==null||n.forEach(s=>{var a,o;uy(i,s)&&(s.dispatchEvent({type:"beginEvent",typeEvent:e}),(o=(a=s.interaction)==null?void 0:a.events[e])==null||o.forEach(l=>{l.dispatch()}))})}handleKeyEvent(e,t){var i;(i=this.map[t])==null||i.forEach(r=>{var n,s;r.dispatchEvent({type:"beginEvent",typeEvent:t}),(s=(n=r.interaction)==null?void 0:n.events[t])==null||s.forEach(a=>{"key"in a.data&&a.data.key===e.key&&a.dispatch()})})}},gb;(e=>(e.isPlayable=t=>t.type==="audio"&&t.data.interaction==="play",e.create=function(t,i,r,n){if(!((i.trigger==="keyDown"||i.trigger==="keyUp")&&i.key===void 0))if(i.interaction==="play"){if(i.audio){let s=new Ka(t,i,r);return Ka.cache.set(t,s),s}}else return new zte(i,n)}))(gb||(gb={}));var Ka=class{constructor(e,t,i){this.id=e,this.type="audio";let{audio:r,volume:n,delay:s,loop:a}=t,o=typeof r=="string"?i.getAudio(r).src:r.data;this.audioPlayer=new ev({src:o,volume:n,delay:s,loop:a}),this.data=t}dispatch(){this.data.toggle==="stop"?this.audioPlayer.isStarted?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.isStarted?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.dispose()}};Ka.cache=new Map;var zte=class{constructor(e,t){this.type="audio",this.data=e,this.scene=t}dispatch(){this.data.object?this.data.audioEvent?this.pauseAudio(this.data.audioEvent):this.pauseAudiosByObject(this.data.object):this.pauseAudios()}pauseAudio(e){let t=Ka.cache.get(e),i=this.data.interaction;!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[i](),this.disposeDelay()},this.data.delay)):t.audioPlayer[i]())}pauseAudiosByObject(e){var r,n;let t=(n=(r=this.scene.find(e))==null?void 0:r.interaction)==null?void 0:n.events.audio,i=this.data.interaction;if(t)if(this.data.delay>0)this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{for(let s of t)s instanceof Ka&&s.audioPlayer[i]();this.disposeDelay()},this.data.delay);else for(let s of t)s instanceof Ka&&s.audioPlayer[i]()}pauseAudios(){let e=this.data.interaction;if(this.data.delay>0)this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{for(let t of Ka.cache.values())t.audioPlayer[e]();this.disposeDelay()},this.data.delay);else for(let t of Ka.cache.values())t.audioPlayer[e]()}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Bte=class extends Ku{constructor(){super(...arguments),this.heldKeys={},this.map={},this.startMap={},this.onStartMouseDown=()=>{var e;(e=this.startMap.mouseDown)==null||e.forEach(t=>t.dispatch()),this.raycastState.domElement.removeEventListener(Ki?"touchstart":"pointerdown",this.onStartAny)},this.onStartKeyDown=()=>{var e;(e=this.startMap.keyDown)==null||e.forEach(t=>t.dispatch()),document.removeEventListener("keydown",this.onStartAny)},this.onStartAny=()=>{var e;(e=this.startMap.any)==null||e.forEach(t=>t.dispatch()),this.raycastState.domElement.removeEventListener(Ki?"touchstart":"pointerdown",this.onStartAny),document.removeEventListener("keydown",this.onStartAny)},this.onMouseEvent=(e,t)=>{let i=this.map[t];if(i!=null&&i.length){let{stopRaycast:r,raycaster:n,scene:s}=this.raycastState;if(this.raycastState.updateRaycaster(e),r){let a=ZA(n,s,i);KA(a,"audio").forEach(o=>this.dispatch(o,t))}else i.forEach(a=>{uy(n,a)&&this.dispatch(a,t)})}},this.onMouseDown=e=>{this.onMouseEvent(e,"mouseDown")},this.onMouseUp=e=>{this.onMouseEvent(e,"mouseUp")},this.onKeyDown=e=>{var i;let t=this.heldKeys[e.key];(i=this.map.keyDown)==null||i.forEach(r=>{t||this.dispatch(r,"keyDown",e.key)}),this.heldKeys[e.key]=!0},this.onKeyUp=e=>{var t;(t=this.map.keyUp)==null||t.forEach(i=>this.dispatch(i,"keyUp",e.key))},this.releaseHeldKey=e=>{delete this.heldKeys[e.key]}}init(){var i,r,n,s,a,o,l,u,d,c,h,f;let{scene:e,domElement:t}=this.raycastState;this.map={},this.startMap={},this.heldKeys={},e.traverseEntity(m=>{var p;!((p=m.interaction)!=null&&p.events.audio)||m.interaction.events.audio.forEach(g=>{var v;g.data.trigger==="start"&&((v=this.startMap[g.data.after])!=null&&v.length?this.startMap[g.data.after].push(g):this.startMap[g.data.after]=[g]),m.visible&&["mouseDown","mouseUp"].forEach(y=>{var x;g.data.trigger===y&&((x=this.map[y])!=null&&x.length?this.map[y].push(m):this.map[y]=[m])}),["keyDown","keyUp"].forEach(y=>{var x;g.data.trigger===y&&((x=this.map[y])!=null&&x.length?this.map[y].push(m):this.map[y]=[m])})})}),this.domEventsNeeded=[],Ki?((i=this.startMap.mouseDown)!=null&&i.length&&t.addEventListener("touchstart",this.onStartMouseDown,{once:!0}),(r=this.startMap.any)!=null&&r.length&&t.addEventListener("touchstart",this.onStartAny,{once:!0}),(n=this.map.mouseDown)!=null&&n.length&&(this.domEventsNeeded.push("touchstart"),t.addEventListener("touchstart",this.onMouseDown)),(s=this.map.mouseUp)!=null&&s.length&&(this.domEventsNeeded.push("touchend"),t.addEventListener("touchend",this.onMouseUp))):((a=this.startMap.mouseDown)!=null&&a.length&&t.addEventListener("pointerdown",this.onStartMouseDown,{once:!0}),(o=this.startMap.any)!=null&&o.length&&t.addEventListener("pointerdown",this.onStartAny,{once:!0}),(l=this.map.mouseDown)!=null&&l.length&&(this.domEventsNeeded.push("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(u=this.map.mouseUp)!=null&&u.length&&(this.domEventsNeeded.push("pointerup"),t.addEventListener("pointerup",this.onMouseUp))),(d=this.startMap.keyDown)!=null&&d.length&&document.addEventListener("keydown",this.onStartKeyDown,{once:!0}),(c=this.startMap.any)!=null&&c.length&&document.addEventListener("keydown",this.onStartAny,{once:!0}),(h=this.map.keyDown)!=null&&h.length&&(this.domEventsNeeded.push("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(f=this.map.keyUp)!=null&&f.length&&(this.domEventsNeeded.push("keyup"),document.addEventListener("keyup",this.onKeyUp))}dispose(){let{scene:e,domElement:t}=this.raycastState;e.traverseEntity(i=>{var r;!((r=i.interaction)!=null&&r.events.audio)||i.interaction.events.audio.forEach(n=>{n.dispose()})}),this.map={},this.startMap={},this.heldKeys={},Ka.cache.clear(),Ki?(t.removeEventListener("touchstart",this.onStartMouseDown),t.removeEventListener("touchstart",this.onStartAny),t.removeEventListener("touchstart",this.onMouseDown),t.removeEventListener("touchend",this.onMouseUp)):(t.removeEventListener("pointerdown",this.onStartMouseDown),t.removeEventListener("pointerdown",this.onStartAny),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("keyDown",this.onStartKeyDown),t.removeEventListener("keyDown",this.onStartAny),t.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.releaseHeldKey),t.removeEventListener("keyup",this.onKeyUp),this.domEventsNeeded=[]}dispatch(e,t,i){var n;let r=(n=e.interaction)==null?void 0:n.events.audio;if(r)if(t==="keyDown"||t==="keyUp")for(let s of r)s.data.trigger===t&&s.data.key===i&&s.dispatch();else for(let s of r)s.data.trigger===t&&s.dispatch()}};function kte(e,t,i,r){let n,{type:s}=t;return s===10?n=new ek:Q_.is(t)?n=Kd.create(t):s===9?n=new tk(t):s===2?n=new mb:s===11?n=new rk(t):s===7?n=new ik:s===12?n=gb.create(e,t,i,r):s===13&&(n={type:"gameControl"}),n}function Nte(e,t,i){let r=[];e.objects.traverse((n,s)=>{let a=t.find(n);if(delete a.interaction,s.states===void 0)return;let o=new _te(a,i),l=o.states;l.push(vb.create(n,s));for(let d of s.states){let c=n0.patch(s,d.data);l.push(vb.create(d.id,c))}let u=o.events;if(s.events)for(let{id:d,data:c}of s.events){let h=kte(d,c,i,t);if(!h)continue;let f=h.type;u[f]?u[f].push(h):u[f]=[h],"targets"in c&&r.push([c,h])}(l.length>0||Object.keys(u).length>0)&&(a.interaction=o)});for(let[n,s]of r)if("targets"in n&&"targets"in s)for(let{data:a}of n.targets){let o=$B.create(a,t);o&&s.targets.push(o)}}function VD(e,t,i){typeof t!="string"&&e.reset(t,i)}function Fte(e,t,i,r,n=!1){if(!n&&t.states.length===0)return;let s=i===null?t:n0.patch(t,t.states.data(i));if(Nz(e,s),e instanceof qr&&s.type==="Mesh"){if(e instanceof $A?e.buildFromStore(s.geometry):e.updateGeometry({parameters:s.geometry}),e.freeBooleanPointer(),Ii(e.parent)&&e.parent.invalidateDownstreamBooleanData().recomputeBoolean(),"material"in s){if(e.material instanceof Array)return;VD(e.material,s.material,r)}else if("materials"in s){if(!(e.material instanceof Array))return;var a=0;for(let o of s.materials)VD(e.material[a],o,r),a++}}else if(s.type==="DirectionalLight")e.fromDirectionalLightState(s,r);else if(s.type==="PointLight")e.fromPointLightState(s,r);else if(s.type==="SpotLight")e.fromSpotLightState(s,r);else if(e instanceof Gu&&kh.is(s.type)){let o=s;e.setZoom("PerspectiveCamera",o.perspective.zoom),e.setZoom("OrthographicCamera",o.orthographic.zoom),e.isUpVectorFlipped=o.isUpVectorFlipped,e.targetOffset=o.targetOffset,e.fov=o.perspective.fov}}var vb=class{constructor(e){this.objectState=e,this.uuid=Mt.generateUUID()}static create(e,t){let i=new vb(t);return i.uuid=e,i}execute(e,t){Fte(e,this.objectState,null,t,!0)}},jD=["touchstart","touchend","touchmove","pointerdown","pointerup","pointermove"],Ute=class{constructor(e,t,i,r,n,s){this.preventScroll=n,this.app=s,this.isEnable=!1,this.splineEvents={},this.handlers=[],this.onResetRaycaster=()=>{this.raycastState.raycasterNeedsUpdate=!0},this.begin=a=>{var l;if(!a.typeEvent||!a.target)return;let o=(l=this.splineEvents[a.typeEvent])==null?void 0:l[a.target.uuid];if(o){let{domElement:u}=this.raycastState;u.dispatchEvent(o)}},this.change=()=>{this.app.requestRender()},this.onTouchMovePreventScroll=a=>{(a.touches.length>1||this.preventScroll)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.raycastState=new Cte(e,t,i,r),this.handlers=[new Ate(this.raycastState),new Ite(this.raycastState),new Dte(this.raycastState),new Mte(this.raycastState),new bte(this.raycastState),new Ste(this.raycastState),new Bte(this.raycastState)],this.domElement=e.domElement}activate(){let{scene:e,domElement:t}=this.raycastState;this.isEnable=!0,e.traverseEntity(i=>{!i.interaction||(i.addEventListener("beginEvent",this.begin),i.addEventListener("stateChanged",this.change),i.interaction.start(),["start","keyDown","keyUp","mouseDown","mouseUp","mouseHover","scroll"].forEach(r=>this.addDOMCustomEvent(r,i)))}),this.handlers.forEach(i=>i.init()),jD.forEach(i=>{this.handlers.some(r=>r.domEventsNeeded.includes(i))&&t.addEventListener(i,this.onResetRaycaster)}),this.resize(),this.domElement.addEventListener("wheel",this.onMouseWheelPreventScroll),this.domElement.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:e,domElement:t}=this.raycastState;this.isEnable=!1,e.traverseEntity(i=>{!i.interaction||(i.removeEventListener("beginEvent",this.begin),i.removeEventListener("stateChanged",this.change),i.interaction.end())}),this.handlers.forEach(i=>i.dispose()),jD.forEach(i=>{t.removeEventListener(i,this.onResetRaycaster)}),this.domElement.removeEventListener("touchmove",this.onTouchMovePreventScroll),this.domElement.removeEventListener("wheel",this.onMouseWheelPreventScroll)}resize(){let{domElement:e,renderer:t}=this.raycastState;this.raycastState.domRect=e.getBoundingClientRect(),this.raycastState.viewRect=ak(t)}addDOMCustomEvent(e,t){let i=new CustomEvent(e,{bubbles:!0});Object.defineProperty(i,"target",{writable:!1,value:{id:t.uuid,name:t.name}}),this.splineEvents[e]?this.splineEvents[e][t.uuid]=i:this.splineEvents[e]={[t.uuid]:i}}},Hte=class{constructor(e,t,i,r,n){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=new q().copy(i),this._editorSize=new q().copy(r),this._aspect=t.aspect,this._fov=n!=null?n:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.x,r=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(i/e,r/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.x,r=this._editorSize.y,n=0,s=0,a=e,o=t;e<i&&(n=(i-e)*.5,n=-n,a=i),t<r&&(s=(r-t)*.5,s=-s,o=r),this._aspect=a/o,this._renderer.setViewport(n,s,a,o)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let e=this._frameSize.y,t=this._editorSize.y,i=this._fov;if(e>t){let r=Vte(e,1080,2160,1,15)/100;i*=e/t,i*=1-r}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}};function Vte(e,t,i,r,n){return(e-t)/(i-t)*(n-r)+r}var jte=Math.pow(2,-24),lg=class{constructor(){}};function aa(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function GD(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let n=e[r+3]-e[r];n>i&&(i=n,t=r)}return t}function WD(e,t){t.set(e)}function XD(e,t,i){let r,n;for(let s=0;s<3;s++){let a=s+3;r=e[s],n=t[s],i[s]=r<n?r:n,r=e[a],n=t[a],i[a]=r>n?r:n}}function ug(e,t,i){for(let r=0;r<3;r++){let n=t[e+2*r],s=t[e+2*r+1],a=n-s,o=n+s;a<i[r]&&(i[r]=a),o>i[r+3]&&(i[r+3]=o)}}function Pd(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function Gte(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;i>65535?n=new Uint32Array(new r(4*i)):n=new Uint16Array(new r(2*i)),e.setIndex(new xt(n,1));for(let s=0;s<i;s++)n[s]=s}}function Wte(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let n of e.groups)i.add(n.start),i.add(n.start+n.count);let r=Array.from(i.values()).sort((n,s)=>n-s);for(let n=0;n<r.length-1;n++){let s=r[n],a=r[n+1];t.push({offset:s/3,count:(a-s)/3})}return t}function Ex(e,t,i,r,n=null){let s=1/0,a=1/0,o=1/0,l=-1/0,u=-1/0,d=-1/0,c=1/0,h=1/0,f=1/0,m=-1/0,p=-1/0,g=-1/0,v=n!==null;for(let y=t*6,x=(t+i)*6;y<x;y+=6){let w=e[y+0],_=e[y+1],b=w-_,A=w+_;b<s&&(s=b),A>l&&(l=A),v&&w<c&&(c=w),v&&w>m&&(m=w);let S=e[y+2],M=e[y+3],E=S-M,C=S+M;E<a&&(a=E),C>u&&(u=C),v&&S<h&&(h=S),v&&S>p&&(p=S);let L=e[y+4],N=e[y+5],R=L-N,V=L+N;R<o&&(o=R),V>d&&(d=V),v&&L<f&&(f=L),v&&L>g&&(g=L)}r[0]=s,r[1]=a,r[2]=o,r[3]=l,r[4]=u,r[5]=d,v&&(n[0]=c,n[1]=h,n[2]=f,n[3]=m,n[4]=p,n[5]=g)}function Xte(e,t,i,r){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=t*6,c=(t+i)*6;d<c;d+=6){let h=e[d+0];h<n&&(n=h),h>o&&(o=h);let f=e[d+2];f<s&&(s=f),f>l&&(l=f);let m=e[d+4];m<a&&(a=m),m>u&&(u=m)}r[0]=n,r[1]=s,r[2]=a,r[3]=o,r[4]=l,r[5]=u}function Yte(e,t,i,r,n){let s=i,a=i+r-1,o=n.pos,l=n.axis*2;for(;;){for(;s<=a&&t[s*6+l]<o;)s++;for(;s<=a&&t[a*6+l]>=o;)a--;if(s<a){for(let u=0;u<3;u++){let d=e[s*3+u];e[s*3+u]=e[a*3+u],e[a*3+u]=d;let c=t[s*6+u*2+0];t[s*6+u*2+0]=t[a*6+u*2+0],t[a*6+u*2+0]=c;let h=t[s*6+u*2+1];t[s*6+u*2+1]=t[a*6+u*2+1],t[a*6+u*2+1]=h}s++,a--}else return s}}var Ua=32,qte=(e,t)=>e.candidate-t.candidate,Ro=new Array(Ua).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),cg=new Float32Array(6);function Qte(e,t,i,r,n,s){let a=-1,o=0;if(s===0)a=GD(t),a!==-1&&(o=(t[a]+t[a+3])/2);else if(s===1)a=GD(e),a!==-1&&(o=Zte(i,r,n,a));else if(s===2){let l=Pd(e),u=1.25*n,d=r*6,c=(r+n)*6;for(let h=0;h<3;h++){let f=t[h],m=(t[h+3]-f)/Ua;if(n<Ua/4){let p=[...Ro];p.length=n;let g=0;for(let y=d;y<c;y+=6,g++){let x=p[g];x.candidate=i[y+2*h],x.count=0;let{bounds:w,leftCacheBounds:_,rightCacheBounds:b}=x;for(let A=0;A<3;A++)b[A]=1/0,b[A+3]=-1/0,_[A]=1/0,_[A+3]=-1/0,w[A]=1/0,w[A+3]=-1/0;ug(y,i,w)}p.sort(qte);let v=n;for(let y=0;y<v;y++){let x=p[y];for(;y+1<v&&p[y+1].candidate===x.candidate;)p.splice(y+1,1),v--}for(let y=d;y<c;y+=6){let x=i[y+2*h];for(let w=0;w<v;w++){let _=p[w];x>=_.candidate?ug(y,i,_.rightCacheBounds):(ug(y,i,_.leftCacheBounds),_.count++)}}for(let y=0;y<v;y++){let x=p[y],w=x.count,_=n-x.count,b=x.leftCacheBounds,A=x.rightCacheBounds,S=0;w!==0&&(S=Pd(b)/l);let M=0;_!==0&&(M=Pd(A)/l);let E=1+1.25*(S*w+M*_);E<u&&(a=h,u=E,o=x.candidate)}}else{for(let v=0;v<Ua;v++){let y=Ro[v];y.count=0,y.candidate=f+m+v*m;let x=y.bounds;for(let w=0;w<3;w++)x[w]=1/0,x[w+3]=-1/0}for(let v=d;v<c;v+=6){let y=~~((i[v+2*h]-f)/m);y>=Ua&&(y=Ua-1);let x=Ro[y];x.count++,ug(v,i,x.bounds)}let p=Ro[Ua-1];WD(p.bounds,p.rightCacheBounds);for(let v=Ua-2;v>=0;v--){let y=Ro[v],x=Ro[v+1];XD(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<Ua-1;v++){let y=Ro[v],x=y.count,w=y.bounds,_=Ro[v+1].rightCacheBounds;x!==0&&(g===0?WD(w,cg):XD(w,cg,cg)),g+=x;let b=0,A=0;g!==0&&(b=Pd(cg)/l);let S=n-g;S!==0&&(A=Pd(_)/l);let M=1+1.25*(b*g+A*S);M<u&&(a=h,u=M,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Zte(e,t,i,r){let n=0;for(let s=t,a=t+i;s<a;s++)n+=e[s*6+r*2];return n/i}function Kte(e,t){let i=e.attributes.position,r=i.array,n=e.index.array,s=n.length/3,a=new Float32Array(s*6),o=i.offset||0,l=3;i.isInterleavedBufferAttribute&&(l=i.data.stride);for(let u=0;u<s;u++){let d=u*3,c=u*6,h=n[d+0]*l+o,f=n[d+1]*l+o,m=n[d+2]*l+o;for(let p=0;p<3;p++){let g=r[h+p],v=r[f+p],y=r[m+p],x=g;v<x&&(x=v),y<x&&(x=y);let w=g;v>w&&(w=v),y>w&&(w=y);let _=(w-x)/2,b=p*2;a[c+b+0]=x+_,a[c+b+1]=_+(Math.abs(x)+_)*jte,x<t[p]&&(t[p]=x),w>t[p+3]&&(t[p+3]=w)}}return a}function Jte(e,t){function i(v){h&&h(v/f)}function r(v,y,x,w=null,_=0){if(!m&&_>=l&&(m=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=d||_>=l)return i(y+x),v.offset=y,v.count=x,v;let b=Qte(v.boundingData,w,a,y,x,c);if(b.axis===-1)return i(y+x),v.offset=y,v.count=x,v;let A=Yte(o,a,y,x,b);if(A===y||A===y+x)i(y+x),v.offset=y,v.count=x;else{v.splitAxis=b.axis;let S=new lg,M=y,E=A-y;v.left=S,S.boundingData=new Float32Array(6),Ex(a,M,E,S.boundingData,s),r(S,M,E,s,_+1);let C=new lg,L=A,N=x-E;v.right=C,C.boundingData=new Float32Array(6),Ex(a,L,N,C.boundingData,s),r(C,L,N,s,_+1)}return v}Gte(e,t);let n=new Float32Array(6),s=new Float32Array(6),a=Kte(e,n),o=e.index.array,l=t.maxDepth,u=t.verbose,d=t.maxLeafTris,c=t.strategy,h=t.onProgress,f=e.index.count/3,m=!1,p=[],g=Wte(e);if(g.length===1){let v=g[0],y=new lg;y.boundingData=n,Xte(a,v.offset,v.count,s),r(y,v.offset,v.count,s),p.push(y)}else for(let v of g){let y=new lg;y.boundingData=new Float32Array(6),Ex(a,v.offset,v.count,y.boundingData,s),r(y,v.offset,v.count,s),p.push(y)}return p}function $te(e,t){let i=Jte(e,t),r,n,s,a=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<i.length;d++){let c=i[d],h=l(c),f=new o(32*h);r=new Float32Array(f),n=new Uint32Array(f),s=new Uint16Array(f),u(0,c),a.push(f)}return a;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function u(d,c){let h=d/4,f=d/2,m=!!c.count,p=c.boundingData;for(let g=0;g<6;g++)r[h+g]=p[g];if(m){let g=c.offset,v=c.count;return n[h+6]=g,s[f+14]=v,s[f+15]=65535,d+32}else{let g=c.left,v=c.right,y=c.splitAxis,x;if(x=u(d+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[h+6]=x/4,x=u(x,v),n[h+7]=y,x}}}var Ta=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let n=0,s=e.length;n<s;n++){let a=e[n][t];i=a<i?a:i,r=a>r?a:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let n=0,s=t.length;n<s;n++){let a=t[n],o=e.dot(a);i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Ta.prototype.setFromBox=function(){let e=new T;return function(t,i){let r=i.min,n=i.max,s=1/0,a=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=r.x*o+n.x*(1-o),e.y=r.y*l+n.y*(1-l),e.z=r.z*u+n.z*(1-u);let d=t.dot(e);s=Math.min(d,s),a=Math.max(d,a)}this.min=s,this.max=a}}();(function(){let e=new Ta;return function(t,i){let r=t.points,n=t.satAxes,s=t.satBounds,a=i.points,o=i.satAxes,l=i.satBounds;for(let u=0;u<3;u++){let d=s[u],c=n[u];if(e.setFromPoints(c,a),d.isSeparated(e))return!1}for(let u=0;u<3;u++){let d=l[u],c=o[u];if(e.setFromPoints(c,r),d.isSeparated(e))return!1}}})();var eie=function(){let e=new T,t=new T,i=new T;return function(r,n,s){let a=r.start,o=e,l=n.start,u=t;i.subVectors(a,l),e.subVectors(r.end,n.start),t.subVectors(n.end,n.start);let d=i.dot(u),c=u.dot(o),h=u.dot(u),f=i.dot(o),m=o.dot(o)*h-c*c,p,g;m!==0?p=(d*c-f*h)/m:p=0,g=(d+p*c)/h,s.x=p,s.y=g}}(),JA=function(){let e=new q,t=new T,i=new T;return function(r,n,s,a){eie(r,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){r.at(o,s),n.at(l,a);return}else if(o>=0&&o<=1){l<0?n.at(0,a):n.at(1,a),r.closestPointToPoint(a,!0,s);return}else if(l>=0&&l<=1){o<0?r.at(0,s):r.at(1,s),n.closestPointToPoint(s,!0,a);return}else{let u;o<0?u=r.start:u=r.end;let d;l<0?d=n.start:d=n.end;let c=t,h=i;if(r.closestPointToPoint(d,!0,t),n.closestPointToPoint(u,!0,i),c.distanceToSquared(d)<=h.distanceToSquared(u)){s.copy(c),a.copy(d);return}else{s.copy(u),a.copy(h);return}}}}(),tie=function(){let e=new T,t=new T,i=new Jn,r=new cs;return function(n,s){let{radius:a,center:o}=n,{a:l,b:u,c:d}=s;if(r.start=l,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a||(r.start=l,r.end=d,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a)||(r.start=u,r.end=d,r.closestPointToPoint(o,!0,e).distanceTo(o)<=a))return!0;let c=s.getPlane(i);if(Math.abs(c.distanceToPoint(o))<=a){let h=c.projectPoint(o,t);if(s.containsPoint(h))return!0}return!1}}(),iie=1e-15;function Sc(e){return Math.abs(e)<iie}var yo=class extends es{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new T),this.satBounds=new Array(4).fill().map(()=>new Ta),this.points=[this.a,this.b,this.c],this.sphere=new ks,this.plane=new Jn,this.needsUpdate=!0}intersectsSphere(e){return tie(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,n=this.satAxes,s=this.satBounds,a=n[0],o=s[0];this.getNormal(a),o.setFromPoints(a,r);let l=n[1],u=s[1];l.subVectors(e,t),u.setFromPoints(l,r);let d=n[2],c=s[2];d.subVectors(t,i),c.setFromPoints(d,r);let h=n[3],f=s[3];h.subVectors(i,e),f.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};yo.prototype.closestPointToSegment=function(){let e=new T,t=new T,i=new cs;return function(r,n=null,s=null){let{start:a,end:o}=r,l=this.points,u,d=1/0;for(let c=0;c<3;c++){let h=(c+1)%3;i.start.copy(l[c]),i.end.copy(l[h]),JA(i,r,e,t),u=e.distanceToSquared(t),u<d&&(d=u,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(a,e),u=a.distanceToSquared(e),u<d&&(d=u,n&&n.copy(e),s&&s.copy(a)),this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<d&&(d=u,n&&n.copy(e),s&&s.copy(o)),Math.sqrt(d)}}();yo.prototype.intersectsTriangle=function(){let e=new yo,t=new Array(3),i=new Array(3),r=new Ta,n=new Ta,s=new T,a=new T,o=new T,l=new T,u=new cs,d=new cs,c=new cs;return function(h,f=null){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let m=this.plane,p=h.plane;if(Math.abs(m.normal.dot(p.normal))>1-1e-10){let g=this.satBounds,v=this.satAxes;i[0]=h.a,i[1]=h.b,i[2]=h.c;for(let w=0;w<4;w++){let _=g[w],b=v[w];if(r.setFromPoints(b,i),_.isSeparated(r))return!1}let y=h.satBounds,x=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let w=0;w<4;w++){let _=y[w],b=x[w];if(r.setFromPoints(b,t),_.isSeparated(r))return!1}for(let w=0;w<4;w++){let _=v[w];for(let b=0;b<4;b++){let A=x[b];if(s.crossVectors(_,A),r.setFromPoints(s,t),n.setFromPoints(s,i),r.isSeparated(n))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,v=!1,y=0;for(let L=0;L<3;L++){let N=g[L],R=g[(L+1)%3];u.start.copy(N),u.end.copy(R),u.delta(a);let V=v?d.start:d.end,F=Sc(p.distanceToPoint(N));if(Sc(p.normal.dot(a))&&F){d.copy(u),y=2;break}if((p.intersectLine(u,V)||F)&&!Sc(V.distanceTo(R))){if(y++,v)break;v=!0}}if(y===1&&this.containsPoint(d.start))return f&&(f.start.copy(d.start),f.end.copy(d.start)),!0;if(y!==2)return!1;let x=h.points,w=!1,_=0;for(let L=0;L<3;L++){let N=x[L],R=x[(L+1)%3];u.start.copy(N),u.end.copy(R),u.delta(o);let V=w?c.start:c.end,F=Sc(m.distanceToPoint(N));if(Sc(m.normal.dot(o))&&F){c.copy(u),_=2;break}if((m.intersectLine(u,V)||F)&&!Sc(V.distanceTo(R))){if(_++,w)break;w=!0}}if(_===1&&this.containsPoint(c.start))return f&&(f.start.copy(c.start),f.end.copy(c.start)),!0;if(_!==2)return!1;if(d.delta(a),c.delta(o),a.dot(o)<0){let L=c.start;c.start=c.end,c.end=L}let b=d.start.dot(a),A=d.end.dot(a),S=c.start.dot(a),M=c.end.dot(a),E=A<S,C=b<M;return b!==M&&S!==A&&E===C?!1:(f&&(l.subVectors(d.start,c.start),l.dot(a)>0?f.start.copy(d.start):f.start.copy(c.start),l.subVectors(d.end,c.end),l.dot(a)<0?f.end.copy(d.end):f.end.copy(c.end)),!0)}}}();yo.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();yo.prototype.distanceToTriangle=function(){let e=new T,t=new T,i=["a","b","c"],r=new cs,n=new cs;return function(s,a=null,o=null){let l=a||o?r:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let u=1/0;for(let d=0;d<3;d++){let c,h=i[d],f=s[h];this.closestPointToPoint(f,e),c=f.distanceToSquared(e),c<u&&(u=c,a&&a.copy(e),o&&o.copy(f));let m=this[h];s.closestPointToPoint(m,e),c=m.distanceToSquared(e),c<u&&(u=c,a&&a.copy(m),o&&o.copy(e))}for(let d=0;d<3;d++){let c=i[d],h=i[(d+1)%3];r.set(this[c],this[h]);for(let f=0;f<3;f++){let m=i[f],p=i[(f+1)%3];n.set(s[m],s[p]),JA(r,n,e,t);let g=e.distanceToSquared(t);g<u&&(u=g,a&&a.copy(e),o&&o.copy(t))}}return Math.sqrt(u)}}();var Ca=class extends Xi{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new Ke,this.invMatrix=new Ke,this.points=new Array(8).fill().map(()=>new T),this.satAxes=new Array(3).fill().map(()=>new T),this.satBounds=new Array(3).fill().map(()=>new Ta),this.alignedSatBounds=new Array(3).fill().map(()=>new Ta),this.needsUpdate=!1}set(e,t,i){super.set(e,t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Ca.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let d=0;d<=1;d++){let c=1*l|2*u|4*d,h=r[c];h.x=l?i.x:t.x,h.y=u?i.y:t.y,h.z=d?i.z:t.z,h.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,a=r[0];for(let l=0;l<3;l++){let u=s[l],d=n[l],c=1<<l,h=r[c];u.subVectors(a,h),d.setFromPoints(u,r)}let o=this.alignedSatBounds;o[0].setFromPointsField(r,"x"),o[1].setFromPointsField(r,"y"),o[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ca.prototype.intersectsBox=function(){let e=new Ta;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,n=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,a[0].isSeparated(e)||(e.min=i.y,e.max=r.y,a[1].isSeparated(e))||(e.min=i.z,e.max=r.z,a[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=s[o],u=n[o];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();Ca.prototype.intersectsTriangle=function(){let e=new yo,t=new Array(3),i=new Ta,r=new Ta,n=new T;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let a=this.satBounds,o=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let c=0;c<3;c++){let h=a[c],f=o[c];if(i.setFromPoints(f,t),h.isSeparated(i))return!1}let l=s.satBounds,u=s.satAxes,d=this.points;for(let c=0;c<3;c++){let h=l[c],f=u[c];if(i.setFromPoints(f,d),h.isSeparated(i))return!1}for(let c=0;c<3;c++){let h=o[c];for(let f=0;f<4;f++){let m=u[f];if(n.crossVectors(h,m),i.setFromPoints(n,t),r.setFromPoints(n,d),i.isSeparated(r))return!1}}return!0}}();Ca.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ca.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ca.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new cs),i=new Array(12).fill().map(()=>new cs),r=new T,n=new T;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(n),this.closestPointToPoint(n,r),s.closestPointToPoint(r,n),o&&o.copy(r),l&&l.copy(n)),0;let u=a*a,d=s.min,c=s.max,h=this.points,f=1/0;for(let p=0;p<8;p++){let g=h[p];n.copy(g).clamp(d,c);let v=g.distanceToSquared(n);if(v<f&&(f=v,o&&o.copy(g),l&&l.copy(n),v<u))return Math.sqrt(v)}let m=0;for(let p=0;p<3;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(p+1)%3,x=(p+2)%3,w=g<<y|v<<x,_=1<<p|g<<y|v<<x,b=h[w],A=h[_];t[m].set(b,A);let S=e[p],M=e[y],E=e[x],C=i[m],L=C.start,N=C.end;L[S]=d[S],L[M]=g?d[M]:c[M],L[E]=v?d[E]:c[M],N[S]=c[S],N[M]=g?d[M]:c[M],N[E]=v?d[E]:c[M],m++}for(let p=0;p<=1;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){n.x=p?c.x:d.x,n.y=g?c.y:d.y,n.z=v?c.z:d.z,this.closestPointToPoint(n,r);let y=n.distanceToSquared(r);if(y<f&&(f=y,o&&o.copy(r),l&&l.copy(n),y<u))return Math.sqrt(y)}for(let p=0;p<12;p++){let g=t[p];for(let v=0;v<12;v++){let y=i[v];JA(g,y,r,n);let x=r.distanceToSquared(n);if(x<f&&(f=x,o&&o.copy(r),l&&l.copy(n),x<u))return Math.sqrt(x)}}return Math.sqrt(f)}}();var hg=new T,dg=new T,fg=new T,YD=new q,qD=new q,QD=new q,ZD=new T;function rie(e,t,i,r,n,s){let a;return s===or?a=e.intersectTriangle(r,i,t,!0,n):a=e.intersectTriangle(t,i,r,s!==Ur,n),a===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function nie(e,t,i,r,n,s,a){hg.fromBufferAttribute(t,r),dg.fromBufferAttribute(t,n),fg.fromBufferAttribute(t,s);let o=rie(e,hg,dg,fg,ZD,a);if(o){i&&(YD.fromBufferAttribute(i,r),qD.fromBufferAttribute(i,n),QD.fromBufferAttribute(i,s),o.uv=es.getUV(ZD,hg,dg,fg,YD,qD,QD,new q));let l={a:r,b:n,c:s,normal:new T,materialIndex:0};es.getNormal(hg,dg,fg,l.normal),o.face=l,o.faceIndex=r}return o}function ok(e,t,i,r,n){let s=r*3,a=e.index.getX(s),o=e.index.getX(s+1),l=e.index.getX(s+2),u=nie(i,e.attributes.position,e.attributes.uv,a,o,l,t);return u?(u.faceIndex=r,n&&n.push(u),u):null}function sie(e,t,i,r,n,s){for(let a=r,o=r+n;a<o;a++)ok(e,t,i,a,s)}function aie(e,t,i,r,n){let s=1/0,a=null;for(let o=r,l=r+n;o<l;o++){let u=ok(e,t,i,o);u&&u.distance<s&&(a=u,s=u.distance)}return a}function lk(e,t,i){return e===null||(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(i.ray.origin),e.object=t,e.distance<i.near||e.distance>i.far)?null:e}function ea(e,t,i,r){let n=e.a,s=e.b,a=e.c,o=t,l=t+1,u=t+2;i&&(o=i.getX(t),l=i.getX(t+1),u=i.getX(t+2)),n.x=r.getX(o),n.y=r.getY(o),n.z=r.getZ(o),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),a.x=r.getX(u),a.y=r.getY(u),a.z=r.getZ(u)}function KD(e,t,i,r,n,s,a){let o=i.index,l=i.attributes.position;for(let u=e,d=t+e;u<d;u++)if(ea(a,u*3,o,l),a.needsUpdate=!0,r(a,u,n,s))return!0;return!1}var uk=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Xo(e,t){return t[e+15]===65535}function yh(e,t){return t[e+6]}function gp(e,t){return t[e+14]}function vp(e){return e+8}function yp(e,t){return t[e+6]}function oie(e,t){return t[e+7]}var eh=new Xi,u0=new T,lie=["x","y","z"];function yb(e,t,i,r,n){let s=e*2,a=td,o=xl,l=wl;if(Xo(s,o)){let u=yh(e,l),d=gp(s,o);sie(t,i,r,u,d,n)}else{let u=vp(e);c0(u,a,r,u0)&&yb(u,t,i,r,n);let d=yp(e,l);c0(d,a,r,u0)&&yb(d,t,i,r,n)}}function xb(e,t,i,r){let n=e*2,s=td,a=xl,o=wl;if(Xo(n,a)){let l=yh(e,o),u=gp(n,a);return aie(t,i,r,l,u)}else{let l=oie(e,o),u=lie[l],d=r.direction[u]>=0,c,h;d?(c=vp(e),h=yp(e,o)):(c=yp(e,o),h=vp(e));let f=c0(c,s,r,u0)?xb(c,t,i,r):null;if(f){let p=f.point[u];if(d?p<=s[h+l]:p>=s[h+l+3])return f}let m=c0(h,s,r,u0)?xb(h,t,i,r):null;return f&&m?f.distance<=m.distance?f:m:f||m||null}}var uie=function(){let e,t,i=[],r=new uk(()=>new Xi);return function(...s){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let a=n(...s);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let o=i.length;return o>0&&(t=i[o-1],e=i[o-2]),a};function n(s,a,o,l,u=null,d=0,c=0){function h(y){let x=y*2,w=xl,_=wl;for(;!Xo(x,w);)y=vp(y),x=y*2;return yh(y,_)}function f(y){let x=y*2,w=xl,_=wl;for(;!Xo(x,w);)y=yp(y,_),x=y*2;return yh(y,_)+gp(x,w)}let m=s*2,p=td,g=xl,v=wl;if(Xo(m,g)){let y=yh(s,v),x=gp(m,g);return aa(s,p,e),l(y,x,!1,c,d+s,e)}else{let y=vp(s),x=yp(s,v),w=y,_=x,b,A,S,M;if(u&&(S=e,M=t,aa(w,p,S),aa(_,p,M),b=u(S),A=u(M),A<b)){w=x,_=y;let F=b;b=A,A=F,S=M}S||(S=e,aa(w,p,S));let E=Xo(w*2,g),C=o(S,E,b,c+1,d+w),L;if(C===2){let F=h(w),H=f(w)-F;L=l(F,H,!0,c+1,d+w,S)}else L=C&&n(w,a,o,l,u,d,c+1);if(L)return!0;M=t,aa(_,p,M);let N=Xo(_*2,g),R=o(M,N,A,c+1,d+_),V;if(R===2){let F=h(_),H=f(_)-F;V=l(F,H,!0,c+1,d+_,M)}else V=R&&n(_,a,o,l,u,d,c+1);return!!V}}}(),cie=function(){let e=new yo,t=new yo,i=new Ke,r=new Ca,n=new Ca;return function s(a,o,l,u,d=null){let c=a*2,h=td,f=xl,m=wl;if(d===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,u),d=r),Xo(c,f)){let p=o,g=p.index,v=p.attributes.position,y=l.index,x=l.attributes.position,w=yh(a,m),_=gp(c,f);if(i.copy(u).invert(),l.boundsTree)return aa(a,h,n),n.matrix.copy(i),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>n.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(u),b.b.applyMatrix4(u),b.c.applyMatrix4(u),b.needsUpdate=!0;for(let A=w*3,S=(_+w)*3;A<S;A+=3)if(ea(t,A,g,v),t.needsUpdate=!0,b.intersectsTriangle(t))return!0;return!1}});for(let b=w*3,A=_+w*3;b<A;b+=3){ea(e,b,g,v),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let S=0,M=y.count;S<M;S+=3)if(ea(t,S,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let p=a+8,g=m[a+6];return aa(p,h,eh),!!(d.intersectsBox(eh)&&s(p,o,l,u,d)||(aa(g,h,eh),d.intersectsBox(eh)&&s(g,o,l,u,d)))}}}();function c0(e,t,i,r){return aa(e,t,eh),i.intersectBox(eh,r)}var wb=[],iv,td,xl,wl;function Jd(e){iv&&wb.push(iv),iv=e,td=new Float32Array(e),xl=new Uint16Array(e),wl=new Uint32Array(e)}function pg(){iv=null,td=null,xl=null,wl=null,wb.length&&Jd(wb.pop())}var Tx=Symbol("skip tree generation"),Cx=new Xi,Dx=new Xi,Ac=new Ke,Xl=new Ca,Ld=new Ca,Od=new T,mg=new T,hie=new T,die=new T,fie=new T,JD=new Xi,Xs=new uk(()=>new yo),cr=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),cr.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,n=i.getIndex(),s;return t.cloneBuffers?s={roots:r.map(a=>a.slice()),index:n.array.slice()}:s={roots:r,index:n.array},s}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),cr.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:n}=e,s=new cr(t,{...i,[Tx]:!0});if(s._roots=n,i.setIndex){let a=t.getIndex();if(a===null){let o=new xt(e.index,1,!1);t.setIndex(o)}else a.array!==r&&(a.array.set(r),a.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Tx]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Tx]||(this._roots=$te(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Xi))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,n=r.array,s=r.offset||0,a=3;r.isInterleavedBufferAttribute&&(a=r.data.stride);let o,l,u,d,c=0,h=this._roots;for(let m=0,p=h.length;m<p;m++)o=h[m],l=new Uint32Array(o),u=new Uint16Array(o),d=new Float32Array(o),f(0,c),c+=o.byteLength;function f(m,p,g=!1){let v=m*2;if(u[v+15]===65535){let y=l[m+6],x=u[v+14],w=1/0,_=1/0,b=1/0,A=-1/0,S=-1/0,M=-1/0;for(let E=3*y,C=3*(y+x);E<C;E++){let L=i[E]*a+s,N=n[L+0],R=n[L+1],V=n[L+2];N<w&&(w=N),N>A&&(A=N),R<_&&(_=R),R>S&&(S=R),V<b&&(b=V),V>M&&(M=V)}return d[m+0]!==w||d[m+1]!==_||d[m+2]!==b||d[m+3]!==A||d[m+4]!==S||d[m+5]!==M?(d[m+0]=w,d[m+1]=_,d[m+2]=b,d[m+3]=A,d[m+4]=S,d[m+5]=M,!0):!1}else{let y=m+8,x=l[m+6],w=y+p,_=x+p,b=g,A=!1,S=!1;e?b||(A=e.has(w),S=e.has(_),b=!A&&!S):(A=!0,S=!0);let M=b||A,E=b||S,C=!1;M&&(C=f(y,p,b));let L=!1;E&&(L=f(x,p,b));let N=C||L;if(N)for(let R=0;R<3;R++){let V=y+R,F=x+R,H=d[V],P=d[V+3],z=d[F],D=d[F+3];d[m+R]=H<z?H:z,d[m+R+3]=P>D?P:D}return N}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),n=new Uint16Array(i);s(0);function s(a,o=0){let l=a*2,u=n[l+15]===65535;if(u){let d=r[a+6],c=n[l+14];e(o,u,new Float32Array(i,a*4,6),d,c)}else{let d=a+8,c=r[a+6],h=r[a+7];e(o,u,new Float32Array(i,a*4,6),h)||(s(d,o+1),s(c,o+1))}}}raycast(e,t=go){let i=this._roots,r=this.geometry,n=[],s=t.isMaterial,a=Array.isArray(t),o=r.groups,l=s?t.side:t;for(let u=0,d=i.length;u<d;u++){let c=a?t[o[u].materialIndex].side:l,h=n.length;if(Jd(i[u]),yb(0,r,c,e,n),pg(),a){let f=o[u].materialIndex;for(let m=h,p=n.length;m<p;m++)n[m].face.materialIndex=f}}return n}raycastFirst(e,t=go){let i=this._roots,r=this.geometry,n=t.isMaterial,s=Array.isArray(t),a=null,o=r.groups,l=n?t.side:t;for(let u=0,d=i.length;u<d;u++){let c=s?t[o[u].materialIndex].side:l;Jd(i[u]);let h=xb(0,r,c,e);pg(),h!=null&&(a==null||h.distance<a.distance)&&(a=h,s&&(h.face.materialIndex=o[u].materialIndex))}return a}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let n of this._roots)if(Jd(n),r=cie(0,i,e,t),pg(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let c=t;t=(h,f,m,p)=>{let g=f*3;return c(h,g,g+1,g+2,m,p)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Xs.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:a,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let c=o;o=(h,f,m,p,g)=>c(h,f,m,p,g)?!0:KD(h,f,r,l,m,p,n)}else o||(l?o=(c,h,f,m)=>KD(c,h,r,l,f,m,n):o=(c,h,f)=>f);let u=!1,d=0;for(let c of this._roots){if(Jd(c),u=uie(0,r,a,o,s,d),pg(),u)break;d+=c.byteLength}return Xs.releasePrimitive(n),u}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:n}=i,s=this.geometry.index,a=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;Ac.copy(t).invert();let u=Xs.getPrimitive(),d=Xs.getPrimitive();if(n){let h=function(f,m,p,g,v,y,x,w){for(let _=p,b=p+g;_<b;_++){ea(d,_*3,o,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let A=f,S=f+m;A<S;A++)if(ea(u,A*3,s,a),u.needsUpdate=!0,n(u,d,A,_,v,y,x,w))return!0}return!1};if(r){let f=r;r=function(m,p,g,v,y,x,w,_){return f(m,p,g,v,y,x,w,_)?!0:h(m,p,g,v,y,x,w,_)}}else r=h}e.getBoundingBox(Dx),Dx.applyMatrix4(t);let c=this.shapecast({intersectsBounds:h=>Dx.intersectsBox(h),intersectsRange:(h,f,m,p,g,v)=>(Cx.copy(v),Cx.applyMatrix4(Ac),e.shapecast({intersectsBounds:y=>Cx.intersectsBox(y),intersectsRange:(y,x,w,_,b)=>r(h,f,y,x,p,g,_,b)}))});return Xs.releasePrimitive(u),Xs.releasePrimitive(d),c}intersectsBox(e,t){return Xl.set(e.min,e.max,t),Xl.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Xl.intersectsBox(i),intersectsTriangle:i=>Xl.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),Xl.set(e.boundingBox.min,e.boundingBox.max,t),Xl.needsUpdate=!0;let a=this.geometry,o=a.attributes.position,l=a.index,u=e.attributes.position,d=e.index,c=Xs.getPrimitive(),h=Xs.getPrimitive(),f=mg,m=hie,p=null,g=null;r&&(p=die,g=fie);let v=1/0,y=null,x=null;return Ac.copy(t).invert(),Ld.matrix.copy(Ac),this.shapecast({boundsTraverseOrder:w=>Xl.distanceToBox(w),intersectsBounds:(w,_,b)=>b<v&&b<s?(_&&(Ld.min.copy(w.min),Ld.max.copy(w.max),Ld.needsUpdate=!0),!0):!1,intersectsRange:(w,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>Ld.distanceToBox(b),intersectsBounds:(b,A,S)=>S<v&&S<s,intersectsRange:(b,A)=>{for(let S=b*3,M=(b+A)*3;S<M;S+=3){ea(h,S,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let E=w*3,C=(w+_)*3;E<C;E+=3){ea(c,E,l,o),c.needsUpdate=!0;let L=c.distanceToTriangle(h,f,p);if(L<v&&(m.copy(f),g&&g.copy(p),v=L,y=E/3,x=S/3),L<n)return!0}}}});{let b=d?d.count:u.count;for(let A=0,S=b;A<S;A+=3){ea(h,A,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let M=w*3,E=(w+_)*3;M<E;M+=3){ea(c,M,l,o),c.needsUpdate=!0;let C=c.distanceToTriangle(h,f,p);if(C<v&&(m.copy(f),g&&g.copy(p),v=C,y=M/3,x=A/3),C<n)return!0}}}}}),Xs.releasePrimitive(c),Xs.releasePrimitive(h),v===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=v,i.faceIndex=y,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(Ac),m.applyMatrix4(Ac),r.distance=m.sub(r.point).length(),r.faceIndex=x),i)}closestPointToPoint(e,t={},i=0,r=1/0){let n=i*i,s=r*r,a=1/0,o=null;if(this.shapecast({boundsTraverseOrder:u=>(Od.copy(e).clamp(u.min,u.max),Od.distanceToSquared(e)),intersectsBounds:(u,d,c)=>c<a&&c<s,intersectsTriangle:(u,d)=>{u.closestPointToPoint(e,Od);let c=e.distanceToSquared(Od);return c<a&&(mg.copy(Od),a=c,o=d),c<n}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(mg):t.point=mg.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{aa(0,new Float32Array(t),JD),e.union(JD)}),e}},$D=cr.prototype.raycast;cr.prototype.raycast=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[t,i,r,n]=e;return $D.call(this,r,t.material).forEach(s=>{s=lk(s,t,i),s&&n.push(s)}),n}else return $D.apply(this,e)};var e3=cr.prototype.raycastFirst;cr.prototype.raycastFirst=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[t,i,r]=e;return lk(e3.call(this,r,t.material),t,i)}else return e3.apply(this,e)};var t3=cr.prototype.closestPointToPoint;cr.prototype.closestPointToPoint=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),e.unshift();let t=e[1],i={};return e[1]=i,t3.apply(this,e),t&&t.copy(i.point),i.distance}else return t3.apply(this,e)};var i3=cr.prototype.closestPointToGeometry;cr.prototype.closestPointToGeometry=function(...e){let t=e[2],i=e[3];if(t&&t.isVector3||i&&i.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let r={},n={},s=e[1];return e[2]=r,e[3]=n,i3.apply(this,e),t&&t.copy(r.point),i&&i.copy(n.point).applyMatrix4(s),r.distance}else return i3.apply(this,e)};var r3=cr.prototype.refit;cr.prototype.refit=function(...e){let t=e[0],i=e[1];if(i&&(i instanceof Set||Array.isArray(i))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let r=new Set;i.forEach(n=>r.add(n)),t&&t.forEach(n=>r.add(n)),r3.call(this,r)}else r3.apply(this,e)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(e=>{let t=cr.prototype[e];cr.prototype[e]=function(...i){return(i[0]===null||i[0].isMesh)&&(i.shift(),console.warn(`MeshBVH: The function signature for "${e}" has changed and no longer takes Mesh. See docs for new signature.`)),t.apply(this,i)}});var pie=xR(KU()),_b;zz.then(e=>{_b=e});var ck=new Ke,mie=new Ke,gie=new Ke,bs=new Xi,Io=new T,vie=new Ke,yie=new Ke,$A=class extends qr{constructor(e,t,i,r){super(i!=null?i:t,r),this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=i,this.objectType="SubdivObject",this.hiddenMatrixOld=new Ke,this.smoothShading=!0,this.phongAngle=35,this.matrixWorldRigid=new Ke,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,i){let{subdivPointer:r,originalGeometry:n,subdividedGeometry:s}=Ps.build(t.geometry,void 0,void 0,!t.flatShading),a=i.material(t.material),o=new $A(r,n,s||void 0,a);return t.geometry.phongAngle!==void 0&&(o.phongAngle=t.geometry.phongAngle),o.calcBoundingBox(),o.freeSubdivPointer(),o.uuid=e,o.fromState(t),o}buildFromStore(e,t){var s,a,o;let{originalGeometry:i,subdividedGeometry:r,subdivPointer:n}=Ps.build(e,t,this.subdivPointer,this.smoothShading,this.shearScale);e.phongAngle!==void 0&&(this.phongAngle=e.phongAngle),this.subdivPointer=n,i!==void 0&&((s=this.originalGeometry)==null||s.dispose(),this.originalGeometry=i),r!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=r!=null?r:void 0),this.geometry=(o=this.subdividedGeometry)!=null?o:this.originalGeometry,ny(this),sy(this),e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(e=!1){Ps.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&Ps.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=Ps.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Ps.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.geometry=(e=this.subdividedGeometry)!=null?e:this.originalGeometry}raycast(e,t){var i;this.geometry=this.originalGeometry,qr.prototype.raycast.call(this,e,t),this.geometry=(i=this.subdividedGeometry)!=null?i:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:r,q:n}=(0,pie.SVD)(t),s=ck.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=mie.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=gie.copy(a).transpose();this.shearScale=vie.makeScale(n[0],n[1],n[2]).multiply(o).premultiply(a),this.shearScaleInv=yie.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,o),n.every(l=>Math.abs(n[0]-l)<.01)&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){this.shearScale!==void 0&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){this.shearScale!==void 0&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ks);let t=e.attributes.position,i=e.boundingSphere.center;bs.setFromBufferAttribute(t),bs.getCenter(i),e.boundingSphere.radius=i.distanceTo(bs.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),bs.getSize(Io);let r={width:Io.x,height:Io.y,depth:Io.z};return this.geometry.userData.parameters=r,r}updateBoundingBox(e){let t=this.originalGeometry;bs.min.set(e[0],e[2],e[4]),bs.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(bs.min.applyMatrix4(this.shearScaleInv),bs.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ks);let i=t.boundingSphere.center;bs.getCenter(i),t.boundingSphere.radius=i.distanceTo(bs.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),bs.getSize(Io);let r={width:Io.x,height:Io.y,depth:Io.z};return this.geometry.userData.parameters=r,r}freeSubdivPointer(){this.subdivPointer&&(_b.free_bvh(this.subdivPointer),_b.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=this.geometry.userData.parameters.width===0?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=this.geometry.userData.parameters.height===0?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=this.geometry.userData.parameters.depth===0?1:e.parameters.depth/this.geometry.userData.parameters.depth,n3(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(n3(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters={...e.parameters}}};function n3(e,t,i,r){let n=e.position.array,s=e.normal.array,a=ck.makeScale(t,i,r).invert().elements,o,l,u;for(var d=0,c=n.length;d<c;d+=3)n[d]*=t,n[d+1]*=i,n[d+2]*=r,o=s[d],l=s[d+1],u=s[d+2],s[d]=a[0]*o+a[4]*l+a[8]*u,s[d+1]=a[1]*o+a[5]*l+a[9]*u,s[d+2]=a[2]*o+a[6]*l+a[10]*u}function s3(e,t){t.flatShading!==void 0&&(e.flatShading=t.flatShading,e.needsUpdate=!0),t.wireframe!==void 0&&(e.wireframe=t.wireframe),t.side!==void 0&&(t.side===0?e.side=go:t.side===1?e.side=or:e.side=Ur)}function xie(e,t){if(Array.isArray(e.material))for(let i of e.material)s3(i,t);else{let i=e.material;s3(i,t)}e.objectType==="SubdivObject"&&t.flatShading!==void 0&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}function wie(e,t,i){let r;if(t.geometry.type==="SubdivGeometry")r=$A.createFromState(e,t,i);else{let n=t.geometry.type==="BooleanGeometry"?new ft:wB(t.geometry),s="materials"in t?t.materials.map(a=>i.material(a)):i.material(t.material);G_.is2DParametricMesh(n.userData.type)?r=new cee(n,s):(n==null?void 0:n.userData.type)==="VectorGeometry"?r=new xB(n,s):t.geometry.type==="NonParametricGeometry"?r=new hee(n,s):t.geometry.type==="BooleanGeometry"?(r=new oee(void 0,s),r.booleanOp=t.geometry.operation,t.geometry.phongAngle!==void 0&&(r.phongAngle=t.geometry.phongAngle)):r=new IB(n,s),r.uuid=e,r.fromState(t,i)}return xie(r,t),r}function _ie(e,t,i){return t.type==="Mesh"?wie(e,t,i):t.type==="TextFrame"?$g.createFromState(e,t,i):t.type==="Empty"?lb.createFromState(e,t):t.type==="PointLight"?LB.createFromState(e,t,i):t.type==="SpotLight"?OB.createFromState(e,t,i):t.type==="DirectionalLight"?PB.createFromState(e,t,i):kh.is(t.type)?Gu.createFromState(e,t):(console.error(t),new lb)}function a3(e,t){let i=!1,r=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),i=!0,sy(e),ny(e)),r.length===0&&n.length===0&&e.layers.set(0),i}function o3(e,t){if(!t.layers)return!1;let i=!1,r=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),i=!0),r.length===0&&n.length===0&&e.layers.set(0),i}function bie(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof Mr&&i.objectType!=="TextFrame")if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)a3(i,i.material[r])&&(t=!0);else a3(i,i.material)&&(t=!0)}),t}function Sie(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof Mr)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)o3(i,i.material[r])&&(t=!0);else o3(i,i.material)&&(t=!0)}),t}function Aie(e){"material"in e&&Mie(e.material),"geometry"in e&&e.geometry.dispose()}function Mie(e){UZ(e).forEach(t=>{t instanceof cb||t.dispose()})}var Eie=new tI,Tie=new Ke,Cie=new Dp;function Die(e,t,i){let r=e.cloner;if(r)for(let n of r.children){let s=Tie.copy(n.matrixWorld).invert(),a=Cie.copy(t.ray).applyMatrix4(s),o=e.matrixWorld;a.applyMatrix4(o);let l=Eie;l.set(a.origin,a.direction),l.near=t.near,l.far=t.far,l.intersectObject(e,!1).length>0&&i.push({object:e})}}var l3=new T,hk=class extends Fz(Mu){constructor(e,t){super(),this.objectType="Scene",this.backupFog=new HR(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.bgColor=new zs(1,1,1,1),this.entityByUuid={},this.ambientLight=new m_(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t)}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Sie(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=bie(this),this.needsNormalDirty=!1),this._needsNormal}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(Hr(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let i=this.find(e.publish.playCamera);i instanceof Gu&&this.switchActiveCamera(i)}this.traverse(i=>{Ii(i)&&i.recomputeBoolean()})}clearScene(){this.traverseEntity(e=>{Aie(e)});for(let e of this.children)Za(e)&&e.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=Gu.createFromState(hk.PERSONAL_CAMERA_ID,{...W_.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],i=r=>{for(let n of r.children)Za(n)&&!n.raycastLock&&n.visible&&((ji(n)||kz(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),Die(n,e,t)),i(n))};return i(this),t}traverseEntity(e){for(let t of this.children)Za(t)&&t.traverseEntity(e)}traverseVisibleEntity(e){for(let t of this.children)Za(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Hr(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){$J(this.ambientLight,e,t),e.groundColor!==void 0&&(this.ambientLight.groundColor=Hr(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,t,i){for(let r of e)this.createChildObject(r.id,r.data,r.children,t,i)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,i,r,n){let s=_ie(e,t,n);return s&&(this.entityByUuid[e]=s,r.add(s),Ii(r)&&ji(s)&&(s.prevBooleanObjectParent=r),this.createChildrenObjects(i,s,n)),s}getCenter(e){let t=[];for(let r=0,n=e.length;r<n;++r){let{id:s,recursive:a}=e[r],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let i=new Xi;return i.setFromPoints(t),i.getCenter(l3),l3}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof qr)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof Fh&&e(t.material[i]);else t.material instanceof Fh&&e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let i,r;e>=t?(i=t/e,r=1):(i=1,r=e/t),this.traverseMaterial(n=>{n.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=i,s.uniforms[`f${s.id}_aspectRatio`].value.y=r})})}},eM=hk;eM.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var Pie=class extends eM{constructor(e,t){super(e,t)}dispose(){super.dispose()}},rv=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},Lie=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Rie(Math.atan2(r,i))},Oie=(e,t,i)=>{let r={x:0,y:0};return i=bb(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},bb=e=>e*(Math.PI/180),Rie=e=>e*(180/Math.PI),Iie=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,Px=new Map,u3=e=>{Px.has(e)&&clearTimeout(Px.get(e)),Px.set(e,setTimeout(e,100))},h0=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&e.attachEvent(n,i)},c3=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.removeEventListener?e.removeEventListener(n,i):e.detachEvent&&e.detachEvent(n,i)},dk=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),h3=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},Sb=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},tM=(e,t,i)=>{let r=fk(e);for(let n in r)if(r.hasOwnProperty(n))if(typeof t=="string")r[n]=t+" "+i;else{let s="";for(let a=0,o=t.length;a<o;a+=1)s+=t[a]+" "+i+", ";r[n]=s.slice(0,-2)}return r},zie=(e,t)=>{let i=fk(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},fk=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},Lx=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},Bie=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},Ab=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},kie=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(pk="ontouchstart"in window,mk=!!window.PointerEvent,gk=!!window.MSPointerEvent);var pk,mk,gk,Rd={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},th,xp={};mk?th=Rd.pointer:gk?th=Rd.MSPointer:pk?(th=Rd.touch,xp=Rd.mouse):th=Rd.mouse;function Ju(){}Ju.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]=i._handlers_[n]||[],i._handlers_[n].push(t);return i};Ju.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};Ju.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(a){a.call(i,{type:n,target:i},t)})};Ju.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=Bie(t.options,e))};Ju.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},h0(e,th[t],i._domHandlers_[t]),xp[t]&&h0(e,xp[t],i._domHandlers_[t]),i};Ju.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},c3(e,th[t],i._domHandlers_[t]),xp[t]&&c3(e,xp[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var iM=Ju;function Wi(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Wi.id,Wi.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Wi.prototype=new iM;Wi.constructor=Wi;Wi.id=0;Wi.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Wi.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=zie("borderRadius","50%"),i=tM("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},Lx(r.el,i),this.options.shape==="circle"&&Lx(r.back,t),Lx(r.front,t),this.applyStyles(r),this};Wi.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};Wi.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Wi.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Wi.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Wi.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Wi.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};Wi.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",n={};n.front=tM("transition",["top","left"],r);var s={front:{}};s.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(n),i.applyStyles(s),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};Wi.prototype.restCallback=function(){var e=this,t={};t.front=tM("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Wi.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Wi.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,n,s,a;if(t>i&&t<i*3&&!e.lockX?n="up":t>-i&&t<=i&&!e.lockY?n="left":t>-i*3&&t<=-i&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-r&&t<r?s="left":s="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var u={};this.direction={x:s,y:a,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+s,e),u.y||this.trigger("plain:"+a,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var Nie=Wi;function Ti(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=Ti.id,Ti.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}Ti.prototype=new iM;Ti.constructor=Ti;Ti.id=0;Ti.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,n=t.length;r<n;r+=1)if(t[r].identifier===i)return t[r];return!1}};Ti.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Ti.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};Ti.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,n={},s=i.options,a={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)n={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",s.zone.appendChild(o);var l=o.getBoundingClientRect();s.zone.removeChild(o),n=e,e={x:l.left+r.x,y:l.top+r.y}}var u=new Nie(i,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Sb(u.ui.el,n),Sb(u.ui.front,u.frontPosition)),i.nipples.push(u),i.trigger("added "+u.identifier+":added",u),i.manager.trigger("added "+u.identifier+":added",u),i.bindNipple(u),u};Ti.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Ti.prototype.bindNipple=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};Ti.prototype.pressureFn=function(e,t,i){var r=this,n=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval(function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),r.trigger("pressure "+t.identifier+":pressure",s),n=s)}.bind(r),100)};Ti.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=dk(e),t.updateBox();var n=function(s){t.actives.length<i.maxNumberOfNipples?t.processOnStart(s):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(r.touches).findIndex(function(l){return l.identifier===a})<0){var o=[e[0]];o.identifier=a,t.processOnEnd(o)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(s))};return Ab(e,n),t.manager.bindDocument(),!1};Ti.prototype.processOnStart=function(e){var t=this,i=t.options,r,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,a);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),s>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(o))>=0&&t.idles.splice(r,1),t.actives.push(o),t.ids.push(o.identifier),i.mode!=="semi")l(o);else{var u=rv(a,o.position);if(u<=i.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};Ti.prototype.getOrCreate=function(e,t){var i=this,r=i.options,n;return/(semi|static)/.test(r.mode)?(n=i.idles[0],n?(i.idles.splice(0,1),n):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=i.createNipple(t,e),n)};Ti.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.scroll;if(!Iie(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var a=n.el.getBoundingClientRect();n.position={x:s.x+a.left,y:s.y+a.top}}n.identifier=r;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=n.position.y),i.lockY&&(l.x=n.position.x);var u=rv(l,n.position),d=Lie(l,n.position),c=bb(d),h=u/o,f={distance:u,position:l},m,p;if(n.options.shape==="circle"?(m=Math.min(u,o),p=Oie(n.position,m,d)):(p=kie(l,n.position,o),m=rv(p,n.position)),i.follow){if(u>o){let x=l.x-p.x,w=l.y-p.y;n.position.x+=x,n.position.y+=w,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",u=rv(l,n.position)}}else l=p,u=m;var g=l.x-n.position.x,v=l.y-n.position.y;n.frontPosition={x:g,y:v},i.dataOnly||Sb(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:c,degree:d},vector:{x:g/o,y:-v/o},raw:f,instance:n,lockX:i.lockX,lockY:i.lockY};y=n.computeDirection(y),y.angle={radian:bb(180-d),degree:180-d},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};Ti.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.removeIdentifier(n.identifier);!n||(i.dataOnly||n.hide(function(){i.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(i.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[s.id]=s.identifier))};Ti.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};Ti.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var Fie=Ti;function er(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=h3(),t.config(e),t.prepareCollections();var i=function(){var n;t.collections.forEach(function(s){s.forEach(function(a){n=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;h0(window,"resize",function(){u3(i)});var r=function(){t.scroll=h3()};return h0(window,"scroll",function(){u3(r)}),t.collections}er.prototype=new iM;er.constructor=er;er.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};er.prototype.create=function(e){return this.createCollection(e)};er.prototype.createCollection=function(e){var t=this,i=new Fie(t,e);return t.bindCollection(i),t.collections.push(i),i};er.prototype.bindCollection=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};er.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};er.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};er.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};er.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};er.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};er.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};er.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};er.prototype.onAny=function(e,t){var i=this,r,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=dk(t);var s=function(o,l,u){u.ids.indexOf(l)>=0&&(u[n](o),o._found_=!0)},a=function(o){r=i.getIdentifier(o),Ab(i.collections,s.bind(null,o,r)),o._found_||i.removeIdentifier(r)};return Ab(t,a),!1};er.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};er.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var Uie=er,d3=new Uie,Hie={create:function(e){return d3.create(e)},factory:d3};function Ox(e,t){let i=e.clone();for(let r in i.attributes)r!=="position"&&i.deleteAttribute(r);if(i.index===null){let{positions:r,triIndices:n}=UA(i.getAttribute("position"));i.setAttribute("position",new ke(r,3)),i.setIndex(n)}return t&&i.applyMatrix4(t),i}var Rx=new Ke,Vie=new T(1,1,1),f3=new T,p3=new ii,gg=new T,jie=class{constructor(e,t,i,r,n=!1){var v;this.scene=t,this.isExport=n,this.gameControls=[],this.joysticks=[],this.joystickToGameControls=[],this.bvh={dynamic:[]},this.initializationCounter=-1,this.domElement=i.domElement;let s;e.scene.publish.playCamera===null?s=eM.PERSONAL_CAMERA_ID:s=e.scene.publish.playCamera;let a=this.scene.find(s),o=!1,l=!1,u,d=5,c=8,h=9,f="drag";(v=e.scene.objects.data(e.scene.publish.gameControlObject))==null||v.events.forEach(y=>{y.data.type===13&&(u=y.data.keyAssignments,d=y.data.joystickPosLoc,c=y.data.joystickRotLoc,h=y.data.jumpTouchButtonLoc,f=y.data.rotByTouch)}),e.scene.objects.traverse((y,x)=>{x.events.forEach(w=>{if(w.data.type===13){w.data.collisionEnabled&&(o=!0);let _=this.scene.find(y);l=l||w.data.camera===a.uuid;let b=new yz({...w.data,keyAssignments:u},_,i.domElement,this.bvh,w.data.camera===a.uuid,a);b.addEventListener("change",r),b.addEventListener("end",r),b.addEventListener("start",r),this.gameControls.push(b),Ki&&w.data.touchControl&&(this.joystickToGameControls[d]!==void 0?this.joystickToGameControls[d].push([b,"pos"]):this.joystickToGameControls[d]=[[b,"pos"]],w.data.moveMode==="walk"&&(this.joystickToGameControls[h]!==void 0?this.joystickToGameControls[h].push([b,"jmp"]):this.joystickToGameControls[h]=[[b,"jmp"]]),f==="joystick"&&(this.joystickToGameControls[c]!==void 0?this.joystickToGameControls[c].push([b,"rot"]):this.joystickToGameControls[c]=[[b,"rot"]]))}})});let m=!1;if(e.scene.objects.traverse((y,x)=>{x.events.forEach(w=>{w.data.type===13&&kh.is(x.type)&&(m=!0)})}),l===!1){let{enableRotate:y,enablePan:x,enableZoom:w,autoRotate:_,hoverRotatePanMode:b}=e.scene.publish.orbitControls;m===!1&&(y||x||w||_||b!==0)&&(a.interaction===void 0||a.interaction.states.length<=1)&&(this.orbitControls=new vz(a,i.domElement,this.isExport),this.orbitControls.addEventListener("change",r),this.orbitControls.addEventListener("end",r),this.orbitControls.addEventListener("start",r),this.orbitControls.fromJSON(e.scene.publish.orbitControls),this.orbitControls.useKeyEvents=!1)}let p=i.domElement.width/i.getPixelRatio(),g=i.domElement.height/i.getPixelRatio();this.joystickToGameControls.forEach((y,x)=>{var R;let w=document.body.appendChild(document.createElement("div")),[_,b,A]=((R=e.scene.publish.joystickSizeAndXYOffset)!=null?R:X_.defaultData.joystickSizeAndXYOffset)[x],S=(p-5*_)/4+_,M={},E=y.some(V=>V[1]==="jmp"),C=E?0:_;x<10?(x<5?M.top=C/2:M.bottom=C/2,M.left=C/2+x%5*S):x===10?(M.left=C/2,M.top=g/2):(M.right=C/2,M.top=g/2),M.top?M.top-=b[1]:M.bottom+=b[1],M.left?M.left+=b[0]:M.right-=b[0];for(let V in M)M[V]+="px";if(E){let V=w.appendChild(document.createElement("div"));Object.assign(V.style,M,{position:"absolute",width:_+"px",height:_+"px",backgroundColor:`rgba(255,255,255,${A==="show"?.4:0})`,zIndex:"9999",borderRadius:_+"px",border:"solid 2px rgba(0, 0, 0, .1)",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let F=_/16*16*.4;V.innerHTML=`
					<svg width="${F}" height="${_*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				`,V.addEventListener("pointerdown",()=>{y.forEach(H=>{H[0].actionStates.jump=1}),r()}),V.addEventListener("touchend",H=>H.preventDefault()),this.joysticks[x]=[void 0,w];return}let L={zone:w,mode:"static",position:M,size:_};A==="hide"&&(L.restOpacity=0);let N=Hie.create(L);N.on("move",(V,F)=>{y.forEach(H=>{let P=H[0];H[1]==="pos"?F.force<.2?P.moveForce=0:(P.actionStates.movePosZ=Math.sin(-F.angle.radian),P.actionStates.movePosX=Math.cos(-F.angle.radian),F.force<.3?P.moveForce=(F.force-.2)/.1:P.moveForce=1):F.force<.2?P.rotForce=0:(P.actionStates.rotPosX=F.vector.y,P.actionStates.rotPosY=-F.vector.x,F.force<.3?P.rotForce=(F.force-.2)/.1:P.rotForce=1)}),r()}),N.on("end",(V,F)=>{y.forEach(H=>{let P=H[0];H[1]==="pos"?(P.actionStates.movePosZ=0,P.actionStates.movePosX=0,P.moveForce=1):(P.actionStates.rotPosX=0,P.actionStates.rotPosY=0,P.rotForce=1)})}),this.joysticks[x]=[N,w]}),o&&this.initBVH(),this.initializationCounter++}initBVH(){let e=[];this.scene.updateMatrixWorld(!0);let t=new Set;if(this.scene.traverse(i=>{var r;if(Pl(i))if(!i.visible||t.has(i))i.children.forEach(n=>Pl(n)&&t.add(n));else if(i.interaction&&i.interaction.states.length>1||((r=i.interaction)==null?void 0:r.events.gameControl)!==void 0){let n=[];i.matrixWorld.decompose(f3,p3,gg);let s=new Ke().compose(f3,p3,Vie);ji(i)&&n.push(Ox(i.geometry,Rx.makeScale(gg.x,gg.y,gg.z))),i.updateMatrixWorld();let a=s.clone().invert();if(i.traverse(o=>{!ji(o)||(o.updateMatrixWorld(),Rx.multiplyMatrices(a,o.matrixWorld),n.push(Ox(o.geometry,Rx)))}),n.length>0){let o=Z_(n,!1);i.boundsTree=new cr(o),this.bvh.dynamic.push(i)}}else ji(i)&&!this.bvh.dynamic.some(n=>i.isDescendantOf(n))&&e.push(Ox(i.geometry,i.matrixWorld))}),e.length>0){let i=Z_(e,!1);this.bvh.static=new cr(i)}}dispose(){var e;this.bvh.static=void 0,this.bvh.dynamic=[],this.gameControls.forEach(t=>{t.reset(),t.dispose()}),this.gameControls=[],this.joysticks.forEach(([t,i])=>{t==null||t.destroy(),i.remove()}),this.joystickToGameControls=[],this.joysticks=[],(e=this.orbitControls)==null||e.dispose(),this.orbitControls=void 0}update(e){let t=!0;return this.orbitControls!==void 0&&(t=!this.orbitControls.update(e)),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,t=!1):this.initializationCounter===2&&this.gameControls.forEach(i=>{t=!i.update(e)&&t}),t}},vk={RED:0,GREEN:1,BLUE:2,ALPHA:3},Np="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Gie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,vg=class extends Gi{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Ze(null),kernel16:new Ze(null),inputBuffer:new Ze(null),cocBuffer:new Ze(null),texelSize:new Ze(new q),scale:new Ze(1)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:Gie,vertexShader:Np}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,n=0;for(let o=0;o<80;++o){let l=o*e,u=Math.sqrt(o)/Math.sqrt(80),d=u*Math.cos(l),c=u*Math.sin(l);o%5===0?(i[n++]=d,i[n++]=c):(t[r++]=d,t[r++]=c)}let s=[],a=[];for(let o=0;o<128;)s.push(new vt(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new vt(i[o++],i[o++],i[o++],i[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function m3(e,t,i){return e*(t-i)-t}function Mb(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var Wie=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,Xie=class extends Gi{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ze(null),focusDistance:new Ze(0),focusRange:new Ze(0),cameraNear:new Ze(.3),cameraFar:new Ze(1e3)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:Wie,vertexShader:Np}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=wo){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-m3(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=Mb(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-m3(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=Mb(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof _r?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Yie=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,qie="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",g3=class extends Gi{constructor(e=new q){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ze(null),texelSize:new Ze(new q),halfTexelSize:new Ze(new q),kernel:new Ze(0),scale:new Ze(1)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:Yie,vertexShader:qie}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},Qie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,Zie=class extends Gi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ze(null),opacity:new Ze(1)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:Qie,vertexShader:Np}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Kie=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,Jie=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,rM={DEPTH:0,LUMA:1,COLOR:2},yk={DISABLED:0,DEPTH:1,CUSTOM:2},$ie=class extends Gi{constructor(e=new q,t=rM.COLOR){super({name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Ze(null),depthBuffer:new Ze(null),predicationBuffer:new Ze(null),texelSize:new Ze(e)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:Kie,vertexShader:Jie}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=wo){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ere=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,tre="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Ss={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Eb=class extends Gi{constructor(e,t,i,r,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ep.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ze(null),depthBuffer:new Ze(null),resolution:new Ze(new q),texelSize:new Ze(new q),cameraNear:new Ze(.3),cameraFar:new Ze(1e3),aspect:new Ze(1),time:new Ze(0)},blending:ur,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=wo){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=ere.replace(Ss.FRAGMENT_HEAD,e.get(Ss.FRAGMENT_HEAD)).replace(Ss.FRAGMENT_MAIN_UV,e.get(Ss.FRAGMENT_MAIN_UV)).replace(Ss.FRAGMENT_MAIN_IMAGE,e.get(Ss.FRAGMENT_MAIN_IMAGE)),this.vertexShader=tre.replace(Ss.VERTEX_HEAD,e.get(Ss.VERTEX_HEAD)).replace(Ss.VERTEX_MAIN_SUPPORT,e.get(Ss.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof _r?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return Ss}},ire=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,rre=class extends Gi{constructor(e=!1,t=null){super({name:"LuminanceMaterial",uniforms:{inputBuffer:new Ze(null),threshold:new Ze(0),smoothing:new Ze(1),range:new Ze(null)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:ire,vertexShader:Np}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},nre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,xk={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},sre=class extends Gi{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Ze(e),inputBuffer:new Ze(null),strength:new Ze(1)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:nre,vertexShader:Np}),this.toneMapped=!1,this.setColorChannel(vk.RED),this.setMaskFunction(xk.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Dr&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},are=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,ore="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",lre=class extends Gi{constructor(e=new q,t=new q){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Ze(null),searchTexture:new Ze(null),areaTexture:new Ze(null),resolution:new Ze(t),texelSize:new Ze(e)},blending:ur,depthWrite:!1,depthTest:!1,fragmentShader:are,vertexShader:ore}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},ure=new Gh,zo=null;function cre(){if(zo===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);zo=new ft,zo.setAttribute!==void 0?(zo.setAttribute("position",new xt(e,3)),zo.setAttribute("uv",new xt(t,2))):(zo.addAttribute("position",new xt(e,3)),zo.addAttribute("uv",new xt(t,2)))}return zo}var ps=class{constructor(e="Pass",t=new Mu,i=ure){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Mr(cre(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Mu),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=wo){}render(e,t,i,r,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Mu||t===this.renderer)continue;this[e].dispose()}}}},d0=class extends ps{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Zie,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new Ei(1,1,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==Dr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===yt&&(this.renderTarget.texture.encoding=yt))}},hre=class extends ps{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Ix=new dt,cy=class extends ps{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,u=a>=0;l?(Ix.copy(e.getClearColor(Ix)),e.setClearColor(s,u?a:o)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Ix,o):u&&e.setClearAlpha(o)}},Bo=-1,ln=class extends Kr{constructor(e,t=Bo,i=Bo,r=1){super(),this.resizable=e,this.base=new q(1,1),this.preferred=new q(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==Bo?r=t.width:t.height!==Bo?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==Bo?r=t.height:t.width!==Bo?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Bo),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Bo}},zx=!1,v3=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case Ur:i=this.materialsFlatShadedDoubleSide;break;case or:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case Ur:i=this.materialsDoubleSide;break;case or:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=go;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=or,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=Ur,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=or,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=Ur,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,zx){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return zx}static set workaroundEnabled(e){zx=e}},dre=class extends ps{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new cy,this.overrideMaterialManager=i===null?null:new v3(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new v3(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,n){let s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=s.background,d=e.shadowMap.autoUpdate,c=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(c),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=u,e.shadowMap.autoUpdate=d}},y3=class extends ps{constructor(e,t,{resolutionScale:i=1,width:r=ln.AUTO_SIZE,height:n=ln.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new dre(e,t,new FR({depthPacking:ER}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let o=a.getClearPass();o.overrideClearColor=new dt(16777215),o.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ei(1,1,{minFilter:mi,magFilter:mi,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new ln(this,r,n,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},Ot={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},fre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",pre="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",mre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",gre="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",vre="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",yre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",xre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",wre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",_re="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",bre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Sre="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Are="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Mre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Ere="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Tre="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Cre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Dre="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Pre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Lre=new Map([[Ot.SKIP,null],[Ot.ADD,fre],[Ot.ALPHA,pre],[Ot.AVERAGE,mre],[Ot.COLOR_BURN,gre],[Ot.COLOR_DODGE,vre],[Ot.DARKEN,yre],[Ot.DIFFERENCE,xre],[Ot.EXCLUSION,wre],[Ot.LIGHTEN,_re],[Ot.MULTIPLY,bre],[Ot.DIVIDE,Sre],[Ot.NEGATION,Are],[Ot.NORMAL,Mre],[Ot.OVERLAY,Ere],[Ot.REFLECT,Tre],[Ot.SCREEN,Cre],[Ot.SOFT_LIGHT,Dre],[Ot.SUBTRACT,Pre]]),Ore=class extends Kr{constructor(e,t=1){super(),this.f=e,this.opacity=new Ze(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Lre.get(this.blendFunction)}},ba={NONE:0,DEPTH:1,CONVOLUTION:2},La=class extends Kr{constructor(e,t,{attributes:i=ba.NONE,blendFunction:r=Ot.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new Ore(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=wo){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Mu||t===this.renderer)continue;this[e].dispose()}}}};function x3(e,t,i){for(let r of t){let n="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let a of i.entries())a[1]!==null&&i.set(a[0],a[1].replace(s,n))}}function Rre(e,t,i,r,n,s,a){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),u=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),d=[],c=[],h=!1,f=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&(a&ba.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,p=Eb.Section;if(u){let v=`	${e}MainUv(UV);
`;i.set(p.FRAGMENT_MAIN_UV,i.get(p.FRAGMENT_MAIN_UV)+v),h=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,i.set(p.VERTEX_MAIN_SUPPORT,i.get(p.VERTEX_MAIN_SUPPORT)+v),d=d.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),c=c.concat(d).concat([...o.get("vertex").matchAll(m)].map(y=>y[1]))}c=c.concat([...o.get("fragment").matchAll(m)].map(v=>v[1])),c=c.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),c=c.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>s.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),x3(e,c,n),x3(e,c,o);let g=t.blendMode;if(r.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;(a&ba.DEPTH)!==0&&v.test(o.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=e+"BlendOpacity";s.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,i.set(p.FRAGMENT_MAIN_IMAGE,i.get(p.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,i.set(p.FRAGMENT_HEAD,i.get(p.FRAGMENT_HEAD)+y)}i.set(p.FRAGMENT_HEAD,i.get(p.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&i.set(p.VERTEX_HEAD,i.get(p.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:d,transformedUv:h,readDepth:f}}var Bx=class extends ps{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Eb(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=Eb.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,n=new Map,s=new Set,a=0,o=0,l=0,u=!1,d=!1;for(let h of this.effects)if(h.blendMode.blendFunction===Ot.SKIP)l|=h.getAttributes()&ba.DEPTH;else if((l&h.getAttributes()&ba.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+a++,m=Rre(f,h,t,i,r,n,l);if(o+=m.varyings.length,u=u||m.transformedUv,d=d||m.readDepth,h.extensions!==null)for(let p of h.extensions)s.add(p)}let c=/\bblend\b/g;for(let h of i.values()){let f=h.getShaderCode().replace(c,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if((l&ba.DEPTH)!==0){if(d){let h=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,h+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(u){let h=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,h+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")}else r.set("UV","vUv");t.forEach((h,f,m)=>m.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=wo){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,n){for(let s of this.effects)s.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==Dr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Ire=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],wk=class extends ps{constructor({resolutionScale:e=.5,width:t=ln.AUTO_SIZE,height:i=ln.AUTO_SIZE,kernelSize:r=nM.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Ei(1,1,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new ln(this,t,i,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new g3,this.ditheredBlurMaterial=new g3,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=Ire[this.kernelSize],d=this.blurMaterial,c=t,h,f;for(this.fullscreenMaterial=d,h=0,f=u.length-1;h<f;++h){let m=(h&1)===0?o:l;d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(m),e.render(s,a),c=m}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(s,a)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height;this.renderTargetA.setSize(r,n),this.renderTargetB.setSize(r,n),this.blurMaterial.setSize(r,n),this.ditheredBlurMaterial.setSize(r,n)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Dr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===yt&&(this.renderTargetA.texture.encoding=yt,this.renderTargetB.texture.encoding=yt))}static get AUTO_SIZE(){return ln.AUTO_SIZE}},zre=class extends ps{constructor({width:e=ln.AUTO_SIZE,height:t=ln.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new rre(n,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Ei(1,1,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new ln(this,e,t);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==Dr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Bre=class extends ps{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new cy(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,c=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,d,4294967295),a.stencil.setClear(c),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Vo=class extends ps{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==Dr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},kx=1/1e3,kre=1e3,Nre=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*kx}getFixedDelta(){return this.fixedDelta*kx}setFixedDelta(e){return this.fixedDelta=e*kre,this}getElapsed(){return this.elapsed*kx}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Fre=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:n}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,n,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new d0,this.depthTexture=null,this.passes=[],this.timer=new Nre,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){let t=e.getSize(new q),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Dr&&e.outputEncoding===yt&&(this.inputBuffer.texture.encoding=yt,this.outputBuffer.texture.encoding=yt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(let n of this.passes)n.initialize(e,i,r)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new tA;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Uu,e.type=bu):e.type=$o,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){let n=this.renderer,s=n===null?new q:n.getDrawingBufferSize(new q),a={minFilter:Xt,magFilter:Xt,stencilBuffer:t,depthBuffer:e,type:i},o;return r>0?(o=Number(Ep.replace(/\D+/g,""))<138?new Z8(s.width,s.height,a):new Ei(s.width,s.height,a),o.ignoreDepthForMultisampleCopy=!1,o.samples=r):o=new Ei(s.width,s.height,a),i===Dr&&n!==null&&n.outputEncoding===yt&&(o.texture.encoding=yt),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}addPass(e,t){let i=this.passes,r=this.renderer,n=r.getDrawingBufferSize(new q),s=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(n.width,n.height),e.initialize(r,s,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let o=this.createDepthTexture();for(e of i)e.setDepthTexture(o)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(n,s)=>n||s.needsDepthTexture;t.reduce(r,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,n=this.outputBuffer,s=!1,a,o,l;e===void 0&&(e=this.timer.update().getDelta());for(let u of this.passes)u.enabled&&(u.render(t,r,n,e,s),u.needsSwap&&(s&&(i.renderToScreen=u.renderToScreen,a=t.getContext(),o=t.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),i.render(t,r,n,e,s),o.setFunc(a.EQUAL,1,4294967295)),l=r,r=n,n=l),u instanceof Bre?s=!0:u instanceof hre&&(s=!1))}setSize(e,t,i){let r=this.renderer;if(e===void 0||t===void 0){let s=r.getSize(new q);e=s.width,t=s.height}r.setSize(e,t,i);let n=r.getDrawingBufferSize(new q);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},nM={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Ure=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,Hre=class extends La{constructor({blendFunction:e=Ot.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:n=1,width:s=ln.AUTO_SIZE,height:a=ln.AUTO_SIZE,kernelSize:o=nM.LARGE}={}){super("BloomEffect",Ure,{blendFunction:e,uniforms:new Map([["map",new Ze(null)],["intensity",new Ze(n)]])}),this.renderTarget=new Ei(1,1,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new zre({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new wk({resolutionScale:r,width:s,height:a,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===yt&&(this.renderTarget.texture.encoding=yt))}},Vre="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",jre=class extends La{constructor({blendFunction:e=Ot.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",Vre,{blendFunction:e,uniforms:new Map([["brightness",new Ze(t)],["contrast",new Ze(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Gre="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",Wre=class extends La{constructor(e=Ot.NORMAL){super("ColorAverageEffect",Gre,{blendFunction:e})}},Xre="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",Yre="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",qre=class extends La{constructor({blendFunction:e=Ot.NORMAL,offset:t=new q(.001,5e-4)}={}){super("ChromaticAberrationEffect",Xre,{vertexShader:Yre,blendFunction:e,attributes:ba.CONVOLUTION,uniforms:new Map([["offset",new Ze(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Qre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,Zre=class extends La{constructor(e,{blendFunction:t=Ot.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:n=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,width:l=ln.AUTO_SIZE,height:u=ln.AUTO_SIZE}={}){super("DepthOfFieldEffect",Qre,{blendFunction:t,attributes:ba.DEPTH,uniforms:new Map([["nearColorBuffer",new Ze(null)],["farColorBuffer",new Ze(null)],["nearCoCBuffer",new Ze(null)],["scale",new Ze(1)]])}),this.camera=e,this.renderTarget=new Ei(1,1,{minFilter:Xt,magFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Vo(new Xie(e));let d=this.cocMaterial;d.focusDistance=n,d.focusRange=a,i!==void 0&&(d.worldFocusDistance=i),r!==void 0&&(d.worldFocusRange=r),this.blurPass=new wk({kernelSize:nM.MEDIUM,width:l,height:u});let c=this.blurPass.getResolution();c.addEventListener("change",f=>this.setSize(c.getBaseWidth(),c.getBaseHeight())),this.maskPass=new Vo(new sre(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=xk.MULTIPLY,h.colorChannel=vk.GREEN,this.bokehNearBasePass=new Vo(new vg(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Vo(new vg(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Vo(new vg(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Vo(new vg(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return Mb(-i,t.near,t.far)}setDepthTexture(e,t=wo){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(a=>a.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(a=>a.setSize(r,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(r,n))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,Dr),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===yt&&(this.renderTarget.texture.encoding=yt,this.renderTargetNear.texture.encoding=yt,this.renderTargetFar.texture.encoding=yt,this.renderTargetMasked.texture.encoding=yt))}};new T;new Ke;var Kre="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",Jre=class extends La{constructor({blendFunction:e=Ot.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",Kre,{blendFunction:e,uniforms:new Map([["hue",new Ze(new T)],["saturation",new Ze(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new dt;var $re=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,ene=class extends La{constructor({blendFunction:e=Ot.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",$re,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},tne="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",ine=class extends La{constructor(e=30){super("PixelationEffect",tne,{uniforms:new Map([["active",new Ze(!1)],["d",new Ze(new q)]])}),this.resolution=new q,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new T;new T;var w3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",_3="data:image/png;base64,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",rne="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",nne="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Oc={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},sne=class extends La{constructor({preset:e=Oc.MEDIUM,edgeDetectionMode:t=rM.COLOR,predicationMode:i=yk.DISABLED}={}){super("SMAAEffect",rne,{vertexShader:nne,blendFunction:Ot.NORMAL,attributes:ba.CONVOLUTION|ba.DEPTH,uniforms:new Map([["weightMap",new Ze(null)]])});let r,n;arguments.length>1&&(r=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Ei(1,1,{minFilter:Xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new cy(!0,!1,!1),this.clearPass.overrideClearColor=new dt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Vo(new $ie),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new Vo(new lre);let s=new JR;s.onLoad=()=>{let a=new Gr(r);a.name="SMAA.Search",a.magFilter=mi,a.minFilter=mi,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let o=new Gr(n);o.name="SMAA.Area",o.magFilter=Xt,o.minFilter=Xt,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),r!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(r=new Image,n=new Image,r.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),r.src=w3,n.src=_3),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case Oc.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Oc.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Oc.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case Oc.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=wo){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return w3}static get areaImageDataURL(){return _3}},ane=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,yg={DEFAULT:0,ESKIL:1},one=class extends La{constructor({blendFunction:e=Ot.NORMAL,technique:t=yg.DEFAULT,eskil:i=!1,offset:r=.5,darkness:n=.5}={}){super("VignetteEffect",ane,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Ze(r)],["darkness",new Ze(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===yg.ESKIL}set eskil(e){this.technique=e?yg.ESKIL:yg.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},_o=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Ot.NORMAL}},lne=class extends _o{constructor(){super(Hre),this.blendFunction=Ot.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},une=class extends _o{constructor(){super(jre)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},cne=class extends _o{constructor(){super(qre),this.effect.offset=new q(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},hne=class extends _o{constructor(){super(Wre)}},dne=class extends _o{constructor(){super(Jre),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},fne=class extends _o{constructor(){super(ene),this.blendFunction=Ot.OVERLAY}},pne=class extends _o{constructor(){super(one)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},mne=class extends _o{constructor(e){super(Zre,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},gne=class extends _o{constructor(){super(ine)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},vne=class extends ps{constructor(e,t,i){super("TransmissionPass",e,t),this.copyPass=new d0(i.transmissionRenderTarget),this.depthPass=new y3(e,t,{renderTarget:i.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(e){this.copyPass=new d0(e.transmissionRenderTarget),this.depthPass=new y3(this.scene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.scene=e}render(e,t,i){let r=this.camera.layers.mask;this.copyPass.render(e,t,i),this.camera.layers.disable(3),this.depthPass.render(e,t,i),e.shadowMap.needsUpdate=!1,e.shadowMap.autoUpdate=!1;let n=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(n),e.render(this.scene,this.camera),this.camera.layers.mask=r}},b3=new Mu,yne=new Gi({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `}),Nx=class extends ps{constructor(e,t){super("OpaquePass",e!=null?e:b3,t),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(e){this.camera=e}setScene(e){this.scene=e!=null?e:b3}getScene(){return this.scene}render(e,t){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof qr&&(this.originalMaterials.set(r.id,r.material),r.material=yne)}),this.camera.layers.enable(8),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0;let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach((r,n)=>{let s=this.scene.getObjectById(n);s&&(s.material=r)})}};function S3(e,t){return t&&t.enabled&&e.push(t.effect),e}var xne=class extends Kr{constructor(e){super(),this.postprocessingState=k_.defaultData,this._scene=new Mu,this._camera=new Gu,this.effects=new Map,this._renderToScreen=!0,this.clock=new V8,this.renderer=e,this.debug=!1,this.effects.set("bloom",new lne),this.effects.set("chromaticAberration",new cne),this.effects.set("vignette",new pne),this.effects.set("noise",new fne),this.effects.set("colorAverage",new hne),this.effects.set("hueSaturation",new dne),this.effects.set("brightnessContrast",new une),this.effects.set("depthOfField",new mne),this.effects.set("pixelation",new gne),this.effectComposer=new Fre(this.renderer),this.opaquePass=new Nx(this.scene,this.camera),this.transmissionPass=new vne(this.scene,this.camera,this.renderer),this.helperPass=new Nx(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new cy(!1,!0,!1),this.helperPassOnTop=new Nx(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let e=new sne({preset:Oc.ULTRA,edgeDetectionMode:rM.COLOR}),t=()=>{e.removeEventListener("load",t),this.dispatchEvent({type:"smaaloaded"})};e.addEventListener("load",t),e.edgeDetectionMaterial.predicationMode=yk.DEPTH,e.edgeDetectionMaterial.edgeDetectionThreshold=.05,e.edgeDetectionMaterial.predicationThreshold=.002,e.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new Bx(this.camera,e)}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let i=[this.effects.get("pixelation")].reduce(S3,[]);i.length>0&&(this.uvEffectPass=new Bx(this.camera,...i),this.effectComposer.addPass(this.uvEffectPass));let r=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(S3,[]);r.length>0&&(this.effectPass=new Bx(this.camera,...r),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let e=new q;this.renderer.getDrawingBufferSize(e),this._rt=new Ei(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:rp,wrapT:rp}),this._rt.samples=0,this._savePass=new d0(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?(t.removePass(this._savePass),t.passes[t.passes.length-1].renderToScreen=!0,t.autoRenderToScreen=!0):(t.autoRenderToScreen=!1,t.passes[t.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),t.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let n of Object.entries(i)){let s=n[1],a=this.effects.get(n[0]);if(a){a.enabled!==s.enabled&&(r=!0),a.enabled=s.enabled;for(let[o,l]of Object.entries(s))a[o]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof vt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof vt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},A3=new Gr,wne=class extends UR{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new q,this.pipeline=new xne(this),this.overrideTransmission=e==null?void 0:e.overrideTransmission,this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.setPixelRatio=r=>{this._pixelRatio=r,t(r)},this.setSize=(r,n,s=!0)=>{var a,o,l;(this.viewportWidth!==r||this.viewportHeight!==n)&&(this.viewportWidth=r,this.viewportHeight=n,i(r,n,s),(a=this.normalRenderTarget)==null||a.setSize(r*this._pixelRatio,n*this._pixelRatio),(o=this.transmissionRenderTarget)==null||o.setSize(r*this._pixelRatio/2,n*this._pixelRatio/2),(l=this.transmissionDepthTarget)==null||l.setSize(r*this._pixelRatio/2,n*this._pixelRatio/2),this.pipeline.resize(r,n,s))}}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Ei(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:Cp,magFilter:Xt,wrapS:Sn,wrapT:Sn,depthBuffer:!1}),this.transmissionDepthTarget=new Ei(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:mi,magFilter:mi,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Ei(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:mi,magFilter:mi,type:el,depthTexture:new tA(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t){this.normalRenderTarget&&(this.setClearColor(0),t.layers.enable(8),t.layers.disable(0),t.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),t instanceof Gu?gx.uniforms.depthContrast.value=(t.far-t.near)/1e4:gx.uniforms.depthContrast.value=1,e.overrideMaterial=gx,this.render(e,t),this.setClearColor(e.bgColor,e.bgColor.a),this.setRenderTarget(null),e.overrideMaterial=null,t.layers.enable(0),t.layers.enable(3))}renderSplineScene(e,t,i,r,n){this.setClearColor(e.bgColor,e.bgColor.a),i.penumbraSize.forEach((a,o)=>{ni.penumbraSize.value[o]=a}),ni.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?ni.resolution.value.set(this.resolution.x,this.resolution.y):ni.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(ni.normalRenderTarget.value=this.overrideNormal,ni.normalRenderTargetDepth.value=A3):e.needsNormal()&&(this.createNormalRenderTarget(),ni.normalRenderTarget.value=this.normalRenderTarget.texture,ni.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(e,t));let s=!1;if(this.overrideTransmission!==void 0)ni.transmissionRenderTarget.value=this.overrideTransmission,ni.transmissionRenderTargetDepth.value=A3,this.pipeline.setTransmissionPassEnabled(!1);else{let a=e.needsTransmission();a&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),ni.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,ni.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(a)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=n,this.pipeline.scene=e,this.pipeline.camera=t,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==e.postprocessing&&this.pipeline.updatePostprocessing(e.postprocessing),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),this.pipeline.render()}dispose(){var e,t,i,r,n;super.dispose(),this.pipeline.dispose(),(e=this.transmissionRenderTarget)==null||e.dispose(),(t=this.transmissionDepthTarget)==null||t.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(n=(r=this.normalRenderTarget)==null?void 0:r.depthTexture)==null||n.dispose()}},_ne=class{constructor(e,t={}){this.sharedAssets=new BB(e.shared,t),this.scene=new Pie(e.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.dispose()}},bne=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function Sne(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function Fx(e){return e==="SubdivObject"||e==="NonParametric"?e:"Mesh"}function Ane(e,t){let i={};return e.traverseEntity(r=>{var l;if(r.type!=="Mesh"||!("material"in r)||!r.visible||!(r instanceof qr)||Array.isArray(r.material)||r&&r.interaction&&r.interaction.states.length>0)return;let n=r.parent;for(;n;){if(n instanceof qr&&n.interaction&&n.interaction.states.length>1)return;n=n.parent}let s=r.material.uuid,a=t.shared.materials[s];if(a){if(!_a.isMergable(a))return}else{let u=(l=t.scene.objects.get(r.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!_a.isMergable(u.material))return;s=_a.getHash(u.material)}}i[s]||(i[s]={});let o=i[s][Fx(r.objectType)];if(o){if(o.push(r),r.cloner)for(let u of r.cloner.children)o.push(u)}else if(i[s][Fx(r.objectType)]=[r],r.cloner)for(let u of r.cloner.children)i[s][Fx(r.objectType)].push(u)}),i}function Mne(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let n=r.length;n>t&&(t=n)})}),t}function Ene(e,t){let i=Ane(t,e),r=Mne(i),n=new Array(r),s=0,a=new Array(r),o=0,l=new Array(r),u=0,d=new Array(r),c=0;for(let h of Object.values(i))for(let f of Object.values(h)){if(o=0,u=0,f.forEach(p=>{p instanceof qr&&(a[o++]=p.geometry.clone(),l[u++]=p)}),u<2)continue;for(let p=0;p<u;p++)l[p].updateWorldMatrix(!0,!1),a[p].applyMatrix4(l[p].matrixWorld),l[p].matrixWorld.determinant()<0&&Sne(a[p]);let m=Z_(a.slice(0,o),!1);if(m){let p;switch(f[0].objectType){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),p=new Mr(m,l[0].material);break}default:{p=new Mr(m,l[0].material);break}}p.castShadow=l[0].castShadow,p.receiveShadow=l[0].receiveShadow,t.add(p);let g=v=>{c=0;for(let y of v)y.children&&g(y.children),y instanceof qr&&(Array.isArray(y.material)||i[y.material.uuid]&&i[y.material.uuid][y.objectType]&&i[y.material.uuid][y.objectType].length>1||(d[c++]=y));for(let y=0;y<c;y++)t.attach(d[y])};for(let v=0;v<u;v++){let y=l[v];g(y.children),n[s++]=y}}}for(let h=0;h<s;h++)n[h].removeFromParent()}var Tne=new q;function Cne(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}function Dne(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var Pne=class{constructor(e,{autoRender:t=!1}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!0,this.autoRender=!1,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=i=>{var r,n,s,a;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=i,this.dt=this.time-this._lastTime,this._lastTime=this.time,(r=this._perfs)==null||r.start(),!(!this.autoRender&&this._skipRender)&&(this._skipRender=(s=(n=this._controls)==null?void 0:n.update(this.dt))!=null?s:!0,this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager),(a=this._perfs)==null||a.end()))},this._resize=VI(()=>{var i,r,n;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=Tne.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._viewportMode!==1&&((i=this._frameView)==null||i.updateViewport()),this._camera&&((r=this._frameView)==null||r.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&this._viewportMode===1&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),(n=this._playmode)==null||n.resize(),this.requestRender())},10),this.canvas=e,this.autoRender=t,window.location.search.includes("perfs")&&(this._perfs=new bne({x:10,y:10})),HZ(e)}async load(e,t){Cne(e);let i=await(await fetch(e,t)).arrayBuffer();await this.start(i)}async start(e,{interactive:t=!0}={}){var n;if(this.disposed)return;let i=await bee(e);MD(i)&&await eee(),Dne(i)&&await QJ(),this._playmode&&this._playmode.deactivate(),this._controls&&this._controls.dispose(),(n=this._scene)==null||n.dispose();let r=new _ne(i);if(this._scene=r.scene,this._sharedAssetsManager=r.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let s=performance.now();Ene(i,r.scene);let a=performance.now();console.log("Merged geometries in ",a-s," ms")}if(MD(i)&&this._scene.traverse(s=>{Ii(s)&&s.recomputeBoolean()}),this._sharedAssetsManager.setOnImageLoad(()=>{this.requestRender()}),Nte(i.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new wne({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=i.scene.environment.ambientLight.softShadows?qS:wR,X$(i.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let s=Object.values(i.frames)[0];if(s.preset==="fullscreen"){this._viewportMode=1;let{width:a,height:o}=window.getComputedStyle(this.canvas);this.canvas.parentElement&&(a==="300px"||a==="auto")?(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"):this._viewportWidth=this.canvas.clientWidth,this.canvas.parentElement&&(o==="150px"||o==="auto")?(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%"):this._viewportHeight=this.canvas.clientHeight}else this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`;this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Hte(this._renderer,this._camera,new q(this._viewportWidth,this._viewportHeight),new q(window.innerWidth,window.innerHeight))}if(t&&(this._scene.updateMatrixWorld(!0),this._controls=new jie(i,this._scene,this._renderer,this.requestRender,!0),this._playmode=new Ute(this._renderer,this._scene,this._camera,i.scene.publish.stopRaycast,i.scene.publish.preventScroll,this)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let s=!0;this._resizeObserver=new ResizeObserver(()=>{if(s){s=!1;return}this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize()}),this._resizeObserver.observe(this.canvas.parentElement)}this._rafId===void 0?this.render(performance.now()):this.requestRender()}findObjectById(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByName(e);return this._createProxyObject(t)}getSplineEvents(){var e;return(e=this._playmode)==null?void 0:e.splineEvents}emitEvent(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEvent(e)}emitEventReverse(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEventReverse(e)}addEventListener(e,t){var i;(i=this._renderer)==null||i.domElement.addEventListener(e,t)}removeEventListener(e,t){var i;(i=this._renderer)==null||i.domElement.removeEventListener(e,t)}setZoom(e){var t,i;((t=this._controls)==null?void 0:t.orbitControls)instanceof vz&&((i=this._controls)==null||i.orbitControls.zoomOut(e))}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}dispose(){var e,t,i,r,n,s;this.disposed=!0,(e=this._playmode)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(a=>{kT.unsubscribe(a)}),(r=this._renderer)==null||r.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._resizeObserver&&this._resizeObserver.disconnect(),this.canvas.style.width="",this.canvas.style.height="",(s=this._controls)==null||s.dispose(),VZ(this.canvas)}_createProxyObject(e){if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(r){var n;(n=e.interaction)==null||n.emitEvent(r)},emitEventReverse(r){var n;(n=e.interaction)==null||n.emitEventReverse(r)}},i=kT(t,(r,n)=>{var s;typeof e[r]!="object"&&((s=Object.getOwnPropertyDescriptor(e,r))==null?void 0:s.writable)&&(e[r]=n),this.requestRender(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}},Lne=Object.defineProperty,f0=Object.getOwnPropertySymbols,_k=Object.prototype.hasOwnProperty,bk=Object.prototype.propertyIsEnumerable,M3=(e,t,i)=>t in e?Lne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,E3=(e,t)=>{for(var i in t||(t={}))_k.call(t,i)&&M3(e,i,t[i]);if(f0)for(var i of f0(t))bk.call(t,i)&&M3(e,i,t[i]);return e},One=(e,t)=>{var i={};for(var r in e)_k.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&f0)for(var r of f0(e))t.indexOf(r)<0&&bk.call(e,r)&&(i[r]=e[r]);return i};function Rne(e){return function(t){e.forEach(function(i){typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Sk={exports:{}},hy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ine=Zk,zne=Symbol.for("react.element"),Bne=Symbol.for("react.fragment"),kne=Object.prototype.hasOwnProperty,Nne=Ine.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fne={key:!0,ref:!0,__self:!0,__source:!0};function Ak(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kne.call(t,r)&&!Fne.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:zne,type:e,key:s,ref:a,props:n,_owner:Nne.current}}hy.Fragment=Bne;hy.jsx=Ak;hy.jsxs=Ak;Sk.exports=hy;const Une=Sk.exports.jsx,Hne=De.exports.forwardRef((e,t)=>{var i=e,{scene:r,style:n,onMouseDown:s,onMouseUp:a,onMouseHover:o,onKeyDown:l,onKeyUp:u,onStart:d,onLookAt:c,onFollow:h,onWheel:f,onLoad:m,autoRender:p=!1}=i,g=One(i,["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","autoRender"]);const v=De.exports.useRef(null),[y,x]=De.exports.useState(!0);return De.exports.useEffect(()=>{x(!0);let w;const _=[{name:"mouseDown",cb:s},{name:"mouseUp",cb:a},{name:"mouseHover",cb:o},{name:"keyDown",cb:l},{name:"keyUp",cb:u},{name:"start",cb:d},{name:"lookAt",cb:c},{name:"follow",cb:h},{name:"scroll",cb:f}];if(v.current){w=new Pne(v.current,{autoRender:p});async function b(){await w.load(r);for(let A of _)A.cb&&w.addEventListener(A.name,A.cb);x(!1),m==null||m(w)}b()}return()=>{for(let b of _)b.cb&&w.removeEventListener(b.name,b.cb);w.dispose()}},[r]),Une("canvas",E3({ref:Rne([t,v]),style:E3({display:y?"none":"block"},n)},g))}),Vne="/assets/dwyl_logo.41089b5b.png",jne="/assets/hero.e535d928.png",Gne=4,Wne=e=>{const[t,i]=De.exports.useState(!1),r=De.exports.useRef(null),n=De.exports.useRef(null),s=De.exports.useRef(null),a=De.exports.useRef(null),o=zl("(min-width: 1024px)"),l=()=>{e.onSceneLoad(),i(!0)};return De.exports.useEffect(()=>{if(t){const u=r.current,d=n.current,c=s.current,h=a.current,f=gt.timeline({delay:Gne});return f.from(u,{...J2,y:450}),f.from(d,{...J2,y:450},"<"),f.from(c,Qa,"<+=.4"),f.from(h,Qa,"<+=.1"),()=>{f.kill()}}},[t]),De.exports.useEffect(()=>{o||l()},[]),Je("div",{className:"flex max-h-screen min-h-screen w-full flex-col",children:[Je("div",{className:"z-10 flex h-fit flex-row flex-nowrap items-center justify-between pl-10 pr-10 pt-10",children:[Q("div",{className:"h-12 w-24",children:Q("img",{className:"max-h-full max-w-full",src:Vne})}),Q("div",{className:"flex h-12 w-24 items-center justify-end"})]}),o?Q("div",{className:"absolute h-full w-full",children:Q(Hne,{scene:"https://prod.spline.design/MWszCFbtlIdlZM4d/scene.splinecode",onStart:()=>l()})}):Q("img",{className:"ml-auto mr-auto mt-12 h-auto w-[35vh]",src:jne}),Q("div",{className:"z-10 flex flex-1 flex-col justify-end lg:flex-row lg:justify-start",children:Je("div",{className:"mb-[5%] pr-5 pl-5 text-center lg:mb-0 lg:flex lg:w-1/2 lg:flex-col lg:justify-center lg:pr-0 lg:pl-[10%]",children:[Q("div",{className:"relative flex h-[2.5rem] w-full flex-row justify-center overflow-hidden md:h-[3.5rem] lg:justify-start 2xl:h-[5rem]",children:Q("p",{className:"absolute text-4xl font-semibold leading-none tracking-tight text-green-900 md:text-[3.5rem] 2xl:text-[5rem]",ref:r,children:"software"})}),Q("div",{className:"relative flex h-[2.5rem] w-full flex-row justify-center overflow-hidden md:h-[3.5rem] lg:justify-start 2xl:h-[5rem]",children:Q("p",{className:"absolute text-4xl font-semibold leading-none tracking-tight text-green-900/50 md:text-[3.5rem] 2xl:text-[5rem]",ref:n,children:"made simple."})}),Je("div",{className:"mt-5 text-base md:text-lg",children:[Q("div",{className:"relative flex h-[2.5rem] w-full flex-row justify-center overflow-hidden md:h-[20px] lg:h-[45px] lg:justify-start 2xl:h-[1.5rem]",children:Q("p",{className:"absolute h-[1.5rem] leading-5 text-gray-600 lg:text-start 2xl:text-[1.5rem]",ref:s,children:"we offer software development services and training."})}),Q("div",{className:"relative flex h-[2.5rem] w-full flex-row justify-center overflow-hidden md:h-[2.5rem] lg:justify-start 2xl:h-[2rem]",children:Q("p",{className:"absolute mt-2 h-[1.5rem] font-thin text-gray-600 2xl:text-[1.3rem]",ref:a,children:"based in London."})})]})]})})]})};gt.registerPlugin(Et);const Xne=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=zl("(min-width: 1024px)");return De.exports.useLayoutEffect(()=>{if(i){const n=e.current,s=t.current;let a=gt.from(n,{scrollTrigger:{trigger:n,scrub:!0,pin:!0,start:"top top",end:`+=${200}%`},opacity:1}),o=gt.timeline({scrollTrigger:{trigger:n,start:"top top",end:`${200}% top`,scrub:!0,toggleActions:"play reverse play reverse"}});return o.to(s,{opacity:1,duration:.5}).to(s,{opacity:0,duration:.25}),()=>{a.kill(),o.kill()}}},[]),i?Q("div",{className:"flex h-auto w-screen flex-row lg:h-screen",ref:e,children:Q("div",{className:"absolute flex h-full w-full items-center justify-center",children:Q("div",{ref:t,className:"text-center opacity-100 lg:opacity-0 xl:w-4/5",children:Je("h1",{className:"mr-[15%] ml-[15%] text-base font-semibold leading-4 text-stone-800 md:text-2xl xl:text-3xl 2xl:text-4xl",children:[Q("span",{children:"by iterating over these "}),Q("span",{className:"text-[#1DAA6F]",children:"3 simple steps "}),Q("span",{children:"we maintain a "}),Q("span",{className:"text-[#1DAA6F]",children:"tight feedback loop "}),Q("span",{children:"between the people "}),Q("span",{className:"bg-gradient-to-r from-[#B12A2A] to-[#1D82A1] bg-clip-text text-transparent",children:"building"}),Q("span",{children:" and the people "}),Q("span",{className:"bg-gradient-to-r from-[#AC3EC8] to-[#FF630C] bg-clip-text text-transparent",children:"using"}),"."]})})})}):Q("div",{className:"mr-6 ml-6 text-center sm:mr-[15%] sm:ml-[15%]",children:Je("h1",{className:"text-base font-semibold leading-4 text-stone-800 md:text-2xl",children:[Q("span",{children:"by iterating over these "}),Q("span",{className:"text-[#1DAA6F]",children:"3 simple steps "}),Q("span",{children:"we maintain a "}),Q("span",{className:"text-[#1DAA6F]",children:"tight feedback loop "}),Q("span",{children:"between the people "}),Q("span",{className:"bg-gradient-to-r from-[#B12A2A] to-[#1D82A1] bg-clip-text text-transparent",children:"building"}),Q("span",{children:" and the people "}),Q("span",{className:"bg-gradient-to-r from-[#AC3EC8] to-[#FF630C] bg-clip-text text-transparent",children:"using"}),"."]})})},Yne=e=>{const[t,i]=De.exports.useState(0),[r,n]=De.exports.useState(!1),s=e.done,a=De.exports.useRef(null),o=De.exports.useRef(null),l=De.exports.useRef(null);return De.exports.useEffect(()=>{document.body.style.overflow="hidden"},[]),De.exports.useEffect(()=>{const u=setInterval(()=>{i(t+(1-t)*.1)},500*Math.random());return()=>{clearInterval(u)}},[t]),De.exports.useEffect(()=>{s&&!r&&(i(1),n(!0))},[s]),De.exports.useEffect(()=>{if(r){const u=a.current,d=o.current,c=l.current,h=gt.timeline();h.to(d,{delay:1,yPercent:-100,ease:"power2.out"}),h.to(c,{yPercent:-100,ease:"power2.out"},"=<"),h.add(()=>{document.body.style.overflow="unset"}),h.to(u,{opacity:0,duration:1.5,ease:"power4.in"},">0.5"),h.to(u,{display:"none"},">")}},[r]),Je("div",{className:"fixed z-50 h-full w-full",ref:a,children:[Q("div",{className:"absolute h-full w-full bg-white"}),Q("div",{style:{opacity:1-t},className:"absolute  h-full  w-full bg-neutral-800 transition-[opacity] duration-700 ease-out"}),Q("div",{className:"absolute flex h-full w-full flex-col items-center justify-center  font-montserrat ",children:Je("div",{className:"relative flex h-[4.5rem] w-full flex-row justify-center overflow-hidden",children:[Q("h1",{ref:o,style:{opacity:t},className:"absolute text-7xl font-extralight text-black",children:Math.floor(t*100)+"%"}),Q("h1",{ref:l,style:{opacity:1-t},className:"absolute text-7xl font-extralight text-white",children:Math.floor(t*100)+"%"})]})})]})};gt.registerPlugin(Et);const qne=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=De.exports.useRef(null),r=De.exports.useRef(null),n=zl("(min-width: 1024px)");return De.exports.useLayoutEffect(()=>{if(n){const s=e.current,a=t.current,o=i.current,l=r.current;let u=gt.timeline();u.from(a,{opacity:0,scrollTrigger:{trigger:s,scrub:!0,start:"30% center",end:"60% center"}}),u.from(a,{scrollTrigger:{trigger:s,scrub:!0,start:"30% center",end:"bottom 80%"},translateY:"-100vh",ease:"none"});let d=gt.from(o,{...Qa,scrollTrigger:{trigger:s,start:"bottom 80%"}}),c=gt.from(l,{...Qa,scrollTrigger:{trigger:s,start:"bottom 80%"},delay:.2});return()=>{u.kill(),d.kill(),c.kill()}}},[]),Je("div",{className:"pt-40 md:pt-52 lg:pt-[150vh] 2xl:flex 2xl:flex-col 2xl:items-center 2xl:justify-center",ref:e,children:[Je("div",{className:"text-center text-xl font-bold text-gray-700 md:text-4xl 2xl:text-5xl",children:[Q("span",{children:"we "}),Q("span",{children:"can"}),Je("span",{className:"mr-[-1.5rem]",children:[Q("span",{className:"mr-2 inline-block translate-y-[10px] translate-x-[8px] rotate-[12deg] md:translate-y-[20px]",children:"make"}),Q("span",{className:"inline-block translate-x-[-51px] translate-y-[-17px] rotate-[335deg] text-teal-400 md:translate-x-[-70px] md:translate-y-[-16px] 2xl:translate-x-[-92px] 2xl:translate-y-[-30px]",ref:t,children:"be"})]}),Q("span",{children:"your "}),Q("span",{children:"MVP*"})]}),Je("div",{className:"mt-10 pr-16 text-right text-xs font-semibold md:mt-20 md:text-sm 2xl:w-[1400px] 2xl:text-xl",children:[Q("p",{className:"text-teal-400",ref:i,children:"* most valuable player"}),Q("p",{className:"text-gray-700",ref:r,children:"* minimum viable product"})]})]})},T3="/assets/open_source_off.78c7fba0.png",Qne="/assets/open_source_on.f6e9f4ef.png",Zne=()=>{const e=De.exports.useRef(null),t=zl("(min-width: 1024px)");return De.exports.useEffect(()=>{const i=e.current,r=gt.fromTo(i,{opacity:1},{opacity:0,duration:.75,paused:!0});i&&(i.addEventListener("mouseover",()=>r.play()),i.addEventListener("mouseout",()=>r.reverse()))},[]),Je("div",{className:"flex flex-col items-center pl-5 pr-5",children:[t?Je("div",{className:"flex h-[36rem] w-full cursor-pointer flex-col items-center justify-center",onClick:()=>window.open("https://github.com/dwyl","_blank"),children:[Q("img",{className:"absolute z-10 h-[36rem] w-auto object-contain",src:T3,ref:e}),Q("img",{className:" absolute z-0 h-[36rem] w-auto object-contain",src:Qne})]}):Q("img",{className:"h-auto w-full",src:T3}),Je("h2",{className:"mt-4 text-center text-2xl font-semibold md:text-4xl lg:text-6xl 2xl:text-7xl",children:[Q("span",{className:"text-[#248680]",children:"we are full on "}),Q("span",{className:"bg-gradient-to-r from-[#F97794] to-[#623AA2] bg-clip-text text-transparent",children:"open-source"})]}),Q("p",{className:"mt-4 text-center text-sm font-light md:text-lg lg:text-xl 2xl:text-2xl",children:"we believe learning sould be a shared and accesible experience."}),Q("p",{className:"text-center text-sm font-light md:text-lg lg:text-xl 2xl:text-2xl",children:"we create and maintain over 200 open-source repositories on GitHub."}),!t&&Q("button",{type:"button",className:"relative mt-16 inline-block h-10 max-h-full w-28 max-w-full cursor-pointer rounded-full border border-stone-800 px-2.5 py-2.5 text-xs leading-tight text-stone-800 transition  duration-150 ease-in-out hover:bg-stone-800 hover:bg-opacity-10 hover:shadow-lg active:bg-stone-800 active:bg-opacity-20 active:shadow-lg",children:"check it out"})]})},Kne="/assets/emf.fc2b020b.png",Jne="/assets/ic.43b78bcc.png",$ne="/assets/oxford.54519b9a.webp",ese="/assets/smg.a9d0585c.png",tse=()=>Je(ip,{children:[Q("h2",{className:"mb-20 text-center text-[40px] font-semibold text-[#248680] md:text-[50px] lg:text-6xl 2xl:text-8xl",children:"our porfolio"}),Je("div",{className:"flex w-full flex-col items-center",children:[Je("div",{className:"lg:flex",children:[Je("div",{className:"relative h-auto w-full overflow-hidden rounded-[30px] bg-gradient-to-br from-[#3EFB89] via-[#cc5e5e] to-[#FD6D6D] sm:w-[350px] lg:m-5 xl:w-[450px]",children:[Q("img",{className:"absolute translate-x-[-55px] rotate-[20deg] opacity-30 blur-[2px]",src:ese}),Je("div",{className:"relative flex h-full flex-col p-6",children:[Q("h4",{className:"text-2xl font-semibold text-white xl:text-3xl 2xl:text-4xl",children:"The Science Museum Group"}),Q("p",{className:"mt-2 text-xs font-normal text-white xl:text-sm 2xl:text-base",children:"more than 250k artefacts, made accessible and searcheable."}),Q("div",{className:"mt-16 flex h-full flex-col justify-end",children:Q("button",{onClick:()=>window.open("https://github.com/TheScienceMuseum/collectionsonline","_blank"),type:"button",className:"relative inline-block h-10 max-h-full w-24 max-w-full cursor-pointer rounded-full border border-white  px-2.5 py-2.5 text-xs leading-tight text-white transition  duration-150 ease-in-out hover:bg-white hover:bg-opacity-10 hover:shadow-lg active:bg-white active:bg-opacity-50 active:shadow-lg",children:"check code"})})]})]}),Je("div",{className:"relative mt-12 h-auto w-full overflow-hidden rounded-[30px] bg-gradient-to-br from-[#3EFB89] to-[#6A5BC5] sm:w-[350px] lg:m-5 xl:w-[450px]",children:[Q("img",{className:"absolute translate-x-[95px] translate-y-[3px]  rotate-[344deg] opacity-30",src:Jne}),Je("div",{className:"relative flex h-full flex-col p-6",children:[Q("h4",{className:"text-2xl font-semibold text-white xl:text-3xl 2xl:text-4xl",children:"Inclusive Classrooms"}),Q("p",{className:"mt-2 text-xs font-normal text-white xl:text-sm 2xl:text-base",children:"automating data collection means our TA\u2019s can get on with what really matters."}),Q("div",{className:"mt-16 flex h-full flex-col justify-end",children:Q("button",{onClick:()=>window.open("https://github.com/InclusiveClassrooms/skills-wheel","_blank"),type:"button",className:"relative inline-block h-10 max-h-full w-24 max-w-full cursor-pointer rounded-full border border-white  px-2.5 py-2.5 text-xs leading-tight text-white transition  duration-150 ease-in-out hover:bg-white hover:bg-opacity-10 hover:shadow-lg active:bg-white active:bg-opacity-50 active:shadow-lg",children:"check code"})})]})]})]}),Je("div",{className:"lg:flex",children:[Je("div",{className:"relative mt-12 h-auto w-full overflow-hidden rounded-[30px] bg-gradient-to-br from-[#FF9190] to-[#6A5BC5] sm:w-[350px] lg:m-5 xl:w-[450px]",children:[Q("img",{className:"absolute translate-x-[95px] translate-y-[40px]  rotate-[344deg] opacity-30",src:Kne}),Je("div",{className:"relative flex h-full flex-col p-6",children:[Q("h4",{className:"text-2xl font-semibold text-white xl:text-3xl 2xl:text-4xl",children:"The Ellen MacArthur Foundation"}),Q("p",{className:"mt-2 text-xs font-normal text-white xl:text-sm 2xl:text-base",children:"we increased community engagement with an exclusive social network."}),Q("div",{className:"mt-16 flex h-full flex-col justify-end",children:Q("button",{onClick:()=>window.open("https://ellenmacarthurfoundation.org/","_blank"),type:"button",className:"relative inline-block h-10 max-h-full w-24 max-w-full cursor-pointer rounded-full border border-white  px-2.5 py-2.5 text-xs leading-tight text-white transition  duration-150 ease-in-out hover:bg-white hover:bg-opacity-10 hover:shadow-lg active:bg-white active:bg-opacity-50 active:shadow-lg",children:"visit site"})})]})]}),Je("div",{className:"relative mt-12 h-auto w-full overflow-hidden rounded-[30px] bg-gradient-to-br from-[#FF9190] to-[#FDC094] sm:w-[350px] lg:m-5 xl:w-[450px]",children:[Q("img",{className:"absolute translate-x-[-70px] translate-y-[10px]  rotate-[25deg] opacity-30",src:$ne}),Je("div",{className:"relative flex h-full flex-col p-6",children:[Q("h4",{className:"text-2xl font-semibold text-white xl:text-3xl 2xl:text-4xl",children:"Oxford Abstracts"}),Q("p",{className:"mt-2 text-xs font-normal text-white xl:text-sm 2xl:text-base",children:"fully restructuring of the conference abstract and paper management system."}),Q("div",{className:"mt-16 flex h-full flex-col justify-end",children:Q("button",{onClick:()=>window.open("https://oxfordabstracts.com/","_blank"),type:"button",className:"relative inline-block h-10 max-h-full w-24 max-w-full cursor-pointer rounded-full border border-white  px-2.5 py-2.5 text-xs leading-tight text-white transition  duration-150 ease-in-out hover:bg-white hover:bg-opacity-10 hover:shadow-lg active:bg-white active:bg-opacity-50 active:shadow-lg",children:"visit site"})})]})]})]})]}),Q("h4",{className:"mt-16 text-[15px] font-medium text-[#313131] md:text-[20px]",children:"and many more..."})]});var Mk={},dy={},sM={},Ux={},C3;function ise(){return C3||(C3=1,function(e){(function(t,i){i(e,De.exports,XS.exports)})(z3,function(t,i,r){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=m;var n=a(i),s=a(r);function a(y){return y&&y.__esModule?y:{default:y}}var o=Object.assign||function(y){for(var x=1;x<arguments.length;x++){var w=arguments[x];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(y[_]=w[_])}return y};function l(y,x){var w={};for(var _ in y)x.indexOf(_)>=0||!Object.prototype.hasOwnProperty.call(y,_)||(w[_]=y[_]);return w}function u(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}var d=function(){function y(x,w){for(var _=0;_<w.length;_++){var b=w[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,w,_){return w&&y(x.prototype,w),_&&y(x,_),x}}();function c(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var f=!1;function m(y){f=y}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){m(!0)}}))}catch{}function p(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return f?y:y.capture}function g(y){if("touches"in y){var x=y.touches[0],w=x.pageX,_=x.pageY;return{x:w,y:_}}var b=y.screenX,A=y.screenY;return{x:b,y:A}}var v=function(y){h(x,y);function x(){var w;u(this,x);for(var _=arguments.length,b=Array(_),A=0;A<_;A++)b[A]=arguments[A];var S=c(this,(w=x.__proto__||Object.getPrototypeOf(x)).call.apply(w,[this].concat(b)));return S._handleSwipeStart=S._handleSwipeStart.bind(S),S._handleSwipeMove=S._handleSwipeMove.bind(S),S._handleSwipeEnd=S._handleSwipeEnd.bind(S),S._onMouseDown=S._onMouseDown.bind(S),S._onMouseMove=S._onMouseMove.bind(S),S._onMouseUp=S._onMouseUp.bind(S),S._setSwiperRef=S._setSwiperRef.bind(S),S}return d(x,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(_){!this.props.allowMouseEvents||(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(_))}},{key:"_onMouseMove",value:function(_){!this.mouseDown||this._handleSwipeMove(_)}},{key:"_onMouseUp",value:function(_){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(_)}},{key:"_handleSwipeStart",value:function(_){var b=g(_),A=b.x,S=b.y;this.moveStart={x:A,y:S},this.props.onSwipeStart(_)}},{key:"_handleSwipeMove",value:function(_){if(!!this.moveStart){var b=g(_),A=b.x,S=b.y,M=A-this.moveStart.x,E=S-this.moveStart.y;this.moving=!0;var C=this.props.onSwipeMove({x:M,y:E},_);C&&_.cancelable&&_.preventDefault(),this.movePosition={deltaX:M,deltaY:E}}}},{key:"_handleSwipeEnd",value:function(_){this.props.onSwipeEnd(_);var b=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-b?this.props.onSwipeLeft(1,_):this.movePosition.deltaX>b&&this.props.onSwipeRight(1,_),this.movePosition.deltaY<-b?this.props.onSwipeUp(1,_):this.movePosition.deltaY>b&&this.props.onSwipeDown(1,_)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(_){this.swiper=_,this.props.innerRef(_)}},{key:"render",value:function(){var _=this.props;_.tagName;var b=_.className,A=_.style,S=_.children;_.allowMouseEvents,_.onSwipeUp,_.onSwipeDown,_.onSwipeLeft,_.onSwipeRight,_.onSwipeStart,_.onSwipeMove,_.onSwipeEnd,_.innerRef,_.tolerance;var M=l(_,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return n.default.createElement(this.props.tagName,o({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:b,style:A},M),S)}}]),x}(i.Component);v.displayName="ReactSwipe",v.propTypes={tagName:s.default.string,className:s.default.string,style:s.default.object,children:s.default.node,allowMouseEvents:s.default.bool,onSwipeUp:s.default.func,onSwipeDown:s.default.func,onSwipeLeft:s.default.func,onSwipeRight:s.default.func,onSwipeStart:s.default.func,onSwipeMove:s.default.func,onSwipeEnd:s.default.func,innerRef:s.default.func,tolerance:s.default.number.isRequired},v.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=v})}(Ux)),Ux}(function(e){(function(t,i){i(e,ise())})(z3,function(t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=n(i);function n(s){return s&&s.__esModule?s:{default:s}}t.default=r.default})})(sM);var Fp={},Ek={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var r=[],n=0;n<arguments.length;n++){var s=arguments[n];if(!!s){var a=typeof s;if(a==="string"||a==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var o=i.apply(null,s);o&&r.push(o)}}else if(a==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)t.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(Ek);Object.defineProperty(Fp,"__esModule",{value:!0});Fp.default=void 0;var ko=rse(Ek.exports);function rse(e){return e&&e.__esModule?e:{default:e}}function nse(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var sse={ROOT:function(t){return(0,ko.default)(nse({"carousel-root":!0},t||"",!!t))},CAROUSEL:function(t){return(0,ko.default)({carousel:!0,"carousel-slider":t})},WRAPPER:function(t,i){return(0,ko.default)({"thumbs-wrapper":!t,"slider-wrapper":t,"axis-horizontal":i==="horizontal","axis-vertical":i!=="horizontal"})},SLIDER:function(t,i){return(0,ko.default)({thumbs:!t,slider:t,animated:!i})},ITEM:function(t,i,r){return(0,ko.default)({thumb:!t,slide:t,selected:i,previous:r})},ARROW_PREV:function(t){return(0,ko.default)({"control-arrow control-prev":!0,"control-disabled":t})},ARROW_NEXT:function(t){return(0,ko.default)({"control-arrow control-next":!0,"control-disabled":t})},DOT:function(t){return(0,ko.default)({dot:!0,selected:t})}};Fp.default=sse;var Up={},fy={};Object.defineProperty(fy,"__esModule",{value:!0});fy.outerWidth=void 0;var ase=function(t){var i=t.offsetWidth,r=getComputedStyle(t);return i+=parseInt(r.marginLeft)+parseInt(r.marginRight),i};fy.outerWidth=ase;var id={};Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var ose=function(t,i,r){var n=t===0?t:t+i,s=r==="horizontal"?[n,0,0]:[0,n,0],a="translate3d",o="("+s.join(",")+")";return a+o};id.default=ose;var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.default=void 0;var lse=function(){return window};Hp.default=lse;Object.defineProperty(Up,"__esModule",{value:!0});Up.default=void 0;var As=hse(De.exports),Yl=py(Fp),use=fy,D3=py(id),cse=py(sM),xg=py(Hp);function py(e){return e&&e.__esModule?e:{default:e}}function Tk(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Tk=function(){return e},e}function hse(e){if(e&&e.__esModule)return e;if(e===null||Df(e)!=="object"&&typeof e!="function")return{default:e};var t=Tk();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function Df(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Df=function(i){return typeof i}:Df=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Df(e)}function Tb(){return Tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Tb.apply(this,arguments)}function dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P3(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fse(e,t,i){return t&&P3(e.prototype,t),i&&P3(e,i),e}function pse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cb(e,t)}function Cb(e,t){return Cb=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Cb(e,t)}function mse(e){var t=vse();return function(){var r=p0(e),n;if(t){var s=p0(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return gse(this,n)}}function gse(e,t){return t&&(Df(t)==="object"||typeof t=="function")?t:Rr(e)}function Rr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p0(e){return p0=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},p0(e)}function yr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var yse=function(t){return t.hasOwnProperty("key")},aM=function(e){pse(i,e);var t=mse(i);function i(r){var n;return dse(this,i),n=t.call(this,r),yr(Rr(n),"itemsWrapperRef",void 0),yr(Rr(n),"itemsListRef",void 0),yr(Rr(n),"thumbsRef",void 0),yr(Rr(n),"setItemsWrapperRef",function(s){n.itemsWrapperRef=s}),yr(Rr(n),"setItemsListRef",function(s){n.itemsListRef=s}),yr(Rr(n),"setThumbsRef",function(s,a){n.thumbsRef||(n.thumbsRef=[]),n.thumbsRef[a]=s}),yr(Rr(n),"updateSizes",function(){if(!(!n.props.children||!n.itemsWrapperRef||!n.thumbsRef)){var s=As.Children.count(n.props.children),a=n.itemsWrapperRef.clientWidth,o=n.props.thumbWidth?n.props.thumbWidth:(0,use.outerWidth)(n.thumbsRef[0]),l=Math.floor(a/o),u=l<s,d=u?s-l:0;n.setState(function(c,h){return{itemSize:o,visibleItems:l,firstItem:u?n.getFirstItem(h.selectedItem):0,lastPosition:d,showArrows:u}})}}),yr(Rr(n),"handleClickItem",function(s,a,o){if(!yse(o)||o.key==="Enter"){var l=n.props.onSelectItem;typeof l=="function"&&l(s,a)}}),yr(Rr(n),"onSwipeStart",function(){n.setState({swiping:!0})}),yr(Rr(n),"onSwipeEnd",function(){n.setState({swiping:!1})}),yr(Rr(n),"onSwipeMove",function(s){var a=s.x;if(!n.state.itemSize||!n.itemsWrapperRef||!n.state.visibleItems)return!1;var o=0,l=As.Children.count(n.props.children),u=-(n.state.firstItem*100)/n.state.visibleItems,d=Math.max(l-n.state.visibleItems,0),c=-d*100/n.state.visibleItems;u===o&&a>0&&(a=0),u===c&&a<0&&(a=0);var h=n.itemsWrapperRef.clientWidth,f=u+100/(h/a);return n.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(m){n.itemsListRef.style[m]=(0,D3.default)(f,"%",n.props.axis)}),!0}),yr(Rr(n),"slideRight",function(s){n.moveTo(n.state.firstItem-(typeof s=="number"?s:1))}),yr(Rr(n),"slideLeft",function(s){n.moveTo(n.state.firstItem+(typeof s=="number"?s:1))}),yr(Rr(n),"moveTo",function(s){s=s<0?0:s,s=s>=n.state.lastPosition?n.state.lastPosition:s,n.setState({firstItem:s})}),n.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},n}return fse(i,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(n){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==n.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,xg.default)().addEventListener("resize",this.updateSizes),(0,xg.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,xg.default)().removeEventListener("resize",this.updateSizes),(0,xg.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(n){var s=n;return n>=this.state.lastPosition&&(s=this.state.lastPosition),n<this.state.firstItem+this.state.visibleItems&&(s=this.state.firstItem),n<this.state.firstItem&&(s=n),s}},{key:"renderItems",value:function(){var n=this;return this.props.children.map(function(s,a){var o=Yl.default.ITEM(!1,a===n.state.selectedItem),l={key:a,ref:function(d){return n.setThumbsRef(d,a)},className:o,onClick:n.handleClickItem.bind(n,a,n.props.children[a]),onKeyDown:n.handleClickItem.bind(n,a,n.props.children[a]),"aria-label":"".concat(n.props.labels.item," ").concat(a+1),style:{width:n.props.thumbWidth}};return As.default.createElement("li",Tb({},l,{role:"button",tabIndex:0}),s)})}},{key:"render",value:function(){var n=this;if(!this.props.children)return null;var s=As.Children.count(this.props.children)>1,a=this.state.showArrows&&this.state.firstItem>0,o=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l={},u=-this.state.firstItem*(this.state.itemSize||0),d=(0,D3.default)(u,"px",this.props.axis),c=this.props.transitionTime+"ms";return l={WebkitTransform:d,MozTransform:d,MsTransform:d,OTransform:d,transform:d,msTransform:d,WebkitTransitionDuration:c,MozTransitionDuration:c,MsTransitionDuration:c,OTransitionDuration:c,transitionDuration:c,msTransitionDuration:c},As.default.createElement("div",{className:Yl.default.CAROUSEL(!1)},As.default.createElement("div",{className:Yl.default.WRAPPER(!1),ref:this.setItemsWrapperRef},As.default.createElement("button",{type:"button",className:Yl.default.ARROW_PREV(!a),onClick:function(){return n.slideRight()},"aria-label":this.props.labels.leftArrow}),s?As.default.createElement(cse.default,{tagName:"ul",className:Yl.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:l,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):As.default.createElement("ul",{className:Yl.default.SLIDER(!1,this.state.swiping),ref:function(f){return n.setItemsListRef(f)},style:l},this.renderItems()),As.default.createElement("button",{type:"button",className:Yl.default.ARROW_NEXT(!o),onClick:function(){return n.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),i}(As.Component);Up.default=aM;yr(aM,"displayName","Thumbs");yr(aM,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var my={};Object.defineProperty(my,"__esModule",{value:!0});my.default=void 0;var xse=function(){return document};my.default=xse;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.setPosition=Mn.getPosition=Mn.isKeyboardEvent=Mn.defaultStatusFormatter=Mn.noop=void 0;var wse=De.exports,_se=bse(id);function bse(e){return e&&e.__esModule?e:{default:e}}var Sse=function(){};Mn.noop=Sse;var Ase=function(t,i){return"".concat(t," of ").concat(i)};Mn.defaultStatusFormatter=Ase;var Mse=function(t){return t?t.hasOwnProperty("key"):!1};Mn.isKeyboardEvent=Mse;var Ese=function(t,i){if(i.infiniteLoop&&++t,t===0)return 0;var r=wse.Children.count(i.children);if(i.centerMode&&i.axis==="horizontal"){var n=-t*i.centerSlidePercentage,s=r-1;return t&&(t!==s||i.infiniteLoop)?n+=(100-i.centerSlidePercentage)/2:t===s&&(n+=100-i.centerSlidePercentage),n}return-t*100};Mn.getPosition=Ese;var Tse=function(t,i){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(n){r[n]=(0,_se.default)(t,"%",i)}),r};Mn.setPosition=Tse;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.fadeAnimationHandler=fa.slideStopSwipingHandler=fa.slideSwipeAnimationHandler=fa.slideAnimationHandler=void 0;var Ck=De.exports,Cse=Dse(id),pa=Mn;function Dse(e){return e&&e.__esModule?e:{default:e}}function L3(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function su(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(i),!0).forEach(function(r){Pse(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L3(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function Pse(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Lse=function(t,i){var r={},n=i.selectedItem,s=n,a=Ck.Children.count(t.children)-1,o=t.infiniteLoop&&(n<0||n>a);if(o)return s<0?t.centerMode&&t.centerSlidePercentage&&t.axis==="horizontal"?r.itemListStyle=(0,pa.setPosition)(-(a+2)*t.centerSlidePercentage-(100-t.centerSlidePercentage)/2,t.axis):r.itemListStyle=(0,pa.setPosition)(-(a+2)*100,t.axis):s>a&&(r.itemListStyle=(0,pa.setPosition)(0,t.axis)),r;var l=(0,pa.getPosition)(n,t),u=(0,Cse.default)(l,"%",t.axis),d=t.transitionTime+"ms";return r.itemListStyle={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},i.swiping||(r.itemListStyle=su(su({},r.itemListStyle),{},{WebkitTransitionDuration:d,MozTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d})),r};fa.slideAnimationHandler=Lse;var Ose=function(t,i,r,n){var s={},a=i.axis==="horizontal",o=Ck.Children.count(i.children),l=0,u=(0,pa.getPosition)(r.selectedItem,i),d=i.infiniteLoop?(0,pa.getPosition)(o-1,i)-100:(0,pa.getPosition)(o-1,i),c=a?t.x:t.y,h=c;u===l&&c>0&&(h=0),u===d&&c<0&&(h=0);var f=u+100/(r.itemSize/h),m=Math.abs(c)>i.swipeScrollTolerance;return i.infiniteLoop&&m&&(r.selectedItem===0&&f>-100?f-=o*100:r.selectedItem===o-1&&f<-o*100&&(f+=o*100)),(!i.preventMovementUntilSwipeScrollTolerance||m||r.swipeMovementStarted)&&(r.swipeMovementStarted||n({swipeMovementStarted:!0}),s.itemListStyle=(0,pa.setPosition)(f,i.axis)),m&&!r.cancelClick&&n({cancelClick:!0}),s};fa.slideSwipeAnimationHandler=Ose;var Rse=function(t,i){var r=(0,pa.getPosition)(i.selectedItem,t),n=(0,pa.setPosition)(r,t.axis);return{itemListStyle:n}};fa.slideStopSwipingHandler=Rse;var Ise=function(t,i){var r=t.transitionTime+"ms",n="ease-in-out",s={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:n,msTransitionTimingFunction:n,MozTransitionTimingFunction:n,WebkitTransitionTimingFunction:n,OTransitionTimingFunction:n};return i.swiping||(s=su(su({},s),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:s,selectedStyle:su(su({},s),{},{opacity:1,position:"relative"}),prevStyle:su({},s)}};fa.fadeAnimationHandler=Ise;Object.defineProperty(dy,"__esModule",{value:!0});dy.default=void 0;var Vt=kse(De.exports),zse=Vp(sM),Ya=Vp(Fp),Bse=Vp(Up),wg=Vp(my),_g=Vp(Hp),$d=Mn,m0=fa;function Vp(e){return e&&e.__esModule?e:{default:e}}function Dk(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Dk=function(){return e},e}function kse(e){if(e&&e.__esModule)return e;if(e===null||Pf(e)!=="object"&&typeof e!="function")return{default:e};var t=Dk();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function Pf(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pf=function(i){return typeof i}:Pf=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Pf(e)}function Db(){return Db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Db.apply(this,arguments)}function O3(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Ms(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(i),!0).forEach(function(r){bt(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O3(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function Nse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R3(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fse(e,t,i){return t&&R3(e.prototype,t),i&&R3(e,i),e}function Use(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pb(e,t)}function Pb(e,t){return Pb=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Pb(e,t)}function Hse(e){var t=jse();return function(){var r=g0(e),n;if(t){var s=g0(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Vse(this,n)}}function Vse(e,t){return t&&(Pf(t)==="object"||typeof t=="function")?t:St(e)}function St(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g0(e){return g0=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},g0(e)}function bt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var oM=function(e){Use(i,e);var t=Hse(i);function i(r){var n;Nse(this,i),n=t.call(this,r),bt(St(n),"thumbsRef",void 0),bt(St(n),"carouselWrapperRef",void 0),bt(St(n),"listRef",void 0),bt(St(n),"itemsRef",void 0),bt(St(n),"timer",void 0),bt(St(n),"animationHandler",void 0),bt(St(n),"setThumbsRef",function(a){n.thumbsRef=a}),bt(St(n),"setCarouselWrapperRef",function(a){n.carouselWrapperRef=a}),bt(St(n),"setListRef",function(a){n.listRef=a}),bt(St(n),"setItemsRef",function(a,o){n.itemsRef||(n.itemsRef=[]),n.itemsRef[o]=a}),bt(St(n),"autoPlay",function(){Vt.Children.count(n.props.children)<=1||(n.clearAutoPlay(),n.props.autoPlay&&(n.timer=setTimeout(function(){n.increment()},n.props.interval)))}),bt(St(n),"clearAutoPlay",function(){n.timer&&clearTimeout(n.timer)}),bt(St(n),"resetAutoPlay",function(){n.clearAutoPlay(),n.autoPlay()}),bt(St(n),"stopOnHover",function(){n.setState({isMouseEntered:!0},n.clearAutoPlay)}),bt(St(n),"startOnLeave",function(){n.setState({isMouseEntered:!1},n.autoPlay)}),bt(St(n),"isFocusWithinTheCarousel",function(){return n.carouselWrapperRef?!!((0,wg.default)().activeElement===n.carouselWrapperRef||n.carouselWrapperRef.contains((0,wg.default)().activeElement)):!1}),bt(St(n),"navigateWithKeyboard",function(a){if(!!n.isFocusWithinTheCarousel()){var o=n.props.axis,l=o==="horizontal",u={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},d=l?u.ArrowRight:u.ArrowDown,c=l?u.ArrowLeft:u.ArrowUp;d===a.keyCode?n.increment():c===a.keyCode&&n.decrement()}}),bt(St(n),"updateSizes",function(){if(!(!n.state.initialized||!n.itemsRef||n.itemsRef.length===0)){var a=n.props.axis==="horizontal",o=n.itemsRef[0];if(!!o){var l=a?o.clientWidth:o.clientHeight;n.setState({itemSize:l}),n.thumbsRef&&n.thumbsRef.updateSizes()}}}),bt(St(n),"setMountState",function(){n.setState({hasMount:!0}),n.updateSizes()}),bt(St(n),"handleClickItem",function(a,o){if(Vt.Children.count(n.props.children)!==0){if(n.state.cancelClick){n.setState({cancelClick:!1});return}n.props.onClickItem(a,o),a!==n.state.selectedItem&&n.setState({selectedItem:a})}}),bt(St(n),"handleOnChange",function(a,o){Vt.Children.count(n.props.children)<=1||n.props.onChange(a,o)}),bt(St(n),"handleClickThumb",function(a,o){n.props.onClickThumb(a,o),n.moveTo(a)}),bt(St(n),"onSwipeStart",function(a){n.setState({swiping:!0}),n.props.onSwipeStart(a)}),bt(St(n),"onSwipeEnd",function(a){n.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),n.props.onSwipeEnd(a),n.clearAutoPlay(),n.state.autoPlay&&n.autoPlay()}),bt(St(n),"onSwipeMove",function(a,o){n.props.onSwipeMove(o);var l=n.props.swipeAnimationHandler(a,n.props,n.state,n.setState.bind(St(n)));return n.setState(Ms({},l)),!!Object.keys(l).length}),bt(St(n),"decrement",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;n.moveTo(n.state.selectedItem-(typeof a=="number"?a:1))}),bt(St(n),"increment",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;n.moveTo(n.state.selectedItem+(typeof a=="number"?a:1))}),bt(St(n),"moveTo",function(a){if(typeof a=="number"){var o=Vt.Children.count(n.props.children)-1;a<0&&(a=n.props.infiniteLoop?o:0),a>o&&(a=n.props.infiniteLoop?0:o),n.selectItem({selectedItem:a}),n.state.autoPlay&&n.state.isMouseEntered===!1&&n.resetAutoPlay()}}),bt(St(n),"onClickNext",function(){n.increment(1)}),bt(St(n),"onClickPrev",function(){n.decrement(1)}),bt(St(n),"onSwipeForward",function(){n.increment(1),n.props.emulateTouch&&n.setState({cancelClick:!0})}),bt(St(n),"onSwipeBackwards",function(){n.decrement(1),n.props.emulateTouch&&n.setState({cancelClick:!0})}),bt(St(n),"changeItem",function(a){return function(o){(!(0,$d.isKeyboardEvent)(o)||o.key==="Enter")&&n.moveTo(a)}}),bt(St(n),"selectItem",function(a){n.setState(Ms({previousItem:n.state.selectedItem},a),function(){n.setState(n.animationHandler(n.props,n.state))}),n.handleOnChange(a.selectedItem,Vt.Children.toArray(n.props.children)[a.selectedItem])}),bt(St(n),"getInitialImage",function(){var a=n.props.selectedItem,o=n.itemsRef&&n.itemsRef[a],l=o&&o.getElementsByTagName("img")||[];return l[0]}),bt(St(n),"getVariableItemHeight",function(a){var o=n.itemsRef&&n.itemsRef[a];if(n.state.hasMount&&o&&o.children.length){var l=o.children[0].getElementsByTagName("img")||[];if(l.length>0){var u=l[0];if(!u.complete){var d=function f(){n.forceUpdate(),u.removeEventListener("load",f)};u.addEventListener("load",d)}}var c=l[0]||o.children[0],h=c.clientHeight;return h>0?h:null}return null});var s={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return n.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&m0.fadeAnimationHandler||m0.slideAnimationHandler,n.state=Ms(Ms({},s),n.animationHandler(r,s)),n}return Fse(i,[{key:"componentDidMount",value:function(){!this.props.children||this.setupCarousel()}},{key:"componentDidUpdate",value:function(n,s){!n.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!n.autoFocus&&this.props.autoFocus&&this.forceFocus(),s.swiping&&!this.state.swiping&&this.setState(Ms({},this.props.stopSwipingHandler(this.props,this.state))),(n.selectedItem!==this.props.selectedItem||n.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),n.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var n=this;this.bindEvents(),this.state.autoPlay&&Vt.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var s=n.getInitialImage();s&&!s.complete?s.addEventListener("load",n.setMountState):n.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var n=this.carouselWrapperRef;this.props.stopOnHover&&n&&(n.addEventListener("mouseenter",this.stopOnHover),n.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var n=this.carouselWrapperRef;this.props.stopOnHover&&n&&(n.removeEventListener("mouseenter",this.stopOnHover),n.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,_g.default)().addEventListener("resize",this.updateSizes),(0,_g.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,wg.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,_g.default)().removeEventListener("resize",this.updateSizes),(0,_g.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var n=this.getInitialImage();n&&n.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,wg.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var n;(n=this.carouselWrapperRef)===null||n===void 0||n.focus()}},{key:"renderItems",value:function(n){var s=this;return this.props.children?Vt.Children.map(this.props.children,function(a,o){var l=o===s.state.selectedItem,u=o===s.state.previousItem,d=l&&s.state.selectedStyle||u&&s.state.prevStyle||s.state.slideStyle||{};s.props.centerMode&&s.props.axis==="horizontal"&&(d=Ms(Ms({},d),{},{minWidth:s.props.centerSlidePercentage+"%"})),s.state.swiping&&s.state.swipeMovementStarted&&(d=Ms(Ms({},d),{},{pointerEvents:"none"}));var c={ref:function(f){return s.setItemsRef(f,o)},key:"itemKey"+o+(n?"clone":""),className:Ya.default.ITEM(!0,o===s.state.selectedItem,o===s.state.previousItem),onClick:s.handleClickItem.bind(s,o,a),style:d};return Vt.default.createElement("li",c,s.props.renderItem(a,{isSelected:o===s.state.selectedItem,isPrevious:o===s.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var n=this,s=this.props,a=s.showIndicators,o=s.labels,l=s.renderIndicator,u=s.children;return a?Vt.default.createElement("ul",{className:"control-dots"},Vt.Children.map(u,function(d,c){return l&&l(n.changeItem(c),c===n.state.selectedItem,c,o.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?Vt.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,Vt.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||Vt.Children.count(this.props.children)===0?null:Vt.default.createElement(Bse.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var n=this;if(!this.props.children||Vt.Children.count(this.props.children)===0)return null;var s=this.props.swipeable&&Vt.Children.count(this.props.children)>1,a=this.props.axis==="horizontal",o=this.props.showArrows&&Vt.Children.count(this.props.children)>1,l=o&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,u=o&&(this.state.selectedItem<Vt.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,d=this.renderItems(!0),c=d.shift(),h=d.pop(),f={className:Ya.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},m={};if(a){if(f.onSwipeLeft=this.onSwipeForward,f.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var p=this.getVariableItemHeight(this.state.selectedItem);m.height=p||"auto"}}else f.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,f.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,f.style=Ms(Ms({},f.style),{},{height:this.state.itemSize}),m.height=this.state.itemSize;return Vt.default.createElement("div",{"aria-label":this.props.ariaLabel,className:Ya.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},Vt.default.createElement("div",{className:Ya.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,l,this.props.labels.leftArrow),Vt.default.createElement("div",{className:Ya.default.WRAPPER(!0,this.props.axis),style:m},s?Vt.default.createElement(zse.default,Db({tagName:"ul",innerRef:this.setListRef},f,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&h,this.renderItems(),this.props.infiniteLoop&&c):Vt.default.createElement("ul",{className:Ya.default.SLIDER(!0,this.state.swiping),ref:function(v){return n.setListRef(v)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&h,this.renderItems(),this.props.infiniteLoop&&c)),this.props.renderArrowNext(this.onClickNext,u,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),i}(Vt.default.Component);dy.default=oM;bt(oM,"displayName","Carousel");bt(oM,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:$d.noop,onClickThumb:$d.noop,onChange:$d.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(t,i,r){return Vt.default.createElement("button",{type:"button","aria-label":r,className:Ya.default.ARROW_PREV(!i),onClick:t})},renderArrowNext:function(t,i,r){return Vt.default.createElement("button",{type:"button","aria-label":r,className:Ya.default.ARROW_NEXT(!i),onClick:t})},renderIndicator:function(t,i,r,n){return Vt.default.createElement("li",{className:Ya.default.DOT(i),onClick:t,onKeyDown:t,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(n," ").concat(r+1)})},renderItem:function(t){return t},renderThumbs:function(t){var i=Vt.Children.map(t,function(r){var n=r;if(r.type!=="img"&&(n=Vt.Children.toArray(r.props.children).find(function(s){return s.type==="img"})),!!n)return n});return i.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):i},statusFormatter:$d.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:m0.slideSwipeAnimationHandler,stopSwipingHandler:m0.slideStopSwipingHandler});var Gse={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return i.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return r.default}});var t=n(dy),i=Gse,r=n(Up);function n(s){return s&&s.__esModule?s:{default:s}}})(Mk);const Pk="/assets/step0.882b60d8.png",Lk="/assets/step1.9e6a5c64.png",Ok="/assets/step2.839e90af.png",Rk="/assets/step3.3814356f.png";gt.registerPlugin(Et);const bg=e=>{const{title:t,subtitle:i,image:r}=e;return Je("div",{children:[Q("div",{className:"pr-8 pl-8 sm:pl-28 sm:pr-28 md:pl-48 md:pr-48",children:Q("img",{className:"ml-auto mr-auto mt-12 h-auto w-[35vh]",src:r})}),Je("div",{className:"sm mt-20 w-10/12 pl-8 text-start sm:pl-12 sm:pr-12",children:[Q("h4",{className:"text-xs font-bold text-emerald-900 md:text-base",children:t}),Q("p",{className:"text-[0.6rem] font-medium text-[#DA6844] md:text-[0.8rem]",children:i})]})]})},Wse=()=>Je(Mk.Carousel,{showArrows:!1,showIndicators:!1,showStatus:!1,showThumbs:!1,swipeable:!0,autoPlay:!0,infiniteLoop:!0,interval:5e3,transitionTime:700,renderItem:(e,t)=>t!=null&&t.isSelected?Q("div",{className:"opacity-100 transition-opacity duration-200 ease-in",children:e}):Q("div",{className:"opacity-50 transition-opacity duration-200 ease-in",children:e}),children:[Q(bg,{title:"0. we get you to the finish line",subtitle:"you have a vision for your product and we are here to make it a reality.",image:Pk}),Q(bg,{title:"1. understanding the problem",subtitle:"we work together to understand the identified problem and confirm the intended users feel the pain and need for a solution.",image:Lk}),Q(bg,{title:"2. make the next market-ready version of the solution",subtitle:"we work together to understand the identified problem and confirm the intended users feel the pain and need for a solution.",image:Ok}),Q(bg,{title:"3. review and return to step one",subtitle:"we review all feedback and confirm we are making progress toward solving the problem.",image:Rk})]}),Xse=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=De.exports.useRef(null),r=De.exports.useRef(null),n=De.exports.useRef(null),s=De.exports.useRef(null),a=De.exports.useRef(null),o=De.exports.useRef(null),l=De.exports.useRef(null),u=De.exports.useRef(null),d=De.exports.useRef(null),c=De.exports.useRef(null),h=De.exports.useRef(null),f=De.exports.useRef(null),m=De.exports.useRef(null),p=De.exports.useRef(null);return De.exports.useLayoutEffect(()=>{const g=te=>({trigger:te,scrub:!0,start:"top bottom",end:"top top"}),v=r.current,y=n.current,x=s.current,w=a.current,_=o.current,b=l.current,A=u.current,S=d.current,M=c.current,E=h.current,C=f.current,L=m.current,N=e.current,R=t.current,V=i.current;let F=Et.create({trigger:v,start:"top top",end:"+=600%",pinSpacing:!1,pin:!0}),H=gt.to(y,{scrollTrigger:g(N),yPercent:-200}),P=gt.to(x,{scrollTrigger:g(N),yPercent:-200}),z=gt.to(w,{scrollTrigger:g(N),y:0,yPercent:0,opacity:1}),D=gt.to(_,{scrollTrigger:g(N),y:0,yPercent:0,opacity:1}),j=gt.to(w,{scrollTrigger:g(R),yPercent:-200}),B=gt.to(_,{scrollTrigger:g(R),yPercent:-200}),W=gt.to(b,{scrollTrigger:g(R),y:0,yPercent:0,opacity:1}),X=gt.to(A,{scrollTrigger:g(R),y:0,yPercent:0,opacity:1}),$=gt.to(b,{scrollTrigger:g(V),yPercent:-200}),U=gt.to(A,{scrollTrigger:g(V),yPercent:-200}),ne=gt.to(S,{scrollTrigger:g(V),y:0,yPercent:0,opacity:1}),ie=gt.to(M,{scrollTrigger:g(V),y:0,yPercent:0,opacity:1}),re=gt.to(E,{scrollTrigger:g(N),opacity:0}),K=gt.to(C,{scrollTrigger:g(R),opacity:0}),fe=gt.to(L,{scrollTrigger:g(V),opacity:0});return()=>{F.kill(),H.kill(),P.kill(),z.kill(),D.kill(),j.kill(),B.kill(),W.kill(),X.kill(),$.kill(),U.kill(),ne.kill(),ie.kill(),re.kill(),K.kill(),fe.kill()}},[]),Je("div",{children:[Je("div",{className:"z-10 flex h-screen w-screen flex-row",ref:r,children:[Je("div",{className:"absolute z-[14] flex h-full w-full",children:[Je("div",{className:"flex flex-1 flex-col items-start justify-center pl-12 pr-12",children:[Q("div",{className:"overflow-hidden text-2xl font-bold text-emerald-900 2xl:text-4xl",children:Q("span",{className:"block",ref:n,children:"0. we get you to the finish line"})}),Q("div",{className:"overflow-hidden text-xl font-medium text-[#DA6844] 2xl:text-2xl",children:Q("span",{className:"block",ref:s,children:"you have a vision for your product and we are here to make it a reality"})})]}),Q("img",{src:Pk,className:"h-auto w-1/2 object-contain pl-12 pr-12",ref:h})]}),Je("div",{className:"absolute z-[13] flex h-full w-full",children:[Je("div",{className:"flex flex-1 flex-col items-start justify-center pl-12 pr-12",children:[Q("div",{className:"overflow-hidden text-2xl font-bold text-white 2xl:text-4xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:a,children:"1. understanding the problem"})}),Q("div",{className:"overflow-hidden text-xl font-medium text-[#DA6844] 2xl:text-2xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:o,children:"we work together to understand the identified problem and confirm the intended users feel the pain and need for a solution."})})]}),Q("img",{src:Lk,className:"h-auto w-1/2 object-contain pl-12 pr-12",ref:f})]}),Je("div",{className:"absolute z-[12] flex h-full w-full",children:[Je("div",{className:"flex flex-1 flex-col items-start justify-center pl-12 pr-12",children:[Q("div",{className:"overflow-hidden text-2xl font-bold text-[#27292F] 2xl:text-4xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:l,children:"2. make the next market-ready version of the solution"})}),Q("div",{className:"overflow-hidden text-xl font-medium text-[#DA6844] 2xl:text-2xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:u,children:"we work together to understand the identified problem and confirm the intended users feel the pain and need for a solution."})})]}),Q("img",{src:Ok,className:"h-auto w-1/2 object-contain pl-12 pr-12",ref:m})]}),Je("div",{className:"absolute z-[11] flex h-full w-full",children:[Je("div",{className:"flex flex-1 flex-col items-start justify-center pl-12 pr-12",children:[Q("div",{className:"overflow-hidden text-2xl font-bold text-[#27292F] 2xl:text-4xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:d,children:"3. review and return to step one"})}),Q("div",{className:"overflow-hidden text-xl font-medium text-[#DA6844] 2xl:text-2xl",children:Q("span",{className:"block translate-y-[100%] opacity-0",ref:c,children:"we review all feedback and confirm we are making progress toward solving the problem."})})]}),Q("img",{src:Rk,className:"h-auto w-1/2 object-contain pl-12 pr-12",ref:p})]})]}),Je("div",{children:[Q("section",{className:"z-0 h-[200vh] bg-[#27292F]",ref:e}),Q("section",{className:"z-0 h-[200vh] bg-[#FAF3BE]",ref:t}),Q("section",{className:"z-0 h-[200vh] bg-[#D9FFFC]",ref:i})]})]})},Yse=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=zl("(min-width: 1024px)");return De.exports.useLayoutEffect(()=>{if(i){const n=e.current,s=t.current;let a=gt.from(n,{scrollTrigger:{trigger:n,scrub:!0,pin:!0,start:"top top",end:`+=${200}%`},opacity:1}),o=gt.timeline({scrollTrigger:{trigger:n,start:"top top",end:`${200}% top`,scrub:!0,toggleActions:"play reverse play reverse"}});return o.to(s,{opacity:1,duration:.5}).to(s,{opacity:0,duration:.25}),()=>{a.kill(),o.kill()}}},[]),Q("div",{className:"mt-40 lg:mt-0",children:i?Q("div",{className:"flex h-auto w-screen flex-row lg:h-screen",ref:e,children:Q("div",{className:"absolute flex h-full w-full items-center justify-center",children:Je("div",{ref:t,className:"text-center opacity-100 lg:opacity-0",children:[Q("h1",{className:"bg-gradient-to-r from-[#009FFF] to-[#EC2F4B] bg-clip-text text-3xl font-semibold text-transparent md:text-5xl md:leading-[1.3] 2xl:text-[5rem]",children:"the right solution"}),Q("h2",{className:"text-xl font-semibold text-stone-700 md:text-3xl 2xl:text-[2.2rem]",children:"(in 3 easy steps)"}),Q("p",{className:"mt-5 text-[9px] font-medium uppercase text-stone-500 md:text-xs 2xl:text-base",children:"meet your needs quickly and without waste"})]})})}):Q("div",{className:"mb-5 flex w-full flex-col justify-center pl-10 pr-10 text-center lg:h-screen",ref:e,children:Je("div",{ref:t,className:"opacity-100 lg:opacity-0",children:[Q("h1",{className:"bg-gradient-to-r from-[#009FFF] to-[#EC2F4B] bg-clip-text text-3xl font-semibold text-transparent md:text-5xl md:leading-[1.3]",children:"the right solution"}),Q("h2",{className:"text-xl font-semibold text-stone-700 md:text-3xl",children:"(in 3 easy steps)"}),Q("p",{className:"mt-5 text-[9px] font-medium uppercase text-stone-500 md:text-xs",children:"meet your needs quickly and without waste"})]})})})},qse=()=>{const e=zl("(min-width: 1024px)");return Q("div",{children:e?Q(Xse,{}):Q(Wse,{})})};gt.registerPlugin(Et);const I3=e=>{const{title:t,titleEmoji:i,titleOrientation:r}=e;return r==="right"?Je(ip,{children:[Q("span",{className:"text-4xl",children:i}),Q("span",{className:"text-zinc-800 2xl:text-3xl",children:t})]}):Je(ip,{children:[Q("span",{className:"text-zinc-800 2xl:text-3xl",children:t}),Q("span",{className:"text-4xl",children:i})]})},Sg=e=>{const{title:t,titleEmoji:i,titlePosition:r,titleOrientation:n,borderStyles:s,children:a}=e,o=De.exports.useRef(null),l=CU(o);return De.exports.useEffect(()=>{const u=o.current;l?gt.to(u,{duration:.5,scale:1.02,ease:"power2.out"}):gt.to(u,{duration:.5,scale:1,ease:"power2.out"})},[l]),Q("div",{className:`h-fit w-4/6 rounded-[2.7rem] bg-gradient-to-br p-[3px] lg:h-full lg:w-full ${s}`,ref:o,children:Q("div",{className:"flex h-full flex-col justify-start rounded-[2.6rem] bg-white pb-6 pl-8 pr-5 pt-6 md:pb-8 md:pl-10 md:pr-7 md:pt-8 lg:justify-between",children:r==="bottom"?Je(ip,{children:[Q("p",{className:"font-normal text-stone-700",children:a}),Q("div",{className:"mt-4 flex flex-row justify-between text-xl font-bold",children:Q(I3,{title:t,titleEmoji:i,titleOrientation:n})})]}):Je(ip,{children:[Q("div",{className:"mb-4 flex flex-row justify-between text-xl font-bold",children:Q(I3,{title:t,titleEmoji:i,titleOrientation:n})}),Q("p",{className:"text-sm font-normal text-stone-700 2xl:text-lg",children:a})]})})})},Qse=()=>{const e=De.exports.useRef(null),t=De.exports.useRef(null),i=De.exports.useRef(null),r=De.exports.useRef(null),n=De.exports.useRef(null),s=zl("(min-width: 1024px)");return De.exports.useLayoutEffect(()=>{if(s){const a=e.current,o=t.current,l=i.current,u=r.current,d=n.current;let c=gt.from(o,{...ym,scrollTrigger:{immediateRender:!1,trigger:a,start:"top center"}}),h=gt.from(l,{...ym,scrollTrigger:{immediateRender:!1,trigger:a,start:"top center"},delay:.2}),f=gt.from(u,{...ym,scrollTrigger:{immediateRender:!1,trigger:a,start:"top center"},delay:.3}),m=gt.from(d,{...ym,scrollTrigger:{immediateRender:!1,trigger:a,start:"top center"},delay:.4});return()=>{c.kill(),h.kill(),f.kill(),m.kill()}}},[]),Je("div",{className:"mx-auto w-fit md:w-4/5 md:max-w-lg lg:max-w-none xl:max-w-[1000px]",ref:e,children:[Je("div",{className:"lg:flex",children:[Q("div",{className:"mt-20 flex justify-center lg:m-4 lg:flex-1",ref:t,children:Q(Sg,{title:"People",titleEmoji:"\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}",borderStyles:"from-[#CCABD8] via-[#9AAEE3] to-[#FA897B]",titlePosition:s?"bottom":"top",children:"Our people are our primary focus, not profit. We have a worldwide community of over 400 creative technologists. We believe in inclusivity and accessibility and want to enrich the lives of everyone in our community."})}),Q("div",{className:"mt-20 flex justify-center lg:m-4 lg:flex-1",ref:i,children:Q(Sg,{title:"Transparency",titleEmoji:"\u{1F91D}",borderStyles:"from-[#86E3CE] via-[#E39AD3] to-[#FFDD94]",titlePosition:s?"bottom":"top",titleOrientation:s?"right":"left",children:"Open-Source and Open-Kimono: we\u2019re building dwyl for all to see! The vast majority of dwyl projects are written open-source. This allows code modules to improve and adapt over time allowing for a more robust and up-to-date application."})})]}),Je("div",{className:"lg:flex",children:[Q("div",{className:"mt-20 flex justify-center lg:m-4 lg:flex-1",ref:r,children:Q(Sg,{title:"Green",titleEmoji:"\u{1F30D}",borderStyles:"from-[#D05C5C] via-[#9AE3C0] to-[#BFC857]",children:"We recycle and are carbon neutral, but it\u2019s not just the planet\u2019s environment we want to improve. We love projects that have a positive effect on the world. Take a look at the kinds of project we love."})}),Q("div",{className:"mt-20 flex justify-center lg:m-4 lg:flex-1",ref:n,children:Q(Sg,{title:"Organic Growth",titleEmoji:"\u{1F333}",borderStyles:"from-[#D8D3AB] via-[#E39E9A] to-[#FA7B7B]",titleOrientation:s?"right":"left",children:"We recycle and are carbon neutral, but it\u2019s not just the planet\u2019s environment we want to improve. We love projects that have a positive effect on the world. Take a look at the kinds of project we love."})})]})]})},Zse=document.getElementById("root"),Kse=XL(Zse);function Jse(){const[e,t]=De.exports.useState(!1);return De.exports.useEffect(()=>{let i=["font-weight: bold","font-size: 50px","color: red","text-shadow: 3px 3px 0 rgb(217,31,38)","6px 6px 0 rgb(226,91,14)","9px 9px 0 rgb(245,221,8)","12px 12px 0 rgb(5,148,68)","15px 15px 0 rgb(25,18,168)"].join(";");console.log("%c Hey there!",i);let r=["font-size: 12px","font-family: monospace","background: white","display: inline-block","color: black","padding: 8px 19px","border: 1px dashed;"].join(";");console.log(`%c\u{1F60A} Great seeing you here!
\u{1F389} We always fancy those that are curious by nature.
\u{1F468}\u200D\u{1F4BB} Interested in working with us? Check out our contact details at the bottom of the page.`,r)},[]),Je("div",{className:"overflow-x-hidden bg-white font-montserrat",children:[Q(Yne,{done:e}),Q(Wne,{onSceneLoad:()=>{setTimeout(()=>t(!0),1e3)}}),Q("div",{className:"mt-40",children:Q(zU,{})}),Q("div",{className:"mt-40",children:Q(Qse,{})}),Q(qne,{}),Q(Yse,{}),Q(qse,{}),Q("div",{className:"mt-40 lg:mt-0",children:Q(Xne,{})}),Q("div",{className:"mr-8 ml-8 mt-40 flex flex-col items-center",children:Q(tse,{})}),Q("div",{className:"mt-40",children:Q(Zne,{})}),Q("div",{className:"mt-40 flex pr-10 pl-10",children:Q("span",{className:"w-full bg-stone-200 p-[1px]"})}),Q("div",{className:"mt-20",children:Q(UU,{})})]})}Kse.render(Q(Jse,{}))});export default $se();
